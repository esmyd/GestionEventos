function Sh(r,t){for(var o=0;o<t.length;o++){const n=t[o];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=o(i);fetch(i.href,s)}})();function wh(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Np={exports:{}},tl={},Dp={exports:{}},ar={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _s=Symbol.for("react.element"),kh=Symbol.for("react.portal"),_h=Symbol.for("react.fragment"),zh=Symbol.for("react.strict_mode"),Eh=Symbol.for("react.profiler"),Rh=Symbol.for("react.provider"),Ah=Symbol.for("react.context"),Ih=Symbol.for("react.forward_ref"),Wh=Symbol.for("react.suspense"),Th=Symbol.for("react.memo"),Mh=Symbol.for("react.lazy"),Uu=Symbol.iterator;function Ph(r){return r===null||typeof r!="object"?null:(r=Uu&&r[Uu]||r["@@iterator"],typeof r=="function"?r:null)}var Bp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Op=Object.assign,Lp={};function ji(r,t,o){this.props=r,this.context=t,this.refs=Lp,this.updater=o||Bp}ji.prototype.isReactComponent={};ji.prototype.setState=function(r,t){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,t,"setState")};ji.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function Fp(){}Fp.prototype=ji.prototype;function hc(r,t,o){this.props=r,this.context=t,this.refs=Lp,this.updater=o||Bp}var xc=hc.prototype=new Fp;xc.constructor=hc;Op(xc,ji.prototype);xc.isPureReactComponent=!0;var Gu=Array.isArray,$p=Object.prototype.hasOwnProperty,yc={current:null},Up={key:!0,ref:!0,__self:!0,__source:!0};function Gp(r,t,o){var n,i={},s=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)$p.call(t,n)&&!Up.hasOwnProperty(n)&&(i[n]=t[n]);var d=arguments.length-2;if(d===1)i.children=o;else if(1<d){for(var u=Array(d),l=0;l<d;l++)u[l]=arguments[l+2];i.children=u}if(r&&r.defaultProps)for(n in d=r.defaultProps,d)i[n]===void 0&&(i[n]=d[n]);return{$$typeof:_s,type:r,key:s,ref:a,props:i,_owner:yc.current}}function Nh(r,t){return{$$typeof:_s,type:r.type,key:t,ref:r.ref,props:r.props,_owner:r._owner}}function bc(r){return typeof r=="object"&&r!==null&&r.$$typeof===_s}function Dh(r){var t={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(o){return t[o]})}var Hu=/\/+/g;function Ml(r,t){return typeof r=="object"&&r!==null&&r.key!=null?Dh(""+r.key):t.toString(36)}function ca(r,t,o,n,i){var s=typeof r;(s==="undefined"||s==="boolean")&&(r=null);var a=!1;if(r===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(r.$$typeof){case _s:case kh:a=!0}}if(a)return a=r,i=i(a),r=n===""?"."+Ml(a,0):n,Gu(i)?(o="",r!=null&&(o=r.replace(Hu,"$&/")+"/"),ca(i,t,o,"",function(l){return l})):i!=null&&(bc(i)&&(i=Nh(i,o+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Hu,"$&/")+"/")+r)),t.push(i)),1;if(a=0,n=n===""?".":n+":",Gu(r))for(var d=0;d<r.length;d++){s=r[d];var u=n+Ml(s,d);a+=ca(s,t,o,u,i)}else if(u=Ph(r),typeof u=="function")for(r=u.call(r),d=0;!(s=r.next()).done;)s=s.value,u=n+Ml(s,d++),a+=ca(s,t,o,u,i);else if(s==="object")throw t=String(r),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function $s(r,t,o){if(r==null)return r;var n=[],i=0;return ca(r,n,"","",function(s){return t.call(o,s,i++)}),n}function Bh(r){if(r._status===-1){var t=r._result;t=t(),t.then(function(o){(r._status===0||r._status===-1)&&(r._status=1,r._result=o)},function(o){(r._status===0||r._status===-1)&&(r._status=2,r._result=o)}),r._status===-1&&(r._status=0,r._result=t)}if(r._status===1)return r._result.default;throw r._result}var At={current:null},ua={transition:null},Oh={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:ua,ReactCurrentOwner:yc};function Hp(){throw Error("act(...) is not supported in production builds of React.")}ar.Children={map:$s,forEach:function(r,t,o){$s(r,function(){t.apply(this,arguments)},o)},count:function(r){var t=0;return $s(r,function(){t++}),t},toArray:function(r){return $s(r,function(t){return t})||[]},only:function(r){if(!bc(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};ar.Component=ji;ar.Fragment=_h;ar.Profiler=Eh;ar.PureComponent=hc;ar.StrictMode=zh;ar.Suspense=Wh;ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oh;ar.act=Hp;ar.cloneElement=function(r,t,o){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=Op({},r.props),i=r.key,s=r.ref,a=r._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=yc.current),t.key!==void 0&&(i=""+t.key),r.type&&r.type.defaultProps)var d=r.type.defaultProps;for(u in t)$p.call(t,u)&&!Up.hasOwnProperty(u)&&(n[u]=t[u]===void 0&&d!==void 0?d[u]:t[u])}var u=arguments.length-2;if(u===1)n.children=o;else if(1<u){d=Array(u);for(var l=0;l<u;l++)d[l]=arguments[l+2];n.children=d}return{$$typeof:_s,type:r.type,key:i,ref:s,props:n,_owner:a}};ar.createContext=function(r){return r={$$typeof:Ah,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:Rh,_context:r},r.Consumer=r};ar.createElement=Gp;ar.createFactory=function(r){var t=Gp.bind(null,r);return t.type=r,t};ar.createRef=function(){return{current:null}};ar.forwardRef=function(r){return{$$typeof:Ih,render:r}};ar.isValidElement=bc;ar.lazy=function(r){return{$$typeof:Mh,_payload:{_status:-1,_result:r},_init:Bh}};ar.memo=function(r,t){return{$$typeof:Th,type:r,compare:t===void 0?null:t}};ar.startTransition=function(r){var t=ua.transition;ua.transition={};try{r()}finally{ua.transition=t}};ar.unstable_act=Hp;ar.useCallback=function(r,t){return At.current.useCallback(r,t)};ar.useContext=function(r){return At.current.useContext(r)};ar.useDebugValue=function(){};ar.useDeferredValue=function(r){return At.current.useDeferredValue(r)};ar.useEffect=function(r,t){return At.current.useEffect(r,t)};ar.useId=function(){return At.current.useId()};ar.useImperativeHandle=function(r,t,o){return At.current.useImperativeHandle(r,t,o)};ar.useInsertionEffect=function(r,t){return At.current.useInsertionEffect(r,t)};ar.useLayoutEffect=function(r,t){return At.current.useLayoutEffect(r,t)};ar.useMemo=function(r,t){return At.current.useMemo(r,t)};ar.useReducer=function(r,t,o){return At.current.useReducer(r,t,o)};ar.useRef=function(r){return At.current.useRef(r)};ar.useState=function(r){return At.current.useState(r)};ar.useSyncExternalStore=function(r,t,o){return At.current.useSyncExternalStore(r,t,o)};ar.useTransition=function(){return At.current.useTransition()};ar.version="18.3.1";Dp.exports=ar;var c=Dp.exports;const ka=wh(c),Lh=Sh({__proto__:null,default:ka},[c]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fh=c,$h=Symbol.for("react.element"),Uh=Symbol.for("react.fragment"),Gh=Object.prototype.hasOwnProperty,Hh=Fh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vh={key:!0,ref:!0,__self:!0,__source:!0};function Vp(r,t,o){var n,i={},s=null,a=null;o!==void 0&&(s=""+o),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)Gh.call(t,n)&&!Vh.hasOwnProperty(n)&&(i[n]=t[n]);if(r&&r.defaultProps)for(n in t=r.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:$h,type:r,key:s,ref:a,props:i,_owner:Hh.current}}tl.Fragment=Uh;tl.jsx=Vp;tl.jsxs=Vp;Np.exports=tl;var e=Np.exports,pd={},qp={exports:{}},Vt={},Yp={exports:{}},Kp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function t(P,$){var N=P.length;P.push($);e:for(;0<N;){var ee=N-1>>>1,Y=P[ee];if(0<i(Y,$))P[ee]=$,P[N]=Y,N=ee;else break e}}function o(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var $=P[0],N=P.pop();if(N!==$){P[0]=N;e:for(var ee=0,Y=P.length,X=Y>>>1;ee<X;){var se=2*(ee+1)-1,G=P[se],ye=se+1,ie=P[ye];if(0>i(G,N))ye<Y&&0>i(ie,G)?(P[ee]=ie,P[ye]=N,ee=ye):(P[ee]=G,P[se]=N,ee=se);else if(ye<Y&&0>i(ie,N))P[ee]=ie,P[ye]=N,ee=ye;else break e}}return $}function i(P,$){var N=P.sortIndex-$.sortIndex;return N!==0?N:P.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,d=a.now();r.unstable_now=function(){return a.now()-d}}var u=[],l=[],f=1,g=null,y=3,z=!1,b=!1,w=!1,k=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(P){for(var $=o(l);$!==null;){if($.callback===null)n(l);else if($.startTime<=P)n(l),$.sortIndex=$.expirationTime,t(u,$);else break;$=o(l)}}function S(P){if(w=!1,C(P),!b)if(o(u)!==null)b=!0,D(L);else{var $=o(l);$!==null&&Z(S,$.startTime-P)}}function L(P,$){b=!1,w&&(w=!1,j(m),m=-1),z=!0;var N=y;try{for(C($),g=o(u);g!==null&&(!(g.expirationTime>$)||P&&!E());){var ee=g.callback;if(typeof ee=="function"){g.callback=null,y=g.priorityLevel;var Y=ee(g.expirationTime<=$);$=r.unstable_now(),typeof Y=="function"?g.callback=Y:g===o(u)&&n(u),C($)}else n(u);g=o(u)}if(g!==null)var X=!0;else{var se=o(l);se!==null&&Z(S,se.startTime-$),X=!1}return X}finally{g=null,y=N,z=!1}}var W=!1,I=null,m=-1,B=5,H=-1;function E(){return!(r.unstable_now()-H<B)}function R(){if(I!==null){var P=r.unstable_now();H=P;var $=!0;try{$=I(!0,P)}finally{$?te():(W=!1,I=null)}}else W=!1}var te;if(typeof p=="function")te=function(){p(R)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,K=F.port2;F.port1.onmessage=R,te=function(){K.postMessage(null)}}else te=function(){k(R,0)};function D(P){I=P,W||(W=!0,te())}function Z(P,$){m=k(function(){P(r.unstable_now())},$)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_continueExecution=function(){b||z||(b=!0,D(L))},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return o(u)},r.unstable_next=function(P){switch(y){case 1:case 2:case 3:var $=3;break;default:$=y}var N=y;y=$;try{return P()}finally{y=N}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(P,$){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var N=y;y=P;try{return $()}finally{y=N}},r.unstable_scheduleCallback=function(P,$,N){var ee=r.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?ee+N:ee):N=ee,P){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=N+Y,P={id:f++,callback:$,priorityLevel:P,startTime:N,expirationTime:Y,sortIndex:-1},N>ee?(P.sortIndex=N,t(l,P),o(u)===null&&P===o(l)&&(w?(j(m),m=-1):w=!0,Z(S,N-ee))):(P.sortIndex=Y,t(u,P),b||z||(b=!0,D(L))),P},r.unstable_shouldYield=E,r.unstable_wrapCallback=function(P){var $=y;return function(){var N=y;y=$;try{return P.apply(this,arguments)}finally{y=N}}}})(Kp);Yp.exports=Kp;var qh=Yp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yh=c,Ht=qh;function ze(r){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+r,o=1;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+r+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qp=new Set,ss={};function Mn(r,t){mi(r,t),mi(r+"Capture",t)}function mi(r,t){for(ss[r]=t,r=0;r<t.length;r++)Qp.add(t[r])}var Po=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fd=Object.prototype.hasOwnProperty,Kh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vu={},qu={};function Qh(r){return fd.call(qu,r)?!0:fd.call(Vu,r)?!1:Kh.test(r)?qu[r]=!0:(Vu[r]=!0,!1)}function Xh(r,t,o,n){if(o!==null&&o.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:o!==null?!o.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function Jh(r,t,o,n){if(t===null||typeof t>"u"||Xh(r,t,o,n))return!0;if(n)return!1;if(o!==null)switch(o.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function It(r,t,o,n,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=o,this.propertyName=r,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){ft[r]=new It(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var t=r[0];ft[t]=new It(t,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){ft[r]=new It(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){ft[r]=new It(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){ft[r]=new It(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){ft[r]=new It(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){ft[r]=new It(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){ft[r]=new It(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){ft[r]=new It(r,5,!1,r.toLowerCase(),null,!1,!1)});var vc=/[\-:]([a-z])/g;function jc(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var t=r.replace(vc,jc);ft[t]=new It(t,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var t=r.replace(vc,jc);ft[t]=new It(t,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var t=r.replace(vc,jc);ft[t]=new It(t,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){ft[r]=new It(r,1,!1,r.toLowerCase(),null,!1,!1)});ft.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){ft[r]=new It(r,1,!1,r.toLowerCase(),null,!0,!0)});function Cc(r,t,o,n){var i=ft.hasOwnProperty(t)?ft[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Jh(t,o,i,n)&&(o=null),n||i===null?Qh(t)&&(o===null?r.removeAttribute(t):r.setAttribute(t,""+o)):i.mustUseProperty?r[i.propertyName]=o===null?i.type===3?!1:"":o:(t=i.attributeName,n=i.attributeNamespace,o===null?r.removeAttribute(t):(i=i.type,o=i===3||i===4&&o===!0?"":""+o,n?r.setAttributeNS(n,t,o):r.setAttribute(t,o))))}var Oo=Yh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Us=Symbol.for("react.element"),Hn=Symbol.for("react.portal"),Vn=Symbol.for("react.fragment"),Sc=Symbol.for("react.strict_mode"),gd=Symbol.for("react.profiler"),Xp=Symbol.for("react.provider"),Jp=Symbol.for("react.context"),wc=Symbol.for("react.forward_ref"),hd=Symbol.for("react.suspense"),xd=Symbol.for("react.suspense_list"),kc=Symbol.for("react.memo"),$o=Symbol.for("react.lazy"),Zp=Symbol.for("react.offscreen"),Yu=Symbol.iterator;function Ti(r){return r===null||typeof r!="object"?null:(r=Yu&&r[Yu]||r["@@iterator"],typeof r=="function"?r:null)}var Vr=Object.assign,Pl;function Gi(r){if(Pl===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);Pl=t&&t[1]||""}return`
`+Pl+r}var Nl=!1;function Dl(r,t){if(!r||Nl)return"";Nl=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var n=l}Reflect.construct(r,[],t)}else{try{t.call()}catch(l){n=l}r.call(t.prototype)}else{try{throw Error()}catch(l){n=l}r()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,d=s.length-1;1<=a&&0<=d&&i[a]!==s[d];)d--;for(;1<=a&&0<=d;a--,d--)if(i[a]!==s[d]){if(a!==1||d!==1)do if(a--,d--,0>d||i[a]!==s[d]){var u=`
`+i[a].replace(" at new "," at ");return r.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",r.displayName)),u}while(1<=a&&0<=d);break}}}finally{Nl=!1,Error.prepareStackTrace=o}return(r=r?r.displayName||r.name:"")?Gi(r):""}function Zh(r){switch(r.tag){case 5:return Gi(r.type);case 16:return Gi("Lazy");case 13:return Gi("Suspense");case 19:return Gi("SuspenseList");case 0:case 2:case 15:return r=Dl(r.type,!1),r;case 11:return r=Dl(r.type.render,!1),r;case 1:return r=Dl(r.type,!0),r;default:return""}}function yd(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Vn:return"Fragment";case Hn:return"Portal";case gd:return"Profiler";case Sc:return"StrictMode";case hd:return"Suspense";case xd:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Jp:return(r.displayName||"Context")+".Consumer";case Xp:return(r._context.displayName||"Context")+".Provider";case wc:var t=r.render;return r=r.displayName,r||(r=t.displayName||t.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case kc:return t=r.displayName||null,t!==null?t:yd(r.type)||"Memo";case $o:t=r._payload,r=r._init;try{return yd(r(t))}catch{}}return null}function ex(r){var t=r.type;switch(r.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=t.render,r=r.displayName||r.name||"",t.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yd(t);case 8:return t===Sc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function an(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function e0(r){var t=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rx(r){var t=e0(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,t),n=""+r[t];if(!r.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var i=o.get,s=o.set;return Object.defineProperty(r,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(r,t,{enumerable:o.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){r._valueTracker=null,delete r[t]}}}}function Gs(r){r._valueTracker||(r._valueTracker=rx(r))}function r0(r){if(!r)return!1;var t=r._valueTracker;if(!t)return!0;var o=t.getValue(),n="";return r&&(n=e0(r)?r.checked?"true":"false":r.value),r=n,r!==o?(t.setValue(r),!0):!1}function _a(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function bd(r,t){var o=t.checked;return Vr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??r._wrapperState.initialChecked})}function Ku(r,t){var o=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;o=an(t.value!=null?t.value:o),r._wrapperState={initialChecked:n,initialValue:o,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function t0(r,t){t=t.checked,t!=null&&Cc(r,"checked",t,!1)}function vd(r,t){t0(r,t);var o=an(t.value),n=t.type;if(o!=null)n==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+o):r.value!==""+o&&(r.value=""+o);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}t.hasOwnProperty("value")?jd(r,t.type,o):t.hasOwnProperty("defaultValue")&&jd(r,t.type,an(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(r.defaultChecked=!!t.defaultChecked)}function Qu(r,t,o){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+r._wrapperState.initialValue,o||t===r.value||(r.value=t),r.defaultValue=t}o=r.name,o!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,o!==""&&(r.name=o)}function jd(r,t,o){(t!=="number"||_a(r.ownerDocument)!==r)&&(o==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+o&&(r.defaultValue=""+o))}var Hi=Array.isArray;function ni(r,t,o,n){if(r=r.options,t){t={};for(var i=0;i<o.length;i++)t["$"+o[i]]=!0;for(o=0;o<r.length;o++)i=t.hasOwnProperty("$"+r[o].value),r[o].selected!==i&&(r[o].selected=i),i&&n&&(r[o].defaultSelected=!0)}else{for(o=""+an(o),t=null,i=0;i<r.length;i++){if(r[i].value===o){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}t!==null||r[i].disabled||(t=r[i])}t!==null&&(t.selected=!0)}}function Cd(r,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ze(91));return Vr({},t,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Xu(r,t){var o=t.value;if(o==null){if(o=t.children,t=t.defaultValue,o!=null){if(t!=null)throw Error(ze(92));if(Hi(o)){if(1<o.length)throw Error(ze(93));o=o[0]}t=o}t==null&&(t=""),o=t}r._wrapperState={initialValue:an(o)}}function o0(r,t){var o=an(t.value),n=an(t.defaultValue);o!=null&&(o=""+o,o!==r.value&&(r.value=o),t.defaultValue==null&&r.defaultValue!==o&&(r.defaultValue=o)),n!=null&&(r.defaultValue=""+n)}function Ju(r){var t=r.textContent;t===r._wrapperState.initialValue&&t!==""&&t!==null&&(r.value=t)}function n0(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sd(r,t){return r==null||r==="http://www.w3.org/1999/xhtml"?n0(t):r==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Hs,i0=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,o,n,i){MSApp.execUnsafeLocalFunction(function(){return r(t,o,n,i)})}:r}(function(r,t){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=t;else{for(Hs=Hs||document.createElement("div"),Hs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Hs.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;t.firstChild;)r.appendChild(t.firstChild)}});function as(r,t){if(t){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=t;return}}r.textContent=t}var Qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tx=["Webkit","ms","Moz","O"];Object.keys(Qi).forEach(function(r){tx.forEach(function(t){t=t+r.charAt(0).toUpperCase()+r.substring(1),Qi[t]=Qi[r]})});function s0(r,t,o){return t==null||typeof t=="boolean"||t===""?"":o||typeof t!="number"||t===0||Qi.hasOwnProperty(r)&&Qi[r]?(""+t).trim():t+"px"}function a0(r,t){r=r.style;for(var o in t)if(t.hasOwnProperty(o)){var n=o.indexOf("--")===0,i=s0(o,t[o],n);o==="float"&&(o="cssFloat"),n?r.setProperty(o,i):r[o]=i}}var ox=Vr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wd(r,t){if(t){if(ox[r]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ze(137,r));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ze(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ze(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ze(62))}}function kd(r,t){if(r.indexOf("-")===-1)return typeof t.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _d=null;function _c(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var zd=null,ii=null,si=null;function Zu(r){if(r=Rs(r)){if(typeof zd!="function")throw Error(ze(280));var t=r.stateNode;t&&(t=al(t),zd(r.stateNode,r.type,t))}}function l0(r){ii?si?si.push(r):si=[r]:ii=r}function d0(){if(ii){var r=ii,t=si;if(si=ii=null,Zu(r),t)for(r=0;r<t.length;r++)Zu(t[r])}}function c0(r,t){return r(t)}function u0(){}var Bl=!1;function m0(r,t,o){if(Bl)return r(t,o);Bl=!0;try{return c0(r,t,o)}finally{Bl=!1,(ii!==null||si!==null)&&(u0(),d0())}}function ls(r,t){var o=r.stateNode;if(o===null)return null;var n=al(o);if(n===null)return null;o=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(ze(231,t,typeof o));return o}var Ed=!1;if(Po)try{var Mi={};Object.defineProperty(Mi,"passive",{get:function(){Ed=!0}}),window.addEventListener("test",Mi,Mi),window.removeEventListener("test",Mi,Mi)}catch{Ed=!1}function nx(r,t,o,n,i,s,a,d,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(o,l)}catch(f){this.onError(f)}}var Xi=!1,za=null,Ea=!1,Rd=null,ix={onError:function(r){Xi=!0,za=r}};function sx(r,t,o,n,i,s,a,d,u){Xi=!1,za=null,nx.apply(ix,arguments)}function ax(r,t,o,n,i,s,a,d,u){if(sx.apply(this,arguments),Xi){if(Xi){var l=za;Xi=!1,za=null}else throw Error(ze(198));Ea||(Ea=!0,Rd=l)}}function Pn(r){var t=r,o=r;if(r.alternate)for(;t.return;)t=t.return;else{r=t;do t=r,t.flags&4098&&(o=t.return),r=t.return;while(r)}return t.tag===3?o:null}function p0(r){if(r.tag===13){var t=r.memoizedState;if(t===null&&(r=r.alternate,r!==null&&(t=r.memoizedState)),t!==null)return t.dehydrated}return null}function em(r){if(Pn(r)!==r)throw Error(ze(188))}function lx(r){var t=r.alternate;if(!t){if(t=Pn(r),t===null)throw Error(ze(188));return t!==r?null:r}for(var o=r,n=t;;){var i=o.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){o=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===o)return em(i),r;if(s===n)return em(i),t;s=s.sibling}throw Error(ze(188))}if(o.return!==n.return)o=i,n=s;else{for(var a=!1,d=i.child;d;){if(d===o){a=!0,o=i,n=s;break}if(d===n){a=!0,n=i,o=s;break}d=d.sibling}if(!a){for(d=s.child;d;){if(d===o){a=!0,o=s,n=i;break}if(d===n){a=!0,n=s,o=i;break}d=d.sibling}if(!a)throw Error(ze(189))}}if(o.alternate!==n)throw Error(ze(190))}if(o.tag!==3)throw Error(ze(188));return o.stateNode.current===o?r:t}function f0(r){return r=lx(r),r!==null?g0(r):null}function g0(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var t=g0(r);if(t!==null)return t;r=r.sibling}return null}var h0=Ht.unstable_scheduleCallback,rm=Ht.unstable_cancelCallback,dx=Ht.unstable_shouldYield,cx=Ht.unstable_requestPaint,Qr=Ht.unstable_now,ux=Ht.unstable_getCurrentPriorityLevel,zc=Ht.unstable_ImmediatePriority,x0=Ht.unstable_UserBlockingPriority,Ra=Ht.unstable_NormalPriority,mx=Ht.unstable_LowPriority,y0=Ht.unstable_IdlePriority,ol=null,So=null;function px(r){if(So&&typeof So.onCommitFiberRoot=="function")try{So.onCommitFiberRoot(ol,r,void 0,(r.current.flags&128)===128)}catch{}}var co=Math.clz32?Math.clz32:hx,fx=Math.log,gx=Math.LN2;function hx(r){return r>>>=0,r===0?32:31-(fx(r)/gx|0)|0}var Vs=64,qs=4194304;function Vi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Aa(r,t){var o=r.pendingLanes;if(o===0)return 0;var n=0,i=r.suspendedLanes,s=r.pingedLanes,a=o&268435455;if(a!==0){var d=a&~i;d!==0?n=Vi(d):(s&=a,s!==0&&(n=Vi(s)))}else a=o&~i,a!==0?n=Vi(a):s!==0&&(n=Vi(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(n&4&&(n|=o&16),t=r.entangledLanes,t!==0)for(r=r.entanglements,t&=n;0<t;)o=31-co(t),i=1<<o,n|=r[o],t&=~i;return n}function xx(r,t){switch(r){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yx(r,t){for(var o=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,s=r.pendingLanes;0<s;){var a=31-co(s),d=1<<a,u=i[a];u===-1?(!(d&o)||d&n)&&(i[a]=xx(d,t)):u<=t&&(r.expiredLanes|=d),s&=~d}}function Ad(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function b0(){var r=Vs;return Vs<<=1,!(Vs&4194240)&&(Vs=64),r}function Ol(r){for(var t=[],o=0;31>o;o++)t.push(r);return t}function zs(r,t,o){r.pendingLanes|=t,t!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,t=31-co(t),r[t]=o}function bx(r,t){var o=r.pendingLanes&~t;r.pendingLanes=t,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=t,r.mutableReadLanes&=t,r.entangledLanes&=t,t=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<o;){var i=31-co(o),s=1<<i;t[i]=0,n[i]=-1,r[i]=-1,o&=~s}}function Ec(r,t){var o=r.entangledLanes|=t;for(r=r.entanglements;o;){var n=31-co(o),i=1<<n;i&t|r[n]&t&&(r[n]|=t),o&=~i}}var br=0;function v0(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var j0,Rc,C0,S0,w0,Id=!1,Ys=[],Qo=null,Xo=null,Jo=null,ds=new Map,cs=new Map,Go=[],vx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tm(r,t){switch(r){case"focusin":case"focusout":Qo=null;break;case"dragenter":case"dragleave":Xo=null;break;case"mouseover":case"mouseout":Jo=null;break;case"pointerover":case"pointerout":ds.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cs.delete(t.pointerId)}}function Pi(r,t,o,n,i,s){return r===null||r.nativeEvent!==s?(r={blockedOn:t,domEventName:o,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Rs(t),t!==null&&Rc(t)),r):(r.eventSystemFlags|=n,t=r.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),r)}function jx(r,t,o,n,i){switch(t){case"focusin":return Qo=Pi(Qo,r,t,o,n,i),!0;case"dragenter":return Xo=Pi(Xo,r,t,o,n,i),!0;case"mouseover":return Jo=Pi(Jo,r,t,o,n,i),!0;case"pointerover":var s=i.pointerId;return ds.set(s,Pi(ds.get(s)||null,r,t,o,n,i)),!0;case"gotpointercapture":return s=i.pointerId,cs.set(s,Pi(cs.get(s)||null,r,t,o,n,i)),!0}return!1}function k0(r){var t=xn(r.target);if(t!==null){var o=Pn(t);if(o!==null){if(t=o.tag,t===13){if(t=p0(o),t!==null){r.blockedOn=t,w0(r.priority,function(){C0(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ma(r){if(r.blockedOn!==null)return!1;for(var t=r.targetContainers;0<t.length;){var o=Wd(r.domEventName,r.eventSystemFlags,t[0],r.nativeEvent);if(o===null){o=r.nativeEvent;var n=new o.constructor(o.type,o);_d=n,o.target.dispatchEvent(n),_d=null}else return t=Rs(o),t!==null&&Rc(t),r.blockedOn=o,!1;t.shift()}return!0}function om(r,t,o){ma(r)&&o.delete(t)}function Cx(){Id=!1,Qo!==null&&ma(Qo)&&(Qo=null),Xo!==null&&ma(Xo)&&(Xo=null),Jo!==null&&ma(Jo)&&(Jo=null),ds.forEach(om),cs.forEach(om)}function Ni(r,t){r.blockedOn===t&&(r.blockedOn=null,Id||(Id=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,Cx)))}function us(r){function t(i){return Ni(i,r)}if(0<Ys.length){Ni(Ys[0],r);for(var o=1;o<Ys.length;o++){var n=Ys[o];n.blockedOn===r&&(n.blockedOn=null)}}for(Qo!==null&&Ni(Qo,r),Xo!==null&&Ni(Xo,r),Jo!==null&&Ni(Jo,r),ds.forEach(t),cs.forEach(t),o=0;o<Go.length;o++)n=Go[o],n.blockedOn===r&&(n.blockedOn=null);for(;0<Go.length&&(o=Go[0],o.blockedOn===null);)k0(o),o.blockedOn===null&&Go.shift()}var ai=Oo.ReactCurrentBatchConfig,Ia=!0;function Sx(r,t,o,n){var i=br,s=ai.transition;ai.transition=null;try{br=1,Ac(r,t,o,n)}finally{br=i,ai.transition=s}}function wx(r,t,o,n){var i=br,s=ai.transition;ai.transition=null;try{br=4,Ac(r,t,o,n)}finally{br=i,ai.transition=s}}function Ac(r,t,o,n){if(Ia){var i=Wd(r,t,o,n);if(i===null)Kl(r,t,n,Wa,o),tm(r,n);else if(jx(i,r,t,o,n))n.stopPropagation();else if(tm(r,n),t&4&&-1<vx.indexOf(r)){for(;i!==null;){var s=Rs(i);if(s!==null&&j0(s),s=Wd(r,t,o,n),s===null&&Kl(r,t,n,Wa,o),s===i)break;i=s}i!==null&&n.stopPropagation()}else Kl(r,t,n,null,o)}}var Wa=null;function Wd(r,t,o,n){if(Wa=null,r=_c(n),r=xn(r),r!==null)if(t=Pn(r),t===null)r=null;else if(o=t.tag,o===13){if(r=p0(t),r!==null)return r;r=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;r=null}else t!==r&&(r=null);return Wa=r,null}function _0(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ux()){case zc:return 1;case x0:return 4;case Ra:case mx:return 16;case y0:return 536870912;default:return 16}default:return 16}}var qo=null,Ic=null,pa=null;function z0(){if(pa)return pa;var r,t=Ic,o=t.length,n,i="value"in qo?qo.value:qo.textContent,s=i.length;for(r=0;r<o&&t[r]===i[r];r++);var a=o-r;for(n=1;n<=a&&t[o-n]===i[s-n];n++);return pa=i.slice(r,1<n?1-n:void 0)}function fa(r){var t=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&t===13&&(r=13)):r=t,r===10&&(r=13),32<=r||r===13?r:0}function Ks(){return!0}function nm(){return!1}function qt(r){function t(o,n,i,s,a){this._reactName=o,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var d in r)r.hasOwnProperty(d)&&(o=r[d],this[d]=o?o(s):s[d]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ks:nm,this.isPropagationStopped=nm,this}return Vr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ks)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ks)},persist:function(){},isPersistent:Ks}),t}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wc=qt(Ci),Es=Vr({},Ci,{view:0,detail:0}),kx=qt(Es),Ll,Fl,Di,nl=Vr({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Di&&(Di&&r.type==="mousemove"?(Ll=r.screenX-Di.screenX,Fl=r.screenY-Di.screenY):Fl=Ll=0,Di=r),Ll)},movementY:function(r){return"movementY"in r?r.movementY:Fl}}),im=qt(nl),_x=Vr({},nl,{dataTransfer:0}),zx=qt(_x),Ex=Vr({},Es,{relatedTarget:0}),$l=qt(Ex),Rx=Vr({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),Ax=qt(Rx),Ix=Vr({},Ci,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Wx=qt(Ix),Tx=Vr({},Ci,{data:0}),sm=qt(Tx),Mx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Px={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dx(r){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(r):(r=Nx[r])?!!t[r]:!1}function Tc(){return Dx}var Bx=Vr({},Es,{key:function(r){if(r.key){var t=Mx[r.key]||r.key;if(t!=="Unidentified")return t}return r.type==="keypress"?(r=fa(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Px[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tc,charCode:function(r){return r.type==="keypress"?fa(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?fa(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ox=qt(Bx),Lx=Vr({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),am=qt(Lx),Fx=Vr({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tc}),$x=qt(Fx),Ux=Vr({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gx=qt(Ux),Hx=Vr({},nl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Vx=qt(Hx),qx=[9,13,27,32],Mc=Po&&"CompositionEvent"in window,Ji=null;Po&&"documentMode"in document&&(Ji=document.documentMode);var Yx=Po&&"TextEvent"in window&&!Ji,E0=Po&&(!Mc||Ji&&8<Ji&&11>=Ji),lm=" ",dm=!1;function R0(r,t){switch(r){case"keyup":return qx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A0(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var qn=!1;function Kx(r,t){switch(r){case"compositionend":return A0(t);case"keypress":return t.which!==32?null:(dm=!0,lm);case"textInput":return r=t.data,r===lm&&dm?null:r;default:return null}}function Qx(r,t){if(qn)return r==="compositionend"||!Mc&&R0(r,t)?(r=z0(),pa=Ic=qo=null,qn=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return E0&&t.locale!=="ko"?null:t.data;default:return null}}var Xx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cm(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t==="input"?!!Xx[r.type]:t==="textarea"}function I0(r,t,o,n){l0(n),t=Ta(t,"onChange"),0<t.length&&(o=new Wc("onChange","change",null,o,n),r.push({event:o,listeners:t}))}var Zi=null,ms=null;function Jx(r){$0(r,0)}function il(r){var t=Qn(r);if(r0(t))return r}function Zx(r,t){if(r==="change")return t}var W0=!1;if(Po){var Ul;if(Po){var Gl="oninput"in document;if(!Gl){var um=document.createElement("div");um.setAttribute("oninput","return;"),Gl=typeof um.oninput=="function"}Ul=Gl}else Ul=!1;W0=Ul&&(!document.documentMode||9<document.documentMode)}function mm(){Zi&&(Zi.detachEvent("onpropertychange",T0),ms=Zi=null)}function T0(r){if(r.propertyName==="value"&&il(ms)){var t=[];I0(t,ms,r,_c(r)),m0(Jx,t)}}function ey(r,t,o){r==="focusin"?(mm(),Zi=t,ms=o,Zi.attachEvent("onpropertychange",T0)):r==="focusout"&&mm()}function ry(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return il(ms)}function ty(r,t){if(r==="click")return il(t)}function oy(r,t){if(r==="input"||r==="change")return il(t)}function ny(r,t){return r===t&&(r!==0||1/r===1/t)||r!==r&&t!==t}var po=typeof Object.is=="function"?Object.is:ny;function ps(r,t){if(po(r,t))return!0;if(typeof r!="object"||r===null||typeof t!="object"||t===null)return!1;var o=Object.keys(r),n=Object.keys(t);if(o.length!==n.length)return!1;for(n=0;n<o.length;n++){var i=o[n];if(!fd.call(t,i)||!po(r[i],t[i]))return!1}return!0}function pm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function fm(r,t){var o=pm(r);r=0;for(var n;o;){if(o.nodeType===3){if(n=r+o.textContent.length,r<=t&&n>=t)return{node:o,offset:t-r};r=n}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=pm(o)}}function M0(r,t){return r&&t?r===t?!0:r&&r.nodeType===3?!1:t&&t.nodeType===3?M0(r,t.parentNode):"contains"in r?r.contains(t):r.compareDocumentPosition?!!(r.compareDocumentPosition(t)&16):!1:!1}function P0(){for(var r=window,t=_a();t instanceof r.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)r=t.contentWindow;else break;t=_a(r.document)}return t}function Pc(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t&&(t==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||t==="textarea"||r.contentEditable==="true")}function iy(r){var t=P0(),o=r.focusedElem,n=r.selectionRange;if(t!==o&&o&&o.ownerDocument&&M0(o.ownerDocument.documentElement,o)){if(n!==null&&Pc(o)){if(t=n.start,r=n.end,r===void 0&&(r=t),"selectionStart"in o)o.selectionStart=t,o.selectionEnd=Math.min(r,o.value.length);else if(r=(t=o.ownerDocument||document)&&t.defaultView||window,r.getSelection){r=r.getSelection();var i=o.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!r.extend&&s>n&&(i=n,n=s,s=i),i=fm(o,s);var a=fm(o,n);i&&a&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==a.node||r.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),r.removeAllRanges(),s>n?(r.addRange(t),r.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),r.addRange(t)))}}for(t=[],r=o;r=r.parentNode;)r.nodeType===1&&t.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<t.length;o++)r=t[o],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var sy=Po&&"documentMode"in document&&11>=document.documentMode,Yn=null,Td=null,es=null,Md=!1;function gm(r,t,o){var n=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Md||Yn==null||Yn!==_a(n)||(n=Yn,"selectionStart"in n&&Pc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),es&&ps(es,n)||(es=n,n=Ta(Td,"onSelect"),0<n.length&&(t=new Wc("onSelect","select",null,t,o),r.push({event:t,listeners:n}),t.target=Yn)))}function Qs(r,t){var o={};return o[r.toLowerCase()]=t.toLowerCase(),o["Webkit"+r]="webkit"+t,o["Moz"+r]="moz"+t,o}var Kn={animationend:Qs("Animation","AnimationEnd"),animationiteration:Qs("Animation","AnimationIteration"),animationstart:Qs("Animation","AnimationStart"),transitionend:Qs("Transition","TransitionEnd")},Hl={},N0={};Po&&(N0=document.createElement("div").style,"AnimationEvent"in window||(delete Kn.animationend.animation,delete Kn.animationiteration.animation,delete Kn.animationstart.animation),"TransitionEvent"in window||delete Kn.transitionend.transition);function sl(r){if(Hl[r])return Hl[r];if(!Kn[r])return r;var t=Kn[r],o;for(o in t)if(t.hasOwnProperty(o)&&o in N0)return Hl[r]=t[o];return r}var D0=sl("animationend"),B0=sl("animationiteration"),O0=sl("animationstart"),L0=sl("transitionend"),F0=new Map,hm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cn(r,t){F0.set(r,t),Mn(t,[r])}for(var Vl=0;Vl<hm.length;Vl++){var ql=hm[Vl],ay=ql.toLowerCase(),ly=ql[0].toUpperCase()+ql.slice(1);cn(ay,"on"+ly)}cn(D0,"onAnimationEnd");cn(B0,"onAnimationIteration");cn(O0,"onAnimationStart");cn("dblclick","onDoubleClick");cn("focusin","onFocus");cn("focusout","onBlur");cn(L0,"onTransitionEnd");mi("onMouseEnter",["mouseout","mouseover"]);mi("onMouseLeave",["mouseout","mouseover"]);mi("onPointerEnter",["pointerout","pointerover"]);mi("onPointerLeave",["pointerout","pointerover"]);Mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dy=new Set("cancel close invalid load scroll toggle".split(" ").concat(qi));function xm(r,t,o){var n=r.type||"unknown-event";r.currentTarget=o,ax(n,t,void 0,r),r.currentTarget=null}function $0(r,t){t=(t&4)!==0;for(var o=0;o<r.length;o++){var n=r[o],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var a=n.length-1;0<=a;a--){var d=n[a],u=d.instance,l=d.currentTarget;if(d=d.listener,u!==s&&i.isPropagationStopped())break e;xm(i,d,l),s=u}else for(a=0;a<n.length;a++){if(d=n[a],u=d.instance,l=d.currentTarget,d=d.listener,u!==s&&i.isPropagationStopped())break e;xm(i,d,l),s=u}}}if(Ea)throw r=Rd,Ea=!1,Rd=null,r}function Wr(r,t){var o=t[Od];o===void 0&&(o=t[Od]=new Set);var n=r+"__bubble";o.has(n)||(U0(t,r,2,!1),o.add(n))}function Yl(r,t,o){var n=0;t&&(n|=4),U0(o,r,n,t)}var Xs="_reactListening"+Math.random().toString(36).slice(2);function fs(r){if(!r[Xs]){r[Xs]=!0,Qp.forEach(function(o){o!=="selectionchange"&&(dy.has(o)||Yl(o,!1,r),Yl(o,!0,r))});var t=r.nodeType===9?r:r.ownerDocument;t===null||t[Xs]||(t[Xs]=!0,Yl("selectionchange",!1,t))}}function U0(r,t,o,n){switch(_0(t)){case 1:var i=Sx;break;case 4:i=wx;break;default:i=Ac}o=i.bind(null,t,o,r),i=void 0,!Ed||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(t,o,{capture:!0,passive:i}):r.addEventListener(t,o,!0):i!==void 0?r.addEventListener(t,o,{passive:i}):r.addEventListener(t,o,!1)}function Kl(r,t,o,n,i){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var d=n.stateNode.containerInfo;if(d===i||d.nodeType===8&&d.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;d!==null;){if(a=xn(d),a===null)return;if(u=a.tag,u===5||u===6){n=s=a;continue e}d=d.parentNode}}n=n.return}m0(function(){var l=s,f=_c(o),g=[];e:{var y=F0.get(r);if(y!==void 0){var z=Wc,b=r;switch(r){case"keypress":if(fa(o)===0)break e;case"keydown":case"keyup":z=Ox;break;case"focusin":b="focus",z=$l;break;case"focusout":b="blur",z=$l;break;case"beforeblur":case"afterblur":z=$l;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=im;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=zx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=$x;break;case D0:case B0:case O0:z=Ax;break;case L0:z=Gx;break;case"scroll":z=kx;break;case"wheel":z=Vx;break;case"copy":case"cut":case"paste":z=Wx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=am}var w=(t&4)!==0,k=!w&&r==="scroll",j=w?y!==null?y+"Capture":null:y;w=[];for(var p=l,C;p!==null;){C=p;var S=C.stateNode;if(C.tag===5&&S!==null&&(C=S,j!==null&&(S=ls(p,j),S!=null&&w.push(gs(p,S,C)))),k)break;p=p.return}0<w.length&&(y=new z(y,b,null,o,f),g.push({event:y,listeners:w}))}}if(!(t&7)){e:{if(y=r==="mouseover"||r==="pointerover",z=r==="mouseout"||r==="pointerout",y&&o!==_d&&(b=o.relatedTarget||o.fromElement)&&(xn(b)||b[No]))break e;if((z||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,z?(b=o.relatedTarget||o.toElement,z=l,b=b?xn(b):null,b!==null&&(k=Pn(b),b!==k||b.tag!==5&&b.tag!==6)&&(b=null)):(z=null,b=l),z!==b)){if(w=im,S="onMouseLeave",j="onMouseEnter",p="mouse",(r==="pointerout"||r==="pointerover")&&(w=am,S="onPointerLeave",j="onPointerEnter",p="pointer"),k=z==null?y:Qn(z),C=b==null?y:Qn(b),y=new w(S,p+"leave",z,o,f),y.target=k,y.relatedTarget=C,S=null,xn(f)===l&&(w=new w(j,p+"enter",b,o,f),w.target=C,w.relatedTarget=k,S=w),k=S,z&&b)r:{for(w=z,j=b,p=0,C=w;C;C=Un(C))p++;for(C=0,S=j;S;S=Un(S))C++;for(;0<p-C;)w=Un(w),p--;for(;0<C-p;)j=Un(j),C--;for(;p--;){if(w===j||j!==null&&w===j.alternate)break r;w=Un(w),j=Un(j)}w=null}else w=null;z!==null&&ym(g,y,z,w,!1),b!==null&&k!==null&&ym(g,k,b,w,!0)}}e:{if(y=l?Qn(l):window,z=y.nodeName&&y.nodeName.toLowerCase(),z==="select"||z==="input"&&y.type==="file")var L=Zx;else if(cm(y))if(W0)L=oy;else{L=ry;var W=ey}else(z=y.nodeName)&&z.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(L=ty);if(L&&(L=L(r,l))){I0(g,L,o,f);break e}W&&W(r,y,l),r==="focusout"&&(W=y._wrapperState)&&W.controlled&&y.type==="number"&&jd(y,"number",y.value)}switch(W=l?Qn(l):window,r){case"focusin":(cm(W)||W.contentEditable==="true")&&(Yn=W,Td=l,es=null);break;case"focusout":es=Td=Yn=null;break;case"mousedown":Md=!0;break;case"contextmenu":case"mouseup":case"dragend":Md=!1,gm(g,o,f);break;case"selectionchange":if(sy)break;case"keydown":case"keyup":gm(g,o,f)}var I;if(Mc)e:{switch(r){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else qn?R0(r,o)&&(m="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(m="onCompositionStart");m&&(E0&&o.locale!=="ko"&&(qn||m!=="onCompositionStart"?m==="onCompositionEnd"&&qn&&(I=z0()):(qo=f,Ic="value"in qo?qo.value:qo.textContent,qn=!0)),W=Ta(l,m),0<W.length&&(m=new sm(m,r,null,o,f),g.push({event:m,listeners:W}),I?m.data=I:(I=A0(o),I!==null&&(m.data=I)))),(I=Yx?Kx(r,o):Qx(r,o))&&(l=Ta(l,"onBeforeInput"),0<l.length&&(f=new sm("onBeforeInput","beforeinput",null,o,f),g.push({event:f,listeners:l}),f.data=I))}$0(g,t)})}function gs(r,t,o){return{instance:r,listener:t,currentTarget:o}}function Ta(r,t){for(var o=t+"Capture",n=[];r!==null;){var i=r,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ls(r,o),s!=null&&n.unshift(gs(r,s,i)),s=ls(r,t),s!=null&&n.push(gs(r,s,i))),r=r.return}return n}function Un(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function ym(r,t,o,n,i){for(var s=t._reactName,a=[];o!==null&&o!==n;){var d=o,u=d.alternate,l=d.stateNode;if(u!==null&&u===n)break;d.tag===5&&l!==null&&(d=l,i?(u=ls(o,s),u!=null&&a.unshift(gs(o,u,d))):i||(u=ls(o,s),u!=null&&a.push(gs(o,u,d)))),o=o.return}a.length!==0&&r.push({event:t,listeners:a})}var cy=/\r\n?/g,uy=/\u0000|\uFFFD/g;function bm(r){return(typeof r=="string"?r:""+r).replace(cy,`
`).replace(uy,"")}function Js(r,t,o){if(t=bm(t),bm(r)!==t&&o)throw Error(ze(425))}function Ma(){}var Pd=null,Nd=null;function Dd(r,t){return r==="textarea"||r==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Bd=typeof setTimeout=="function"?setTimeout:void 0,my=typeof clearTimeout=="function"?clearTimeout:void 0,vm=typeof Promise=="function"?Promise:void 0,py=typeof queueMicrotask=="function"?queueMicrotask:typeof vm<"u"?function(r){return vm.resolve(null).then(r).catch(fy)}:Bd;function fy(r){setTimeout(function(){throw r})}function Ql(r,t){var o=t,n=0;do{var i=o.nextSibling;if(r.removeChild(o),i&&i.nodeType===8)if(o=i.data,o==="/$"){if(n===0){r.removeChild(i),us(t);return}n--}else o!=="$"&&o!=="$?"&&o!=="$!"||n++;o=i}while(o);us(t)}function Zo(r){for(;r!=null;r=r.nextSibling){var t=r.nodeType;if(t===1||t===3)break;if(t===8){if(t=r.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return r}function jm(r){r=r.previousSibling;for(var t=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(t===0)return r;t--}else o==="/$"&&t++}r=r.previousSibling}return null}var Si=Math.random().toString(36).slice(2),Co="__reactFiber$"+Si,hs="__reactProps$"+Si,No="__reactContainer$"+Si,Od="__reactEvents$"+Si,gy="__reactListeners$"+Si,hy="__reactHandles$"+Si;function xn(r){var t=r[Co];if(t)return t;for(var o=r.parentNode;o;){if(t=o[No]||o[Co]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(r=jm(r);r!==null;){if(o=r[Co])return o;r=jm(r)}return t}r=o,o=r.parentNode}return null}function Rs(r){return r=r[Co]||r[No],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Qn(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(ze(33))}function al(r){return r[hs]||null}var Ld=[],Xn=-1;function un(r){return{current:r}}function Mr(r){0>Xn||(r.current=Ld[Xn],Ld[Xn]=null,Xn--)}function Rr(r,t){Xn++,Ld[Xn]=r.current,r.current=t}var ln={},Ct=un(ln),Nt=un(!1),_n=ln;function pi(r,t){var o=r.type.contextTypes;if(!o)return ln;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in o)i[s]=t[s];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=i),i}function Dt(r){return r=r.childContextTypes,r!=null}function Pa(){Mr(Nt),Mr(Ct)}function Cm(r,t,o){if(Ct.current!==ln)throw Error(ze(168));Rr(Ct,t),Rr(Nt,o)}function G0(r,t,o){var n=r.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return o;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(ze(108,ex(r)||"Unknown",i));return Vr({},o,n)}function Na(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ln,_n=Ct.current,Rr(Ct,r),Rr(Nt,Nt.current),!0}function Sm(r,t,o){var n=r.stateNode;if(!n)throw Error(ze(169));o?(r=G0(r,t,_n),n.__reactInternalMemoizedMergedChildContext=r,Mr(Nt),Mr(Ct),Rr(Ct,r)):Mr(Nt),Rr(Nt,o)}var Ao=null,ll=!1,Xl=!1;function H0(r){Ao===null?Ao=[r]:Ao.push(r)}function xy(r){ll=!0,H0(r)}function mn(){if(!Xl&&Ao!==null){Xl=!0;var r=0,t=br;try{var o=Ao;for(br=1;r<o.length;r++){var n=o[r];do n=n(!0);while(n!==null)}Ao=null,ll=!1}catch(i){throw Ao!==null&&(Ao=Ao.slice(r+1)),h0(zc,mn),i}finally{br=t,Xl=!1}}return null}var Jn=[],Zn=0,Da=null,Ba=0,Yt=[],Kt=0,zn=null,Io=1,Wo="";function gn(r,t){Jn[Zn++]=Ba,Jn[Zn++]=Da,Da=r,Ba=t}function V0(r,t,o){Yt[Kt++]=Io,Yt[Kt++]=Wo,Yt[Kt++]=zn,zn=r;var n=Io;r=Wo;var i=32-co(n)-1;n&=~(1<<i),o+=1;var s=32-co(t)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Io=1<<32-co(t)+i|o<<i|n,Wo=s+r}else Io=1<<s|o<<i|n,Wo=r}function Nc(r){r.return!==null&&(gn(r,1),V0(r,1,0))}function Dc(r){for(;r===Da;)Da=Jn[--Zn],Jn[Zn]=null,Ba=Jn[--Zn],Jn[Zn]=null;for(;r===zn;)zn=Yt[--Kt],Yt[Kt]=null,Wo=Yt[--Kt],Yt[Kt]=null,Io=Yt[--Kt],Yt[Kt]=null}var Ut=null,$t=null,Or=!1,ao=null;function q0(r,t){var o=Qt(5,null,null,0);o.elementType="DELETED",o.stateNode=t,o.return=r,t=r.deletions,t===null?(r.deletions=[o],r.flags|=16):t.push(o)}function wm(r,t){switch(r.tag){case 5:var o=r.type;return t=t.nodeType!==1||o.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(r.stateNode=t,Ut=r,$t=Zo(t.firstChild),!0):!1;case 6:return t=r.pendingProps===""||t.nodeType!==3?null:t,t!==null?(r.stateNode=t,Ut=r,$t=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(o=zn!==null?{id:Io,overflow:Wo}:null,r.memoizedState={dehydrated:t,treeContext:o,retryLane:1073741824},o=Qt(18,null,null,0),o.stateNode=t,o.return=r,r.child=o,Ut=r,$t=null,!0):!1;default:return!1}}function Fd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function $d(r){if(Or){var t=$t;if(t){var o=t;if(!wm(r,t)){if(Fd(r))throw Error(ze(418));t=Zo(o.nextSibling);var n=Ut;t&&wm(r,t)?q0(n,o):(r.flags=r.flags&-4097|2,Or=!1,Ut=r)}}else{if(Fd(r))throw Error(ze(418));r.flags=r.flags&-4097|2,Or=!1,Ut=r}}}function km(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Ut=r}function Zs(r){if(r!==Ut)return!1;if(!Or)return km(r),Or=!0,!1;var t;if((t=r.tag!==3)&&!(t=r.tag!==5)&&(t=r.type,t=t!=="head"&&t!=="body"&&!Dd(r.type,r.memoizedProps)),t&&(t=$t)){if(Fd(r))throw Y0(),Error(ze(418));for(;t;)q0(r,t),t=Zo(t.nextSibling)}if(km(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(ze(317));e:{for(r=r.nextSibling,t=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"){if(t===0){$t=Zo(r.nextSibling);break e}t--}else o!=="$"&&o!=="$!"&&o!=="$?"||t++}r=r.nextSibling}$t=null}}else $t=Ut?Zo(r.stateNode.nextSibling):null;return!0}function Y0(){for(var r=$t;r;)r=Zo(r.nextSibling)}function fi(){$t=Ut=null,Or=!1}function Bc(r){ao===null?ao=[r]:ao.push(r)}var yy=Oo.ReactCurrentBatchConfig;function Bi(r,t,o){if(r=o.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(ze(309));var n=o.stateNode}if(!n)throw Error(ze(147,r));var i=n,s=""+r;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var d=i.refs;a===null?delete d[s]:d[s]=a},t._stringRef=s,t)}if(typeof r!="string")throw Error(ze(284));if(!o._owner)throw Error(ze(290,r))}return r}function ea(r,t){throw r=Object.prototype.toString.call(t),Error(ze(31,r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r))}function _m(r){var t=r._init;return t(r._payload)}function K0(r){function t(j,p){if(r){var C=j.deletions;C===null?(j.deletions=[p],j.flags|=16):C.push(p)}}function o(j,p){if(!r)return null;for(;p!==null;)t(j,p),p=p.sibling;return null}function n(j,p){for(j=new Map;p!==null;)p.key!==null?j.set(p.key,p):j.set(p.index,p),p=p.sibling;return j}function i(j,p){return j=on(j,p),j.index=0,j.sibling=null,j}function s(j,p,C){return j.index=C,r?(C=j.alternate,C!==null?(C=C.index,C<p?(j.flags|=2,p):C):(j.flags|=2,p)):(j.flags|=1048576,p)}function a(j){return r&&j.alternate===null&&(j.flags|=2),j}function d(j,p,C,S){return p===null||p.tag!==6?(p=nd(C,j.mode,S),p.return=j,p):(p=i(p,C),p.return=j,p)}function u(j,p,C,S){var L=C.type;return L===Vn?f(j,p,C.props.children,S,C.key):p!==null&&(p.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===$o&&_m(L)===p.type)?(S=i(p,C.props),S.ref=Bi(j,p,C),S.return=j,S):(S=ja(C.type,C.key,C.props,null,j.mode,S),S.ref=Bi(j,p,C),S.return=j,S)}function l(j,p,C,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==C.containerInfo||p.stateNode.implementation!==C.implementation?(p=id(C,j.mode,S),p.return=j,p):(p=i(p,C.children||[]),p.return=j,p)}function f(j,p,C,S,L){return p===null||p.tag!==7?(p=wn(C,j.mode,S,L),p.return=j,p):(p=i(p,C),p.return=j,p)}function g(j,p,C){if(typeof p=="string"&&p!==""||typeof p=="number")return p=nd(""+p,j.mode,C),p.return=j,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Us:return C=ja(p.type,p.key,p.props,null,j.mode,C),C.ref=Bi(j,null,p),C.return=j,C;case Hn:return p=id(p,j.mode,C),p.return=j,p;case $o:var S=p._init;return g(j,S(p._payload),C)}if(Hi(p)||Ti(p))return p=wn(p,j.mode,C,null),p.return=j,p;ea(j,p)}return null}function y(j,p,C,S){var L=p!==null?p.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return L!==null?null:d(j,p,""+C,S);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Us:return C.key===L?u(j,p,C,S):null;case Hn:return C.key===L?l(j,p,C,S):null;case $o:return L=C._init,y(j,p,L(C._payload),S)}if(Hi(C)||Ti(C))return L!==null?null:f(j,p,C,S,null);ea(j,C)}return null}function z(j,p,C,S,L){if(typeof S=="string"&&S!==""||typeof S=="number")return j=j.get(C)||null,d(p,j,""+S,L);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Us:return j=j.get(S.key===null?C:S.key)||null,u(p,j,S,L);case Hn:return j=j.get(S.key===null?C:S.key)||null,l(p,j,S,L);case $o:var W=S._init;return z(j,p,C,W(S._payload),L)}if(Hi(S)||Ti(S))return j=j.get(C)||null,f(p,j,S,L,null);ea(p,S)}return null}function b(j,p,C,S){for(var L=null,W=null,I=p,m=p=0,B=null;I!==null&&m<C.length;m++){I.index>m?(B=I,I=null):B=I.sibling;var H=y(j,I,C[m],S);if(H===null){I===null&&(I=B);break}r&&I&&H.alternate===null&&t(j,I),p=s(H,p,m),W===null?L=H:W.sibling=H,W=H,I=B}if(m===C.length)return o(j,I),Or&&gn(j,m),L;if(I===null){for(;m<C.length;m++)I=g(j,C[m],S),I!==null&&(p=s(I,p,m),W===null?L=I:W.sibling=I,W=I);return Or&&gn(j,m),L}for(I=n(j,I);m<C.length;m++)B=z(I,j,m,C[m],S),B!==null&&(r&&B.alternate!==null&&I.delete(B.key===null?m:B.key),p=s(B,p,m),W===null?L=B:W.sibling=B,W=B);return r&&I.forEach(function(E){return t(j,E)}),Or&&gn(j,m),L}function w(j,p,C,S){var L=Ti(C);if(typeof L!="function")throw Error(ze(150));if(C=L.call(C),C==null)throw Error(ze(151));for(var W=L=null,I=p,m=p=0,B=null,H=C.next();I!==null&&!H.done;m++,H=C.next()){I.index>m?(B=I,I=null):B=I.sibling;var E=y(j,I,H.value,S);if(E===null){I===null&&(I=B);break}r&&I&&E.alternate===null&&t(j,I),p=s(E,p,m),W===null?L=E:W.sibling=E,W=E,I=B}if(H.done)return o(j,I),Or&&gn(j,m),L;if(I===null){for(;!H.done;m++,H=C.next())H=g(j,H.value,S),H!==null&&(p=s(H,p,m),W===null?L=H:W.sibling=H,W=H);return Or&&gn(j,m),L}for(I=n(j,I);!H.done;m++,H=C.next())H=z(I,j,m,H.value,S),H!==null&&(r&&H.alternate!==null&&I.delete(H.key===null?m:H.key),p=s(H,p,m),W===null?L=H:W.sibling=H,W=H);return r&&I.forEach(function(R){return t(j,R)}),Or&&gn(j,m),L}function k(j,p,C,S){if(typeof C=="object"&&C!==null&&C.type===Vn&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Us:e:{for(var L=C.key,W=p;W!==null;){if(W.key===L){if(L=C.type,L===Vn){if(W.tag===7){o(j,W.sibling),p=i(W,C.props.children),p.return=j,j=p;break e}}else if(W.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===$o&&_m(L)===W.type){o(j,W.sibling),p=i(W,C.props),p.ref=Bi(j,W,C),p.return=j,j=p;break e}o(j,W);break}else t(j,W);W=W.sibling}C.type===Vn?(p=wn(C.props.children,j.mode,S,C.key),p.return=j,j=p):(S=ja(C.type,C.key,C.props,null,j.mode,S),S.ref=Bi(j,p,C),S.return=j,j=S)}return a(j);case Hn:e:{for(W=C.key;p!==null;){if(p.key===W)if(p.tag===4&&p.stateNode.containerInfo===C.containerInfo&&p.stateNode.implementation===C.implementation){o(j,p.sibling),p=i(p,C.children||[]),p.return=j,j=p;break e}else{o(j,p);break}else t(j,p);p=p.sibling}p=id(C,j.mode,S),p.return=j,j=p}return a(j);case $o:return W=C._init,k(j,p,W(C._payload),S)}if(Hi(C))return b(j,p,C,S);if(Ti(C))return w(j,p,C,S);ea(j,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,p!==null&&p.tag===6?(o(j,p.sibling),p=i(p,C),p.return=j,j=p):(o(j,p),p=nd(C,j.mode,S),p.return=j,j=p),a(j)):o(j,p)}return k}var gi=K0(!0),Q0=K0(!1),Oa=un(null),La=null,ei=null,Oc=null;function Lc(){Oc=ei=La=null}function Fc(r){var t=Oa.current;Mr(Oa),r._currentValue=t}function Ud(r,t,o){for(;r!==null;){var n=r.alternate;if((r.childLanes&t)!==t?(r.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),r===o)break;r=r.return}}function li(r,t){La=r,Oc=ei=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&t&&(Pt=!0),r.firstContext=null)}function Zt(r){var t=r._currentValue;if(Oc!==r)if(r={context:r,memoizedValue:t,next:null},ei===null){if(La===null)throw Error(ze(308));ei=r,La.dependencies={lanes:0,firstContext:r}}else ei=ei.next=r;return t}var yn=null;function $c(r){yn===null?yn=[r]:yn.push(r)}function X0(r,t,o,n){var i=t.interleaved;return i===null?(o.next=o,$c(t)):(o.next=i.next,i.next=o),t.interleaved=o,Do(r,n)}function Do(r,t){r.lanes|=t;var o=r.alternate;for(o!==null&&(o.lanes|=t),o=r,r=r.return;r!==null;)r.childLanes|=t,o=r.alternate,o!==null&&(o.childLanes|=t),o=r,r=r.return;return o.tag===3?o.stateNode:null}var Uo=!1;function Uc(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function J0(r,t){r=r.updateQueue,t.updateQueue===r&&(t.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Mo(r,t){return{eventTime:r,lane:t,tag:0,payload:null,callback:null,next:null}}function en(r,t,o){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,fr&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Do(r,o)}return i=n.interleaved,i===null?(t.next=t,$c(n)):(t.next=i.next,i.next=t),n.interleaved=t,Do(r,o)}function ga(r,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194240)!==0)){var n=t.lanes;n&=r.pendingLanes,o|=n,t.lanes=o,Ec(r,o)}}function zm(r,t){var o=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,o===n)){var i=null,s=null;if(o=o.firstBaseUpdate,o!==null){do{var a={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};s===null?i=s=a:s=s.next=a,o=o.next}while(o!==null);s===null?i=s=t:s=s.next=t}else i=s=t;o={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=t:r.next=t,o.lastBaseUpdate=t}function Fa(r,t,o,n){var i=r.updateQueue;Uo=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,d=i.shared.pending;if(d!==null){i.shared.pending=null;var u=d,l=u.next;u.next=null,a===null?s=l:a.next=l,a=u;var f=r.alternate;f!==null&&(f=f.updateQueue,d=f.lastBaseUpdate,d!==a&&(d===null?f.firstBaseUpdate=l:d.next=l,f.lastBaseUpdate=u))}if(s!==null){var g=i.baseState;a=0,f=l=u=null,d=s;do{var y=d.lane,z=d.eventTime;if((n&y)===y){f!==null&&(f=f.next={eventTime:z,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var b=r,w=d;switch(y=t,z=o,w.tag){case 1:if(b=w.payload,typeof b=="function"){g=b.call(z,g,y);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=w.payload,y=typeof b=="function"?b.call(z,g,y):b,y==null)break e;g=Vr({},g,y);break e;case 2:Uo=!0}}d.callback!==null&&d.lane!==0&&(r.flags|=64,y=i.effects,y===null?i.effects=[d]:y.push(d))}else z={eventTime:z,lane:y,tag:d.tag,payload:d.payload,callback:d.callback,next:null},f===null?(l=f=z,u=g):f=f.next=z,a|=y;if(d=d.next,d===null){if(d=i.shared.pending,d===null)break;y=d,d=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(f===null&&(u=g),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Rn|=a,r.lanes=a,r.memoizedState=g}}function Em(r,t,o){if(r=t.effects,t.effects=null,r!==null)for(t=0;t<r.length;t++){var n=r[t],i=n.callback;if(i!==null){if(n.callback=null,n=o,typeof i!="function")throw Error(ze(191,i));i.call(n)}}}var As={},wo=un(As),xs=un(As),ys=un(As);function bn(r){if(r===As)throw Error(ze(174));return r}function Gc(r,t){switch(Rr(ys,t),Rr(xs,r),Rr(wo,As),r=t.nodeType,r){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Sd(null,"");break;default:r=r===8?t.parentNode:t,t=r.namespaceURI||null,r=r.tagName,t=Sd(t,r)}Mr(wo),Rr(wo,t)}function hi(){Mr(wo),Mr(xs),Mr(ys)}function Z0(r){bn(ys.current);var t=bn(wo.current),o=Sd(t,r.type);t!==o&&(Rr(xs,r),Rr(wo,o))}function Hc(r){xs.current===r&&(Mr(wo),Mr(xs))}var $r=un(0);function $a(r){for(var t=r;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Jl=[];function Vc(){for(var r=0;r<Jl.length;r++)Jl[r]._workInProgressVersionPrimary=null;Jl.length=0}var ha=Oo.ReactCurrentDispatcher,Zl=Oo.ReactCurrentBatchConfig,En=0,Hr=null,ot=null,lt=null,Ua=!1,rs=!1,bs=0,by=0;function ht(){throw Error(ze(321))}function qc(r,t){if(t===null)return!1;for(var o=0;o<t.length&&o<r.length;o++)if(!po(r[o],t[o]))return!1;return!0}function Yc(r,t,o,n,i,s){if(En=s,Hr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ha.current=r===null||r.memoizedState===null?Sy:wy,r=o(n,i),rs){s=0;do{if(rs=!1,bs=0,25<=s)throw Error(ze(301));s+=1,lt=ot=null,t.updateQueue=null,ha.current=ky,r=o(n,i)}while(rs)}if(ha.current=Ga,t=ot!==null&&ot.next!==null,En=0,lt=ot=Hr=null,Ua=!1,t)throw Error(ze(300));return r}function Kc(){var r=bs!==0;return bs=0,r}function vo(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?Hr.memoizedState=lt=r:lt=lt.next=r,lt}function eo(){if(ot===null){var r=Hr.alternate;r=r!==null?r.memoizedState:null}else r=ot.next;var t=lt===null?Hr.memoizedState:lt.next;if(t!==null)lt=t,ot=r;else{if(r===null)throw Error(ze(310));ot=r,r={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},lt===null?Hr.memoizedState=lt=r:lt=lt.next=r}return lt}function vs(r,t){return typeof t=="function"?t(r):t}function ed(r){var t=eo(),o=t.queue;if(o===null)throw Error(ze(311));o.lastRenderedReducer=r;var n=ot,i=n.baseQueue,s=o.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,o.pending=null}if(i!==null){s=i.next,n=n.baseState;var d=a=null,u=null,l=s;do{var f=l.lane;if((En&f)===f)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:r(n,l.action);else{var g={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(d=u=g,a=n):u=u.next=g,Hr.lanes|=f,Rn|=f}l=l.next}while(l!==null&&l!==s);u===null?a=n:u.next=d,po(n,t.memoizedState)||(Pt=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=u,o.lastRenderedState=n}if(r=o.interleaved,r!==null){i=r;do s=i.lane,Hr.lanes|=s,Rn|=s,i=i.next;while(i!==r)}else i===null&&(o.lanes=0);return[t.memoizedState,o.dispatch]}function rd(r){var t=eo(),o=t.queue;if(o===null)throw Error(ze(311));o.lastRenderedReducer=r;var n=o.dispatch,i=o.pending,s=t.memoizedState;if(i!==null){o.pending=null;var a=i=i.next;do s=r(s,a.action),a=a.next;while(a!==i);po(s,t.memoizedState)||(Pt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),o.lastRenderedState=s}return[s,n]}function ef(){}function rf(r,t){var o=Hr,n=eo(),i=t(),s=!po(n.memoizedState,i);if(s&&(n.memoizedState=i,Pt=!0),n=n.queue,Qc(nf.bind(null,o,n,r),[r]),n.getSnapshot!==t||s||lt!==null&&lt.memoizedState.tag&1){if(o.flags|=2048,js(9,of.bind(null,o,n,i,t),void 0,null),ct===null)throw Error(ze(349));En&30||tf(o,t,i)}return i}function tf(r,t,o){r.flags|=16384,r={getSnapshot:t,value:o},t=Hr.updateQueue,t===null?(t={lastEffect:null,stores:null},Hr.updateQueue=t,t.stores=[r]):(o=t.stores,o===null?t.stores=[r]:o.push(r))}function of(r,t,o,n){t.value=o,t.getSnapshot=n,sf(t)&&af(r)}function nf(r,t,o){return o(function(){sf(t)&&af(r)})}function sf(r){var t=r.getSnapshot;r=r.value;try{var o=t();return!po(r,o)}catch{return!0}}function af(r){var t=Do(r,1);t!==null&&uo(t,r,1,-1)}function Rm(r){var t=vo();return typeof r=="function"&&(r=r()),t.memoizedState=t.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:r},t.queue=r,r=r.dispatch=Cy.bind(null,Hr,r),[t.memoizedState,r]}function js(r,t,o,n){return r={tag:r,create:t,destroy:o,deps:n,next:null},t=Hr.updateQueue,t===null?(t={lastEffect:null,stores:null},Hr.updateQueue=t,t.lastEffect=r.next=r):(o=t.lastEffect,o===null?t.lastEffect=r.next=r:(n=o.next,o.next=r,r.next=n,t.lastEffect=r)),r}function lf(){return eo().memoizedState}function xa(r,t,o,n){var i=vo();Hr.flags|=r,i.memoizedState=js(1|t,o,void 0,n===void 0?null:n)}function dl(r,t,o,n){var i=eo();n=n===void 0?null:n;var s=void 0;if(ot!==null){var a=ot.memoizedState;if(s=a.destroy,n!==null&&qc(n,a.deps)){i.memoizedState=js(t,o,s,n);return}}Hr.flags|=r,i.memoizedState=js(1|t,o,s,n)}function Am(r,t){return xa(8390656,8,r,t)}function Qc(r,t){return dl(2048,8,r,t)}function df(r,t){return dl(4,2,r,t)}function cf(r,t){return dl(4,4,r,t)}function uf(r,t){if(typeof t=="function")return r=r(),t(r),function(){t(null)};if(t!=null)return r=r(),t.current=r,function(){t.current=null}}function mf(r,t,o){return o=o!=null?o.concat([r]):null,dl(4,4,uf.bind(null,t,r),o)}function Xc(){}function pf(r,t){var o=eo();t=t===void 0?null:t;var n=o.memoizedState;return n!==null&&t!==null&&qc(t,n[1])?n[0]:(o.memoizedState=[r,t],r)}function ff(r,t){var o=eo();t=t===void 0?null:t;var n=o.memoizedState;return n!==null&&t!==null&&qc(t,n[1])?n[0]:(r=r(),o.memoizedState=[r,t],r)}function gf(r,t,o){return En&21?(po(o,t)||(o=b0(),Hr.lanes|=o,Rn|=o,r.baseState=!0),t):(r.baseState&&(r.baseState=!1,Pt=!0),r.memoizedState=o)}function vy(r,t){var o=br;br=o!==0&&4>o?o:4,r(!0);var n=Zl.transition;Zl.transition={};try{r(!1),t()}finally{br=o,Zl.transition=n}}function hf(){return eo().memoizedState}function jy(r,t,o){var n=tn(r);if(o={lane:n,action:o,hasEagerState:!1,eagerState:null,next:null},xf(r))yf(t,o);else if(o=X0(r,t,o,n),o!==null){var i=Et();uo(o,r,n,i),bf(o,t,n)}}function Cy(r,t,o){var n=tn(r),i={lane:n,action:o,hasEagerState:!1,eagerState:null,next:null};if(xf(r))yf(t,i);else{var s=r.alternate;if(r.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,d=s(a,o);if(i.hasEagerState=!0,i.eagerState=d,po(d,a)){var u=t.interleaved;u===null?(i.next=i,$c(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}o=X0(r,t,i,n),o!==null&&(i=Et(),uo(o,r,n,i),bf(o,t,n))}}function xf(r){var t=r.alternate;return r===Hr||t!==null&&t===Hr}function yf(r,t){rs=Ua=!0;var o=r.pending;o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t}function bf(r,t,o){if(o&4194240){var n=t.lanes;n&=r.pendingLanes,o|=n,t.lanes=o,Ec(r,o)}}var Ga={readContext:Zt,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},Sy={readContext:Zt,useCallback:function(r,t){return vo().memoizedState=[r,t===void 0?null:t],r},useContext:Zt,useEffect:Am,useImperativeHandle:function(r,t,o){return o=o!=null?o.concat([r]):null,xa(4194308,4,uf.bind(null,t,r),o)},useLayoutEffect:function(r,t){return xa(4194308,4,r,t)},useInsertionEffect:function(r,t){return xa(4,2,r,t)},useMemo:function(r,t){var o=vo();return t=t===void 0?null:t,r=r(),o.memoizedState=[r,t],r},useReducer:function(r,t,o){var n=vo();return t=o!==void 0?o(t):t,n.memoizedState=n.baseState=t,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:t},n.queue=r,r=r.dispatch=jy.bind(null,Hr,r),[n.memoizedState,r]},useRef:function(r){var t=vo();return r={current:r},t.memoizedState=r},useState:Rm,useDebugValue:Xc,useDeferredValue:function(r){return vo().memoizedState=r},useTransition:function(){var r=Rm(!1),t=r[0];return r=vy.bind(null,r[1]),vo().memoizedState=r,[t,r]},useMutableSource:function(){},useSyncExternalStore:function(r,t,o){var n=Hr,i=vo();if(Or){if(o===void 0)throw Error(ze(407));o=o()}else{if(o=t(),ct===null)throw Error(ze(349));En&30||tf(n,t,o)}i.memoizedState=o;var s={value:o,getSnapshot:t};return i.queue=s,Am(nf.bind(null,n,s,r),[r]),n.flags|=2048,js(9,of.bind(null,n,s,o,t),void 0,null),o},useId:function(){var r=vo(),t=ct.identifierPrefix;if(Or){var o=Wo,n=Io;o=(n&~(1<<32-co(n)-1)).toString(32)+o,t=":"+t+"R"+o,o=bs++,0<o&&(t+="H"+o.toString(32)),t+=":"}else o=by++,t=":"+t+"r"+o.toString(32)+":";return r.memoizedState=t},unstable_isNewReconciler:!1},wy={readContext:Zt,useCallback:pf,useContext:Zt,useEffect:Qc,useImperativeHandle:mf,useInsertionEffect:df,useLayoutEffect:cf,useMemo:ff,useReducer:ed,useRef:lf,useState:function(){return ed(vs)},useDebugValue:Xc,useDeferredValue:function(r){var t=eo();return gf(t,ot.memoizedState,r)},useTransition:function(){var r=ed(vs)[0],t=eo().memoizedState;return[r,t]},useMutableSource:ef,useSyncExternalStore:rf,useId:hf,unstable_isNewReconciler:!1},ky={readContext:Zt,useCallback:pf,useContext:Zt,useEffect:Qc,useImperativeHandle:mf,useInsertionEffect:df,useLayoutEffect:cf,useMemo:ff,useReducer:rd,useRef:lf,useState:function(){return rd(vs)},useDebugValue:Xc,useDeferredValue:function(r){var t=eo();return ot===null?t.memoizedState=r:gf(t,ot.memoizedState,r)},useTransition:function(){var r=rd(vs)[0],t=eo().memoizedState;return[r,t]},useMutableSource:ef,useSyncExternalStore:rf,useId:hf,unstable_isNewReconciler:!1};function oo(r,t){if(r&&r.defaultProps){t=Vr({},t),r=r.defaultProps;for(var o in r)t[o]===void 0&&(t[o]=r[o]);return t}return t}function Gd(r,t,o,n){t=r.memoizedState,o=o(n,t),o=o==null?t:Vr({},t,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var cl={isMounted:function(r){return(r=r._reactInternals)?Pn(r)===r:!1},enqueueSetState:function(r,t,o){r=r._reactInternals;var n=Et(),i=tn(r),s=Mo(n,i);s.payload=t,o!=null&&(s.callback=o),t=en(r,s,i),t!==null&&(uo(t,r,i,n),ga(t,r,i))},enqueueReplaceState:function(r,t,o){r=r._reactInternals;var n=Et(),i=tn(r),s=Mo(n,i);s.tag=1,s.payload=t,o!=null&&(s.callback=o),t=en(r,s,i),t!==null&&(uo(t,r,i,n),ga(t,r,i))},enqueueForceUpdate:function(r,t){r=r._reactInternals;var o=Et(),n=tn(r),i=Mo(o,n);i.tag=2,t!=null&&(i.callback=t),t=en(r,i,n),t!==null&&(uo(t,r,n,o),ga(t,r,n))}};function Im(r,t,o,n,i,s,a){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,s,a):t.prototype&&t.prototype.isPureReactComponent?!ps(o,n)||!ps(i,s):!0}function vf(r,t,o){var n=!1,i=ln,s=t.contextType;return typeof s=="object"&&s!==null?s=Zt(s):(i=Dt(t)?_n:Ct.current,n=t.contextTypes,s=(n=n!=null)?pi(r,i):ln),t=new t(o,s),r.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=cl,r.stateNode=t,t._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=s),t}function Wm(r,t,o,n){r=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,n),t.state!==r&&cl.enqueueReplaceState(t,t.state,null)}function Hd(r,t,o,n){var i=r.stateNode;i.props=o,i.state=r.memoizedState,i.refs={},Uc(r);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Zt(s):(s=Dt(t)?_n:Ct.current,i.context=pi(r,s)),i.state=r.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Gd(r,t,s,o),i.state=r.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&cl.enqueueReplaceState(i,i.state,null),Fa(r,o,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function xi(r,t){try{var o="",n=t;do o+=Zh(n),n=n.return;while(n);var i=o}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:r,source:t,stack:i,digest:null}}function td(r,t,o){return{value:r,source:null,stack:o??null,digest:t??null}}function Vd(r,t){try{console.error(t.value)}catch(o){setTimeout(function(){throw o})}}var _y=typeof WeakMap=="function"?WeakMap:Map;function jf(r,t,o){o=Mo(-1,o),o.tag=3,o.payload={element:null};var n=t.value;return o.callback=function(){Va||(Va=!0,tc=n),Vd(r,t)},o}function Cf(r,t,o){o=Mo(-1,o),o.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;o.payload=function(){return n(i)},o.callback=function(){Vd(r,t)}}var s=r.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(o.callback=function(){Vd(r,t),typeof n!="function"&&(rn===null?rn=new Set([this]):rn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),o}function Tm(r,t,o){var n=r.pingCache;if(n===null){n=r.pingCache=new _y;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(o)||(i.add(o),r=Ly.bind(null,r,t,o),t.then(r,r))}function Mm(r){do{var t;if((t=r.tag===13)&&(t=r.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return r;r=r.return}while(r!==null);return null}function Pm(r,t,o,n,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===t?r.flags|=65536:(r.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(t=Mo(-1,1),t.tag=2,en(o,t,1))),o.lanes|=1),r)}var zy=Oo.ReactCurrentOwner,Pt=!1;function kt(r,t,o,n){t.child=r===null?Q0(t,null,o,n):gi(t,r.child,o,n)}function Nm(r,t,o,n,i){o=o.render;var s=t.ref;return li(t,i),n=Yc(r,t,o,n,s,i),o=Kc(),r!==null&&!Pt?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~i,Bo(r,t,i)):(Or&&o&&Nc(t),t.flags|=1,kt(r,t,n,i),t.child)}function Dm(r,t,o,n,i){if(r===null){var s=o.type;return typeof s=="function"&&!iu(s)&&s.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(t.tag=15,t.type=s,Sf(r,t,s,n,i)):(r=ja(o.type,null,n,t,t.mode,i),r.ref=t.ref,r.return=t,t.child=r)}if(s=r.child,!(r.lanes&i)){var a=s.memoizedProps;if(o=o.compare,o=o!==null?o:ps,o(a,n)&&r.ref===t.ref)return Bo(r,t,i)}return t.flags|=1,r=on(s,n),r.ref=t.ref,r.return=t,t.child=r}function Sf(r,t,o,n,i){if(r!==null){var s=r.memoizedProps;if(ps(s,n)&&r.ref===t.ref)if(Pt=!1,t.pendingProps=n=s,(r.lanes&i)!==0)r.flags&131072&&(Pt=!0);else return t.lanes=r.lanes,Bo(r,t,i)}return qd(r,t,o,n,i)}function wf(r,t,o){var n=t.pendingProps,i=n.children,s=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rr(ti,Ft),Ft|=o;else{if(!(o&1073741824))return r=s!==null?s.baseLanes|o:o,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:r,cachePool:null,transitions:null},t.updateQueue=null,Rr(ti,Ft),Ft|=r,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:o,Rr(ti,Ft),Ft|=n}else s!==null?(n=s.baseLanes|o,t.memoizedState=null):n=o,Rr(ti,Ft),Ft|=n;return kt(r,t,i,o),t.child}function kf(r,t){var o=t.ref;(r===null&&o!==null||r!==null&&r.ref!==o)&&(t.flags|=512,t.flags|=2097152)}function qd(r,t,o,n,i){var s=Dt(o)?_n:Ct.current;return s=pi(t,s),li(t,i),o=Yc(r,t,o,n,s,i),n=Kc(),r!==null&&!Pt?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~i,Bo(r,t,i)):(Or&&n&&Nc(t),t.flags|=1,kt(r,t,o,i),t.child)}function Bm(r,t,o,n,i){if(Dt(o)){var s=!0;Na(t)}else s=!1;if(li(t,i),t.stateNode===null)ya(r,t),vf(t,o,n),Hd(t,o,n,i),n=!0;else if(r===null){var a=t.stateNode,d=t.memoizedProps;a.props=d;var u=a.context,l=o.contextType;typeof l=="object"&&l!==null?l=Zt(l):(l=Dt(o)?_n:Ct.current,l=pi(t,l));var f=o.getDerivedStateFromProps,g=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(d!==n||u!==l)&&Wm(t,a,n,l),Uo=!1;var y=t.memoizedState;a.state=y,Fa(t,n,a,i),u=t.memoizedState,d!==n||y!==u||Nt.current||Uo?(typeof f=="function"&&(Gd(t,o,f,n),u=t.memoizedState),(d=Uo||Im(t,o,d,n,y,u,l))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),a.props=n,a.state=u,a.context=l,n=d):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,J0(r,t),d=t.memoizedProps,l=t.type===t.elementType?d:oo(t.type,d),a.props=l,g=t.pendingProps,y=a.context,u=o.contextType,typeof u=="object"&&u!==null?u=Zt(u):(u=Dt(o)?_n:Ct.current,u=pi(t,u));var z=o.getDerivedStateFromProps;(f=typeof z=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(d!==g||y!==u)&&Wm(t,a,n,u),Uo=!1,y=t.memoizedState,a.state=y,Fa(t,n,a,i);var b=t.memoizedState;d!==g||y!==b||Nt.current||Uo?(typeof z=="function"&&(Gd(t,o,z,n),b=t.memoizedState),(l=Uo||Im(t,o,l,n,y,b,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,b,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,b,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||d===r.memoizedProps&&y===r.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||d===r.memoizedProps&&y===r.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),a.props=n,a.state=b,a.context=u,n=l):(typeof a.componentDidUpdate!="function"||d===r.memoizedProps&&y===r.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||d===r.memoizedProps&&y===r.memoizedState||(t.flags|=1024),n=!1)}return Yd(r,t,o,n,s,i)}function Yd(r,t,o,n,i,s){kf(r,t);var a=(t.flags&128)!==0;if(!n&&!a)return i&&Sm(t,o,!1),Bo(r,t,s);n=t.stateNode,zy.current=t;var d=a&&typeof o.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,r!==null&&a?(t.child=gi(t,r.child,null,s),t.child=gi(t,null,d,s)):kt(r,t,d,s),t.memoizedState=n.state,i&&Sm(t,o,!0),t.child}function _f(r){var t=r.stateNode;t.pendingContext?Cm(r,t.pendingContext,t.pendingContext!==t.context):t.context&&Cm(r,t.context,!1),Gc(r,t.containerInfo)}function Om(r,t,o,n,i){return fi(),Bc(i),t.flags|=256,kt(r,t,o,n),t.child}var Kd={dehydrated:null,treeContext:null,retryLane:0};function Qd(r){return{baseLanes:r,cachePool:null,transitions:null}}function zf(r,t,o){var n=t.pendingProps,i=$r.current,s=!1,a=(t.flags&128)!==0,d;if((d=a)||(d=r!==null&&r.memoizedState===null?!1:(i&2)!==0),d?(s=!0,t.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),Rr($r,i&1),r===null)return $d(t),r=t.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(t.mode&1?r.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,r=n.fallback,s?(n=t.mode,s=t.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=pl(a,n,0,null),r=wn(r,n,o,null),s.return=t,r.return=t,s.sibling=r,t.child=s,t.child.memoizedState=Qd(o),t.memoizedState=Kd,r):Jc(t,a));if(i=r.memoizedState,i!==null&&(d=i.dehydrated,d!==null))return Ey(r,t,a,n,d,i,o);if(s){s=n.fallback,a=t.mode,i=r.child,d=i.sibling;var u={mode:"hidden",children:n.children};return!(a&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=u,t.deletions=null):(n=on(i,u),n.subtreeFlags=i.subtreeFlags&14680064),d!==null?s=on(d,s):(s=wn(s,a,o,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,a=r.child.memoizedState,a=a===null?Qd(o):{baseLanes:a.baseLanes|o,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=r.childLanes&~o,t.memoizedState=Kd,n}return s=r.child,r=s.sibling,n=on(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=o),n.return=t,n.sibling=null,r!==null&&(o=t.deletions,o===null?(t.deletions=[r],t.flags|=16):o.push(r)),t.child=n,t.memoizedState=null,n}function Jc(r,t){return t=pl({mode:"visible",children:t},r.mode,0,null),t.return=r,r.child=t}function ra(r,t,o,n){return n!==null&&Bc(n),gi(t,r.child,null,o),r=Jc(t,t.pendingProps.children),r.flags|=2,t.memoizedState=null,r}function Ey(r,t,o,n,i,s,a){if(o)return t.flags&256?(t.flags&=-257,n=td(Error(ze(422))),ra(r,t,a,n)):t.memoizedState!==null?(t.child=r.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=pl({mode:"visible",children:n.children},i,0,null),s=wn(s,i,a,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&gi(t,r.child,null,a),t.child.memoizedState=Qd(a),t.memoizedState=Kd,s);if(!(t.mode&1))return ra(r,t,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var d=n.dgst;return n=d,s=Error(ze(419)),n=td(s,n,void 0),ra(r,t,a,n)}if(d=(a&r.childLanes)!==0,Pt||d){if(n=ct,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Do(r,i),uo(n,r,i,-1))}return nu(),n=td(Error(ze(421))),ra(r,t,a,n)}return i.data==="$?"?(t.flags|=128,t.child=r.child,t=Fy.bind(null,r),i._reactRetry=t,null):(r=s.treeContext,$t=Zo(i.nextSibling),Ut=t,Or=!0,ao=null,r!==null&&(Yt[Kt++]=Io,Yt[Kt++]=Wo,Yt[Kt++]=zn,Io=r.id,Wo=r.overflow,zn=t),t=Jc(t,n.children),t.flags|=4096,t)}function Lm(r,t,o){r.lanes|=t;var n=r.alternate;n!==null&&(n.lanes|=t),Ud(r.return,t,o)}function od(r,t,o,n,i){var s=r.memoizedState;s===null?r.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:o,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=o,s.tailMode=i)}function Ef(r,t,o){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(kt(r,t,n.children,o),n=$r.current,n&2)n=n&1|2,t.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=t.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Lm(r,o,t);else if(r.tag===19)Lm(r,o,t);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(Rr($r,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(o=t.child,i=null;o!==null;)r=o.alternate,r!==null&&$a(r)===null&&(i=o),o=o.sibling;o=i,o===null?(i=t.child,t.child=null):(i=o.sibling,o.sibling=null),od(t,!1,i,o,s);break;case"backwards":for(o=null,i=t.child,t.child=null;i!==null;){if(r=i.alternate,r!==null&&$a(r)===null){t.child=i;break}r=i.sibling,i.sibling=o,o=i,i=r}od(t,!0,o,null,s);break;case"together":od(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ya(r,t){!(t.mode&1)&&r!==null&&(r.alternate=null,t.alternate=null,t.flags|=2)}function Bo(r,t,o){if(r!==null&&(t.dependencies=r.dependencies),Rn|=t.lanes,!(o&t.childLanes))return null;if(r!==null&&t.child!==r.child)throw Error(ze(153));if(t.child!==null){for(r=t.child,o=on(r,r.pendingProps),t.child=o,o.return=t;r.sibling!==null;)r=r.sibling,o=o.sibling=on(r,r.pendingProps),o.return=t;o.sibling=null}return t.child}function Ry(r,t,o){switch(t.tag){case 3:_f(t),fi();break;case 5:Z0(t);break;case 1:Dt(t.type)&&Na(t);break;case 4:Gc(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Rr(Oa,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Rr($r,$r.current&1),t.flags|=128,null):o&t.child.childLanes?zf(r,t,o):(Rr($r,$r.current&1),r=Bo(r,t,o),r!==null?r.sibling:null);Rr($r,$r.current&1);break;case 19:if(n=(o&t.childLanes)!==0,r.flags&128){if(n)return Ef(r,t,o);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Rr($r,$r.current),n)break;return null;case 22:case 23:return t.lanes=0,wf(r,t,o)}return Bo(r,t,o)}var Rf,Xd,Af,If;Rf=function(r,t){for(var o=t.child;o!==null;){if(o.tag===5||o.tag===6)r.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Xd=function(){};Af=function(r,t,o,n){var i=r.memoizedProps;if(i!==n){r=t.stateNode,bn(wo.current);var s=null;switch(o){case"input":i=bd(r,i),n=bd(r,n),s=[];break;case"select":i=Vr({},i,{value:void 0}),n=Vr({},n,{value:void 0}),s=[];break;case"textarea":i=Cd(r,i),n=Cd(r,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=Ma)}wd(o,n);var a;o=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var d=i[l];for(a in d)d.hasOwnProperty(a)&&(o||(o={}),o[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ss.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in n){var u=n[l];if(d=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&u!==d&&(u!=null||d!=null))if(l==="style")if(d){for(a in d)!d.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(o||(o={}),o[a]="");for(a in u)u.hasOwnProperty(a)&&d[a]!==u[a]&&(o||(o={}),o[a]=u[a])}else o||(s||(s=[]),s.push(l,o)),o=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,d=d?d.__html:void 0,u!=null&&d!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(ss.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Wr("scroll",r),s||d===u||(s=[])):(s=s||[]).push(l,u))}o&&(s=s||[]).push("style",o);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};If=function(r,t,o,n){o!==n&&(t.flags|=4)};function Oi(r,t){if(!Or)switch(r.tailMode){case"hidden":t=r.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var n=null;o!==null;)o.alternate!==null&&(n=o),o=o.sibling;n===null?t||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function xt(r){var t=r.alternate!==null&&r.alternate.child===r.child,o=0,n=0;if(t)for(var i=r.child;i!==null;)o|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)o|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=o,t}function Ay(r,t,o){var n=t.pendingProps;switch(Dc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(t),null;case 1:return Dt(t.type)&&Pa(),xt(t),null;case 3:return n=t.stateNode,hi(),Mr(Nt),Mr(Ct),Vc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(Zs(t)?t.flags|=4:r===null||r.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ao!==null&&(ic(ao),ao=null))),Xd(r,t),xt(t),null;case 5:Hc(t);var i=bn(ys.current);if(o=t.type,r!==null&&t.stateNode!=null)Af(r,t,o,n,i),r.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ze(166));return xt(t),null}if(r=bn(wo.current),Zs(t)){n=t.stateNode,o=t.type;var s=t.memoizedProps;switch(n[Co]=t,n[hs]=s,r=(t.mode&1)!==0,o){case"dialog":Wr("cancel",n),Wr("close",n);break;case"iframe":case"object":case"embed":Wr("load",n);break;case"video":case"audio":for(i=0;i<qi.length;i++)Wr(qi[i],n);break;case"source":Wr("error",n);break;case"img":case"image":case"link":Wr("error",n),Wr("load",n);break;case"details":Wr("toggle",n);break;case"input":Ku(n,s),Wr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Wr("invalid",n);break;case"textarea":Xu(n,s),Wr("invalid",n)}wd(o,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var d=s[a];a==="children"?typeof d=="string"?n.textContent!==d&&(s.suppressHydrationWarning!==!0&&Js(n.textContent,d,r),i=["children",d]):typeof d=="number"&&n.textContent!==""+d&&(s.suppressHydrationWarning!==!0&&Js(n.textContent,d,r),i=["children",""+d]):ss.hasOwnProperty(a)&&d!=null&&a==="onScroll"&&Wr("scroll",n)}switch(o){case"input":Gs(n),Qu(n,s,!0);break;case"textarea":Gs(n),Ju(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Ma)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=n0(o)),r==="http://www.w3.org/1999/xhtml"?o==="script"?(r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=a.createElement(o,{is:n.is}):(r=a.createElement(o),o==="select"&&(a=r,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):r=a.createElementNS(r,o),r[Co]=t,r[hs]=n,Rf(r,t,!1,!1),t.stateNode=r;e:{switch(a=kd(o,n),o){case"dialog":Wr("cancel",r),Wr("close",r),i=n;break;case"iframe":case"object":case"embed":Wr("load",r),i=n;break;case"video":case"audio":for(i=0;i<qi.length;i++)Wr(qi[i],r);i=n;break;case"source":Wr("error",r),i=n;break;case"img":case"image":case"link":Wr("error",r),Wr("load",r),i=n;break;case"details":Wr("toggle",r),i=n;break;case"input":Ku(r,n),i=bd(r,n),Wr("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=Vr({},n,{value:void 0}),Wr("invalid",r);break;case"textarea":Xu(r,n),i=Cd(r,n),Wr("invalid",r);break;default:i=n}wd(o,i),d=i;for(s in d)if(d.hasOwnProperty(s)){var u=d[s];s==="style"?a0(r,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&i0(r,u)):s==="children"?typeof u=="string"?(o!=="textarea"||u!=="")&&as(r,u):typeof u=="number"&&as(r,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ss.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Wr("scroll",r):u!=null&&Cc(r,s,u,a))}switch(o){case"input":Gs(r),Qu(r,n,!1);break;case"textarea":Gs(r),Ju(r);break;case"option":n.value!=null&&r.setAttribute("value",""+an(n.value));break;case"select":r.multiple=!!n.multiple,s=n.value,s!=null?ni(r,!!n.multiple,s,!1):n.defaultValue!=null&&ni(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=Ma)}switch(o){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xt(t),null;case 6:if(r&&t.stateNode!=null)If(r,t,r.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ze(166));if(o=bn(ys.current),bn(wo.current),Zs(t)){if(n=t.stateNode,o=t.memoizedProps,n[Co]=t,(s=n.nodeValue!==o)&&(r=Ut,r!==null))switch(r.tag){case 3:Js(n.nodeValue,o,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Js(n.nodeValue,o,(r.mode&1)!==0)}s&&(t.flags|=4)}else n=(o.nodeType===9?o:o.ownerDocument).createTextNode(n),n[Co]=t,t.stateNode=n}return xt(t),null;case 13:if(Mr($r),n=t.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Or&&$t!==null&&t.mode&1&&!(t.flags&128))Y0(),fi(),t.flags|=98560,s=!1;else if(s=Zs(t),n!==null&&n.dehydrated!==null){if(r===null){if(!s)throw Error(ze(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ze(317));s[Co]=t}else fi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;xt(t),s=!1}else ao!==null&&(ic(ao),ao=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=o,t):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(r===null||$r.current&1?nt===0&&(nt=3):nu())),t.updateQueue!==null&&(t.flags|=4),xt(t),null);case 4:return hi(),Xd(r,t),r===null&&fs(t.stateNode.containerInfo),xt(t),null;case 10:return Fc(t.type._context),xt(t),null;case 17:return Dt(t.type)&&Pa(),xt(t),null;case 19:if(Mr($r),s=t.memoizedState,s===null)return xt(t),null;if(n=(t.flags&128)!==0,a=s.rendering,a===null)if(n)Oi(s,!1);else{if(nt!==0||r!==null&&r.flags&128)for(r=t.child;r!==null;){if(a=$a(r),a!==null){for(t.flags|=128,Oi(s,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=o,o=t.child;o!==null;)s=o,r=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,r=a.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),o=o.sibling;return Rr($r,$r.current&1|2),t.child}r=r.sibling}s.tail!==null&&Qr()>yi&&(t.flags|=128,n=!0,Oi(s,!1),t.lanes=4194304)}else{if(!n)if(r=$a(a),r!==null){if(t.flags|=128,n=!0,o=r.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),Oi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Or)return xt(t),null}else 2*Qr()-s.renderingStartTime>yi&&o!==1073741824&&(t.flags|=128,n=!0,Oi(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(o=s.last,o!==null?o.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qr(),t.sibling=null,o=$r.current,Rr($r,n?o&1|2:o&1),t):(xt(t),null);case 22:case 23:return ou(),n=t.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ft&1073741824&&(xt(t),t.subtreeFlags&6&&(t.flags|=8192)):xt(t),null;case 24:return null;case 25:return null}throw Error(ze(156,t.tag))}function Iy(r,t){switch(Dc(t),t.tag){case 1:return Dt(t.type)&&Pa(),r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 3:return hi(),Mr(Nt),Mr(Ct),Vc(),r=t.flags,r&65536&&!(r&128)?(t.flags=r&-65537|128,t):null;case 5:return Hc(t),null;case 13:if(Mr($r),r=t.memoizedState,r!==null&&r.dehydrated!==null){if(t.alternate===null)throw Error(ze(340));fi()}return r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 19:return Mr($r),null;case 4:return hi(),null;case 10:return Fc(t.type._context),null;case 22:case 23:return ou(),null;case 24:return null;default:return null}}var ta=!1,bt=!1,Wy=typeof WeakSet=="function"?WeakSet:Set,$e=null;function ri(r,t){var o=r.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(n){qr(r,t,n)}else o.current=null}function Jd(r,t,o){try{o()}catch(n){qr(r,t,n)}}var Fm=!1;function Ty(r,t){if(Pd=Ia,r=P0(),Pc(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var n=o.getSelection&&o.getSelection();if(n&&n.rangeCount!==0){o=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{o.nodeType,s.nodeType}catch{o=null;break e}var a=0,d=-1,u=-1,l=0,f=0,g=r,y=null;r:for(;;){for(var z;g!==o||i!==0&&g.nodeType!==3||(d=a+i),g!==s||n!==0&&g.nodeType!==3||(u=a+n),g.nodeType===3&&(a+=g.nodeValue.length),(z=g.firstChild)!==null;)y=g,g=z;for(;;){if(g===r)break r;if(y===o&&++l===i&&(d=a),y===s&&++f===n&&(u=a),(z=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=z}o=d===-1||u===-1?null:{start:d,end:u}}else o=null}o=o||{start:0,end:0}}else o=null;for(Nd={focusedElem:r,selectionRange:o},Ia=!1,$e=t;$e!==null;)if(t=$e,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,$e=r;else for(;$e!==null;){t=$e;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var w=b.memoizedProps,k=b.memoizedState,j=t.stateNode,p=j.getSnapshotBeforeUpdate(t.elementType===t.type?w:oo(t.type,w),k);j.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ze(163))}}catch(S){qr(t,t.return,S)}if(r=t.sibling,r!==null){r.return=t.return,$e=r;break}$e=t.return}return b=Fm,Fm=!1,b}function ts(r,t,o){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var s=i.destroy;i.destroy=void 0,s!==void 0&&Jd(t,o,s)}i=i.next}while(i!==n)}}function ul(r,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var o=t=t.next;do{if((o.tag&r)===r){var n=o.create;o.destroy=n()}o=o.next}while(o!==t)}}function Zd(r){var t=r.ref;if(t!==null){var o=r.stateNode;switch(r.tag){case 5:r=o;break;default:r=o}typeof t=="function"?t(r):t.current=r}}function Wf(r){var t=r.alternate;t!==null&&(r.alternate=null,Wf(t)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(t=r.stateNode,t!==null&&(delete t[Co],delete t[hs],delete t[Od],delete t[gy],delete t[hy])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Tf(r){return r.tag===5||r.tag===3||r.tag===4}function $m(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Tf(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ec(r,t,o){var n=r.tag;if(n===5||n===6)r=r.stateNode,t?o.nodeType===8?o.parentNode.insertBefore(r,t):o.insertBefore(r,t):(o.nodeType===8?(t=o.parentNode,t.insertBefore(r,o)):(t=o,t.appendChild(r)),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=Ma));else if(n!==4&&(r=r.child,r!==null))for(ec(r,t,o),r=r.sibling;r!==null;)ec(r,t,o),r=r.sibling}function rc(r,t,o){var n=r.tag;if(n===5||n===6)r=r.stateNode,t?o.insertBefore(r,t):o.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(rc(r,t,o),r=r.sibling;r!==null;)rc(r,t,o),r=r.sibling}var mt=null,io=!1;function Fo(r,t,o){for(o=o.child;o!==null;)Mf(r,t,o),o=o.sibling}function Mf(r,t,o){if(So&&typeof So.onCommitFiberUnmount=="function")try{So.onCommitFiberUnmount(ol,o)}catch{}switch(o.tag){case 5:bt||ri(o,t);case 6:var n=mt,i=io;mt=null,Fo(r,t,o),mt=n,io=i,mt!==null&&(io?(r=mt,o=o.stateNode,r.nodeType===8?r.parentNode.removeChild(o):r.removeChild(o)):mt.removeChild(o.stateNode));break;case 18:mt!==null&&(io?(r=mt,o=o.stateNode,r.nodeType===8?Ql(r.parentNode,o):r.nodeType===1&&Ql(r,o),us(r)):Ql(mt,o.stateNode));break;case 4:n=mt,i=io,mt=o.stateNode.containerInfo,io=!0,Fo(r,t,o),mt=n,io=i;break;case 0:case 11:case 14:case 15:if(!bt&&(n=o.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Jd(o,t,a),i=i.next}while(i!==n)}Fo(r,t,o);break;case 1:if(!bt&&(ri(o,t),n=o.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=o.memoizedProps,n.state=o.memoizedState,n.componentWillUnmount()}catch(d){qr(o,t,d)}Fo(r,t,o);break;case 21:Fo(r,t,o);break;case 22:o.mode&1?(bt=(n=bt)||o.memoizedState!==null,Fo(r,t,o),bt=n):Fo(r,t,o);break;default:Fo(r,t,o)}}function Um(r){var t=r.updateQueue;if(t!==null){r.updateQueue=null;var o=r.stateNode;o===null&&(o=r.stateNode=new Wy),t.forEach(function(n){var i=$y.bind(null,r,n);o.has(n)||(o.add(n),n.then(i,i))})}}function to(r,t){var o=t.deletions;if(o!==null)for(var n=0;n<o.length;n++){var i=o[n];try{var s=r,a=t,d=a;e:for(;d!==null;){switch(d.tag){case 5:mt=d.stateNode,io=!1;break e;case 3:mt=d.stateNode.containerInfo,io=!0;break e;case 4:mt=d.stateNode.containerInfo,io=!0;break e}d=d.return}if(mt===null)throw Error(ze(160));Mf(s,a,i),mt=null,io=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){qr(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Pf(t,r),t=t.sibling}function Pf(r,t){var o=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(to(t,r),yo(r),n&4){try{ts(3,r,r.return),ul(3,r)}catch(w){qr(r,r.return,w)}try{ts(5,r,r.return)}catch(w){qr(r,r.return,w)}}break;case 1:to(t,r),yo(r),n&512&&o!==null&&ri(o,o.return);break;case 5:if(to(t,r),yo(r),n&512&&o!==null&&ri(o,o.return),r.flags&32){var i=r.stateNode;try{as(i,"")}catch(w){qr(r,r.return,w)}}if(n&4&&(i=r.stateNode,i!=null)){var s=r.memoizedProps,a=o!==null?o.memoizedProps:s,d=r.type,u=r.updateQueue;if(r.updateQueue=null,u!==null)try{d==="input"&&s.type==="radio"&&s.name!=null&&t0(i,s),kd(d,a);var l=kd(d,s);for(a=0;a<u.length;a+=2){var f=u[a],g=u[a+1];f==="style"?a0(i,g):f==="dangerouslySetInnerHTML"?i0(i,g):f==="children"?as(i,g):Cc(i,f,g,l)}switch(d){case"input":vd(i,s);break;case"textarea":o0(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var z=s.value;z!=null?ni(i,!!s.multiple,z,!1):y!==!!s.multiple&&(s.defaultValue!=null?ni(i,!!s.multiple,s.defaultValue,!0):ni(i,!!s.multiple,s.multiple?[]:"",!1))}i[hs]=s}catch(w){qr(r,r.return,w)}}break;case 6:if(to(t,r),yo(r),n&4){if(r.stateNode===null)throw Error(ze(162));i=r.stateNode,s=r.memoizedProps;try{i.nodeValue=s}catch(w){qr(r,r.return,w)}}break;case 3:if(to(t,r),yo(r),n&4&&o!==null&&o.memoizedState.isDehydrated)try{us(t.containerInfo)}catch(w){qr(r,r.return,w)}break;case 4:to(t,r),yo(r);break;case 13:to(t,r),yo(r),i=r.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ru=Qr())),n&4&&Um(r);break;case 22:if(f=o!==null&&o.memoizedState!==null,r.mode&1?(bt=(l=bt)||f,to(t,r),bt=l):to(t,r),yo(r),n&8192){if(l=r.memoizedState!==null,(r.stateNode.isHidden=l)&&!f&&r.mode&1)for($e=r,f=r.child;f!==null;){for(g=$e=f;$e!==null;){switch(y=$e,z=y.child,y.tag){case 0:case 11:case 14:case 15:ts(4,y,y.return);break;case 1:ri(y,y.return);var b=y.stateNode;if(typeof b.componentWillUnmount=="function"){n=y,o=y.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(w){qr(n,o,w)}}break;case 5:ri(y,y.return);break;case 22:if(y.memoizedState!==null){Hm(g);continue}}z!==null?(z.return=y,$e=z):Hm(g)}f=f.sibling}e:for(f=null,g=r;;){if(g.tag===5){if(f===null){f=g;try{i=g.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(d=g.stateNode,u=g.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,d.style.display=s0("display",a))}catch(w){qr(r,r.return,w)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=l?"":g.memoizedProps}catch(w){qr(r,r.return,w)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===r)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===r)break e;for(;g.sibling===null;){if(g.return===null||g.return===r)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:to(t,r),yo(r),n&4&&Um(r);break;case 21:break;default:to(t,r),yo(r)}}function yo(r){var t=r.flags;if(t&2){try{e:{for(var o=r.return;o!==null;){if(Tf(o)){var n=o;break e}o=o.return}throw Error(ze(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(as(i,""),n.flags&=-33);var s=$m(r);rc(r,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,d=$m(r);ec(r,d,a);break;default:throw Error(ze(161))}}catch(u){qr(r,r.return,u)}r.flags&=-3}t&4096&&(r.flags&=-4097)}function My(r,t,o){$e=r,Nf(r)}function Nf(r,t,o){for(var n=(r.mode&1)!==0;$e!==null;){var i=$e,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||ta;if(!a){var d=i.alternate,u=d!==null&&d.memoizedState!==null||bt;d=ta;var l=bt;if(ta=a,(bt=u)&&!l)for($e=i;$e!==null;)a=$e,u=a.child,a.tag===22&&a.memoizedState!==null?Vm(i):u!==null?(u.return=a,$e=u):Vm(i);for(;s!==null;)$e=s,Nf(s),s=s.sibling;$e=i,ta=d,bt=l}Gm(r)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$e=s):Gm(r)}}function Gm(r){for(;$e!==null;){var t=$e;if(t.flags&8772){var o=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:bt||ul(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!bt)if(o===null)n.componentDidMount();else{var i=t.elementType===t.type?o.memoizedProps:oo(t.type,o.memoizedProps);n.componentDidUpdate(i,o.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Em(t,s,n);break;case 3:var a=t.updateQueue;if(a!==null){if(o=null,t.child!==null)switch(t.child.tag){case 5:o=t.child.stateNode;break;case 1:o=t.child.stateNode}Em(t,a,o)}break;case 5:var d=t.stateNode;if(o===null&&t.flags&4){o=d;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&o.focus();break;case"img":u.src&&(o.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var f=l.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&us(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ze(163))}bt||t.flags&512&&Zd(t)}catch(y){qr(t,t.return,y)}}if(t===r){$e=null;break}if(o=t.sibling,o!==null){o.return=t.return,$e=o;break}$e=t.return}}function Hm(r){for(;$e!==null;){var t=$e;if(t===r){$e=null;break}var o=t.sibling;if(o!==null){o.return=t.return,$e=o;break}$e=t.return}}function Vm(r){for(;$e!==null;){var t=$e;try{switch(t.tag){case 0:case 11:case 15:var o=t.return;try{ul(4,t)}catch(u){qr(t,o,u)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(u){qr(t,i,u)}}var s=t.return;try{Zd(t)}catch(u){qr(t,s,u)}break;case 5:var a=t.return;try{Zd(t)}catch(u){qr(t,a,u)}}}catch(u){qr(t,t.return,u)}if(t===r){$e=null;break}var d=t.sibling;if(d!==null){d.return=t.return,$e=d;break}$e=t.return}}var Py=Math.ceil,Ha=Oo.ReactCurrentDispatcher,Zc=Oo.ReactCurrentOwner,Xt=Oo.ReactCurrentBatchConfig,fr=0,ct=null,tt=null,pt=0,Ft=0,ti=un(0),nt=0,Cs=null,Rn=0,ml=0,eu=0,os=null,Mt=null,ru=0,yi=1/0,Ro=null,Va=!1,tc=null,rn=null,oa=!1,Yo=null,qa=0,ns=0,oc=null,ba=-1,va=0;function Et(){return fr&6?Qr():ba!==-1?ba:ba=Qr()}function tn(r){return r.mode&1?fr&2&&pt!==0?pt&-pt:yy.transition!==null?(va===0&&(va=b0()),va):(r=br,r!==0||(r=window.event,r=r===void 0?16:_0(r.type)),r):1}function uo(r,t,o,n){if(50<ns)throw ns=0,oc=null,Error(ze(185));zs(r,o,n),(!(fr&2)||r!==ct)&&(r===ct&&(!(fr&2)&&(ml|=o),nt===4&&Ho(r,pt)),Bt(r,n),o===1&&fr===0&&!(t.mode&1)&&(yi=Qr()+500,ll&&mn()))}function Bt(r,t){var o=r.callbackNode;yx(r,t);var n=Aa(r,r===ct?pt:0);if(n===0)o!==null&&rm(o),r.callbackNode=null,r.callbackPriority=0;else if(t=n&-n,r.callbackPriority!==t){if(o!=null&&rm(o),t===1)r.tag===0?xy(qm.bind(null,r)):H0(qm.bind(null,r)),py(function(){!(fr&6)&&mn()}),o=null;else{switch(v0(n)){case 1:o=zc;break;case 4:o=x0;break;case 16:o=Ra;break;case 536870912:o=y0;break;default:o=Ra}o=Gf(o,Df.bind(null,r))}r.callbackPriority=t,r.callbackNode=o}}function Df(r,t){if(ba=-1,va=0,fr&6)throw Error(ze(327));var o=r.callbackNode;if(di()&&r.callbackNode!==o)return null;var n=Aa(r,r===ct?pt:0);if(n===0)return null;if(n&30||n&r.expiredLanes||t)t=Ya(r,n);else{t=n;var i=fr;fr|=2;var s=Of();(ct!==r||pt!==t)&&(Ro=null,yi=Qr()+500,Sn(r,t));do try{By();break}catch(d){Bf(r,d)}while(!0);Lc(),Ha.current=s,fr=i,tt!==null?t=0:(ct=null,pt=0,t=nt)}if(t!==0){if(t===2&&(i=Ad(r),i!==0&&(n=i,t=nc(r,i))),t===1)throw o=Cs,Sn(r,0),Ho(r,n),Bt(r,Qr()),o;if(t===6)Ho(r,n);else{if(i=r.current.alternate,!(n&30)&&!Ny(i)&&(t=Ya(r,n),t===2&&(s=Ad(r),s!==0&&(n=s,t=nc(r,s))),t===1))throw o=Cs,Sn(r,0),Ho(r,n),Bt(r,Qr()),o;switch(r.finishedWork=i,r.finishedLanes=n,t){case 0:case 1:throw Error(ze(345));case 2:hn(r,Mt,Ro);break;case 3:if(Ho(r,n),(n&130023424)===n&&(t=ru+500-Qr(),10<t)){if(Aa(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){Et(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=Bd(hn.bind(null,r,Mt,Ro),t);break}hn(r,Mt,Ro);break;case 4:if(Ho(r,n),(n&4194240)===n)break;for(t=r.eventTimes,i=-1;0<n;){var a=31-co(n);s=1<<a,a=t[a],a>i&&(i=a),n&=~s}if(n=i,n=Qr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Py(n/1960))-n,10<n){r.timeoutHandle=Bd(hn.bind(null,r,Mt,Ro),n);break}hn(r,Mt,Ro);break;case 5:hn(r,Mt,Ro);break;default:throw Error(ze(329))}}}return Bt(r,Qr()),r.callbackNode===o?Df.bind(null,r):null}function nc(r,t){var o=os;return r.current.memoizedState.isDehydrated&&(Sn(r,t).flags|=256),r=Ya(r,t),r!==2&&(t=Mt,Mt=o,t!==null&&ic(t)),r}function ic(r){Mt===null?Mt=r:Mt.push.apply(Mt,r)}function Ny(r){for(var t=r;;){if(t.flags&16384){var o=t.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var n=0;n<o.length;n++){var i=o[n],s=i.getSnapshot;i=i.value;try{if(!po(s(),i))return!1}catch{return!1}}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ho(r,t){for(t&=~eu,t&=~ml,r.suspendedLanes|=t,r.pingedLanes&=~t,r=r.expirationTimes;0<t;){var o=31-co(t),n=1<<o;r[o]=-1,t&=~n}}function qm(r){if(fr&6)throw Error(ze(327));di();var t=Aa(r,0);if(!(t&1))return Bt(r,Qr()),null;var o=Ya(r,t);if(r.tag!==0&&o===2){var n=Ad(r);n!==0&&(t=n,o=nc(r,n))}if(o===1)throw o=Cs,Sn(r,0),Ho(r,t),Bt(r,Qr()),o;if(o===6)throw Error(ze(345));return r.finishedWork=r.current.alternate,r.finishedLanes=t,hn(r,Mt,Ro),Bt(r,Qr()),null}function tu(r,t){var o=fr;fr|=1;try{return r(t)}finally{fr=o,fr===0&&(yi=Qr()+500,ll&&mn())}}function An(r){Yo!==null&&Yo.tag===0&&!(fr&6)&&di();var t=fr;fr|=1;var o=Xt.transition,n=br;try{if(Xt.transition=null,br=1,r)return r()}finally{br=n,Xt.transition=o,fr=t,!(fr&6)&&mn()}}function ou(){Ft=ti.current,Mr(ti)}function Sn(r,t){r.finishedWork=null,r.finishedLanes=0;var o=r.timeoutHandle;if(o!==-1&&(r.timeoutHandle=-1,my(o)),tt!==null)for(o=tt.return;o!==null;){var n=o;switch(Dc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Pa();break;case 3:hi(),Mr(Nt),Mr(Ct),Vc();break;case 5:Hc(n);break;case 4:hi();break;case 13:Mr($r);break;case 19:Mr($r);break;case 10:Fc(n.type._context);break;case 22:case 23:ou()}o=o.return}if(ct=r,tt=r=on(r.current,null),pt=Ft=t,nt=0,Cs=null,eu=ml=Rn=0,Mt=os=null,yn!==null){for(t=0;t<yn.length;t++)if(o=yn[t],n=o.interleaved,n!==null){o.interleaved=null;var i=n.next,s=o.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}o.pending=n}yn=null}return r}function Bf(r,t){do{var o=tt;try{if(Lc(),ha.current=Ga,Ua){for(var n=Hr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ua=!1}if(En=0,lt=ot=Hr=null,rs=!1,bs=0,Zc.current=null,o===null||o.return===null){nt=1,Cs=t,tt=null;break}e:{var s=r,a=o.return,d=o,u=t;if(t=pt,d.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,f=d,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var z=Mm(a);if(z!==null){z.flags&=-257,Pm(z,a,d,s,t),z.mode&1&&Tm(s,l,t),t=z,u=l;var b=t.updateQueue;if(b===null){var w=new Set;w.add(u),t.updateQueue=w}else b.add(u);break e}else{if(!(t&1)){Tm(s,l,t),nu();break e}u=Error(ze(426))}}else if(Or&&d.mode&1){var k=Mm(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Pm(k,a,d,s,t),Bc(xi(u,d));break e}}s=u=xi(u,d),nt!==4&&(nt=2),os===null?os=[s]:os.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var j=jf(s,u,t);zm(s,j);break e;case 1:d=u;var p=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(rn===null||!rn.has(C)))){s.flags|=65536,t&=-t,s.lanes|=t;var S=Cf(s,d,t);zm(s,S);break e}}s=s.return}while(s!==null)}Ff(o)}catch(L){t=L,tt===o&&o!==null&&(tt=o=o.return);continue}break}while(!0)}function Of(){var r=Ha.current;return Ha.current=Ga,r===null?Ga:r}function nu(){(nt===0||nt===3||nt===2)&&(nt=4),ct===null||!(Rn&268435455)&&!(ml&268435455)||Ho(ct,pt)}function Ya(r,t){var o=fr;fr|=2;var n=Of();(ct!==r||pt!==t)&&(Ro=null,Sn(r,t));do try{Dy();break}catch(i){Bf(r,i)}while(!0);if(Lc(),fr=o,Ha.current=n,tt!==null)throw Error(ze(261));return ct=null,pt=0,nt}function Dy(){for(;tt!==null;)Lf(tt)}function By(){for(;tt!==null&&!dx();)Lf(tt)}function Lf(r){var t=Uf(r.alternate,r,Ft);r.memoizedProps=r.pendingProps,t===null?Ff(r):tt=t,Zc.current=null}function Ff(r){var t=r;do{var o=t.alternate;if(r=t.return,t.flags&32768){if(o=Iy(o,t),o!==null){o.flags&=32767,tt=o;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{nt=6,tt=null;return}}else if(o=Ay(o,t,Ft),o!==null){tt=o;return}if(t=t.sibling,t!==null){tt=t;return}tt=t=r}while(t!==null);nt===0&&(nt=5)}function hn(r,t,o){var n=br,i=Xt.transition;try{Xt.transition=null,br=1,Oy(r,t,o,n)}finally{Xt.transition=i,br=n}return null}function Oy(r,t,o,n){do di();while(Yo!==null);if(fr&6)throw Error(ze(327));o=r.finishedWork;var i=r.finishedLanes;if(o===null)return null;if(r.finishedWork=null,r.finishedLanes=0,o===r.current)throw Error(ze(177));r.callbackNode=null,r.callbackPriority=0;var s=o.lanes|o.childLanes;if(bx(r,s),r===ct&&(tt=ct=null,pt=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||oa||(oa=!0,Gf(Ra,function(){return di(),null})),s=(o.flags&15990)!==0,o.subtreeFlags&15990||s){s=Xt.transition,Xt.transition=null;var a=br;br=1;var d=fr;fr|=4,Zc.current=null,Ty(r,o),Pf(o,r),iy(Nd),Ia=!!Pd,Nd=Pd=null,r.current=o,My(o),cx(),fr=d,br=a,Xt.transition=s}else r.current=o;if(oa&&(oa=!1,Yo=r,qa=i),s=r.pendingLanes,s===0&&(rn=null),px(o.stateNode),Bt(r,Qr()),t!==null)for(n=r.onRecoverableError,o=0;o<t.length;o++)i=t[o],n(i.value,{componentStack:i.stack,digest:i.digest});if(Va)throw Va=!1,r=tc,tc=null,r;return qa&1&&r.tag!==0&&di(),s=r.pendingLanes,s&1?r===oc?ns++:(ns=0,oc=r):ns=0,mn(),null}function di(){if(Yo!==null){var r=v0(qa),t=Xt.transition,o=br;try{if(Xt.transition=null,br=16>r?16:r,Yo===null)var n=!1;else{if(r=Yo,Yo=null,qa=0,fr&6)throw Error(ze(331));var i=fr;for(fr|=4,$e=r.current;$e!==null;){var s=$e,a=s.child;if($e.flags&16){var d=s.deletions;if(d!==null){for(var u=0;u<d.length;u++){var l=d[u];for($e=l;$e!==null;){var f=$e;switch(f.tag){case 0:case 11:case 15:ts(8,f,s)}var g=f.child;if(g!==null)g.return=f,$e=g;else for(;$e!==null;){f=$e;var y=f.sibling,z=f.return;if(Wf(f),f===l){$e=null;break}if(y!==null){y.return=z,$e=y;break}$e=z}}}var b=s.alternate;if(b!==null){var w=b.child;if(w!==null){b.child=null;do{var k=w.sibling;w.sibling=null,w=k}while(w!==null)}}$e=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,$e=a;else e:for(;$e!==null;){if(s=$e,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ts(9,s,s.return)}var j=s.sibling;if(j!==null){j.return=s.return,$e=j;break e}$e=s.return}}var p=r.current;for($e=p;$e!==null;){a=$e;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,$e=C;else e:for(a=p;$e!==null;){if(d=$e,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:ul(9,d)}}catch(L){qr(d,d.return,L)}if(d===a){$e=null;break e}var S=d.sibling;if(S!==null){S.return=d.return,$e=S;break e}$e=d.return}}if(fr=i,mn(),So&&typeof So.onPostCommitFiberRoot=="function")try{So.onPostCommitFiberRoot(ol,r)}catch{}n=!0}return n}finally{br=o,Xt.transition=t}}return!1}function Ym(r,t,o){t=xi(o,t),t=jf(r,t,1),r=en(r,t,1),t=Et(),r!==null&&(zs(r,1,t),Bt(r,t))}function qr(r,t,o){if(r.tag===3)Ym(r,r,o);else for(;t!==null;){if(t.tag===3){Ym(t,r,o);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(rn===null||!rn.has(n))){r=xi(o,r),r=Cf(t,r,1),t=en(t,r,1),r=Et(),t!==null&&(zs(t,1,r),Bt(t,r));break}}t=t.return}}function Ly(r,t,o){var n=r.pingCache;n!==null&&n.delete(t),t=Et(),r.pingedLanes|=r.suspendedLanes&o,ct===r&&(pt&o)===o&&(nt===4||nt===3&&(pt&130023424)===pt&&500>Qr()-ru?Sn(r,0):eu|=o),Bt(r,t)}function $f(r,t){t===0&&(r.mode&1?(t=qs,qs<<=1,!(qs&130023424)&&(qs=4194304)):t=1);var o=Et();r=Do(r,t),r!==null&&(zs(r,t,o),Bt(r,o))}function Fy(r){var t=r.memoizedState,o=0;t!==null&&(o=t.retryLane),$f(r,o)}function $y(r,t){var o=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(o=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(ze(314))}n!==null&&n.delete(t),$f(r,o)}var Uf;Uf=function(r,t,o){if(r!==null)if(r.memoizedProps!==t.pendingProps||Nt.current)Pt=!0;else{if(!(r.lanes&o)&&!(t.flags&128))return Pt=!1,Ry(r,t,o);Pt=!!(r.flags&131072)}else Pt=!1,Or&&t.flags&1048576&&V0(t,Ba,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ya(r,t),r=t.pendingProps;var i=pi(t,Ct.current);li(t,o),i=Yc(null,t,n,r,i,o);var s=Kc();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dt(n)?(s=!0,Na(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Uc(t),i.updater=cl,t.stateNode=i,i._reactInternals=t,Hd(t,n,r,o),t=Yd(null,t,n,!0,s,o)):(t.tag=0,Or&&s&&Nc(t),kt(null,t,i,o),t=t.child),t;case 16:n=t.elementType;e:{switch(ya(r,t),r=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=Gy(n),r=oo(n,r),i){case 0:t=qd(null,t,n,r,o);break e;case 1:t=Bm(null,t,n,r,o);break e;case 11:t=Nm(null,t,n,r,o);break e;case 14:t=Dm(null,t,n,oo(n.type,r),o);break e}throw Error(ze(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:oo(n,i),qd(r,t,n,i,o);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:oo(n,i),Bm(r,t,n,i,o);case 3:e:{if(_f(t),r===null)throw Error(ze(387));n=t.pendingProps,s=t.memoizedState,i=s.element,J0(r,t),Fa(t,n,null,o);var a=t.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=xi(Error(ze(423)),t),t=Om(r,t,n,o,i);break e}else if(n!==i){i=xi(Error(ze(424)),t),t=Om(r,t,n,o,i);break e}else for($t=Zo(t.stateNode.containerInfo.firstChild),Ut=t,Or=!0,ao=null,o=Q0(t,null,n,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(fi(),n===i){t=Bo(r,t,o);break e}kt(r,t,n,o)}t=t.child}return t;case 5:return Z0(t),r===null&&$d(t),n=t.type,i=t.pendingProps,s=r!==null?r.memoizedProps:null,a=i.children,Dd(n,i)?a=null:s!==null&&Dd(n,s)&&(t.flags|=32),kf(r,t),kt(r,t,a,o),t.child;case 6:return r===null&&$d(t),null;case 13:return zf(r,t,o);case 4:return Gc(t,t.stateNode.containerInfo),n=t.pendingProps,r===null?t.child=gi(t,null,n,o):kt(r,t,n,o),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:oo(n,i),Nm(r,t,n,i,o);case 7:return kt(r,t,t.pendingProps,o),t.child;case 8:return kt(r,t,t.pendingProps.children,o),t.child;case 12:return kt(r,t,t.pendingProps.children,o),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Rr(Oa,n._currentValue),n._currentValue=a,s!==null)if(po(s.value,a)){if(s.children===i.children&&!Nt.current){t=Bo(r,t,o);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var d=s.dependencies;if(d!==null){a=s.child;for(var u=d.firstContext;u!==null;){if(u.context===n){if(s.tag===1){u=Mo(-1,o&-o),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}}s.lanes|=o,u=s.alternate,u!==null&&(u.lanes|=o),Ud(s.return,o,t),d.lanes|=o;break}u=u.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(ze(341));a.lanes|=o,d=a.alternate,d!==null&&(d.lanes|=o),Ud(a,o,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}kt(r,t,i.children,o),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,li(t,o),i=Zt(i),n=n(i),t.flags|=1,kt(r,t,n,o),t.child;case 14:return n=t.type,i=oo(n,t.pendingProps),i=oo(n.type,i),Dm(r,t,n,i,o);case 15:return Sf(r,t,t.type,t.pendingProps,o);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:oo(n,i),ya(r,t),t.tag=1,Dt(n)?(r=!0,Na(t)):r=!1,li(t,o),vf(t,n,i),Hd(t,n,i,o),Yd(null,t,n,!0,r,o);case 19:return Ef(r,t,o);case 22:return wf(r,t,o)}throw Error(ze(156,t.tag))};function Gf(r,t){return h0(r,t)}function Uy(r,t,o,n){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(r,t,o,n){return new Uy(r,t,o,n)}function iu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Gy(r){if(typeof r=="function")return iu(r)?1:0;if(r!=null){if(r=r.$$typeof,r===wc)return 11;if(r===kc)return 14}return 2}function on(r,t){var o=r.alternate;return o===null?(o=Qt(r.tag,t,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=t,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&14680064,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,t=r.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o}function ja(r,t,o,n,i,s){var a=2;if(n=r,typeof r=="function")iu(r)&&(a=1);else if(typeof r=="string")a=5;else e:switch(r){case Vn:return wn(o.children,i,s,t);case Sc:a=8,i|=8;break;case gd:return r=Qt(12,o,t,i|2),r.elementType=gd,r.lanes=s,r;case hd:return r=Qt(13,o,t,i),r.elementType=hd,r.lanes=s,r;case xd:return r=Qt(19,o,t,i),r.elementType=xd,r.lanes=s,r;case Zp:return pl(o,i,s,t);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Xp:a=10;break e;case Jp:a=9;break e;case wc:a=11;break e;case kc:a=14;break e;case $o:a=16,n=null;break e}throw Error(ze(130,r==null?r:typeof r,""))}return t=Qt(a,o,t,i),t.elementType=r,t.type=n,t.lanes=s,t}function wn(r,t,o,n){return r=Qt(7,r,n,t),r.lanes=o,r}function pl(r,t,o,n){return r=Qt(22,r,n,t),r.elementType=Zp,r.lanes=o,r.stateNode={isHidden:!1},r}function nd(r,t,o){return r=Qt(6,r,null,t),r.lanes=o,r}function id(r,t,o){return t=Qt(4,r.children!==null?r.children:[],r.key,t),t.lanes=o,t.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},t}function Hy(r,t,o,n,i){this.tag=t,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ol(0),this.expirationTimes=Ol(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ol(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function su(r,t,o,n,i,s,a,d,u){return r=new Hy(r,t,o,d,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Qt(3,null,null,t),r.current=s,s.stateNode=r,s.memoizedState={element:n,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uc(s),r}function Vy(r,t,o){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hn,key:n==null?null:""+n,children:r,containerInfo:t,implementation:o}}function Hf(r){if(!r)return ln;r=r._reactInternals;e:{if(Pn(r)!==r||r.tag!==1)throw Error(ze(170));var t=r;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ze(171))}if(r.tag===1){var o=r.type;if(Dt(o))return G0(r,o,t)}return t}function Vf(r,t,o,n,i,s,a,d,u){return r=su(o,n,!0,r,i,s,a,d,u),r.context=Hf(null),o=r.current,n=Et(),i=tn(o),s=Mo(n,i),s.callback=t??null,en(o,s,i),r.current.lanes=i,zs(r,i,n),Bt(r,n),r}function fl(r,t,o,n){var i=t.current,s=Et(),a=tn(i);return o=Hf(o),t.context===null?t.context=o:t.pendingContext=o,t=Mo(s,a),t.payload={element:r},n=n===void 0?null:n,n!==null&&(t.callback=n),r=en(i,t,a),r!==null&&(uo(r,i,a,s),ga(r,i,a)),a}function Ka(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Km(r,t){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<t?o:t}}function au(r,t){Km(r,t),(r=r.alternate)&&Km(r,t)}function qy(){return null}var qf=typeof reportError=="function"?reportError:function(r){console.error(r)};function lu(r){this._internalRoot=r}gl.prototype.render=lu.prototype.render=function(r){var t=this._internalRoot;if(t===null)throw Error(ze(409));fl(r,t,null,null)};gl.prototype.unmount=lu.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var t=r.containerInfo;An(function(){fl(null,r,null,null)}),t[No]=null}};function gl(r){this._internalRoot=r}gl.prototype.unstable_scheduleHydration=function(r){if(r){var t=S0();r={blockedOn:null,target:r,priority:t};for(var o=0;o<Go.length&&t!==0&&t<Go[o].priority;o++);Go.splice(o,0,r),o===0&&k0(r)}};function du(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function hl(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Qm(){}function Yy(r,t,o,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var l=Ka(a);s.call(l)}}var a=Vf(t,n,r,0,null,!1,!1,"",Qm);return r._reactRootContainer=a,r[No]=a.current,fs(r.nodeType===8?r.parentNode:r),An(),a}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var d=n;n=function(){var l=Ka(u);d.call(l)}}var u=su(r,0,!1,null,null,!1,!1,"",Qm);return r._reactRootContainer=u,r[No]=u.current,fs(r.nodeType===8?r.parentNode:r),An(function(){fl(t,u,o,n)}),u}function xl(r,t,o,n,i){var s=o._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var d=i;i=function(){var u=Ka(a);d.call(u)}}fl(t,a,r,i)}else a=Yy(o,t,r,i,n);return Ka(a)}j0=function(r){switch(r.tag){case 3:var t=r.stateNode;if(t.current.memoizedState.isDehydrated){var o=Vi(t.pendingLanes);o!==0&&(Ec(t,o|1),Bt(t,Qr()),!(fr&6)&&(yi=Qr()+500,mn()))}break;case 13:An(function(){var n=Do(r,1);if(n!==null){var i=Et();uo(n,r,1,i)}}),au(r,1)}};Rc=function(r){if(r.tag===13){var t=Do(r,134217728);if(t!==null){var o=Et();uo(t,r,134217728,o)}au(r,134217728)}};C0=function(r){if(r.tag===13){var t=tn(r),o=Do(r,t);if(o!==null){var n=Et();uo(o,r,t,n)}au(r,t)}};S0=function(){return br};w0=function(r,t){var o=br;try{return br=r,t()}finally{br=o}};zd=function(r,t,o){switch(t){case"input":if(vd(r,o),t=o.name,o.type==="radio"&&t!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<o.length;t++){var n=o[t];if(n!==r&&n.form===r.form){var i=al(n);if(!i)throw Error(ze(90));r0(n),vd(n,i)}}}break;case"textarea":o0(r,o);break;case"select":t=o.value,t!=null&&ni(r,!!o.multiple,t,!1)}};c0=tu;u0=An;var Ky={usingClientEntryPoint:!1,Events:[Rs,Qn,al,l0,d0,tu]},Li={findFiberByHostInstance:xn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qy={bundleType:Li.bundleType,version:Li.version,rendererPackageName:Li.rendererPackageName,rendererConfig:Li.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oo.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=f0(r),r===null?null:r.stateNode},findFiberByHostInstance:Li.findFiberByHostInstance||qy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var na=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!na.isDisabled&&na.supportsFiber)try{ol=na.inject(Qy),So=na}catch{}}Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ky;Vt.createPortal=function(r,t){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!du(t))throw Error(ze(200));return Vy(r,t,null,o)};Vt.createRoot=function(r,t){if(!du(r))throw Error(ze(299));var o=!1,n="",i=qf;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=su(r,1,!1,null,null,o,!1,n,i),r[No]=t.current,fs(r.nodeType===8?r.parentNode:r),new lu(t)};Vt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var t=r._reactInternals;if(t===void 0)throw typeof r.render=="function"?Error(ze(188)):(r=Object.keys(r).join(","),Error(ze(268,r)));return r=f0(t),r=r===null?null:r.stateNode,r};Vt.flushSync=function(r){return An(r)};Vt.hydrate=function(r,t,o){if(!hl(t))throw Error(ze(200));return xl(null,r,t,!0,o)};Vt.hydrateRoot=function(r,t,o){if(!du(r))throw Error(ze(405));var n=o!=null&&o.hydratedSources||null,i=!1,s="",a=qf;if(o!=null&&(o.unstable_strictMode===!0&&(i=!0),o.identifierPrefix!==void 0&&(s=o.identifierPrefix),o.onRecoverableError!==void 0&&(a=o.onRecoverableError)),t=Vf(t,null,r,1,o??null,i,!1,s,a),r[No]=t.current,fs(r),n)for(r=0;r<n.length;r++)o=n[r],i=o._getVersion,i=i(o._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[o,i]:t.mutableSourceEagerHydrationData.push(o,i);return new gl(t)};Vt.render=function(r,t,o){if(!hl(t))throw Error(ze(200));return xl(null,r,t,!1,o)};Vt.unmountComponentAtNode=function(r){if(!hl(r))throw Error(ze(40));return r._reactRootContainer?(An(function(){xl(null,null,r,!1,function(){r._reactRootContainer=null,r[No]=null})}),!0):!1};Vt.unstable_batchedUpdates=tu;Vt.unstable_renderSubtreeIntoContainer=function(r,t,o,n){if(!hl(o))throw Error(ze(200));if(r==null||r._reactInternals===void 0)throw Error(ze(38));return xl(r,t,o,!1,n)};Vt.version="18.3.1-next-f1338f8080-20240426";function Yf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yf)}catch(r){console.error(r)}}Yf(),qp.exports=Vt;var Xy=qp.exports,Xm=Xy;pd.createRoot=Xm.createRoot,pd.hydrateRoot=Xm.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ss(){return Ss=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r[n]=o[n])}return r},Ss.apply(this,arguments)}var Ko;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Ko||(Ko={}));const Jm="popstate";function Jy(r){r===void 0&&(r={});function t(n,i){let{pathname:s,search:a,hash:d}=n.location;return sc("",{pathname:s,search:a,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function o(n,i){return typeof i=="string"?i:Qa(i)}return eb(t,o,null,r)}function Xr(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function cu(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Zy(){return Math.random().toString(36).substr(2,8)}function Zm(r,t){return{usr:r.state,key:r.key,idx:t}}function sc(r,t,o,n){return o===void 0&&(o=null),Ss({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof t=="string"?wi(t):t,{state:o,key:t&&t.key||n||Zy()})}function Qa(r){let{pathname:t="/",search:o="",hash:n=""}=r;return o&&o!=="?"&&(t+=o.charAt(0)==="?"?o:"?"+o),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function wi(r){let t={};if(r){let o=r.indexOf("#");o>=0&&(t.hash=r.substr(o),r=r.substr(0,o));let n=r.indexOf("?");n>=0&&(t.search=r.substr(n),r=r.substr(0,n)),r&&(t.pathname=r)}return t}function eb(r,t,o,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,d=Ko.Pop,u=null,l=f();l==null&&(l=0,a.replaceState(Ss({},a.state,{idx:l}),""));function f(){return(a.state||{idx:null}).idx}function g(){d=Ko.Pop;let k=f(),j=k==null?null:k-l;l=k,u&&u({action:d,location:w.location,delta:j})}function y(k,j){d=Ko.Push;let p=sc(w.location,k,j);l=f()+1;let C=Zm(p,l),S=w.createHref(p);try{a.pushState(C,"",S)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(S)}s&&u&&u({action:d,location:w.location,delta:1})}function z(k,j){d=Ko.Replace;let p=sc(w.location,k,j);l=f();let C=Zm(p,l),S=w.createHref(p);a.replaceState(C,"",S),s&&u&&u({action:d,location:w.location,delta:0})}function b(k){let j=i.location.origin!=="null"?i.location.origin:i.location.href,p=typeof k=="string"?k:Qa(k);return p=p.replace(/ $/,"%20"),Xr(j,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,j)}let w={get action(){return d},get location(){return r(i,a)},listen(k){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Jm,g),u=k,()=>{i.removeEventListener(Jm,g),u=null}},createHref(k){return t(i,k)},createURL:b,encodeLocation(k){let j=b(k);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:y,replace:z,go(k){return a.go(k)}};return w}var ep;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(ep||(ep={}));function rb(r,t,o){return o===void 0&&(o="/"),tb(r,t,o)}function tb(r,t,o,n){let i=typeof t=="string"?wi(t):t,s=uu(i.pathname||"/",o);if(s==null)return null;let a=Kf(r);ob(a);let d=null;for(let u=0;d==null&&u<a.length;++u){let l=gb(s);d=mb(a[u],l)}return d}function Kf(r,t,o,n){t===void 0&&(t=[]),o===void 0&&(o=[]),n===void 0&&(n="");let i=(s,a,d)=>{let u={relativePath:d===void 0?s.path||"":d,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};u.relativePath.startsWith("/")&&(Xr(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let l=nn([n,u.relativePath]),f=o.concat(u);s.children&&s.children.length>0&&(Xr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Kf(s.children,t,f,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:cb(l,s.index),routesMeta:f})};return r.forEach((s,a)=>{var d;if(s.path===""||!((d=s.path)!=null&&d.includes("?")))i(s,a);else for(let u of Qf(s.path))i(s,a,u)}),t}function Qf(r){let t=r.split("/");if(t.length===0)return[];let[o,...n]=t,i=o.endsWith("?"),s=o.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=Qf(n.join("/")),d=[];return d.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&d.push(...a),d.map(u=>r.startsWith("/")&&u===""?"/":u)}function ob(r){r.sort((t,o)=>t.score!==o.score?o.score-t.score:ub(t.routesMeta.map(n=>n.childrenIndex),o.routesMeta.map(n=>n.childrenIndex)))}const nb=/^:[\w-]+$/,ib=3,sb=2,ab=1,lb=10,db=-2,rp=r=>r==="*";function cb(r,t){let o=r.split("/"),n=o.length;return o.some(rp)&&(n+=db),t&&(n+=sb),o.filter(i=>!rp(i)).reduce((i,s)=>i+(nb.test(s)?ib:s===""?ab:lb),n)}function ub(r,t){return r.length===t.length&&r.slice(0,-1).every((n,i)=>n===t[i])?r[r.length-1]-t[t.length-1]:0}function mb(r,t,o){let{routesMeta:n}=r,i={},s="/",a=[];for(let d=0;d<n.length;++d){let u=n[d],l=d===n.length-1,f=s==="/"?t:t.slice(s.length)||"/",g=pb({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},f),y=u.route;if(!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:nn([s,g.pathname]),pathnameBase:vb(nn([s,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(s=nn([s,g.pathnameBase]))}return a}function pb(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[o,n]=fb(r.path,r.caseSensitive,r.end),i=t.match(o);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:n.reduce((l,f,g)=>{let{paramName:y,isOptional:z}=f;if(y==="*"){let w=d[g]||"";a=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const b=d[g];return z&&!b?l[y]=void 0:l[y]=(b||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:a,pattern:r}}function fb(r,t,o){t===void 0&&(t=!1),o===void 0&&(o=!0),cu(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,d,u)=>(n.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function gb(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return cu(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),r}}function uu(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let o=t.endsWith("/")?t.length-1:t.length,n=r.charAt(o);return n&&n!=="/"?null:r.slice(o)||"/"}const hb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xb=r=>hb.test(r);function yb(r,t){t===void 0&&(t="/");let{pathname:o,search:n="",hash:i=""}=typeof r=="string"?wi(r):r,s;if(o)if(xb(o))s=o;else{if(o.includes("//")){let a=o;o=o.replace(/\/\/+/g,"/"),cu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+o))}o.startsWith("/")?s=tp(o.substring(1),"/"):s=tp(o,t)}else s=t;return{pathname:s,search:jb(n),hash:Cb(i)}}function tp(r,t){let o=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?o.length>1&&o.pop():i!=="."&&o.push(i)}),o.length>1?o.join("/"):"/"}function sd(r,t,o,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bb(r){return r.filter((t,o)=>o===0||t.route.path&&t.route.path.length>0)}function mu(r,t){let o=bb(r);return t?o.map((n,i)=>i===o.length-1?n.pathname:n.pathnameBase):o.map(n=>n.pathnameBase)}function pu(r,t,o,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=wi(r):(i=Ss({},r),Xr(!i.pathname||!i.pathname.includes("?"),sd("?","pathname","search",i)),Xr(!i.pathname||!i.pathname.includes("#"),sd("#","pathname","hash",i)),Xr(!i.search||!i.search.includes("#"),sd("#","search","hash",i)));let s=r===""||i.pathname==="",a=s?"/":i.pathname,d;if(a==null)d=o;else{let g=t.length-1;if(!n&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),g-=1;i.pathname=y.join("/")}d=g>=0?t[g]:"/"}let u=yb(i,d),l=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&o.endsWith("/");return!u.pathname.endsWith("/")&&(l||f)&&(u.pathname+="/"),u}const nn=r=>r.join("/").replace(/\/\/+/g,"/"),vb=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),jb=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Cb=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Sb(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Xf=["post","put","patch","delete"];new Set(Xf);const wb=["get",...Xf];new Set(wb);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ws(){return ws=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r[n]=o[n])}return r},ws.apply(this,arguments)}const fu=c.createContext(null),kb=c.createContext(null),pn=c.createContext(null),yl=c.createContext(null),ko=c.createContext({outlet:null,matches:[],isDataRoute:!1}),Jf=c.createContext(null);function _b(r,t){let{relative:o}=t===void 0?{}:t;ki()||Xr(!1);let{basename:n,navigator:i}=c.useContext(pn),{hash:s,pathname:a,search:d}=eg(r,{relative:o}),u=a;return n!=="/"&&(u=a==="/"?n:nn([n,a])),i.createHref({pathname:u,search:d,hash:s})}function ki(){return c.useContext(yl)!=null}function Nn(){return ki()||Xr(!1),c.useContext(yl).location}function Zf(r){c.useContext(pn).static||c.useLayoutEffect(r)}function _o(){let{isDataRoute:r}=c.useContext(ko);return r?Fb():zb()}function zb(){ki()||Xr(!1);let r=c.useContext(fu),{basename:t,future:o,navigator:n}=c.useContext(pn),{matches:i}=c.useContext(ko),{pathname:s}=Nn(),a=JSON.stringify(mu(i,o.v7_relativeSplatPath)),d=c.useRef(!1);return Zf(()=>{d.current=!0}),c.useCallback(function(l,f){if(f===void 0&&(f={}),!d.current)return;if(typeof l=="number"){n.go(l);return}let g=pu(l,JSON.parse(a),s,f.relative==="path");r==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:nn([t,g.pathname])),(f.replace?n.replace:n.push)(g,f.state,f)},[t,n,a,s,r])}const Eb=c.createContext(null);function Rb(r){let t=c.useContext(ko).outlet;return t&&c.createElement(Eb.Provider,{value:r},t)}function bl(){let{matches:r}=c.useContext(ko),t=r[r.length-1];return t?t.params:{}}function eg(r,t){let{relative:o}=t===void 0?{}:t,{future:n}=c.useContext(pn),{matches:i}=c.useContext(ko),{pathname:s}=Nn(),a=JSON.stringify(mu(i,n.v7_relativeSplatPath));return c.useMemo(()=>pu(r,JSON.parse(a),s,o==="path"),[r,a,s,o])}function Ab(r,t){return Ib(r,t)}function Ib(r,t,o,n){ki()||Xr(!1);let{navigator:i}=c.useContext(pn),{matches:s}=c.useContext(ko),a=s[s.length-1],d=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let l=Nn(),f;if(t){var g;let k=typeof t=="string"?wi(t):t;u==="/"||(g=k.pathname)!=null&&g.startsWith(u)||Xr(!1),f=k}else f=l;let y=f.pathname||"/",z=y;if(u!=="/"){let k=u.replace(/^\//,"").split("/");z="/"+y.replace(/^\//,"").split("/").slice(k.length).join("/")}let b=rb(r,{pathname:z}),w=Nb(b&&b.map(k=>Object.assign({},k,{params:Object.assign({},d,k.params),pathname:nn([u,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:nn([u,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,o,n);return t&&w?c.createElement(yl.Provider,{value:{location:ws({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ko.Pop}},w):w}function Wb(){let r=Lb(),t=Sb(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),o=r instanceof Error?r.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},t),o?c.createElement("pre",{style:i},o):null,null)}const Tb=c.createElement(Wb,null);class Mb extends c.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,o){return o.location!==t.location||o.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:o.error,location:o.location,revalidation:t.revalidation||o.revalidation}}componentDidCatch(t,o){console.error("React Router caught the following error during render",t,o)}render(){return this.state.error!==void 0?c.createElement(ko.Provider,{value:this.props.routeContext},c.createElement(Jf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Pb(r){let{routeContext:t,match:o,children:n}=r,i=c.useContext(fu);return i&&i.static&&i.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=o.route.id),c.createElement(ko.Provider,{value:t},n)}function Nb(r,t,o,n){var i;if(t===void 0&&(t=[]),o===void 0&&(o=null),n===void 0&&(n=null),r==null){var s;if(!o)return null;if(o.errors)r=o.matches;else if((s=n)!=null&&s.v7_partialHydration&&t.length===0&&!o.initialized&&o.matches.length>0)r=o.matches;else return null}let a=r,d=(i=o)==null?void 0:i.errors;if(d!=null){let f=a.findIndex(g=>g.route.id&&(d==null?void 0:d[g.route.id])!==void 0);f>=0||Xr(!1),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,l=-1;if(o&&n&&n.v7_partialHydration)for(let f=0;f<a.length;f++){let g=a[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(l=f),g.route.id){let{loaderData:y,errors:z}=o,b=g.route.loader&&y[g.route.id]===void 0&&(!z||z[g.route.id]===void 0);if(g.route.lazy||b){u=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((f,g,y)=>{let z,b=!1,w=null,k=null;o&&(z=d&&g.route.id?d[g.route.id]:void 0,w=g.route.errorElement||Tb,u&&(l<0&&y===0?($b("route-fallback"),b=!0,k=null):l===y&&(b=!0,k=g.route.hydrateFallbackElement||null)));let j=t.concat(a.slice(0,y+1)),p=()=>{let C;return z?C=w:b?C=k:g.route.Component?C=c.createElement(g.route.Component,null):g.route.element?C=g.route.element:C=f,c.createElement(Pb,{match:g,routeContext:{outlet:f,matches:j,isDataRoute:o!=null},children:C})};return o&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?c.createElement(Mb,{location:o.location,revalidation:o.revalidation,component:w,error:z,children:p(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):p()},null)}var rg=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(rg||{}),tg=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(tg||{});function Db(r){let t=c.useContext(fu);return t||Xr(!1),t}function Bb(r){let t=c.useContext(kb);return t||Xr(!1),t}function Ob(r){let t=c.useContext(ko);return t||Xr(!1),t}function og(r){let t=Ob(),o=t.matches[t.matches.length-1];return o.route.id||Xr(!1),o.route.id}function Lb(){var r;let t=c.useContext(Jf),o=Bb(),n=og();return t!==void 0?t:(r=o.errors)==null?void 0:r[n]}function Fb(){let{router:r}=Db(rg.UseNavigateStable),t=og(tg.UseNavigateStable),o=c.useRef(!1);return Zf(()=>{o.current=!0}),c.useCallback(function(i,s){s===void 0&&(s={}),o.current&&(typeof i=="number"?r.navigate(i):r.navigate(i,ws({fromRouteId:t},s)))},[r,t])}const op={};function $b(r,t,o){op[r]||(op[r]=!0)}function Ub(r,t){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function vl(r){let{to:t,replace:o,state:n,relative:i}=r;ki()||Xr(!1);let{future:s,static:a}=c.useContext(pn),{matches:d}=c.useContext(ko),{pathname:u}=Nn(),l=_o(),f=pu(t,mu(d,s.v7_relativeSplatPath),u,i==="path"),g=JSON.stringify(f);return c.useEffect(()=>l(JSON.parse(g),{replace:o,state:n,relative:i}),[l,g,i,o,n]),null}function Gb(r){return Rb(r.context)}function pr(r){Xr(!1)}function Hb(r){let{basename:t="/",children:o=null,location:n,navigationType:i=Ko.Pop,navigator:s,static:a=!1,future:d}=r;ki()&&Xr(!1);let u=t.replace(/^\/*/,"/"),l=c.useMemo(()=>({basename:u,navigator:s,static:a,future:ws({v7_relativeSplatPath:!1},d)}),[u,d,s,a]);typeof n=="string"&&(n=wi(n));let{pathname:f="/",search:g="",hash:y="",state:z=null,key:b="default"}=n,w=c.useMemo(()=>{let k=uu(f,u);return k==null?null:{location:{pathname:k,search:g,hash:y,state:z,key:b},navigationType:i}},[u,f,g,y,z,b,i]);return w==null?null:c.createElement(pn.Provider,{value:l},c.createElement(yl.Provider,{children:o,value:w}))}function Vb(r){let{children:t,location:o}=r;return Ab(ac(t),o)}new Promise(()=>{});function ac(r,t){t===void 0&&(t=[]);let o=[];return c.Children.forEach(r,(n,i)=>{if(!c.isValidElement(n))return;let s=[...t,i];if(n.type===c.Fragment){o.push.apply(o,ac(n.props.children,s));return}n.type!==pr&&Xr(!1),!n.props.index||!n.props.children||Xr(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=ac(n.props.children,s)),o.push(a)}),o}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lc(){return lc=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r[n]=o[n])}return r},lc.apply(this,arguments)}function qb(r,t){if(r==null)return{};var o={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(o[i]=r[i]);return o}function Yb(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Kb(r,t){return r.button===0&&(!t||t==="_self")&&!Yb(r)}const Qb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Xb="6";try{window.__reactRouterVersion=Xb}catch{}const Jb="startTransition",np=Lh[Jb];function Zb(r){let{basename:t,children:o,future:n,window:i}=r,s=c.useRef();s.current==null&&(s.current=Jy({window:i,v5Compat:!0}));let a=s.current,[d,u]=c.useState({action:a.action,location:a.location}),{v7_startTransition:l}=n||{},f=c.useCallback(g=>{l&&np?np(()=>u(g)):u(g)},[u,l]);return c.useLayoutEffect(()=>a.listen(f),[a,f]),c.useEffect(()=>Ub(n),[n]),c.createElement(Hb,{basename:t,children:o,location:d.location,navigationType:d.action,navigator:a,future:n})}const e1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",r1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gr=c.forwardRef(function(t,o){let{onClick:n,relative:i,reloadDocument:s,replace:a,state:d,target:u,to:l,preventScrollReset:f,viewTransition:g}=t,y=qb(t,Qb),{basename:z}=c.useContext(pn),b,w=!1;if(typeof l=="string"&&r1.test(l)&&(b=l,e1))try{let C=new URL(window.location.href),S=l.startsWith("//")?new URL(C.protocol+l):new URL(l),L=uu(S.pathname,z);S.origin===C.origin&&L!=null?l=L+S.search+S.hash:w=!0}catch{}let k=_b(l,{relative:i}),j=t1(l,{replace:a,state:d,target:u,preventScrollReset:f,relative:i,viewTransition:g});function p(C){n&&n(C),C.defaultPrevented||j(C)}return c.createElement("a",lc({},y,{href:b||k,onClick:w||s?n:p,ref:o,target:u}))});var ip;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(ip||(ip={}));var sp;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(sp||(sp={}));function t1(r,t){let{target:o,replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:d}=t===void 0?{}:t,u=_o(),l=Nn(),f=eg(r,{relative:a});return c.useCallback(g=>{if(Kb(g,o)){g.preventDefault();let y=n!==void 0?n:Qa(l)===Qa(f);u(r,{replace:y,state:i,preventScrollReset:s,relative:a,viewTransition:d})}},[l,u,f,n,i,o,r,s,a,d])}function ng(r,t){return function(){return r.apply(t,arguments)}}const{toString:o1}=Object.prototype,{getPrototypeOf:gu}=Object,{iterator:jl,toStringTag:ig}=Symbol,Cl=(r=>t=>{const o=o1.call(t);return r[o]||(r[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),fo=r=>(r=r.toLowerCase(),t=>Cl(t)===r),Sl=r=>t=>typeof t===r,{isArray:_i}=Array,bi=Sl("undefined");function Is(r){return r!==null&&!bi(r)&&r.constructor!==null&&!bi(r.constructor)&&Ot(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const sg=fo("ArrayBuffer");function n1(r){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(r):t=r&&r.buffer&&sg(r.buffer),t}const i1=Sl("string"),Ot=Sl("function"),ag=Sl("number"),Ws=r=>r!==null&&typeof r=="object",s1=r=>r===!0||r===!1,Ca=r=>{if(Cl(r)!=="object")return!1;const t=gu(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(ig in r)&&!(jl in r)},a1=r=>{if(!Ws(r)||Is(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},l1=fo("Date"),d1=fo("File"),c1=fo("Blob"),u1=fo("FileList"),m1=r=>Ws(r)&&Ot(r.pipe),p1=r=>{let t;return r&&(typeof FormData=="function"&&r instanceof FormData||Ot(r.append)&&((t=Cl(r))==="formdata"||t==="object"&&Ot(r.toString)&&r.toString()==="[object FormData]"))},f1=fo("URLSearchParams"),[g1,h1,x1,y1]=["ReadableStream","Request","Response","Headers"].map(fo),b1=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ts(r,t,{allOwnKeys:o=!1}={}){if(r===null||typeof r>"u")return;let n,i;if(typeof r!="object"&&(r=[r]),_i(r))for(n=0,i=r.length;n<i;n++)t.call(null,r[n],n,r);else{if(Is(r))return;const s=o?Object.getOwnPropertyNames(r):Object.keys(r),a=s.length;let d;for(n=0;n<a;n++)d=s[n],t.call(null,r[d],d,r)}}function lg(r,t){if(Is(r))return null;t=t.toLowerCase();const o=Object.keys(r);let n=o.length,i;for(;n-- >0;)if(i=o[n],t===i.toLowerCase())return i;return null}const vn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,dg=r=>!bi(r)&&r!==vn;function dc(){const{caseless:r,skipUndefined:t}=dg(this)&&this||{},o={},n=(i,s)=>{const a=r&&lg(o,s)||s;Ca(o[a])&&Ca(i)?o[a]=dc(o[a],i):Ca(i)?o[a]=dc({},i):_i(i)?o[a]=i.slice():(!t||!bi(i))&&(o[a]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Ts(arguments[i],n);return o}const v1=(r,t,o,{allOwnKeys:n}={})=>(Ts(t,(i,s)=>{o&&Ot(i)?r[s]=ng(i,o):r[s]=i},{allOwnKeys:n}),r),j1=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),C1=(r,t,o,n)=>{r.prototype=Object.create(t.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:t.prototype}),o&&Object.assign(r.prototype,o)},S1=(r,t,o,n)=>{let i,s,a;const d={};if(t=t||{},r==null)return t;do{for(i=Object.getOwnPropertyNames(r),s=i.length;s-- >0;)a=i[s],(!n||n(a,r,t))&&!d[a]&&(t[a]=r[a],d[a]=!0);r=o!==!1&&gu(r)}while(r&&(!o||o(r,t))&&r!==Object.prototype);return t},w1=(r,t,o)=>{r=String(r),(o===void 0||o>r.length)&&(o=r.length),o-=t.length;const n=r.indexOf(t,o);return n!==-1&&n===o},k1=r=>{if(!r)return null;if(_i(r))return r;let t=r.length;if(!ag(t))return null;const o=new Array(t);for(;t-- >0;)o[t]=r[t];return o},_1=(r=>t=>r&&t instanceof r)(typeof Uint8Array<"u"&&gu(Uint8Array)),z1=(r,t)=>{const n=(r&&r[jl]).call(r);let i;for(;(i=n.next())&&!i.done;){const s=i.value;t.call(r,s[0],s[1])}},E1=(r,t)=>{let o;const n=[];for(;(o=r.exec(t))!==null;)n.push(o);return n},R1=fo("HTMLFormElement"),A1=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(o,n,i){return n.toUpperCase()+i}),ap=(({hasOwnProperty:r})=>(t,o)=>r.call(t,o))(Object.prototype),I1=fo("RegExp"),cg=(r,t)=>{const o=Object.getOwnPropertyDescriptors(r),n={};Ts(o,(i,s)=>{let a;(a=t(i,s,r))!==!1&&(n[s]=a||i)}),Object.defineProperties(r,n)},W1=r=>{cg(r,(t,o)=>{if(Ot(r)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const n=r[o];if(Ot(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},T1=(r,t)=>{const o={},n=i=>{i.forEach(s=>{o[s]=!0})};return _i(r)?n(r):n(String(r).split(t)),o},M1=()=>{},P1=(r,t)=>r!=null&&Number.isFinite(r=+r)?r:t;function N1(r){return!!(r&&Ot(r.append)&&r[ig]==="FormData"&&r[jl])}const D1=r=>{const t=new Array(10),o=(n,i)=>{if(Ws(n)){if(t.indexOf(n)>=0)return;if(Is(n))return n;if(!("toJSON"in n)){t[i]=n;const s=_i(n)?[]:{};return Ts(n,(a,d)=>{const u=o(a,i+1);!bi(u)&&(s[d]=u)}),t[i]=void 0,s}}return n};return o(r,0)},B1=fo("AsyncFunction"),O1=r=>r&&(Ws(r)||Ot(r))&&Ot(r.then)&&Ot(r.catch),ug=((r,t)=>r?setImmediate:t?((o,n)=>(vn.addEventListener("message",({source:i,data:s})=>{i===vn&&s===o&&n.length&&n.shift()()},!1),i=>{n.push(i),vn.postMessage(o,"*")}))(`axios@${Math.random()}`,[]):o=>setTimeout(o))(typeof setImmediate=="function",Ot(vn.postMessage)),L1=typeof queueMicrotask<"u"?queueMicrotask.bind(vn):typeof process<"u"&&process.nextTick||ug,F1=r=>r!=null&&Ot(r[jl]),ae={isArray:_i,isArrayBuffer:sg,isBuffer:Is,isFormData:p1,isArrayBufferView:n1,isString:i1,isNumber:ag,isBoolean:s1,isObject:Ws,isPlainObject:Ca,isEmptyObject:a1,isReadableStream:g1,isRequest:h1,isResponse:x1,isHeaders:y1,isUndefined:bi,isDate:l1,isFile:d1,isBlob:c1,isRegExp:I1,isFunction:Ot,isStream:m1,isURLSearchParams:f1,isTypedArray:_1,isFileList:u1,forEach:Ts,merge:dc,extend:v1,trim:b1,stripBOM:j1,inherits:C1,toFlatObject:S1,kindOf:Cl,kindOfTest:fo,endsWith:w1,toArray:k1,forEachEntry:z1,matchAll:E1,isHTMLForm:R1,hasOwnProperty:ap,hasOwnProp:ap,reduceDescriptors:cg,freezeMethods:W1,toObjectSet:T1,toCamelCase:A1,noop:M1,toFiniteNumber:P1,findKey:lg,global:vn,isContextDefined:dg,isSpecCompliantForm:N1,toJSONObject:D1,isAsyncFn:B1,isThenable:O1,setImmediate:ug,asap:L1,isIterable:F1};function tr(r,t,o,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",t&&(this.code=t),o&&(this.config=o),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}ae.inherits(tr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ae.toJSONObject(this.config),code:this.code,status:this.status}}});const mg=tr.prototype,pg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{pg[r]={value:r}});Object.defineProperties(tr,pg);Object.defineProperty(mg,"isAxiosError",{value:!0});tr.from=(r,t,o,n,i,s)=>{const a=Object.create(mg);ae.toFlatObject(r,a,function(f){return f!==Error.prototype},l=>l!=="isAxiosError");const d=r&&r.message?r.message:"Error",u=t==null&&r?r.code:t;return tr.call(a,d,u,o,n,i),r&&a.cause==null&&Object.defineProperty(a,"cause",{value:r,configurable:!0}),a.name=r&&r.name||"Error",s&&Object.assign(a,s),a};const $1=null;function cc(r){return ae.isPlainObject(r)||ae.isArray(r)}function fg(r){return ae.endsWith(r,"[]")?r.slice(0,-2):r}function lp(r,t,o){return r?r.concat(t).map(function(i,s){return i=fg(i),!o&&s?"["+i+"]":i}).join(o?".":""):t}function U1(r){return ae.isArray(r)&&!r.some(cc)}const G1=ae.toFlatObject(ae,{},null,function(t){return/^is[A-Z]/.test(t)});function wl(r,t,o){if(!ae.isObject(r))throw new TypeError("target must be an object");t=t||new FormData,o=ae.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,k){return!ae.isUndefined(k[w])});const n=o.metaTokens,i=o.visitor||f,s=o.dots,a=o.indexes,u=(o.Blob||typeof Blob<"u"&&Blob)&&ae.isSpecCompliantForm(t);if(!ae.isFunction(i))throw new TypeError("visitor must be a function");function l(b){if(b===null)return"";if(ae.isDate(b))return b.toISOString();if(ae.isBoolean(b))return b.toString();if(!u&&ae.isBlob(b))throw new tr("Blob is not supported. Use a Buffer instead.");return ae.isArrayBuffer(b)||ae.isTypedArray(b)?u&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function f(b,w,k){let j=b;if(b&&!k&&typeof b=="object"){if(ae.endsWith(w,"{}"))w=n?w:w.slice(0,-2),b=JSON.stringify(b);else if(ae.isArray(b)&&U1(b)||(ae.isFileList(b)||ae.endsWith(w,"[]"))&&(j=ae.toArray(b)))return w=fg(w),j.forEach(function(C,S){!(ae.isUndefined(C)||C===null)&&t.append(a===!0?lp([w],S,s):a===null?w:w+"[]",l(C))}),!1}return cc(b)?!0:(t.append(lp(k,w,s),l(b)),!1)}const g=[],y=Object.assign(G1,{defaultVisitor:f,convertValue:l,isVisitable:cc});function z(b,w){if(!ae.isUndefined(b)){if(g.indexOf(b)!==-1)throw Error("Circular reference detected in "+w.join("."));g.push(b),ae.forEach(b,function(j,p){(!(ae.isUndefined(j)||j===null)&&i.call(t,j,ae.isString(p)?p.trim():p,w,y))===!0&&z(j,w?w.concat(p):[p])}),g.pop()}}if(!ae.isObject(r))throw new TypeError("data must be an object");return z(r),t}function dp(r){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function hu(r,t){this._pairs=[],r&&wl(r,this,t)}const gg=hu.prototype;gg.append=function(t,o){this._pairs.push([t,o])};gg.toString=function(t){const o=t?function(n){return t.call(this,n,dp)}:dp;return this._pairs.map(function(i){return o(i[0])+"="+o(i[1])},"").join("&")};function H1(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function hg(r,t,o){if(!t)return r;const n=o&&o.encode||H1;ae.isFunction(o)&&(o={serialize:o});const i=o&&o.serialize;let s;if(i?s=i(t,o):s=ae.isURLSearchParams(t)?t.toString():new hu(t,o).toString(n),s){const a=r.indexOf("#");a!==-1&&(r=r.slice(0,a)),r+=(r.indexOf("?")===-1?"?":"&")+s}return r}class cp{constructor(){this.handlers=[]}use(t,o,n){return this.handlers.push({fulfilled:t,rejected:o,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ae.forEach(this.handlers,function(n){n!==null&&t(n)})}}const xg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},V1=typeof URLSearchParams<"u"?URLSearchParams:hu,q1=typeof FormData<"u"?FormData:null,Y1=typeof Blob<"u"?Blob:null,K1={isBrowser:!0,classes:{URLSearchParams:V1,FormData:q1,Blob:Y1},protocols:["http","https","file","blob","url","data"]},xu=typeof window<"u"&&typeof document<"u",uc=typeof navigator=="object"&&navigator||void 0,Q1=xu&&(!uc||["ReactNative","NativeScript","NS"].indexOf(uc.product)<0),X1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",J1=xu&&window.location.href||"http://localhost",Z1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:xu,hasStandardBrowserEnv:Q1,hasStandardBrowserWebWorkerEnv:X1,navigator:uc,origin:J1},Symbol.toStringTag,{value:"Module"})),vt={...Z1,...K1};function e5(r,t){return wl(r,new vt.classes.URLSearchParams,{visitor:function(o,n,i,s){return vt.isNode&&ae.isBuffer(o)?(this.append(n,o.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function r5(r){return ae.matchAll(/\w+|\[(\w*)]/g,r).map(t=>t[0]==="[]"?"":t[1]||t[0])}function t5(r){const t={},o=Object.keys(r);let n;const i=o.length;let s;for(n=0;n<i;n++)s=o[n],t[s]=r[s];return t}function yg(r){function t(o,n,i,s){let a=o[s++];if(a==="__proto__")return!0;const d=Number.isFinite(+a),u=s>=o.length;return a=!a&&ae.isArray(i)?i.length:a,u?(ae.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!d):((!i[a]||!ae.isObject(i[a]))&&(i[a]=[]),t(o,n,i[a],s)&&ae.isArray(i[a])&&(i[a]=t5(i[a])),!d)}if(ae.isFormData(r)&&ae.isFunction(r.entries)){const o={};return ae.forEachEntry(r,(n,i)=>{t(r5(n),i,o,0)}),o}return null}function o5(r,t,o){if(ae.isString(r))try{return(t||JSON.parse)(r),ae.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(o||JSON.stringify)(r)}const Ms={transitional:xg,adapter:["xhr","http","fetch"],transformRequest:[function(t,o){const n=o.getContentType()||"",i=n.indexOf("application/json")>-1,s=ae.isObject(t);if(s&&ae.isHTMLForm(t)&&(t=new FormData(t)),ae.isFormData(t))return i?JSON.stringify(yg(t)):t;if(ae.isArrayBuffer(t)||ae.isBuffer(t)||ae.isStream(t)||ae.isFile(t)||ae.isBlob(t)||ae.isReadableStream(t))return t;if(ae.isArrayBufferView(t))return t.buffer;if(ae.isURLSearchParams(t))return o.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return e5(t,this.formSerializer).toString();if((d=ae.isFileList(t))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return wl(d?{"files[]":t}:t,u&&new u,this.formSerializer)}}return s||i?(o.setContentType("application/json",!1),o5(t)):t}],transformResponse:[function(t){const o=this.transitional||Ms.transitional,n=o&&o.forcedJSONParsing,i=this.responseType==="json";if(ae.isResponse(t)||ae.isReadableStream(t))return t;if(t&&ae.isString(t)&&(n&&!this.responseType||i)){const a=!(o&&o.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(d){if(a)throw d.name==="SyntaxError"?tr.from(d,tr.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vt.classes.FormData,Blob:vt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ae.forEach(["delete","get","head","post","put","patch"],r=>{Ms.headers[r]={}});const n5=ae.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),i5=r=>{const t={};let o,n,i;return r&&r.split(`
`).forEach(function(a){i=a.indexOf(":"),o=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!o||t[o]&&n5[o])&&(o==="set-cookie"?t[o]?t[o].push(n):t[o]=[n]:t[o]=t[o]?t[o]+", "+n:n)}),t},up=Symbol("internals");function Fi(r){return r&&String(r).trim().toLowerCase()}function Sa(r){return r===!1||r==null?r:ae.isArray(r)?r.map(Sa):String(r)}function s5(r){const t=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=o.exec(r);)t[n[1]]=n[2];return t}const a5=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function ad(r,t,o,n,i){if(ae.isFunction(n))return n.call(this,t,o);if(i&&(t=o),!!ae.isString(t)){if(ae.isString(n))return t.indexOf(n)!==-1;if(ae.isRegExp(n))return n.test(t)}}function l5(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,o,n)=>o.toUpperCase()+n)}function d5(r,t){const o=ae.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+o,{value:function(i,s,a){return this[n].call(this,t,i,s,a)},configurable:!0})})}let Lt=class{constructor(t){t&&this.set(t)}set(t,o,n){const i=this;function s(d,u,l){const f=Fi(u);if(!f)throw new Error("header name must be a non-empty string");const g=ae.findKey(i,f);(!g||i[g]===void 0||l===!0||l===void 0&&i[g]!==!1)&&(i[g||u]=Sa(d))}const a=(d,u)=>ae.forEach(d,(l,f)=>s(l,f,u));if(ae.isPlainObject(t)||t instanceof this.constructor)a(t,o);else if(ae.isString(t)&&(t=t.trim())&&!a5(t))a(i5(t),o);else if(ae.isObject(t)&&ae.isIterable(t)){let d={},u,l;for(const f of t){if(!ae.isArray(f))throw TypeError("Object iterator must return a key-value pair");d[l=f[0]]=(u=d[l])?ae.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}a(d,o)}else t!=null&&s(o,t,n);return this}get(t,o){if(t=Fi(t),t){const n=ae.findKey(this,t);if(n){const i=this[n];if(!o)return i;if(o===!0)return s5(i);if(ae.isFunction(o))return o.call(this,i,n);if(ae.isRegExp(o))return o.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,o){if(t=Fi(t),t){const n=ae.findKey(this,t);return!!(n&&this[n]!==void 0&&(!o||ad(this,this[n],n,o)))}return!1}delete(t,o){const n=this;let i=!1;function s(a){if(a=Fi(a),a){const d=ae.findKey(n,a);d&&(!o||ad(n,n[d],d,o))&&(delete n[d],i=!0)}}return ae.isArray(t)?t.forEach(s):s(t),i}clear(t){const o=Object.keys(this);let n=o.length,i=!1;for(;n--;){const s=o[n];(!t||ad(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const o=this,n={};return ae.forEach(this,(i,s)=>{const a=ae.findKey(n,s);if(a){o[a]=Sa(i),delete o[s];return}const d=t?l5(s):String(s).trim();d!==s&&delete o[s],o[d]=Sa(i),n[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const o=Object.create(null);return ae.forEach(this,(n,i)=>{n!=null&&n!==!1&&(o[i]=t&&ae.isArray(n)?n.join(", "):n)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,o])=>t+": "+o).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...o){const n=new this(t);return o.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[up]=this[up]={accessors:{}}).accessors,i=this.prototype;function s(a){const d=Fi(a);n[d]||(d5(i,a),n[d]=!0)}return ae.isArray(t)?t.forEach(s):s(t),this}};Lt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ae.reduceDescriptors(Lt.prototype,({value:r},t)=>{let o=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(n){this[o]=n}}});ae.freezeMethods(Lt);function ld(r,t){const o=this||Ms,n=t||o,i=Lt.from(n.headers);let s=n.data;return ae.forEach(r,function(d){s=d.call(o,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function bg(r){return!!(r&&r.__CANCEL__)}function zi(r,t,o){tr.call(this,r??"canceled",tr.ERR_CANCELED,t,o),this.name="CanceledError"}ae.inherits(zi,tr,{__CANCEL__:!0});function vg(r,t,o){const n=o.config.validateStatus;!o.status||!n||n(o.status)?r(o):t(new tr("Request failed with status code "+o.status,[tr.ERR_BAD_REQUEST,tr.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}function c5(r){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return t&&t[1]||""}function u5(r,t){r=r||10;const o=new Array(r),n=new Array(r);let i=0,s=0,a;return t=t!==void 0?t:1e3,function(u){const l=Date.now(),f=n[s];a||(a=l),o[i]=u,n[i]=l;let g=s,y=0;for(;g!==i;)y+=o[g++],g=g%r;if(i=(i+1)%r,i===s&&(s=(s+1)%r),l-a<t)return;const z=f&&l-f;return z?Math.round(y*1e3/z):void 0}}function m5(r,t){let o=0,n=1e3/t,i,s;const a=(l,f=Date.now())=>{o=f,i=null,s&&(clearTimeout(s),s=null),r(...l)};return[(...l)=>{const f=Date.now(),g=f-o;g>=n?a(l,f):(i=l,s||(s=setTimeout(()=>{s=null,a(i)},n-g)))},()=>i&&a(i)]}const Xa=(r,t,o=3)=>{let n=0;const i=u5(50,250);return m5(s=>{const a=s.loaded,d=s.lengthComputable?s.total:void 0,u=a-n,l=i(u),f=a<=d;n=a;const g={loaded:a,total:d,progress:d?a/d:void 0,bytes:u,rate:l||void 0,estimated:l&&d&&f?(d-a)/l:void 0,event:s,lengthComputable:d!=null,[t?"download":"upload"]:!0};r(g)},o)},mp=(r,t)=>{const o=r!=null;return[n=>t[0]({lengthComputable:o,total:r,loaded:n}),t[1]]},pp=r=>(...t)=>ae.asap(()=>r(...t)),p5=vt.hasStandardBrowserEnv?((r,t)=>o=>(o=new URL(o,vt.origin),r.protocol===o.protocol&&r.host===o.host&&(t||r.port===o.port)))(new URL(vt.origin),vt.navigator&&/(msie|trident)/i.test(vt.navigator.userAgent)):()=>!0,f5=vt.hasStandardBrowserEnv?{write(r,t,o,n,i,s,a){if(typeof document>"u")return;const d=[`${r}=${encodeURIComponent(t)}`];ae.isNumber(o)&&d.push(`expires=${new Date(o).toUTCString()}`),ae.isString(n)&&d.push(`path=${n}`),ae.isString(i)&&d.push(`domain=${i}`),s===!0&&d.push("secure"),ae.isString(a)&&d.push(`SameSite=${a}`),document.cookie=d.join("; ")},read(r){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function g5(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function h5(r,t){return t?r.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):r}function jg(r,t,o){let n=!g5(t);return r&&(n||o==!1)?h5(r,t):t}const fp=r=>r instanceof Lt?{...r}:r;function In(r,t){t=t||{};const o={};function n(l,f,g,y){return ae.isPlainObject(l)&&ae.isPlainObject(f)?ae.merge.call({caseless:y},l,f):ae.isPlainObject(f)?ae.merge({},f):ae.isArray(f)?f.slice():f}function i(l,f,g,y){if(ae.isUndefined(f)){if(!ae.isUndefined(l))return n(void 0,l,g,y)}else return n(l,f,g,y)}function s(l,f){if(!ae.isUndefined(f))return n(void 0,f)}function a(l,f){if(ae.isUndefined(f)){if(!ae.isUndefined(l))return n(void 0,l)}else return n(void 0,f)}function d(l,f,g){if(g in t)return n(l,f);if(g in r)return n(void 0,l)}const u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:d,headers:(l,f,g)=>i(fp(l),fp(f),g,!0)};return ae.forEach(Object.keys({...r,...t}),function(f){const g=u[f]||i,y=g(r[f],t[f],f);ae.isUndefined(y)&&g!==d||(o[f]=y)}),o}const Cg=r=>{const t=In({},r);let{data:o,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:d}=t;if(t.headers=a=Lt.from(a),t.url=hg(jg(t.baseURL,t.url,t.allowAbsoluteUrls),r.params,r.paramsSerializer),d&&a.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),ae.isFormData(o)){if(vt.hasStandardBrowserEnv||vt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(ae.isFunction(o.getHeaders)){const u=o.getHeaders(),l=["content-type","content-length"];Object.entries(u).forEach(([f,g])=>{l.includes(f.toLowerCase())&&a.set(f,g)})}}if(vt.hasStandardBrowserEnv&&(n&&ae.isFunction(n)&&(n=n(t)),n||n!==!1&&p5(t.url))){const u=i&&s&&f5.read(s);u&&a.set(i,u)}return t},x5=typeof XMLHttpRequest<"u",y5=x5&&function(r){return new Promise(function(o,n){const i=Cg(r);let s=i.data;const a=Lt.from(i.headers).normalize();let{responseType:d,onUploadProgress:u,onDownloadProgress:l}=i,f,g,y,z,b;function w(){z&&z(),b&&b(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let k=new XMLHttpRequest;k.open(i.method.toUpperCase(),i.url,!0),k.timeout=i.timeout;function j(){if(!k)return;const C=Lt.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),L={data:!d||d==="text"||d==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:C,config:r,request:k};vg(function(I){o(I),w()},function(I){n(I),w()},L),k=null}"onloadend"in k?k.onloadend=j:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(j)},k.onabort=function(){k&&(n(new tr("Request aborted",tr.ECONNABORTED,r,k)),k=null)},k.onerror=function(S){const L=S&&S.message?S.message:"Network Error",W=new tr(L,tr.ERR_NETWORK,r,k);W.event=S||null,n(W),k=null},k.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const L=i.transitional||xg;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),n(new tr(S,L.clarifyTimeoutError?tr.ETIMEDOUT:tr.ECONNABORTED,r,k)),k=null},s===void 0&&a.setContentType(null),"setRequestHeader"in k&&ae.forEach(a.toJSON(),function(S,L){k.setRequestHeader(L,S)}),ae.isUndefined(i.withCredentials)||(k.withCredentials=!!i.withCredentials),d&&d!=="json"&&(k.responseType=i.responseType),l&&([y,b]=Xa(l,!0),k.addEventListener("progress",y)),u&&k.upload&&([g,z]=Xa(u),k.upload.addEventListener("progress",g),k.upload.addEventListener("loadend",z)),(i.cancelToken||i.signal)&&(f=C=>{k&&(n(!C||C.type?new zi(null,r,k):C),k.abort(),k=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const p=c5(i.url);if(p&&vt.protocols.indexOf(p)===-1){n(new tr("Unsupported protocol "+p+":",tr.ERR_BAD_REQUEST,r));return}k.send(s||null)})},b5=(r,t)=>{const{length:o}=r=r?r.filter(Boolean):[];if(t||o){let n=new AbortController,i;const s=function(l){if(!i){i=!0,d();const f=l instanceof Error?l:this.reason;n.abort(f instanceof tr?f:new zi(f instanceof Error?f.message:f))}};let a=t&&setTimeout(()=>{a=null,s(new tr(`timeout ${t} of ms exceeded`,tr.ETIMEDOUT))},t);const d=()=>{r&&(a&&clearTimeout(a),a=null,r.forEach(l=>{l.unsubscribe?l.unsubscribe(s):l.removeEventListener("abort",s)}),r=null)};r.forEach(l=>l.addEventListener("abort",s));const{signal:u}=n;return u.unsubscribe=()=>ae.asap(d),u}},v5=function*(r,t){let o=r.byteLength;if(o<t){yield r;return}let n=0,i;for(;n<o;)i=n+t,yield r.slice(n,i),n=i},j5=async function*(r,t){for await(const o of C5(r))yield*v5(o,t)},C5=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const t=r.getReader();try{for(;;){const{done:o,value:n}=await t.read();if(o)break;yield n}}finally{await t.cancel()}},gp=(r,t,o,n)=>{const i=j5(r,t);let s=0,a,d=u=>{a||(a=!0,n&&n(u))};return new ReadableStream({async pull(u){try{const{done:l,value:f}=await i.next();if(l){d(),u.close();return}let g=f.byteLength;if(o){let y=s+=g;o(y)}u.enqueue(new Uint8Array(f))}catch(l){throw d(l),l}},cancel(u){return d(u),i.return()}},{highWaterMark:2})},hp=64*1024,{isFunction:ia}=ae,S5=(({Request:r,Response:t})=>({Request:r,Response:t}))(ae.global),{ReadableStream:xp,TextEncoder:yp}=ae.global,bp=(r,...t)=>{try{return!!r(...t)}catch{return!1}},w5=r=>{r=ae.merge.call({skipUndefined:!0},S5,r);const{fetch:t,Request:o,Response:n}=r,i=t?ia(t):typeof fetch=="function",s=ia(o),a=ia(n);if(!i)return!1;const d=i&&ia(xp),u=i&&(typeof yp=="function"?(b=>w=>b.encode(w))(new yp):async b=>new Uint8Array(await new o(b).arrayBuffer())),l=s&&d&&bp(()=>{let b=!1;const w=new o(vt.origin,{body:new xp,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!w}),f=a&&d&&bp(()=>ae.isReadableStream(new n("").body)),g={stream:f&&(b=>b.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!g[b]&&(g[b]=(w,k)=>{let j=w&&w[b];if(j)return j.call(w);throw new tr(`Response type '${b}' is not supported`,tr.ERR_NOT_SUPPORT,k)})});const y=async b=>{if(b==null)return 0;if(ae.isBlob(b))return b.size;if(ae.isSpecCompliantForm(b))return(await new o(vt.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(ae.isArrayBufferView(b)||ae.isArrayBuffer(b))return b.byteLength;if(ae.isURLSearchParams(b)&&(b=b+""),ae.isString(b))return(await u(b)).byteLength},z=async(b,w)=>{const k=ae.toFiniteNumber(b.getContentLength());return k??y(w)};return async b=>{let{url:w,method:k,data:j,signal:p,cancelToken:C,timeout:S,onDownloadProgress:L,onUploadProgress:W,responseType:I,headers:m,withCredentials:B="same-origin",fetchOptions:H}=Cg(b),E=t||fetch;I=I?(I+"").toLowerCase():"text";let R=b5([p,C&&C.toAbortSignal()],S),te=null;const F=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let K;try{if(W&&l&&k!=="get"&&k!=="head"&&(K=await z(m,j))!==0){let ee=new o(w,{method:"POST",body:j,duplex:"half"}),Y;if(ae.isFormData(j)&&(Y=ee.headers.get("content-type"))&&m.setContentType(Y),ee.body){const[X,se]=mp(K,Xa(pp(W)));j=gp(ee.body,hp,X,se)}}ae.isString(B)||(B=B?"include":"omit");const D=s&&"credentials"in o.prototype,Z={...H,signal:R,method:k.toUpperCase(),headers:m.normalize().toJSON(),body:j,duplex:"half",credentials:D?B:void 0};te=s&&new o(w,Z);let P=await(s?E(te,H):E(w,Z));const $=f&&(I==="stream"||I==="response");if(f&&(L||$&&F)){const ee={};["status","statusText","headers"].forEach(G=>{ee[G]=P[G]});const Y=ae.toFiniteNumber(P.headers.get("content-length")),[X,se]=L&&mp(Y,Xa(pp(L),!0))||[];P=new n(gp(P.body,hp,X,()=>{se&&se(),F&&F()}),ee)}I=I||"text";let N=await g[ae.findKey(g,I)||"text"](P,b);return!$&&F&&F(),await new Promise((ee,Y)=>{vg(ee,Y,{data:N,headers:Lt.from(P.headers),status:P.status,statusText:P.statusText,config:b,request:te})})}catch(D){throw F&&F(),D&&D.name==="TypeError"&&/Load failed|fetch/i.test(D.message)?Object.assign(new tr("Network Error",tr.ERR_NETWORK,b,te),{cause:D.cause||D}):tr.from(D,D&&D.code,b,te)}}},k5=new Map,Sg=r=>{let t=r&&r.env||{};const{fetch:o,Request:n,Response:i}=t,s=[n,i,o];let a=s.length,d=a,u,l,f=k5;for(;d--;)u=s[d],l=f.get(u),l===void 0&&f.set(u,l=d?new Map:w5(t)),f=l;return l};Sg();const yu={http:$1,xhr:y5,fetch:{get:Sg}};ae.forEach(yu,(r,t)=>{if(r){try{Object.defineProperty(r,"name",{value:t})}catch{}Object.defineProperty(r,"adapterName",{value:t})}});const vp=r=>`- ${r}`,_5=r=>ae.isFunction(r)||r===null||r===!1;function z5(r,t){r=ae.isArray(r)?r:[r];const{length:o}=r;let n,i;const s={};for(let a=0;a<o;a++){n=r[a];let d;if(i=n,!_5(n)&&(i=yu[(d=String(n)).toLowerCase()],i===void 0))throw new tr(`Unknown adapter '${d}'`);if(i&&(ae.isFunction(i)||(i=i.get(t))))break;s[d||"#"+a]=i}if(!i){const a=Object.entries(s).map(([u,l])=>`adapter ${u} `+(l===!1?"is not supported by the environment":"is not available in the build"));let d=o?a.length>1?`since :
`+a.map(vp).join(`
`):" "+vp(a[0]):"as no adapter specified";throw new tr("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return i}const wg={getAdapter:z5,adapters:yu};function dd(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new zi(null,r)}function jp(r){return dd(r),r.headers=Lt.from(r.headers),r.data=ld.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),wg.getAdapter(r.adapter||Ms.adapter,r)(r).then(function(n){return dd(r),n.data=ld.call(r,r.transformResponse,n),n.headers=Lt.from(n.headers),n},function(n){return bg(n)||(dd(r),n&&n.response&&(n.response.data=ld.call(r,r.transformResponse,n.response),n.response.headers=Lt.from(n.response.headers))),Promise.reject(n)})}const kg="1.13.2",kl={};["object","boolean","number","function","string","symbol"].forEach((r,t)=>{kl[r]=function(n){return typeof n===r||"a"+(t<1?"n ":" ")+r}});const Cp={};kl.transitional=function(t,o,n){function i(s,a){return"[Axios v"+kg+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return(s,a,d)=>{if(t===!1)throw new tr(i(a," has been removed"+(o?" in "+o:"")),tr.ERR_DEPRECATED);return o&&!Cp[a]&&(Cp[a]=!0,console.warn(i(a," has been deprecated since v"+o+" and will be removed in the near future"))),t?t(s,a,d):!0}};kl.spelling=function(t){return(o,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function E5(r,t,o){if(typeof r!="object")throw new tr("options must be an object",tr.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let i=n.length;for(;i-- >0;){const s=n[i],a=t[s];if(a){const d=r[s],u=d===void 0||a(d,s,r);if(u!==!0)throw new tr("option "+s+" must be "+u,tr.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new tr("Unknown option "+s,tr.ERR_BAD_OPTION)}}const wa={assertOptions:E5,validators:kl},bo=wa.validators;let kn=class{constructor(t){this.defaults=t||{},this.interceptors={request:new cp,response:new cp}}async request(t,o){try{return await this._request(t,o)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(t,o){typeof t=="string"?(o=o||{},o.url=t):o=t||{},o=In(this.defaults,o);const{transitional:n,paramsSerializer:i,headers:s}=o;n!==void 0&&wa.assertOptions(n,{silentJSONParsing:bo.transitional(bo.boolean),forcedJSONParsing:bo.transitional(bo.boolean),clarifyTimeoutError:bo.transitional(bo.boolean)},!1),i!=null&&(ae.isFunction(i)?o.paramsSerializer={serialize:i}:wa.assertOptions(i,{encode:bo.function,serialize:bo.function},!0)),o.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?o.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:o.allowAbsoluteUrls=!0),wa.assertOptions(o,{baseUrl:bo.spelling("baseURL"),withXsrfToken:bo.spelling("withXSRFToken")},!0),o.method=(o.method||this.defaults.method||"get").toLowerCase();let a=s&&ae.merge(s.common,s[o.method]);s&&ae.forEach(["delete","get","head","post","put","patch","common"],b=>{delete s[b]}),o.headers=Lt.concat(a,s);const d=[];let u=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(o)===!1||(u=u&&w.synchronous,d.unshift(w.fulfilled,w.rejected))});const l=[];this.interceptors.response.forEach(function(w){l.push(w.fulfilled,w.rejected)});let f,g=0,y;if(!u){const b=[jp.bind(this),void 0];for(b.unshift(...d),b.push(...l),y=b.length,f=Promise.resolve(o);g<y;)f=f.then(b[g++],b[g++]);return f}y=d.length;let z=o;for(;g<y;){const b=d[g++],w=d[g++];try{z=b(z)}catch(k){w.call(this,k);break}}try{f=jp.call(this,z)}catch(b){return Promise.reject(b)}for(g=0,y=l.length;g<y;)f=f.then(l[g++],l[g++]);return f}getUri(t){t=In(this.defaults,t);const o=jg(t.baseURL,t.url,t.allowAbsoluteUrls);return hg(o,t.params,t.paramsSerializer)}};ae.forEach(["delete","get","head","options"],function(t){kn.prototype[t]=function(o,n){return this.request(In(n||{},{method:t,url:o,data:(n||{}).data}))}});ae.forEach(["post","put","patch"],function(t){function o(n){return function(s,a,d){return this.request(In(d||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}kn.prototype[t]=o(),kn.prototype[t+"Form"]=o(!0)});let R5=class _g{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(s){o=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(d=>{n.subscribe(d),s=d}).then(i);return a.cancel=function(){n.unsubscribe(s)},a},t(function(s,a,d){n.reason||(n.reason=new zi(s,a,d),o(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const o=this._listeners.indexOf(t);o!==-1&&this._listeners.splice(o,1)}toAbortSignal(){const t=new AbortController,o=n=>{t.abort(n)};return this.subscribe(o),t.signal.unsubscribe=()=>this.unsubscribe(o),t.signal}static source(){let t;return{token:new _g(function(i){t=i}),cancel:t}}};function A5(r){return function(o){return r.apply(null,o)}}function I5(r){return ae.isObject(r)&&r.isAxiosError===!0}const mc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(mc).forEach(([r,t])=>{mc[t]=r});function zg(r){const t=new kn(r),o=ng(kn.prototype.request,t);return ae.extend(o,kn.prototype,t,{allOwnKeys:!0}),ae.extend(o,t,null,{allOwnKeys:!0}),o.create=function(i){return zg(In(r,i))},o}const Jr=zg(Ms);Jr.Axios=kn;Jr.CanceledError=zi;Jr.CancelToken=R5;Jr.isCancel=bg;Jr.VERSION=kg;Jr.toFormData=wl;Jr.AxiosError=tr;Jr.Cancel=Jr.CanceledError;Jr.all=function(t){return Promise.all(t)};Jr.spread=A5;Jr.isAxiosError=I5;Jr.mergeConfig=In;Jr.AxiosHeaders=Lt;Jr.formToJSON=r=>yg(ae.isHTMLForm(r)?new FormData(r):r);Jr.getAdapter=wg.getAdapter;Jr.HttpStatusCode=mc;Jr.default=Jr;const{Axios:oj,AxiosError:nj,CanceledError:ij,isCancel:sj,CancelToken:aj,VERSION:lj,all:dj,Cancel:cj,isAxiosError:uj,spread:mj,toFormData:pj,AxiosHeaders:fj,HttpStatusCode:gj,formToJSON:hj,getAdapter:xj,mergeConfig:yj}=Jr,W5="/api",oe=Jr.create({baseURL:W5,headers:{"Content-Type":"application/json"},timeout:1e4});oe.interceptors.request.use(r=>{const t=localStorage.getItem("token");return t&&(r.headers=r.headers||{},r.headers.Authorization=`Bearer ${t}`),r},r=>Promise.reject(r));oe.interceptors.response.use(r=>r,r=>{var n,i,s,a,d;const t=((i=(n=r.config)==null?void 0:n.url)==null?void 0:i.includes("/auth/login"))||((a=(s=r.config)==null?void 0:s.url)==null?void 0:a.includes("/auth/verificar")),o=window.location.pathname.includes("/login");return((d=r.response)==null?void 0:d.status)===401&&!o&&!t&&(r.isAuthError=!0,localStorage.removeItem("token"),localStorage.removeItem("usuario"),window.location.href="/login"),Promise.reject(r)});const cd={login:async(r,t)=>(await oe.post("/auth/login",{nombre_usuario:r,contrasena:t})).data,logout:async()=>{try{await oe.post("/auth/logout")}catch(r){console.error("Error al cerrar sesin:",r)}finally{localStorage.removeItem("token"),localStorage.removeItem("usuario")}},verificar:async()=>(await oe.get("/auth/verificar")).data},dt={getAll:async(r=null)=>{const t=typeof r=="string"?{rol:r}:r||{};return(await oe.get("/usuarios",{params:t})).data},getById:async r=>(await oe.get(`/usuarios/${r}`)).data,create:async r=>(await oe.post("/usuarios",r)).data,update:async(r,t)=>(await oe.put(`/usuarios/${r}`,t)).data,delete:async r=>(await oe.delete(`/usuarios/${r}`)).data,cambiarContrasena:async(r,t)=>(await oe.post(`/usuarios/${r}/cambiar-contrasena`,{nueva_contrasena:t})).data,getPermisos:async r=>(await oe.get(`/usuarios/${r}/permisos`)).data,updatePermisos:async(r,t)=>(await oe.put(`/usuarios/${r}/permisos`,{permisos:t})).data,deletePermisos:async r=>(await oe.delete(`/usuarios/${r}/permisos`)).data,getRoles:async()=>(await oe.get("/usuarios/roles")).data,getPermisosRol:async r=>(await oe.get(`/usuarios/roles/${r}/permisos`)).data,updatePermisosRol:async(r,t)=>(await oe.put(`/usuarios/roles/${r}/permisos`,{permisos:t})).data,deletePermisosRol:async r=>(await oe.delete(`/usuarios/roles/${r}/permisos`)).data},lo={getAll:async()=>(await oe.get("/clientes")).data,getMe:async()=>(await oe.get("/clientes/me")).data,getById:async r=>(await oe.get(`/clientes/${r}`)).data,create:async r=>(await oe.post("/clientes",r)).data,update:async(r,t)=>(await oe.put(`/clientes/${r}`,t)).data,delete:async r=>(await oe.delete(`/clientes/${r}`)).data},Eg={getAll:async(r=!0)=>{const t={solo_activos:r};return(await oe.get("/tipos_evento",{params:t})).data},getById:async r=>(await oe.get(`/tipos_evento/${r}`)).data},To={getAll:async(r=!0,t=null)=>{const o={solo_activos:r};return t&&(o.categoria_id=t),(await oe.get("/productos",{params:o})).data},getById:async r=>(await oe.get(`/productos/${r}`)).data,create:async r=>(await oe.post("/productos",r)).data,update:async(r,t)=>(await oe.put(`/productos/${r}`,t)).data,delete:async r=>(await oe.delete(`/productos/${r}`)).data,updateStock:async(r,t)=>(await oe.put(`/productos/${r}/stock`,{cantidad:t})).data},Yi={getAll:async(r=!0)=>{const t={solo_activas:r};return(await oe.get("/categorias",{params:t})).data},getById:async r=>(await oe.get(`/categorias/${r}`)).data,create:async r=>(await oe.post("/categorias",r)).data,update:async(r,t)=>(await oe.put(`/categorias/${r}`,t)).data,delete:async r=>(await oe.delete(`/categorias/${r}`)).data},dr={getAll:async(r={})=>(await oe.get("/eventos",{params:r})).data,getById:async r=>(await oe.get(`/eventos/${r}`)).data,create:async r=>(await oe.post("/eventos",r)).data,update:async(r,t)=>(await oe.put(`/eventos/${r}`,t)).data,updateEstado:async(r,t)=>(await oe.put(`/eventos/${r}/estado`,{estado:t})).data,asignarCoordinador:async(r,t)=>(await oe.put(`/eventos/${r}/coordinador`,{coordinador_id:t})).data,agregarProducto:async(r,t,o,n)=>(await oe.post(`/eventos/${r}/productos`,{producto_id:t,cantidad:o,precio_unitario:n})).data,eliminarProducto:async(r,t,o="")=>(await oe.delete(`/eventos/${r}/productos/${t}`,{data:{observacion:o}})).data,delete:async r=>(await oe.delete(`/eventos/${r}`)).data,getProductos:async r=>(await oe.get(`/eventos/${r}/productos`)).data,getServicios:async r=>(await oe.get(`/eventos/${r}/servicios`)).data,actualizarServicio:async(r,t,o,n)=>{const i={};return o!=null&&(i.completado=o),n!=null&&(i.descartado=n),(await oe.put(`/eventos/${r}/servicios/${t}`,i)).data},generarServicios:async r=>(await oe.post(`/eventos/${r}/servicios/generar`)).data,crearServicioPersonalizado:async(r,t,o)=>(await oe.post(`/eventos/${r}/servicios`,{nombre:t,orden:o})).data,eliminarServicio:async(r,t)=>(await oe.delete(`/eventos/${r}/servicios/${t}`)).data,calcularTotal:async r=>(await oe.post(`/eventos/${r}/calcular-total`)).data,descargarCotizacionPDF:async r=>await oe.get(`/eventos/${r}/cotizacion-pdf`,{responseType:"blob"}),completarEvento:async(r,t)=>(await oe.post(`/eventos/${r}/completar`,t)).data,obtenerDanos:async r=>(await oe.get(`/eventos/${r}/danos`)).data,registrarPagoDanos:async(r,t,o="efectivo",n="")=>(await oe.post(`/eventos/${r}/pago-danos`,{monto:t,metodo_pago:o,observaciones:n})).data,obtenerDanosPendientes:async()=>(await oe.get("/eventos/danos-pendientes")).data,registrarCalificacionManual:async(r,t)=>(await oe.post(`/eventos/${r}/calificacion`,t)).data,descargarContratoPDF:async r=>await oe.get(`/eventos/${r}/contrato-pdf`,{responseType:"blob"}),getFechasOcupadas:async r=>(await oe.get("/eventos/fechas-ocupadas",{params:{salon_id:r}})).data},yt={getAll:async(r=!0)=>{const t={solo_activos:r};return(await oe.get("/planes",{params:t})).data},getById:async r=>(await oe.get(`/planes/${r}`)).data,create:async r=>(await oe.post("/planes",r)).data,update:async(r,t)=>(await oe.put(`/planes/${r}`,t)).data,delete:async r=>(await oe.delete(`/planes/${r}`)).data,agregarProducto:async(r,t,o)=>(await oe.post(`/planes/${r}/productos`,{producto_id:t,cantidad:o})).data,eliminarProducto:async(r,t)=>(await oe.delete(`/planes/${r}/productos/${t}`)).data,getProductos:async r=>(await oe.get(`/planes/${r}/productos`)).data,getServicios:async r=>(await oe.get(`/planes/${r}/servicios`)).data,actualizarServicios:async(r,t)=>(await oe.put(`/planes/${r}/servicios`,{servicios:t})).data},rt={getByEvento:async r=>(await oe.get("/pagos",{params:{evento_id:r}})).data,getById:async r=>(await oe.get(`/pagos/${r}`)).data,create:async r=>(await oe.post("/pagos",r)).data,delete:async r=>(await oe.delete(`/pagos/${r}`)).data,updateEstado:async(r,t)=>(await oe.patch(`/pagos/${r}/estado`,{estado_pago:t})).data,updateCuenta:async(r,t)=>(await oe.put(`/pagos/${r}/cuenta`,{cuenta_id:t})).data,getTotalEvento:async r=>(await oe.get(`/pagos/evento/${r}/total`)).data},Sp={downloadTemplate:async r=>(await oe.get(`/carga_masiva/template/${r}`,{responseType:"blob"})).data,upload:async(r,t)=>{const o=new FormData;return o.append("archivo",t),(await oe.post(`/carga_masiva/${r}`,o,{headers:{"Content-Type":"multipart/form-data"}})).data}},T5={getByEvento:async r=>(await oe.get("/inventario",{params:{evento_id:r}})).data,create:async r=>(await oe.post("/inventario",r)).data,updateEstado:async(r,t,o=null)=>{const n={estado:t};return o!==null&&(n.cantidad_utilizada=o),(await oe.put(`/inventario/${r}/estado`,n)).data},registrarDevolucion:async(r,t)=>(await oe.post(`/inventario/${r}/devolucion`,{fecha_devolucion:t})).data,verificarDisponibilidad:async(r,t,o)=>(await oe.post("/inventario/verificar-disponibilidad",{producto_id:r,cantidad:t,fecha_evento:o})).data},jn={getAll:async(r=!1)=>{const t={solo_activos:r};return(await oe.get("/salones",{params:t})).data},getById:async r=>(await oe.get(`/salones/${r}`)).data,create:async r=>(await oe.post("/salones",r)).data,update:async(r,t)=>(await oe.put(`/salones/${r}`,t)).data,delete:async r=>(await oe.delete(`/salones/${r}`)).data,verificarDisponibilidad:async(r,t)=>(await oe.post(`/salones/${r}/verificar-disponibilidad`,{fecha_evento:t})).data},Tt={getMetricas:async(r={})=>(await oe.get("/reportes/metricas",{params:r})).data,getEventosPorEstado:async()=>(await oe.get("/reportes/eventos-por-estado")).data,getResumenFinanciero:async()=>(await oe.get("/reportes/resumen-financiero")).data,getPagosPorCuenta:async(r={})=>(await oe.get("/reportes/pagos-por-cuenta",{params:r})).data,descargarEventos:async(r={})=>await oe.get("/reportes/descargar/eventos",{params:r,responseType:"blob"}),descargarInventario:async()=>await oe.get("/reportes/descargar/inventario",{responseType:"blob"}),descargarCardex:async(r={})=>await oe.get("/reportes/descargar/cardex",{params:r,responseType:"blob"}),descargarNotificaciones:async(r={})=>await oe.get("/reportes/descargar/notificaciones",{params:r,responseType:"blob"}),descargarClientes:async()=>await oe.get("/reportes/descargar/clientes",{responseType:"blob"}),descargarPagos:async(r={})=>await oe.get("/reportes/descargar/pagos",{params:r,responseType:"blob"}),getResumenDanos:async(r={})=>(await oe.get("/reportes/resumen-danos",{params:r})).data,getResumenCalificaciones:async(r={})=>(await oe.get("/reportes/resumen-calificaciones",{params:r})).data,descargarDanos:async(r={})=>await oe.get("/reportes/descargar/danos",{params:r,responseType:"blob"}),descargarCalificaciones:async(r={})=>await oe.get("/reportes/descargar/calificaciones",{params:r,responseType:"blob"})},so={getConfiguraciones:async()=>(await oe.get("/notificaciones_nativas/configuraciones")).data,getConfiguracion:async r=>(await oe.get(`/notificaciones_nativas/configuraciones/${r}`)).data,updateEstado:async(r,t)=>(await oe.patch(`/notificaciones_nativas/configuraciones/${r}/status`,{activo:t})).data,updateConfiguracion:async(r,t)=>(await oe.put(`/notificaciones_nativas/configuraciones/${r}`,t)).data,getProximasEvento:async r=>(await oe.get(`/notificaciones_nativas/evento/${r}/proximas`)).data,forzarNotificacion:async(r,t,o=null)=>(await oe.post(`/notificaciones_nativas/evento/${r}/forzar`,{tipo_notificacion:t,canal:o})).data},wp={getWhatsApp:async()=>(await oe.get("/integraciones/whatsapp")).data,updateWhatsApp:async r=>(await oe.put("/integraciones/whatsapp",r)).data},Eo={getConversations:async()=>(await oe.get("/whatsapp_chat/conversations")).data,getMessages:async r=>(await oe.get(`/whatsapp_chat/conversations/${r}/messages`)).data,sendMessage:async(r,t)=>(await oe.post(`/whatsapp_chat/conversations/${r}/send`,{mensaje:t})).data,setMode:async(r,t)=>(await oe.patch(`/whatsapp_chat/conversations/${r}/modo`,{modo:t})).data,resetBot:async r=>(await oe.post(`/whatsapp_chat/conversations/${r}/reset-bot`)).data,sendMedia:async(r,t)=>(await oe.post(`/whatsapp_chat/conversations/${r}/send-media`,t,{headers:{"Content-Type":"multipart/form-data"}})).data,getMedia:async r=>(await oe.get(`/whatsapp_chat/media/${r}`,{responseType:"blob"})).data,marcarLeido:async r=>(await oe.post(`/whatsapp_chat/conversations/${r}/marcar-leido`)).data,getNoLeidos:async()=>(await oe.get("/whatsapp_chat/no-leidos")).data},$i={getResumen:async(r={})=>(await oe.get("/whatsapp_metricas/resumen",{params:r})).data,getClientes:async(r={})=>(await oe.get("/whatsapp_metricas/clientes",{params:r})).data,updateConfig:async r=>(await oe.put("/whatsapp_metricas/config",r)).data,updateControlCliente:async(r,t)=>(await oe.patch(`/whatsapp_metricas/clientes/${r}/control`,t)).data},is={limpiarDatosPrueba:async()=>(await oe.post("/configuraciones/limpiar-datos-prueba")).data,getNombrePlataforma:async()=>(await oe.get("/configuraciones/nombre-plataforma")).data,updateNombrePlataforma:async r=>(await oe.put("/configuraciones/nombre-plataforma",r)).data,getGeneral:async()=>(await oe.get("/configuraciones/general")).data,getGeneralPublic:async()=>(await oe.get("/configuraciones/general-public")).data,updateGeneral:async r=>(await oe.put("/configuraciones/general",r)).data},Gn={getAll:async()=>(await oe.get("/whatsapp_templates")).data,create:async r=>(await oe.post("/whatsapp_templates",r)).data,update:async(r,t)=>(await oe.put(`/whatsapp_templates/${r}`,t)).data,remove:async r=>(await oe.delete(`/whatsapp_templates/${r}`)).data,send:async r=>(await oe.post("/whatsapp_templates/enviar",r)).data},Vo={getAll:async(r=!1)=>{const t={incluir_inactivas:r};return(await oe.get("/cuentas",{params:t})).data},getById:async r=>(await oe.get(`/cuentas/${r}`)).data,create:async r=>(await oe.post("/cuentas",r)).data,update:async(r,t)=>(await oe.put(`/cuentas/${r}`,t)).data,delete:async r=>(await oe.delete(`/cuentas/${r}`)).data,activar:async r=>(await oe.post(`/cuentas/${r}/activar`)).data,getTipos:async()=>(await oe.get("/cuentas/tipos")).data,getEstadisticas:async()=>(await oe.get("/cuentas/estadisticas")).data},Cn={getOpcionesProducto:async r=>(await oe.get(`/producto-opciones/productos/${r}/opciones`)).data,crearOpcion:async(r,t)=>(await oe.post(`/producto-opciones/productos/${r}/opciones`,t)).data,getOpcion:async r=>(await oe.get(`/producto-opciones/opciones/${r}`)).data,actualizarOpcion:async(r,t)=>(await oe.put(`/producto-opciones/opciones/${r}`,t)).data,eliminarOpcion:async(r,t=!1)=>(await oe.delete(`/producto-opciones/opciones/${r}?permanente=${t}`)).data,getSeleccionesEvento:async r=>(await oe.get(`/producto-opciones/eventos/${r}/selecciones`)).data,getOpcionesPendientes:async r=>(await oe.get(`/producto-opciones/eventos/${r}/opciones-pendientes`)).data,getResumenConfirmaciones:async r=>(await oe.get(`/producto-opciones/eventos/${r}/resumen-confirmaciones`)).data,guardarSeleccion:async(r,t)=>(await oe.post(`/producto-opciones/eventos/${r}/selecciones`,t)).data,eliminarSeleccion:async r=>(await oe.delete(`/producto-opciones/selecciones/${r}`)).data,getProductosConOpciones:async()=>(await oe.get("/producto-opciones/productos-con-opciones")).data},M5={checkToken:()=>{const r=localStorage.getItem("token"),t=localStorage.getItem("usuario");if(console.log("=== Debug de Autenticacin ==="),console.log("Token presente:",!!r),console.log("Token length:",(r==null?void 0:r.length)||0),console.log("Usuario presente:",!!t),r)try{const o=r.split(".");if(o.length===3){const n=JSON.parse(atob(o[1]));console.log("Token payload:",n),console.log("Token expira:",new Date(n.exp*1e3)),console.log("Token vlido:",new Date<new Date(n.exp*1e3))}}catch(o){console.error("Error al decodificar token:",o)}if(t)try{const o=JSON.parse(t);console.log("Usuario data:",o)}catch(o){console.error("Error al parsear usuario:",o)}console.log("==============================")},clearAuth:()=>{localStorage.removeItem("token"),localStorage.removeItem("usuario"),console.log("Autenticacin limpiada")}};typeof window<"u"&&(window.debugAuth=M5);const Rg=c.createContext(null),st=()=>{const r=c.useContext(Rg);if(!r)throw new Error("useAuth debe usarse dentro de AuthProvider");return r},P5=({children:r})=>{const[t,o]=c.useState(null),[n,i]=c.useState(!0),[s,a]=c.useState(!1);c.useEffect(()=>{const g=localStorage.getItem("token"),y=localStorage.getItem("usuario");if(g&&y)try{const z=JSON.parse(y);o(z),a(!0),d()}catch(z){console.error("Error al cargar usuario:",z),localStorage.removeItem("token"),localStorage.removeItem("usuario")}i(!1)},[]);const d=async()=>{try{const g=await cd.verificar();g.authenticated?(o(g.usuario),a(!0),localStorage.setItem("usuario",JSON.stringify(g.usuario))):l()}catch(g){console.error("Error al verificar token:",g),l()}},u=async(g,y)=>{var z,b,w,k,j;try{const p=await cd.login(g,y);if(p&&p.success&&p.token){localStorage.setItem("token",p.token),localStorage.setItem("usuario",JSON.stringify(p.usuario));const C=localStorage.getItem("token");return!C||C!==p.token?(console.error("Error: Token no se guard correctamente"),{success:!1,error:"Error al guardar la sesin"}):(o(p.usuario),a(!0),{success:!0})}else return p&&p.error?{success:!1,error:p.error}:{success:!1,error:"Error al iniciar sesin. Respuesta inesperada del servidor."}}catch(p){return console.error("Error en login:",p),p.code==="ECONNABORTED"||(z=p.message)!=null&&z.includes("timeout")?{success:!1,error:"El servidor no responde. Verifica que el servidor API est corriendo en http://localhost:5000"}:p.code==="ERR_NETWORK"||(b=p.message)!=null&&b.includes("Network Error")||(w=p.message)!=null&&w.includes("Failed to fetch")?{success:!1,error:"No se puede conectar con el servidor. Asegrate de que el servidor API est corriendo en http://localhost:5000"}:p.response?{success:!1,error:((k=p.response.data)==null?void 0:k.error)||((j=p.response.data)==null?void 0:j.message)||`Error del servidor: ${p.response.status}`}:{success:!1,error:p.message||"Error al conectar con el servidor. Verifica que el servidor API est corriendo."}}},l=async()=>{await cd.logout(),o(null),a(!1)},f={usuario:t,isAuthenticated:s,loading:n,login:u,logout:l,verificarToken:d};return e.jsx(Rg.Provider,{value:f,children:r})},N5=async()=>{try{const r=await fetch("/api/health",{method:"GET",headers:{"Content-Type":"application/json"}});return r.ok?{available:!0,data:await r.json()}:{available:!1,error:"Servidor respondi con error"}}catch(r){return{available:!1,error:r.message||"No se puede conectar con el servidor",details:r}}};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var D5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Pe=(r,t)=>{const o=c.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:d="",children:u,...l},f)=>c.createElement("svg",{ref:f,...D5,width:i,height:i,stroke:n,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${B5(r)}`,d].join(" "),...l},[...t.map(([g,y])=>c.createElement(g,y)),...Array.isArray(u)?u:[u]]));return o.displayName=`${r}`,o};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=Pe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=Pe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=Pe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=Pe("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=Pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=Pe("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=Pe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=Pe("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=Pe("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=Pe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=Pe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=Pe("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=Pe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=Pe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=Pe("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=Pe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=Pe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=Pe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=Pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=Pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=Pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=Pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=Pe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=Pe("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=Pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Pe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=Pe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=Pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=Pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=Pe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=Pe("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=Pe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=Pe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=Pe("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=Pe("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=Pe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=Pe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=Pe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=Pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=Pe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=Pe("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=Pe("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=Pe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=Pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=Pe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=Pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=Pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=Pe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=Pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=Pe("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=Pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=Pe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=Pe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=Pe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=Pe("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=Pe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=Pe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=Pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=Pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=Pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=Pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=Pe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=Pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=Pe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=Pe("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=Pe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=Pe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=Pe("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=Pe("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=Pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=Pe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=Pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=Pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=Pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=Pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=Pe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=Pe("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=Pe("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=Pe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),xv=()=>{const[r,t]=c.useState(""),[o,n]=c.useState(""),[i,s]=c.useState(""),[a,d]=c.useState(!1),[u,l]=c.useState(null),[f,g]=c.useState(null),[y,z]=c.useState(!1),{login:b}=st(),w=_o(),[k,j]=c.useState({nombre_plataforma:"Lirios Eventos",login_titulo:"Bienvenido de vuelta",login_subtitulo:"Ingresa con tu usuario y contrasena.",login_boton_texto:"Ingresar",login_left_titulo:"Tu evento, organizado sin estres",login_left_texto:"Reserva tu fecha, gestiona pagos y coordina cada detalle desde un solo lugar.",login_left_items:`Fechas y horarios en un clic
Pagos y recordatorios automatizados
Clientes informados en tiempo real
Reportes claros para tu equipo`,login_left_imagen:"",login_acento_color:"#16a34a",login_fondo_color:"#0f766e"});c.useEffect(()=>{(async()=>{try{const L=await N5();l(L.available),L.available||s("El servidor API no est disponible. Asegrate de que est corriendo en http://localhost:5000")}catch(L){console.error("Error al verificar API:",L),l(!1)}})()},[]),c.useEffect(()=>{(async()=>{try{const L=await is.getGeneralPublic(),W=(L==null?void 0:L.configuracion)||{};j(I=>({...I,...W}))}catch{}})()},[]);const p=async S=>{if(S.preventDefault(),s(""),!r||!o){s("Por favor, completa todos los campos");return}d(!0);try{const L=await b(r,o);L.success?w("/dashboard"):s(L.error||"Error al iniciar sesin")}catch(L){console.error("Error en handleSubmit:",L),s("Error inesperado al intentar iniciar sesin")}finally{d(!1)}},C=(k.login_left_items||"").split(`
`).map(S=>S.trim()).filter(Boolean);return e.jsxs("div",{className:"login-layout",style:{minHeight:"100vh",display:"grid",gridTemplateColumns:"1.1fr 0.9fr",background:"#ffffff"},children:[e.jsxs("div",{className:"login-left",style:{color:"white",padding:"3rem 3.5rem",position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"2.5rem",backgroundColor:k.login_fondo_color||"#0f766e",backgroundImage:k.login_left_imagen?`linear-gradient(180deg, rgba(31, 41, 55, 0.55), rgba(31, 41, 55, 0.75)), url("${k.login_left_imagen}")`:"none",backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",fontFamily:'"Inter", "Segoe UI", "Helvetica Neue", Arial, sans-serif'},children:[e.jsxs("div",{style:{maxWidth:"560px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.85rem",fontWeight:600,letterSpacing:"0.12em",opacity:.85,marginBottom:"1.5rem",textTransform:"uppercase"},children:k.nombre_plataforma}),e.jsx("div",{style:{fontSize:"2.35rem",fontWeight:600,marginBottom:"0.9rem",lineHeight:1.25},children:k.login_left_titulo}),e.jsx("div",{style:{color:"rgba(255,255,255,0.85)",lineHeight:1.8,fontSize:"1rem",fontWeight:400},children:k.login_left_texto}),C.length>0&&e.jsx("ul",{style:{marginTop:"1.4rem",paddingLeft:0,listStylePosition:"inside",lineHeight:2,fontSize:"0.95rem",fontWeight:500,textAlign:"center"},children:C.map(S=>e.jsx("li",{children:S},S))})]}),e.jsx("div",{style:{fontSize:"0.8rem",opacity:.7},children:k.login_left_texto})]}),e.jsx("div",{className:"login-right",style:{padding:"3.25rem 3.5rem",background:"white",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontFamily:'"Inter", "Segoe UI", "Helvetica Neue", Arial, sans-serif'},children:e.jsxs("div",{style:{width:"100%",maxWidth:"420px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2.5rem"},children:[e.jsx("div",{style:{fontSize:"1.8rem",fontWeight:700,color:"#111827"},children:k.login_titulo}),e.jsx("div",{style:{color:"#6b7280",marginTop:"0.35rem"},children:k.login_subtitulo})]}),e.jsxs("form",{onSubmit:p,children:[u===!1&&e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#fef3c7",color:"#92400e",borderRadius:"0.75rem",marginBottom:"1.5rem",fontSize:"0.875rem",border:"1px solid #fbbf24",display:"flex",alignItems:"start",gap:"0.75rem",animation:"slideIn 0.3s ease-out"},children:[e.jsx(ut,{size:20,style:{flexShrink:0,marginTop:"0.125rem"}}),e.jsxs("div",{children:[e.jsx("strong",{children:" Servidor API no disponible"}),e.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.8rem"},children:["Por favor, inicia el servidor API ejecutando:"," ",e.jsx("code",{style:{backgroundColor:"#f3f4f6",padding:"0.2rem 0.4rem",borderRadius:"0.25rem",fontFamily:"monospace"},children:"python api_server.py"})]})]})]}),i&&e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.75rem",marginBottom:"1.5rem",fontSize:"0.875rem",display:"flex",alignItems:"start",gap:"0.75rem",animation:"slideIn 0.3s ease-out",border:"1px solid #fca5a5"},children:[e.jsx(ut,{size:20,style:{flexShrink:0,marginTop:"0.125rem"}}),e.jsx("span",{children:i})]}),e.jsxs("div",{style:{marginBottom:"1.35rem"},children:[e.jsx("label",{htmlFor:"usuario",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Usuario"}),e.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{position:"absolute",left:"1rem",zIndex:1,color:f==="usuario"?k.login_acento_color||"#16a34a":"#9ca3af",transition:"color 0.2s"},children:e.jsx(mo,{size:20})}),e.jsx("input",{id:"usuario",type:"text",value:r,onChange:S=>t(S.target.value),onFocus:()=>g("usuario"),onBlur:()=>g(null),required:!0,placeholder:"Ingrese su usuario",style:{width:"100%",padding:"0.875rem 0.875rem 0.875rem 3rem",border:`1px solid ${f==="usuario"?k.login_acento_color||"#16a34a":"#e5e7eb"}`,borderRadius:"0.65rem",fontSize:"1rem",transition:"all 0.2s",outline:"none",backgroundColor:"white"}})]})]}),e.jsxs("div",{style:{marginBottom:"1.75rem"},children:[e.jsx("label",{htmlFor:"contrasena",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Contrasea"}),e.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{position:"absolute",left:"1rem",zIndex:1,color:f==="contrasena"?k.login_acento_color||"#16a34a":"#9ca3af",transition:"color 0.2s"},children:e.jsx(ui,{size:20})}),e.jsx("input",{id:"contrasena",type:y?"text":"password",value:o,onChange:S=>n(S.target.value),onFocus:()=>g("contrasena"),onBlur:()=>g(null),required:!0,placeholder:"Ingrese su contrasea",style:{width:"100%",padding:"0.875rem 3rem 0.875rem 3rem",border:`1px solid ${f==="contrasena"?k.login_acento_color||"#16a34a":"#e5e7eb"}`,borderRadius:"0.65rem",fontSize:"1rem",transition:"all 0.2s",outline:"none",backgroundColor:"white"}}),e.jsx("button",{type:"button",onClick:()=>z(!y),style:{position:"absolute",right:"1rem",background:"none",border:"none",cursor:"pointer",color:"#9ca3af",padding:"0.25rem",display:"flex",alignItems:"center",transition:"color 0.2s"},onMouseEnter:S=>S.currentTarget.style.color=k.login_acento_color||"#16a34a",onMouseLeave:S=>S.currentTarget.style.color="#9ca3af",children:y?e.jsx(ui,{size:18}):e.jsx(ui,{size:18})})]})]}),e.jsx("button",{type:"submit",disabled:a||u===!1,style:{width:"100%",padding:"0.875rem",background:a||u===!1?"#9ca3af":k.login_acento_color||"#16a34a",color:"white",border:"none",borderRadius:"0.65rem",fontSize:"1rem",fontWeight:"600",cursor:a||u===!1?"not-allowed":"pointer",transition:"all 0.3s",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:a||u===!1?"none":"0 12px 20px rgba(15, 23, 42, 0.15)",position:"relative",overflow:"hidden"},onMouseEnter:S=>{!a&&u!==!1&&(S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 18px 28px rgba(15, 23, 42, 0.2)")},onMouseLeave:S=>{!a&&u!==!1&&(S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 12px 20px rgba(15, 23, 42, 0.15)")},children:a?e.jsxs(e.Fragment,{children:[e.jsx(tv,{size:20,style:{animation:"spin 1s linear infinite"}}),e.jsx("span",{children:"Iniciando sesin..."})]}):u===!1?e.jsxs(e.Fragment,{children:[e.jsx(ut,{size:20}),e.jsx("span",{children:"Servidor no disponible"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ov,{size:20}),e.jsx("span",{children:k.login_boton_texto||"Ingresar"})]})})]}),e.jsxs("div",{style:{marginTop:"2rem",padding:"1.25rem",backgroundColor:"#f9fafb",borderRadius:"0.75rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#374151",marginBottom:"0.75rem"},children:" Usuarios de Prueba"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",fontSize:"0.8rem"},children:[{usuario:"admin",contrasena:"admin123",rol:"Administrador",color:"#dc2626"},{usuario:"gerente",contrasena:"gerente123",rol:"Gerente General",color:"#2563eb"},{usuario:"coordinador1",contrasena:"coordinador123",rol:"Coordinador",color:"#16a34a"},{usuario:"coordinador2",contrasena:"coordinador123",rol:"Coordinador",color:"#16a34a"}].map(S=>e.jsxs("button",{type:"button",onClick:()=>{t(S.usuario),n(S.contrasena),s("")},style:{padding:"0.65rem 1rem",backgroundColor:"white",border:`1px solid ${S.color}`,borderRadius:"0.5rem",color:S.color,cursor:"pointer",fontSize:"0.8rem",fontWeight:"500",textAlign:"left",transition:"all 0.2s",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:L=>{L.currentTarget.style.backgroundColor=S.color,L.currentTarget.style.color="white",L.currentTarget.style.transform="translateX(4px)"},onMouseLeave:L=>{L.currentTarget.style.backgroundColor="white",L.currentTarget.style.color=S.color,L.currentTarget.style.transform="translateX(0)"},children:[e.jsxs("span",{children:[e.jsx("strong",{children:S.usuario})," (",S.rol,")"]}),e.jsx("span",{style:{fontSize:"0.75rem",opacity:.7},children:S.contrasena})]},S.usuario))})]}),e.jsx("div",{style:{marginTop:"1.25rem",textAlign:"center"},children:e.jsx(Gr,{to:"/",style:{color:k.login_acento_color||"#16a34a",textDecoration:"none",fontWeight:"600",fontSize:"0.9rem"},children:"Volver al inicio"})})]})}),e.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @media (max-width: 960px) {
          .login-layout {
            grid-template-columns: 1fr;
          }
          .login-left {
            padding: 2rem;
            min-height: 45vh;
          }
          .login-right {
            padding: 2rem 1.5rem;
            align-items: flex-start;
          }
        }
        @media (max-width: 600px) {
          .login-left {
            padding: 1.5rem;
            min-height: 40vh;
          }
        }
      `})]})};let yv=0;const Ar=()=>{const[r,t]=c.useState([]),o=c.useCallback((u,l="success",f=3e3)=>{const g=++yv,y={id:g,message:u,type:l,duration:f};return t(z=>[...z,y]),g},[]),n=c.useCallback(u=>{t(l=>l.filter(f=>f.id!==u))},[]),i=c.useCallback((u,l)=>o(u,"success",l),[o]),s=c.useCallback((u,l)=>o(u,"error",l),[o]),a=c.useCallback((u,l)=>o(u,"warning",l),[o]),d=c.useCallback((u,l)=>o(u,"info",l),[o]);return{toasts:r,addToast:o,removeToast:n,success:i,error:s,warning:a,info:d}},aa="Lirios Eventos",la="nombre_plataforma",zl=()=>{const[r,t]=c.useState(()=>localStorage.getItem(la)||aa),o=c.useCallback(n=>{const i=(n||"").trim()||aa;localStorage.setItem(la,i),t(i),window.dispatchEvent(new Event("nombre-plataforma-updated"))},[]);return c.useEffect(()=>{let n=!0;(async()=>{try{const a=await is.getNombrePlataforma(),d=((a==null?void 0:a.nombre_plataforma)||"").trim()||aa;n&&(t(d),localStorage.setItem(la,d))}catch{}})();const s=()=>{const a=localStorage.getItem(la)||aa;t(a)};return window.addEventListener("nombre-plataforma-updated",s),()=>{n=!1,window.removeEventListener("nombre-plataforma-updated",s)}},[]),{nombrePlataforma:r,setNombrePlataforma:o}},bv=({message:r,type:t="success",onClose:o,duration:n=3e3})=>{c.useEffect(()=>{if(n>0){const a=setTimeout(()=>{o()},n);return()=>clearTimeout(a)}},[n,o]);const i=()=>{switch(t){case"success":return e.jsx(jo,{size:20,color:"white"});case"error":return e.jsx(Mg,{size:20,color:"white"});case"warning":return e.jsx(ut,{size:20,color:"white"});case"info":return e.jsx(ev,{size:20,color:"white"});default:return e.jsx(jo,{size:20,color:"white"})}},s=()=>{const a={display:"flex",alignItems:"center",gap:"0.75rem",padding:"1rem 1.25rem",borderRadius:"0.5rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",minWidth:"300px",maxWidth:"500px",animation:"slideIn 0.3s ease-out",position:"relative",zIndex:9999};switch(t){case"success":return{...a,backgroundColor:"#10b981",color:"white"};case"error":return{...a,backgroundColor:"#ef4444",color:"white"};case"warning":return{...a,backgroundColor:"#f59e0b",color:"white"};case"info":return{...a,backgroundColor:"#3b82f6",color:"white"};default:return{...a,backgroundColor:"#10b981",color:"white"}}};return e.jsxs("div",{style:s(),children:[e.jsx("div",{style:{flexShrink:0},children:i()}),e.jsx("div",{style:{flex:1,fontSize:"0.875rem",fontWeight:"500"},children:r}),e.jsx("button",{onClick:o,style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",opacity:.8,transition:"opacity 0.2s"},onMouseEnter:a=>a.currentTarget.style.opacity="1",onMouseLeave:a=>a.currentTarget.style.opacity="0.8",children:e.jsx(rr,{size:18})}),e.jsx("style",{children:`
        @keyframes slideIn {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
      `})]})},Lr=({toasts:r,removeToast:t})=>e.jsx("div",{style:{position:"fixed",top:"1rem",right:"1rem",zIndex:1e4,display:"flex",flexDirection:"column",gap:"0.75rem",maxWidth:"500px"},children:r.map(o=>e.jsx(bv,{message:o.message,type:o.type,onClose:()=>t(o.id),duration:o.duration},o.id))}),T={ADMIN:"administrador",MANAGER:"gerente_general",COORDINATOR:"coordinador",CLIENT:"cliente"},Be={COTIZADOR:"cotizador",DASHBOARD:"dashboard",EVENTOS:"eventos",CALENDARIO:"calendario",PORTAL_CLIENTE:"portal_cliente",PERFIL:"perfil",CLIENTES:"clientes",PRODUCTOS:"productos",CATEGORIAS:"categorias",PLANES:"planes",PAGOS:"pagos",CUENTAS:"cuentas",INVENTARIO:"inventario",SALONES:"salones",REPORTES:"reportes",USUARIOS:"usuarios",PERMISOS:"permisos",NOTIFICACIONES_NATIVAS:"notificaciones_nativas",INTEGRACIONES:"integraciones",WHATSAPP_CHAT:"whatsapp_chat",WHATSAPP_METRICAS:"whatsapp_metricas",WHATSAPP_TEMPLATES:"whatsapp_templates",CONFIG_DATOS:"config_datos",CARGA_MASIVA:"carga_masiva"},Ye={EVENTOS_EDITAR_ESTADO:"eventos:editar_estado",EVENTOS_AGREGAR_PRODUCTO:"eventos:agregar_producto",EVENTOS_ELIMINAR_PRODUCTO:"eventos:eliminar_producto",EVENTOS_ELIMINAR:"eventos:eliminar",EVENTOS_ACTUALIZAR_SERVICIOS:"eventos:actualizar_servicios",EVENTOS_GENERAR_SERVICIOS:"eventos:generar_servicios",EVENTOS_DESCARTAR_SERVICIO:"eventos:descartar_servicio",EVENTOS_ASIGNAR_COORDINADOR:"eventos:asignar_coordinador",PAGOS_REGISTRAR:"pagos:registrar",PAGOS_REEMBOLSAR:"pagos:reembolsar",PAGOS_ELIMINAR:"pagos:eliminar",PAGOS_APROBAR:"pagos:aprobar",PAGOS_ANULAR:"pagos:anular",CUENTAS_VER:"cuentas:ver",CUENTAS_CREAR:"cuentas:crear",CUENTAS_EDITAR:"cuentas:editar",CUENTAS_ELIMINAR:"cuentas:eliminar",PLANES_CREAR:"planes:crear",PLANES_EDITAR:"planes:editar",PLANES_ELIMINAR:"planes:eliminar"},md={admin:T.ADMIN,administrador:T.ADMIN,administrator:T.ADMIN,"gerente general":T.MANAGER,gerente_general:T.MANAGER,manager:T.MANAGER,coordinador:T.COORDINATOR,coordinator:T.COORDINATOR,cliente:T.CLIENT,client:T.CLIENT},vv={[T.ADMIN]:"Administrador",[T.MANAGER]:"Gerente General",[T.COORDINATOR]:"Coordinador",[T.CLIENT]:"Cliente"},fc=r=>{if(!r)return null;const t=String(r).trim().toLowerCase();if(md[t])return md[t];const o=t.replace(/\s+/g,"_");return md[o]||o},Ps=(r,t=[])=>{const o=fc(r);return o?!t||t.length===0?!0:t.some(n=>fc(n)===o):!1},jv=r=>{const t=fc(r);return t?vv[t]||t:""},_r=(r,t=[])=>Ps(r,t),gc=(r,t,o=[])=>r?Array.isArray(r.permisos)&&r.permisos.length>0?r.permisos.includes(t):Ps(r.rol,o):!1,xr=(r,t,o=[])=>r?Array.isArray(r.permisos)&&r.permisos.length>0?r.permisos.includes(t):Ps(r.rol,o):!1,Ip=()=>{const{toasts:r,removeToast:t,error:o,success:n}=Ar(),{usuario:i,isAuthenticated:s,login:a}=st(),{nombrePlataforma:d}=zl(),u=_o(),l=d.split(" ").filter(Boolean).slice(0,2).map(q=>q[0].toUpperCase()).join(""),f=(i==null?void 0:i.id)||(i==null?void 0:i.user_id)||null,g=()=>{const q=new Date;let ve=(6-q.getDay()+7)%7;ve===0&&(ve=7);const Oe=new Date(q);Oe.setDate(q.getDate()+ve);const Ce=Oe.getFullYear(),Le=String(Oe.getMonth()+1).padStart(2,"0"),De=String(Oe.getDate()).padStart(2,"0");return`${Ce}-${Le}-${De}`},[y,z]=c.useState([]),[b,w]=c.useState([]),[k,j]=c.useState([]),[p,C]=c.useState([]),[S,L]=c.useState(!0),[W,I]=c.useState(""),[m,B]=c.useState({tipo_evento:"",fecha_evento:g(),invitados:"50",plan_id:"",salon_id:""}),[H,E]=c.useState([]),[R,te]=c.useState(""),[F,K]=c.useState("1"),[D,Z]=c.useState(!1),[P,$]=c.useState({nombre_completo:"",nombre_usuario:"",contrasena:"",email:"",telefono:"",documento_identidad:"",direccion:""}),[N,ee]=c.useState(""),[Y,X]=c.useState(!1),[se,G]=c.useState(!1),[ye,ie]=c.useState(!1),[be,ce]=c.useState({nombre_completo:"",telefono:"",documento_identidad:""}),[re,x]=c.useState(""),[h,J]=c.useState(!1);c.useEffect(()=>{(async()=>{var Se,ve;try{L(!0);const[Oe,Ce,Le,De]=await Promise.all([yt.getAll(!0),jn.getAll(!0),To.getAll(!0),Eg.getAll(!0)]);z(Oe.planes||[]),w(Ce.salones||[]),j(Le.productos||[]),C(De.tipos_evento||De.tipos||[]),I("")}catch(Oe){const Ce=((ve=(Se=Oe.response)==null?void 0:Se.data)==null?void 0:ve.error)||"No se pudieron cargar los datos del cotizador";I(Ce),o(Ce)}finally{L(!1)}})()},[o]),c.useEffect(()=>{const q=sessionStorage.getItem("cotizacion_pendiente");if(q)try{const Se=JSON.parse(q);Se!=null&&Se.formData&&B(Se.formData),Array.isArray(Se==null?void 0:Se.extras)&&E(Se.extras),sessionStorage.removeItem("cotizacion_pendiente"),s&&n("Completa tus datos para descargar la cotizacin.")}catch{sessionStorage.removeItem("cotizacion_pendiente")}},[s,n]);const fe=q=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(q||0),ge=q=>{const Se=Number.parseFloat(q);return Number.isFinite(Se)?Se:0},Re=c.useMemo(()=>y.find(q=>String(q.id)===String(m.plan_id)),[y,m.plan_id]),me=c.useMemo(()=>b.find(q=>String(q.id_salon||q.id)===String(m.salon_id)),[b,m.salon_id]),Ie=c.useMemo(()=>{const q=parseInt(m.invitados||"0",10);if(!q||y.length===0)return null;const Se=y.map(Ce=>{const Le=parseInt(Ce.capacidad_minima||"0",10)||0,De=parseInt(Ce.capacidad_maxima||"0",10)||0;return{...Ce,min:Le,max:De}}),ve=Se.filter(Ce=>Ce.max>0?q>=Ce.min&&q<=Ce.max:q>=Ce.min);return(ve.length>0?ve:Se).slice().sort((Ce,Le)=>{const De=Ce.max?Math.abs(Ce.max-q):Math.abs(Ce.min-q),Fe=Le.max?Math.abs(Le.max-q):Math.abs(Le.min-q);if(De!==Fe)return De-Fe;const ir=ge(Ce.precio_base||Ce.precio),yr=ge(Le.precio_base||Le.precio);return ir-yr})[0]||null},[m.invitados,y]),Q=c.useMemo(()=>{const q=parseInt(m.invitados||"0",10);if(!q||b.length===0)return null;const Se=b.map(Ce=>{const Le=parseInt(Ce.capacidad||"0",10)||0;return{...Ce,capacidad:Le}}),ve=Se.filter(Ce=>Ce.capacidad>=q);return(ve.length>0?ve:Se).slice().sort((Ce,Le)=>{const De=Math.abs(Ce.capacidad-q),Fe=Math.abs(Le.capacidad-q);if(De!==Fe)return De-Fe;const ir=ge(Ce.precio_base||Ce.precio),yr=ge(Le.precio_base||Le.precio);return ir-yr})[0]||null},[m.invitados,b]),M=c.useMemo(()=>H.map(q=>{const Se=k.find(ve=>String(ve.id_producto||ve.id)===String(q.producto_id));return{...q,producto:Se}}),[H,k]),V=c.useMemo(()=>{const q=ge((Re==null?void 0:Re.precio_base)||(Re==null?void 0:Re.precio)),Se=ge((me==null?void 0:me.precio_base)||(me==null?void 0:me.precio)),ve=M.reduce((Oe,Ce)=>{var De,Fe;const Le=ge(((De=Ce.producto)==null?void 0:De.precio)||((Fe=Ce.producto)==null?void 0:Fe.precio_base));return Oe+Le*ge(Ce.cantidad)},0);return q+Se+ve},[Re,me,M]),we=()=>{if(!R)return;const q=parseInt(F,10);!Number.isFinite(q)||q<=0||(E(Se=>[...Se,{producto_id:R,cantidad:q}]),te(""),K("1"))},Ne=q=>{E(Se=>Se.filter((ve,Oe)=>Oe!==q))},U=()=>{if(!me)return null;const q=me.nombre||null;return q?me.capacidad?`${q} (Cap: ${me.capacidad})`:q:null},pe=async q=>{var Ce,Le;const Se={cliente_id:q,nombre_evento:m.tipo_evento?`Cotizacion ${m.tipo_evento}`:"Cotizacion",tipo_evento:m.tipo_evento||null,fecha_evento:m.fecha_evento||null,numero_invitados:m.invitados?parseInt(m.invitados,10):null,estado:"cotizacion",total:V,saldo:V,observaciones:"Cotizacion creada desde la web"};if(m.plan_id&&(Se.plan_id=parseInt(m.plan_id,10)),m.salon_id){Se.id_salon=parseInt(m.salon_id,10);const De=U();De&&(Se.salon=De)}const ve=await dr.create(Se),Oe=((Ce=ve.evento)==null?void 0:Ce.id_evento)||((Le=ve.evento)==null?void 0:Le.id);if(Oe&&H.length>0){for(const De of H){const Fe=k.find(yr=>String(yr.id_producto||yr.id)===String(De.producto_id)),ir=ge((Fe==null?void 0:Fe.precio)||(Fe==null?void 0:Fe.precio_base));await dr.agregarProducto(Oe,De.producto_id,De.cantidad,ir)}await dr.calcularTotal(Oe)}return Oe},Ge=()=>{const q={formData:m,extras:H,totalEstimado:V,timestamp:new Date().toISOString()};sessionStorage.setItem("cotizacion_pendiente",JSON.stringify(q))},We=async()=>{var q,Se,ve,Oe,Ce;if(!m.invitados||!m.fecha_evento){o("Completa la fecha del evento y el numero de invitados.");return}if(!m.plan_id&&!m.salon_id){o("Selecciona un plan o un salon para continuar.");return}if(!s){Ge(),Z(!0);return}try{G(!0);const Le=await lo.getMe(),De=((q=Le.cliente)==null?void 0:q.id)||((Se=Le.cliente)==null?void 0:Se.cliente_id);if(!De){ce(ir=>({...ir,nombre_completo:(i==null?void 0:i.nombre_completo)||ir.nombre_completo,telefono:(i==null?void 0:i.telefono)||ir.telefono})),ie(!0);return}await pe(De)?n("Cotizacion creada. Ya puedes descargarla desde tu cuenta."):o("No se pudo crear la cotizacion. Intenta nuevamente.")}catch(Le){if(((ve=Le.response)==null?void 0:ve.status)===404){ce(Fe=>({...Fe,nombre_completo:(i==null?void 0:i.nombre_completo)||Fe.nombre_completo,telefono:(i==null?void 0:i.telefono)||Fe.telefono})),ie(!0);return}const De=((Ce=(Oe=Le.response)==null?void 0:Oe.data)==null?void 0:Ce.error)||"Error al enviar la cotizacion";o(De)}finally{G(!1)}},cr=()=>{Ge(),u("/login")},gr=async q=>{var Se,ve,Oe,Ce;if(q.preventDefault(),ee(""),!P.nombre_completo||!P.nombre_usuario||!P.contrasena){ee("Nombre completo, usuario y contrasea son obligatorios.");return}try{X(!0);const Le=await lo.create({nombre_usuario:P.nombre_usuario,contrasena:P.contrasena,nombre_completo:P.nombre_completo,email:P.email||null,telefono:P.telefono||null,documento_identidad:P.documento_identidad||null,direccion:P.direccion||null}),De=await a(P.nombre_usuario,P.contrasena);if(!De.success){ee(De.error||"No se pudo iniciar sesion.");return}const Fe=((Se=Le.cliente)==null?void 0:Se.id)||((ve=Le.cliente)==null?void 0:ve.cliente_id);if(!Fe){ee("No se pudo obtener el cliente creado.");return}G(!0),await pe(Fe)?(Z(!1),n("Registro completado y cotizacion enviada.")):ee("No se pudo crear la cotizacion.")}catch(Le){const De=((Ce=(Oe=Le.response)==null?void 0:Oe.data)==null?void 0:Ce.error)||"No se pudo completar el registro.";ee(De)}finally{X(!1),G(!1)}},Sr=async q=>{var Se,ve,Oe,Ce;if(q.preventDefault(),x(""),!be.nombre_completo||!be.telefono||!be.documento_identidad){x("Nombre completo, telefono y cedula son obligatorios.");return}try{if(J(!0),!f){x("No se pudo identificar el usuario.");return}await dt.update(f,{nombre_completo:be.nombre_completo,telefono:be.telefono});const Le=await lo.create({usuario_id:f,documento_identidad:be.documento_identidad}),De=((Se=Le.cliente)==null?void 0:Se.id)||((ve=Le.cliente)==null?void 0:ve.cliente_id);if(!De){x("No se pudo crear el cliente.");return}G(!0),await pe(De)?(ie(!1),n("Cliente creado y cotizacion enviada.")):x("No se pudo crear la cotizacion.")}catch(Le){const De=((Ce=(Oe=Le.response)==null?void 0:Oe.data)==null?void 0:Ce.error)||Le.message||"No se pudo completar el cliente.";x(De)}finally{J(!1),G(!1)}},Ke=parseInt(m.invitados||"0",10),ur=parseInt((me==null?void 0:me.capacidad)||"0",10),lr=parseInt((Re==null?void 0:Re.capacidad_minima)||"0",10),Fr=parseInt((Re==null?void 0:Re.capacidad_maxima)||"0",10),zr=[];ur&&Ke>ur&&zr.push("El nmero de invitados supera la capacidad del saln seleccionado."),lr&&Ke>0&&Ke<lr&&zr.push("El nmero de invitados es menor a la capacidad mnima del plan."),Fr&&Ke>Fr&&zr.push("El nmero de invitados supera la capacidad mxima del plan.");const Qe={width:"100%",padding:"0.75rem 0.9rem",border:"1px solid #e2e8f0",borderRadius:"0.65rem",backgroundColor:"white",fontSize:"0.95rem",boxShadow:"inset 0 1px 2px rgba(15, 23, 42, 0.04)"},Xe={display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",fontWeight:"600",color:"#0f172a",fontSize:"0.9rem"},ne={backgroundColor:"white",padding:"1.75rem",borderRadius:"1rem",border:"1px solid #e2e8f0",boxShadow:"0 12px 30px -24px rgba(15, 23, 42, 0.3)"},ke={textDecoration:"none",color:"#0f172a",fontWeight:"600",fontSize:"0.95rem"},Te={fontSize:"1.6rem",fontWeight:"700",color:"#0f172a",marginBottom:"0.35rem"},Ae={color:"#64748b",fontSize:"0.98rem",marginBottom:"1.5rem"},ue={backgroundColor:"white",padding:"1.5rem",borderRadius:"0.9rem",border:"1px solid #e2e8f0",boxShadow:"0 12px 30px -24px rgba(15, 23, 42, 0.3)"},Ve=s?"Panel administrativo":"Iniciar sesin",Je=s?"/dashboard":"/login";return S?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando cotizador..."}):e.jsxs("div",{style:{backgroundColor:"#f8fafc",minHeight:"100vh"},children:[e.jsx(Lr,{toasts:r,removeToast:t}),e.jsx("header",{style:{position:"sticky",top:0,zIndex:20,backgroundColor:"rgba(248, 250, 252, 0.92)",borderBottom:"1px solid #e2e8f0",backdropFilter:"blur(6px)"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"1rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs(Gr,{to:"/",style:{display:"flex",alignItems:"center",gap:"0.75rem",textDecoration:"none",color:"#0f172a",fontWeight:"800",fontSize:"1.1rem"},children:[e.jsx("span",{style:{width:"36px",height:"36px",borderRadius:"12px",background:"linear-gradient(135deg, #4338ca, #6366f1)",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.95rem",fontWeight:"700"},children:l||"LE"}),d]}),e.jsxs("nav",{style:{display:"flex",alignItems:"center",gap:"1.25rem",flexWrap:"wrap"},children:[e.jsx("a",{href:"#cotizador",style:ke,children:"Cotizador"}),e.jsx("a",{href:"#servicios",style:ke,children:"Servicios"}),e.jsx("a",{href:"#proceso",style:ke,children:"Proceso"}),e.jsx(Gr,{to:Je,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.65rem 1.3rem",backgroundColor:"#0f172a",color:"white",borderRadius:"999px",textDecoration:"none",fontWeight:"700",boxShadow:"0 12px 26px -18px rgba(15, 23, 42, 0.7)"},children:Ve})]})]})}),e.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:e.jsxs("div",{style:{padding:"2.5rem 1.5rem 0"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #1e1b4b 0%, #312e81 45%, #6366f1 100%)",borderRadius:"1.5rem",padding:"2.5rem",color:"white",position:"relative",overflow:"hidden",marginBottom:"2rem"},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"radial-gradient(circle at top right, rgba(255,255,255,0.25), transparent 45%)",opacity:.6}}),e.jsxs("div",{style:{position:"relative",zIndex:1,display:"flex",flexWrap:"wrap",gap:"2rem",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{maxWidth:"640px"},children:[e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.4rem",padding:"0.35rem 0.75rem",borderRadius:"999px",backgroundColor:"rgba(255,255,255,0.16)",fontSize:"0.85rem",fontWeight:"600"},children:[e.jsx(kp,{size:16}),"Cotizador en linea"]}),e.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"700",margin:"0.85rem 0 0.5rem"},children:"Cotiza tu evento en minutos"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.85)",fontSize:"1rem"},children:"Elige plan, salon y servicios adicionales. Te mostramos un estimado claro y rapido antes de solicitar tu cotizacion formal."}),e.jsx("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",marginTop:"1.25rem"},children:["Sin registro","Estimado inmediato","Descarga al registrarte"].map(q=>e.jsx("span",{style:{backgroundColor:"rgba(255,255,255,0.18)",padding:"0.45rem 0.85rem",borderRadius:"999px",fontSize:"0.85rem",fontWeight:"600"},children:q},q))})]}),Ps(i==null?void 0:i.rol,[T.ADMIN,T.MANAGER,T.COORDINATOR])&&e.jsx(Gr,{to:"/dashboard",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.85rem 1.6rem",backgroundColor:"white",color:"#1e1b4b",borderRadius:"0.75rem",textDecoration:"none",fontWeight:"700",boxShadow:"0 12px 24px -16px rgba(15,23,42,0.6)"},children:"Ir al Dashboard"})]})]}),e.jsxs("section",{id:"servicios",style:{marginTop:"3rem"},children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:Te,children:"Experiencias que dejan huella"}),e.jsx("p",{style:Ae,children:"Diseamos celebraciones nicas con un equipo experto, proveedores seleccionados y una ejecucin impecable."})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.25rem"},children:[{titulo:"Planeacin integral",descripcion:"Acompaamiento en cada fase: concepto, logstica y coordinacin en sitio."},{titulo:"Ambientes memorables",descripcion:"Decoracin, iluminacin y detalles diseados a la medida de tu estilo."},{titulo:"Proveedores premium",descripcion:"Aliados en catering, msica y fotografa para una experiencia perfecta."},{titulo:"Gestin transparente",descripcion:"Cronogramas claros, reportes y seguimiento en tiempo real."}].map(q=>e.jsxs("div",{style:ue,children:[e.jsx("h3",{style:{margin:0,fontSize:"1.05rem",fontWeight:"700",color:"#0f172a"},children:q.titulo}),e.jsx("p",{style:{margin:"0.6rem 0 0",color:"#64748b",fontSize:"0.95rem"},children:q.descripcion})]},q.titulo))})]}),e.jsxs("section",{id:"proceso",style:{marginTop:"3rem"},children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:Te,children:"Un proceso claro y elegante"}),e.jsx("p",{style:Ae,children:"Desde la primera idea hasta el cierre del evento, cada detalle se gestiona con precisin."})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.25rem"},children:[{titulo:"1. Insprate",descripcion:"Define fecha, invitados y estilo. Nosotros te guiamos."},{titulo:"2. Cotiza",descripcion:"Calcula tu inversin con nuestro cotizador en lnea."},{titulo:"3. Planea",descripcion:"Ajustamos la propuesta y cerramos proveedores."},{titulo:"4. Disfruta",descripcion:"Coordinamos en sitio para que vivas tu evento sin estrs."}].map(q=>e.jsxs("div",{style:ue,children:[e.jsx("div",{style:{fontWeight:"700",fontSize:"1rem",color:"#1e1b4b",marginBottom:"0.35rem"},children:q.titulo}),e.jsx("p",{style:{margin:0,color:"#64748b",fontSize:"0.95rem"},children:q.descripcion})]},q.titulo))})]}),D&&e.jsxs("div",{style:{padding:"1rem 1.25rem",backgroundColor:"#eef2ff",color:"#3730a3",borderRadius:"0.9rem",marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",border:"1px solid #c7d2fe"},children:[e.jsx("div",{children:"Para descargar la cotizacin, necesitamos que te registres o inicies sesin."}),e.jsx("button",{type:"button",onClick:cr,style:{padding:"0.65rem 1.4rem",backgroundColor:"#4f46e5",color:"white",border:"none",borderRadius:"0.55rem",cursor:"pointer",fontWeight:"600"},children:"Iniciar sesin"})]}),D&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15, 23, 42, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50,padding:"1.5rem"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"1rem",padding:"1.75rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 40px -24px rgba(15, 23, 42, 0.6)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700",color:"#0f172a"},children:"Completa tus datos"}),e.jsx("p",{style:{margin:"0.35rem 0 0",color:"#64748b",fontSize:"0.9rem"},children:"Necesitamos estos datos para crear tu cuenta y enviar la cotizacion."})]}),e.jsx("button",{type:"button",onClick:()=>Z(!1),style:{border:"none",background:"none",fontSize:"1.25rem",cursor:"pointer",color:"#64748b"},children:""})]}),e.jsxs("form",{onSubmit:gr,style:{display:"grid",gap:"0.85rem"},children:[e.jsxs("div",{style:{display:"grid",gap:"0.65rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:Xe,children:"Nombre completo"}),e.jsx("input",{type:"text",value:P.nombre_completo,onChange:q=>$({...P,nombre_completo:q.target.value}),style:Qe})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:Xe,children:"Usuario"}),e.jsx("input",{type:"text",value:P.nombre_usuario,onChange:q=>$({...P,nombre_usuario:q.target.value}),style:Qe})]}),e.jsxs("div",{children:[e.jsx("label",{style:Xe,children:"Contrasea"}),e.jsx("input",{type:"password",value:P.contrasena,onChange:q=>$({...P,contrasena:q.target.value}),style:Qe})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:Xe,children:"Email (opcional)"}),e.jsx("input",{type:"email",value:P.email,onChange:q=>$({...P,email:q.target.value}),style:Qe})]}),e.jsxs("div",{children:[e.jsx("label",{style:Xe,children:"Telfono (opcional)"}),e.jsx("input",{type:"tel",value:P.telefono,onChange:q=>$({...P,telefono:q.target.value}),style:Qe})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:Xe,children:"Documento (opcional)"}),e.jsx("input",{type:"text",value:P.documento_identidad,onChange:q=>$({...P,documento_identidad:q.target.value}),style:Qe})]}),e.jsxs("div",{children:[e.jsx("label",{style:Xe,children:"Direccin (opcional)"}),e.jsx("input",{type:"text",value:P.direccion,onChange:q=>$({...P,direccion:q.target.value}),style:Qe})]})]})]}),N&&e.jsx("div",{style:{backgroundColor:"#fee2e2",color:"#b91c1c",padding:"0.6rem 0.75rem",borderRadius:"0.5rem",border:"1px solid #fecaca",fontSize:"0.85rem"},children:N}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.75rem",marginTop:"0.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>Z(!1),style:{padding:"0.65rem 1.2rem",borderRadius:"0.6rem",border:"1px solid #e2e8f0",backgroundColor:"white",cursor:"pointer",fontWeight:"600",color:"#64748b"},children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:Y||se,style:{padding:"0.65rem 1.2rem",borderRadius:"0.6rem",border:"none",backgroundColor:"#4f46e5",color:"white",cursor:Y||se?"not-allowed":"pointer",fontWeight:"700"},children:Y||se?"Procesando...":"Crear cuenta y enviar"})]})]})]})}),ye&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15, 23, 42, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50,padding:"1.5rem"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"1rem",padding:"1.75rem",width:"100%",maxWidth:"480px",boxShadow:"0 20px 40px -24px rgba(15, 23, 42, 0.6)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.2rem",fontWeight:"700",color:"#0f172a"},children:"Completar datos del cliente"}),e.jsx("p",{style:{margin:"0.35rem 0 0",color:"#64748b",fontSize:"0.9rem"},children:"Necesitamos estos datos para crear tu perfil."})]}),e.jsx("button",{type:"button",onClick:()=>ie(!1),style:{border:"none",background:"none",fontSize:"1.25rem",cursor:"pointer",color:"#64748b"},children:""})]}),e.jsxs("form",{onSubmit:Sr,style:{display:"grid",gap:"0.85rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:Xe,children:"Nombres completos"}),e.jsx("input",{type:"text",value:be.nombre_completo,onChange:q=>ce({...be,nombre_completo:q.target.value}),style:Qe})]}),e.jsxs("div",{children:[e.jsx("label",{style:Xe,children:"Telefono"}),e.jsx("input",{type:"tel",value:be.telefono,onChange:q=>ce({...be,telefono:q.target.value}),style:Qe})]}),e.jsxs("div",{children:[e.jsx("label",{style:Xe,children:"Cedula"}),e.jsx("input",{type:"text",value:be.documento_identidad,onChange:q=>ce({...be,documento_identidad:q.target.value}),style:Qe})]}),re&&e.jsx("div",{style:{backgroundColor:"#fee2e2",color:"#b91c1c",padding:"0.6rem 0.75rem",borderRadius:"0.5rem",border:"1px solid #fecaca",fontSize:"0.85rem"},children:re}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.75rem"},children:[e.jsx("button",{type:"button",onClick:()=>ie(!1),style:{padding:"0.6rem 1.15rem",borderRadius:"0.6rem",border:"1px solid #e2e8f0",backgroundColor:"white",cursor:"pointer",fontWeight:"600",color:"#64748b"},children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:h||se,style:{padding:"0.6rem 1.15rem",borderRadius:"0.6rem",border:"none",backgroundColor:"#4f46e5",color:"white",cursor:h||se?"not-allowed":"pointer",fontWeight:"700"},children:h||se?"Guardando...":"Guardar y enviar"})]})]})]})}),W&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.75rem",marginBottom:"1.5rem",border:"1px solid #fecaca"},children:W}),e.jsxs("section",{id:"cotizador",style:{marginTop:"3rem"},children:[e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("h2",{style:Te,children:"Cotizador rpido"}),e.jsx("p",{style:Ae,children:"Configura tu evento y recibe un estimado inmediato. Luego nuestro equipo ajusta los detalles contigo."})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(280px, 1fr)",gap:"2rem",alignItems:"start"},children:[e.jsxs("div",{style:ne,children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#0f172a",marginBottom:"0.35rem"},children:"Detalles del evento"}),e.jsx("p",{style:{color:"#64748b",fontSize:"0.95rem"},children:"Selecciona los datos clave para estimar tu cotizacin."})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.25rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:Xe,children:[e.jsx(_t,{size:16}),"Fecha del evento"]}),e.jsx("input",{type:"date",value:m.fecha_evento,onChange:q=>B({...m,fecha_evento:q.target.value}),min:new Date().toISOString().split("T")[0],style:Qe})]}),e.jsxs("div",{children:[e.jsxs("label",{style:Xe,children:[e.jsx(dn,{size:16}),"Nmero de invitados"]}),e.jsx("input",{type:"number",min:"1",value:m.invitados,onChange:q=>B({...m,invitados:q.target.value}),style:Qe})]}),e.jsxs("div",{children:[e.jsxs("label",{style:Xe,children:[e.jsx(jt,{size:16}),"Tipo de evento"]}),e.jsxs("select",{value:m.tipo_evento,onChange:q=>B({...m,tipo_evento:q.target.value}),style:Qe,children:[e.jsx("option",{value:"",children:"Selecciona un tipo"}),p.map(q=>e.jsx("option",{value:q.nombre||q.tipo_evento||q.descripcion,children:q.nombre||q.tipo_evento||q.descripcion},q.id||q.id_tipo))]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:Xe,children:[e.jsx(jt,{size:16}),"Plan"]}),e.jsxs("select",{value:m.plan_id,onChange:q=>B({...m,plan_id:q.target.value}),style:Qe,children:[e.jsx("option",{value:"",children:"Selecciona un plan"}),y.map(q=>e.jsxs("option",{value:q.id,children:[q.nombre," - ",fe(q.precio_base||q.precio)]},q.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:Xe,children:[e.jsx(Ja,{size:16}),"Saln"]}),e.jsxs("select",{value:m.salon_id,onChange:q=>B({...m,salon_id:q.target.value}),style:Qe,children:[e.jsx("option",{value:"",children:"Selecciona un saln"}),b.map(q=>e.jsxs("option",{value:String(q.id_salon||q.id),children:[q.nombre," (",q.capacidad||"Cap. N/A",") - ",fe(q.precio_base||q.precio)]},q.id_salon||q.id))]})]})]}),(Ie||Q)&&e.jsxs("div",{style:{marginTop:"1.75rem",padding:"1rem 1.25rem",borderRadius:"0.9rem",backgroundColor:"#f1f5f9",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontWeight:"700",color:"#0f172a",marginBottom:"0.5rem"},children:"Recomendacin segn invitados"}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem"},children:[Ie&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600"},children:"Plan sugerido"}),e.jsxs("div",{style:{color:"#64748b",fontSize:"0.9rem"},children:[Ie.nombre,"  Capacidad ",Ie.capacidad_minima||0,Ie.capacidad_maxima?`-${Ie.capacidad_maxima}`:"+"]})]}),e.jsx("button",{type:"button",onClick:()=>B(q=>({...q,plan_id:String(Ie.id)})),style:{padding:"0.45rem 0.9rem",borderRadius:"0.6rem",border:"1px solid #cbd5f5",backgroundColor:"white",color:"#3730a3",cursor:"pointer",fontWeight:"600"},children:"Usar plan"})]}),Q&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600"},children:"Saln sugerido"}),e.jsxs("div",{style:{color:"#64748b",fontSize:"0.9rem"},children:[Q.nombre,"  Capacidad ",Q.capacidad||"N/A"]})]}),e.jsx("button",{type:"button",onClick:()=>B(q=>({...q,salon_id:String(Q.id_salon||Q.id)})),style:{padding:"0.45rem 0.9rem",borderRadius:"0.6rem",border:"1px solid #cbd5f5",backgroundColor:"white",color:"#3730a3",cursor:"pointer",fontWeight:"600"},children:"Usar saln"})]})]})]}),e.jsxs("div",{style:{marginTop:"2.25rem"},children:[e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"700",marginBottom:"0.75rem",color:"#0f172a"},children:"Servicios adicionales"}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[e.jsxs("select",{value:R,onChange:q=>te(q.target.value),style:{flex:1,minWidth:"220px",...Qe},children:[e.jsx("option",{value:"",children:"Selecciona un servicio"}),k.map(q=>e.jsxs("option",{value:q.id_producto||q.id,children:[q.nombre," - ",fe(q.precio||q.precio_base)]},q.id_producto||q.id))]}),e.jsx("input",{type:"number",min:"1",value:F,onChange:q=>K(q.target.value),style:{width:"120px",...Qe}}),e.jsxs("button",{type:"button",onClick:we,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.2rem",backgroundColor:"#4f46e5",color:"white",border:"none",borderRadius:"0.65rem",cursor:"pointer",fontWeight:"600",boxShadow:"0 10px 20px -16px rgba(79, 70, 229, 0.8)"},children:[e.jsx(Ur,{size:16}),"Agregar"]})]}),M.length>0&&e.jsx("div",{style:{marginTop:"1.5rem",display:"grid",gap:"0.75rem"},children:M.map((q,Se)=>{var ve,Oe,Ce;return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem 1rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:((ve=q.producto)==null?void 0:ve.nombre)||"Servicio"}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:["Cantidad: ",q.cantidad]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontWeight:"600"},children:fe((((Oe=q.producto)==null?void 0:Oe.precio)||((Ce=q.producto)==null?void 0:Ce.precio_base)||0)*q.cantidad)}),e.jsx("button",{type:"button",onClick:()=>Ne(Se),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer"},children:e.jsx(Tr,{size:16})})]})]},`${q.producto_id}-${Se}`)})})]})]}),e.jsxs("div",{style:{...ne,height:"fit-content"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.25rem"},children:[e.jsx(kp,{size:20,color:"#4f46e5"}),e.jsx("h3",{style:{fontSize:"1.15rem",fontWeight:"700",color:"#0f172a"},children:"Resumen estimado"})]}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"1.5rem",color:"#1f2937"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Plan"}),e.jsx("span",{children:fe((Re==null?void 0:Re.precio_base)||(Re==null?void 0:Re.precio))})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Saln"}),e.jsx("span",{children:fe((me==null?void 0:me.precio_base)||(me==null?void 0:me.precio))})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Servicios adicionales"}),e.jsx("span",{children:fe(M.reduce((q,Se)=>{var Oe,Ce;const ve=((Oe=Se.producto)==null?void 0:Oe.precio)||((Ce=Se.producto)==null?void 0:Ce.precio_base)||0;return q+ve*Se.cantidad},0))})]}),e.jsxs("div",{style:{borderTop:"1px solid #e2e8f0",paddingTop:"0.85rem",display:"flex",justifyContent:"space-between",fontWeight:"700",fontSize:"1.05rem"},children:[e.jsx("span",{children:"Total estimado"}),e.jsx("span",{children:fe(V)})]})]}),e.jsx("button",{type:"button",onClick:We,disabled:se||Y,style:{width:"100%",padding:"0.85rem 1rem",backgroundColor:"#0f172a",color:"white",border:"none",borderRadius:"0.75rem",cursor:se||Y?"not-allowed":"pointer",fontWeight:"700",marginBottom:"1rem",boxShadow:"0 12px 26px -18px rgba(15, 23, 42, 0.8)",opacity:se||Y?.7:1},children:se||Y?"Enviando...":s?"Solicitar descarga de cotizacion":"Enviar cotizacion"}),zr.length>0&&e.jsx("div",{style:{backgroundColor:"#fef3c7",color:"#92400e",padding:"0.75rem",borderRadius:"0.5rem",fontSize:"0.85rem",marginBottom:"1rem"},children:zr.map((q,Se)=>e.jsxs("div",{children:[" ",q]},Se))}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#64748b"},children:["Este valor es solo una referencia. El equipo de ",d," confirmar la cotizacin final."]})]})]})]}),e.jsxs("footer",{style:{marginTop:"4rem",padding:"2.5rem 1.5rem",borderTop:"1px solid #e2e8f0",backgroundColor:"white",borderRadius:"1.25rem",boxShadow:"0 16px 40px -28px rgba(15, 23, 42, 0.3)"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"800",fontSize:"1.1rem",color:"#0f172a",marginBottom:"0.6rem"},children:d}),e.jsx("p",{style:{margin:0,color:"#64748b",fontSize:"0.95rem"},children:"Diseamos experiencias memorables para bodas, eventos corporativos y celebraciones nicas."})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"700",color:"#0f172a",marginBottom:"0.6rem"},children:"Contacto"}),e.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#64748b",fontSize:"0.95rem"},children:[e.jsx(_l,{size:16}),"ventas@lirioseventos.com"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#64748b",fontSize:"0.95rem"},children:[e.jsx(Wg,{size:16}),"+57 310 000 0000"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#64748b",fontSize:"0.95rem"},children:[e.jsx(Tn,{size:16}),"Medelln, Colombia"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"700",color:"#0f172a",marginBottom:"0.6rem"},children:"Sguenos"}),e.jsx("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[{label:"Instagram",href:"https://instagram.com",icon:rv},{label:"Facebook",href:"https://facebook.com",icon:K5},{label:"TikTok",href:"https://tiktok.com",icon:fv},{label:"WhatsApp",href:"https://wa.me/573100000000",icon:vu}].map(q=>e.jsxs("a",{href:q.href,target:"_blank",rel:"noreferrer",style:{padding:"0.5rem 0.9rem",borderRadius:"999px",border:"1px solid #e2e8f0",textDecoration:"none",color:"#0f172a",fontWeight:"600",fontSize:"0.85rem",backgroundColor:"#f8fafc",display:"inline-flex",alignItems:"center",gap:"0.4rem"},children:[e.jsx(q.icon,{size:16}),q.label]},q.label))})]})]}),e.jsxs("div",{style:{marginTop:"2rem",borderTop:"1px solid #e2e8f0",paddingTop:"1rem",color:"#94a3b8",fontSize:"0.85rem"},children:[" ",new Date().getFullYear()," ",d,". Todos los derechos reservados."]})]}),e.jsx("div",{style:{paddingBottom:"3rem"}})]})})]})},Cv=()=>{var se;const{usuario:r,logout:t}=st(),{nombrePlataforma:o}=zl(),n=Nn(),[i,s]=c.useState(!0),[a,d]=c.useState(!1),[u,l]=c.useState(!0),[f,g]=c.useState(!0),[y,z]=c.useState(!0),[b,w]=c.useState(!0),[k,j]=c.useState(0),p=o.split(" ").filter(Boolean).slice(0,2).map(G=>G[0].toUpperCase()).join(""),S=r?((G,ye)=>{const ie=[{path:"/inicio",icon:J5,label:"Inicio",moduleKey:null,roles:[T.ADMIN,T.MANAGER,T.COORDINATOR,T.CLIENT]},{path:"/mi-evento",icon:_t,label:"Mi evento",moduleKey:Be.PORTAL_CLIENTE,roles:[T.CLIENT]},{path:"/perfil",icon:Y5,label:"Mi perfil",moduleKey:Be.PERFIL,roles:[T.ADMIN,T.MANAGER,T.COORDINATOR,T.CLIENT]},{path:"/reportes",icon:G5,label:"Reportes",moduleKey:Be.REPORTES,roles:[T.ADMIN,T.MANAGER]},{path:"/eventos",icon:_t,label:"Eventos",moduleKey:Be.EVENTOS,roles:[T.ADMIN,T.MANAGER,T.COORDINATOR,T.CLIENT]},{path:"/pagos",icon:ks,label:"Pagos",moduleKey:Be.PAGOS,roles:[T.ADMIN,T.MANAGER]},{path:"/cuentas",icon:sn,label:"Cuentas",moduleKey:Be.CUENTAS,roles:[T.ADMIN,T.MANAGER]},{path:"/salones",icon:Ja,label:"Salones",moduleKey:Be.SALONES,roles:[T.ADMIN,T.MANAGER,T.COORDINATOR]},{path:"/notificaciones-nativas",icon:Ag,label:"Notificaciones",moduleKey:Be.NOTIFICACIONES_NATIVAS,roles:[T.ADMIN,T.MANAGER]},{path:"/calendario",icon:V5,label:"Calendario",moduleKey:Be.CALENDARIO,roles:[T.ADMIN,T.MANAGER,T.COORDINATOR,T.CLIENT]},{path:"/planes",icon:jt,label:"Planes",moduleKey:Be.PLANES,roles:[T.ADMIN,T.MANAGER,T.COORDINATOR]},{path:"/productos",icon:Gt,label:"Productos",moduleKey:Be.PRODUCTOS,roles:[T.ADMIN,T.MANAGER,T.COORDINATOR]},{path:"/categorias",icon:Za,label:"Categoras",moduleKey:Be.CATEGORIAS,roles:[T.ADMIN,T.MANAGER]},{path:"/inventario",icon:hv,label:"Inventario",moduleKey:Be.INVENTARIO,roles:[T.ADMIN,T.MANAGER,T.COORDINATOR]},{path:"/usuarios",icon:sa,label:"Usuarios",moduleKey:Be.USUARIOS,roles:[T.ADMIN,T.MANAGER]},{path:"/clientes",icon:dn,label:"Clientes",moduleKey:Be.CLIENTES,roles:[T.ADMIN,T.MANAGER,T.COORDINATOR]},{path:"/permisos",icon:sa,label:"Roles y Permisos",moduleKey:Be.PERMISOS,roles:[T.ADMIN]},{path:"/configuraciones/whatsapp-chat",icon:vu,label:"WhatsApp",moduleKey:Be.WHATSAPP_CHAT,roles:[T.ADMIN,T.MANAGER]},{path:"/configuraciones/whatsapp-panel",icon:X5,label:"Panel WhatsApp",moduleKey:Be.WHATSAPP_METRICAS,roles:[T.ADMIN,T.MANAGER]},{path:"/configuraciones/whatsapp-plantillas",icon:_l,label:"Plantillas WhatsApp",moduleKey:Be.WHATSAPP_TEMPLATES,roles:[T.ADMIN,T.MANAGER]},{path:"/configuraciones/carga-masiva",icon:Tg,label:"Carga masiva",moduleKey:Be.CARGA_MASIVA,roles:[T.ADMIN,T.MANAGER]},{path:"/configuraciones/limpieza-datos",icon:sa,label:"Config. Sistema",moduleKey:Be.CONFIG_DATOS,roles:[T.ADMIN,T.MANAGER]}];return G?ie.filter(be=>gc(ye,be.moduleKey,be.roles)):[]})(r.rol,r):[],L=_r(r==null?void 0:r.rol,[T.CLIENT]),W=["/planes","/productos","/categorias","/inventario","/configuraciones/carga-masiva"],I=["/calendario","/eventos","/pagos","/cuentas","/salones","/configuraciones/whatsapp-chat"],m=["/notificaciones-nativas","/configuraciones/whatsapp-panel","/configuraciones/whatsapp-plantillas","/configuraciones/limpieza-datos"],B=["/usuarios","/clientes","/permisos"],H=L?S.filter(G=>["/inicio","/mi-evento"].includes(G.path)):S,E=H.filter(G=>W.includes(G.path)),R=H.filter(G=>I.includes(G.path)),te=H.filter(G=>m.includes(G.path)),F=H.filter(G=>B.includes(G.path)),K=["/perfil","/reportes"],D=H.filter(G=>!W.includes(G.path)&&!I.includes(G.path)&&!m.includes(G.path)&&!B.includes(G.path)&&!K.includes(G.path)),Z=H.filter(G=>K.includes(G.path)),P=E.some(G=>n.pathname===G.path),$=R.some(G=>n.pathname===G.path),N=te.some(G=>n.pathname.startsWith(G.path)),ee=F.some(G=>n.pathname===G.path);c.useEffect(()=>{P&&l(!0)},[P]),c.useEffect(()=>{$&&g(!0)},[$]),c.useEffect(()=>{N&&z(!0)},[N]),c.useEffect(()=>{ee&&w(!0)},[ee]),c.useEffect(()=>{const G=()=>{const ye=window.innerWidth<768;d(ye),ye&&s(!1)};return G(),window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)},[]);const Y=c.useCallback(async()=>{if(!(!r||!gc(r.rol,Be.WHATSAPP_CHAT)))try{const G=await Eo.getNoLeidos();j(G.total||0)}catch{}},[r]);c.useEffect(()=>{Y();const G=setInterval(Y,1e4);return()=>clearInterval(G)},[Y]),c.useEffect(()=>{n.pathname==="/configuraciones/whatsapp-chat"&&setTimeout(Y,500)},[n.pathname,Y]);const X=async()=>{await t(),window.location.href="/login"};return e.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[a&&i&&e.jsx("div",{onClick:()=>s(!1),style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.4)",zIndex:900}}),e.jsxs("aside",{style:{width:a?"80vw":i?"260px":"80px",backgroundColor:"#1f2937",color:"white",transition:"width 0.3s",display:"flex",flexDirection:"column",position:"fixed",height:"100vh",zIndex:1e3,transform:a?i?"translateX(0)":"translateX(-100%)":"none",boxShadow:a?"0 10px 25px rgba(0, 0, 0, 0.25)":"none"},children:[e.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid #374151",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i&&e.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:e.jsxs(Gr,{to:"/",style:{display:"flex",alignItems:"center",gap:"0.75rem",textDecoration:"none",color:"#e6c225",fontWeight:"800",fontSize:"1.1rem"},children:[e.jsx("span",{style:{width:"36px",height:"36px",borderRadius:"12px",background:"linear-gradient(135deg, #4338ca, #6366f1)",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.95rem",fontWeight:"700"},children:p||"LE"}),o]})}),e.jsx("button",{onClick:()=>s(!i),style:{background:"none",border:"none",color:"white",cursor:"pointer",padding:"0.5rem"},children:i?e.jsx(rr,{size:20}):e.jsx(Rp,{size:20})})]}),e.jsx("nav",{style:{flex:1,minHeight:0,padding:"1rem 0",overflowY:"auto",paddingBottom:"1.5rem"},children:S.length===0?e.jsx("div",{style:{padding:"1rem",color:"#9ca3af",fontSize:"0.875rem",textAlign:"center"},children:"No hay mdulos disponibles"}):e.jsxs(e.Fragment,{children:[R.length>0&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>g(G=>!G),style:{display:"flex",alignItems:"center",padding:"0.75rem 1.5rem",width:"100%",background:"none",border:"none",color:$?"white":"#d1d5db",cursor:"pointer",gap:"0.75rem"},children:[e.jsx(_t,{size:20}),i&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{flex:1,textAlign:"left"},children:"Operaciones"}),f?e.jsx(Ki,{size:16}):e.jsx(oi,{size:16})]})]}),f&&e.jsx("div",{style:{paddingLeft:i?"1.5rem":"0.5rem"},children:R.map(G=>{const ye=G.icon,ie=n.pathname===G.path||G.path==="/"&&n.pathname==="/",ce=G.path==="/configuraciones/whatsapp-chat"&&k>0;return e.jsxs(Gr,{to:G.path,style:{display:"flex",alignItems:"center",padding:"0.6rem 1.5rem",color:ie?"white":"#d1d5db",backgroundColor:ie?"#4f46e5":"transparent",textDecoration:"none",transition:"all 0.2s",gap:"0.75rem",borderLeft:i?"2px solid #374151":"none"},onMouseEnter:re=>{ie||(re.currentTarget.style.backgroundColor="#374151")},onMouseLeave:re=>{ie||(re.currentTarget.style.backgroundColor="transparent")},children:[e.jsxs("div",{style:{position:"relative",display:"inline-flex"},children:[e.jsx(ye,{size:18}),ce&&!i&&e.jsx("span",{style:{position:"absolute",top:"-6px",right:"-6px",minWidth:"16px",height:"16px",borderRadius:"8px",backgroundColor:"#ef4444",color:"white",fontSize:"0.65rem",fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 4px"},children:k>9?"9+":k})]}),i&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[G.label,ce&&e.jsx("span",{style:{minWidth:"18px",height:"18px",borderRadius:"9px",backgroundColor:"#ef4444",color:"white",fontSize:"0.7rem",fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:k>99?"99+":k})]})]},G.path)})})]}),D.map(G=>{const ye=G.icon,ie=n.pathname===G.path||G.path==="/"&&n.pathname==="/";return e.jsxs(Gr,{to:G.path,style:{display:"flex",alignItems:"center",padding:"0.75rem 1.5rem",color:ie?"white":"#d1d5db",backgroundColor:ie?"#4f46e5":"transparent",textDecoration:"none",transition:"all 0.2s",gap:"0.75rem"},onMouseEnter:be=>{ie||(be.currentTarget.style.backgroundColor="#374151")},onMouseLeave:be=>{ie||(be.currentTarget.style.backgroundColor="transparent")},children:[e.jsx(ye,{size:20}),i&&e.jsx("span",{children:G.label})]},G.path)}),E.length>0&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>l(G=>!G),style:{display:"flex",alignItems:"center",padding:"0.75rem 1.5rem",width:"100%",background:"none",border:"none",color:P?"white":"#d1d5db",cursor:"pointer",gap:"0.75rem"},children:[e.jsx(Za,{size:20}),i&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{flex:1,textAlign:"left"},children:"Catlogos"}),u?e.jsx(Ki,{size:16}):e.jsx(oi,{size:16})]})]}),u&&e.jsx("div",{style:{paddingLeft:i?"1.5rem":"0.5rem"},children:E.map(G=>{const ye=G.icon,ie=n.pathname===G.path;return e.jsxs(Gr,{to:G.path,style:{display:"flex",alignItems:"center",padding:"0.6rem 1.5rem",color:ie?"white":"#d1d5db",backgroundColor:ie?"#4f46e5":"transparent",textDecoration:"none",transition:"all 0.2s",gap:"0.75rem",borderLeft:i?"2px solid #374151":"none"},onMouseEnter:be=>{ie||(be.currentTarget.style.backgroundColor="#374151")},onMouseLeave:be=>{ie||(be.currentTarget.style.backgroundColor="transparent")},children:[e.jsx(ye,{size:18}),i&&e.jsx("span",{children:G.label})]},G.path)})})]}),F.length>0&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>w(G=>!G),style:{display:"flex",alignItems:"center",padding:"0.75rem 1.5rem",width:"100%",background:"none",border:"none",color:ee?"white":"#d1d5db",cursor:"pointer",gap:"0.75rem"},children:[e.jsx(dn,{size:20}),i&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{flex:1,textAlign:"left"},children:"Usuarios"}),b?e.jsx(Ki,{size:16}):e.jsx(oi,{size:16})]})]}),b&&e.jsx("div",{style:{paddingLeft:i?"1.5rem":"0.5rem"},children:F.map(G=>{const ye=G.icon,ie=n.pathname===G.path;return e.jsxs(Gr,{to:G.path,style:{display:"flex",alignItems:"center",padding:"0.6rem 1.5rem",color:ie?"white":"#d1d5db",backgroundColor:ie?"#4f46e5":"transparent",textDecoration:"none",transition:"all 0.2s",gap:"0.75rem",borderLeft:i?"2px solid #374151":"none"},onMouseEnter:be=>{ie||(be.currentTarget.style.backgroundColor="#374151")},onMouseLeave:be=>{ie||(be.currentTarget.style.backgroundColor="transparent")},children:[e.jsx(ye,{size:18}),i&&e.jsx("span",{children:G.label})]},G.path)})})]}),te.length>0&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>z(G=>!G),style:{display:"flex",alignItems:"center",padding:"0.75rem 1.5rem",width:"100%",background:"none",border:"none",color:N?"white":"#d1d5db",cursor:"pointer",gap:"0.75rem"},children:[e.jsx(sa,{size:20}),i&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{flex:1,textAlign:"left"},children:"Configuraciones"}),y?e.jsx(Ki,{size:16}):e.jsx(oi,{size:16})]})]}),y&&e.jsx("div",{style:{paddingLeft:i?"1.5rem":"0.5rem"},children:te.map(G=>{const ye=G.icon,ie=n.pathname.startsWith(G.path);return e.jsxs(Gr,{to:G.path,style:{display:"flex",alignItems:"center",padding:"0.6rem 1.5rem",color:ie?"white":"#d1d5db",backgroundColor:ie?"#4f46e5":"transparent",textDecoration:"none",transition:"all 0.2s",gap:"0.75rem",borderLeft:i?"2px solid #374151":"none"},onMouseEnter:be=>{ie||(be.currentTarget.style.backgroundColor="#374151")},onMouseLeave:be=>{ie||(be.currentTarget.style.backgroundColor="transparent")},children:[e.jsx(ye,{size:18}),i&&e.jsx("span",{children:G.label})]},G.path)})})]})]})}),e.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid #374151"},children:[i&&r&&e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500"},children:r.nombre_completo||r.nombre_usuario}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:jv(r.rol)})]}),Z.length>0&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",marginBottom:"0.75rem"},children:Z.map(G=>{const ye=G.icon,ie=n.pathname===G.path;return e.jsxs(Gr,{to:G.path,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",color:ie?"white":"#d1d5db",backgroundColor:ie?"#4f46e5":"transparent",textDecoration:"none",borderRadius:"0.375rem",transition:"all 0.2s",fontSize:"0.875rem"},onMouseEnter:be=>{ie||(be.currentTarget.style.backgroundColor="#374151")},onMouseLeave:be=>{ie||(be.currentTarget.style.backgroundColor="transparent")},children:[e.jsx(ye,{size:16}),i&&e.jsx("span",{children:G.label})]},G.path)})}),e.jsxs("button",{onClick:X,style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",padding:"0.5rem",background:"none",border:"1px solid #ef4444",color:"#ef4444",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",transition:"all 0.2s"},onMouseEnter:G=>{G.currentTarget.style.backgroundColor="#ef4444",G.currentTarget.style.color="white"},onMouseLeave:G=>{G.currentTarget.style.backgroundColor="transparent",G.currentTarget.style.color="#ef4444"},children:[e.jsx(nv,{size:16}),i&&e.jsx("span",{children:"Cerrar Sesin"})]})]})]}),e.jsxs("main",{style:{marginLeft:a?"0":i?"260px":"80px",flex:1,transition:"margin-left 0.3s",padding:a?"1rem":"2rem",paddingTop:a?"4.5rem":"2rem",backgroundColor:"#f9fafb"},children:[a&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,height:"56px",backgroundColor:"white",borderBottom:"1px solid #e5e7eb",display:"flex",alignItems:"center",padding:"0 1rem",zIndex:800},children:[e.jsx("button",{onClick:()=>s(!0),style:{background:"none",border:"none",color:"#111827",cursor:"pointer",padding:"0.25rem"},children:e.jsx(Rp,{size:22})}),e.jsx("div",{style:{marginLeft:"0.75rem",fontWeight:"600",color:"#111827"},children:((se=S.find(G=>G.path===n.pathname))==null?void 0:se.label)||o})]}),e.jsx(Gb,{})]})]})},Cr=({children:r,allowedRoles:t=[],moduleKey:o=null})=>{const{usuario:n,loading:i}=st();if(i)return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx("div",{children:"Cargando..."})});if(!n)return e.jsx(vl,{to:"/login",replace:!0});if(o){if(!gc(n,o,t))return e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",gap:"1rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:"Acceso Denegado"}),e.jsx("p",{style:{color:"#6b7280"},children:"No tienes permisos para acceder a esta seccin."}),e.jsx("button",{onClick:()=>window.history.back(),style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"500"},children:"Volver"})]})}else if(t.length>0&&!Ps(n==null?void 0:n.rol,t))return e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",gap:"1rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:"Acceso Denegado"}),e.jsx("p",{style:{color:"#6b7280"},children:"No tienes permisos para acceder a esta seccin."}),e.jsx("button",{onClick:()=>window.history.back(),style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"500"},children:"Volver"})]});return r},Sv=()=>{var x;const{toasts:r,removeToast:t,success:o,error:n,warning:i}=Ar(),{usuario:s}=st(),a=_r(s==null?void 0:s.rol,[T.COORDINATOR]),d=_r(s==null?void 0:s.rol,[T.ADMIN,T.MANAGER]),u=xr(s,Ye.EVENTOS_EDITAR_ESTADO,[T.ADMIN,T.MANAGER]),l=_r(s==null?void 0:s.rol,[T.ADMIN,T.MANAGER,T.COORDINATOR]),[f,g]=c.useState(!1),[y,z]=c.useState([]),[b,w]=c.useState(!0),[k,j]=c.useState(""),[p,C]=c.useState(""),[S,L]=c.useState("todos"),[W,I]=c.useState(""),[m,B]=c.useState(""),[H,E]=c.useState(!1),[R,te]=c.useState(null),[F,K]=c.useState(""),[D,Z]=c.useState(!1);c.useEffect(()=>{P()},[p,S,a,s==null?void 0:s.id]),c.useEffect(()=>{const h=()=>{g(window.innerWidth<768)};return h(),window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const P=async()=>{var h,J;try{w(!0);const fe={};p&&(fe.estado=p),(a&&(s!=null&&s.id)||d&&S==="mios"&&(s!=null&&s.id))&&(fe.coordinador_id=s.id),fe.incluir_porcentaje_avance=!0;const ge=await dr.getAll(fe);z(ge.eventos||[]),j("")}catch(fe){console.error("Error al cargar eventos:",fe);const ge=((J=(h=fe.response)==null?void 0:h.data)==null?void 0:J.error)||fe.message||"Error al cargar los eventos";j(`Error: ${ge}`)}finally{w(!1)}},$=h=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(h),N=h=>h?new Date(h).toLocaleDateString("es-EC"):"/",ee=h=>{if(!h)return"-";try{if(typeof h=="string"&&h.includes(":")){const J=h.split(":");return`${J[0]}:${J[1]}`}return h}catch{return h}},Y=async h=>{var J;try{const fe=await dr.descargarCotizacionPDF(h),ge=new Blob([fe.data],{type:"application/pdf"}),Re=window.URL.createObjectURL(ge),me=document.createElement("a");me.href=Re;const Ie=y.find(M=>(M.id_evento||M.id)===h),Q=Ie?`cotizacion_${((J=Ie.nombre_evento)==null?void 0:J.replace(/[^a-zA-Z0-9]/g,"_"))||"evento"}_${h}.pdf`:`cotizacion_evento_${h}.pdf`;me.download=Q,document.body.appendChild(me),me.click(),document.body.removeChild(me),window.URL.revokeObjectURL(Re),o("Cotizacin descargada exitosamente")}catch(fe){console.error("Error al descargar cotizacin:",fe),n("Error al descargar la cotizacin. Por favor, intente nuevamente.")}},X=async h=>{var J;try{const fe=await dr.descargarContratoPDF(h),ge=new Blob([fe.data],{type:"application/pdf"}),Re=window.URL.createObjectURL(ge),me=document.createElement("a");me.href=Re;const Ie=y.find(V=>(V.id_evento||V.id)===h),Q=(J=fe.headers)==null?void 0:J["content-disposition"];let M="";if(Q&&Q.includes("filename=")&&(M=Q.split("filename=")[1].replace(/"/g,"").trim()),!M){const V=(Ie==null?void 0:Ie.documento_identidad_cliente)||(Ie==null?void 0:Ie.documento_identidad)||"sin_documento_identidad",we=(Ie==null?void 0:Ie.fecha_evento)||"",Ne=we?String(we).replace(/[^0-9]/g,""):"sin_fecha";M=`Contrato_${V}_${h}_${Ne}.pdf`}me.download=M,document.body.appendChild(me),me.click(),document.body.removeChild(me),window.URL.revokeObjectURL(Re),o("Contrato descargado exitosamente")}catch(fe){console.error("Error al descargar contrato:",fe),n("Error al descargar el contrato. Por favor, intente nuevamente.")}},se=h=>({cotizacion:"#6b7280",confirmado:"#10b981",en_proceso:"#3b82f6",completado:"#8b5cf6",cancelado:"#ef4444"})[h]||"#6b7280",G=h=>{if(h.estado==="completado"){i("No se puede modificar el estado de un evento que ya est completado.");return}te(h),K(h.estado||"cotizacion"),E(!0)},ye=()=>{E(!1),te(null),K("")},ie=async()=>{var h,J;if(!(!R||!F))try{Z(!0),await dr.updateEstado(R.id_evento||R.id,F),await P(),ye(),j("")}catch(fe){console.error("Error al actualizar estado:",fe);const ge=((J=(h=fe.response)==null?void 0:h.data)==null?void 0:J.error)||"Error al actualizar el estado del evento";j(ge),n(ge)}finally{Z(!1)}},be=h=>{const J=["cotizacion","confirmado","en_proceso","completado","cancelado"],fe=h.estado;return parseFloat(h.saldo||0)>0?J.filter(Re=>Re!=="completado"||Re===fe):J},ce=y.filter(h=>{var J,fe,ge,Re;if(m){const me=m.toLowerCase();if(!(((J=h.nombre_evento)==null?void 0:J.toLowerCase().includes(me))||((fe=h.documento_identidad_cliente)==null?void 0:fe.toLowerCase().includes(me))||((ge=h.nombre_cliente)==null?void 0:ge.toLowerCase().includes(me))||((Re=h.tipo_evento)==null?void 0:Re.toLowerCase().includes(me))))return!1}if(W==="saldo_pendiente"){if(parseFloat(h.saldo||0)<=0)return!1}else if(W==="pagado_completo"&&parseFloat(h.saldo||0)>0)return!1;return!0}).sort((h,J)=>{const fe=h.id_evento||h.id||0;return(J.id_evento||J.id||0)-fe}),re={total:y.length,cotizacion:y.filter(h=>h.estado==="cotizacion").length,confirmado:y.filter(h=>h.estado==="confirmado").length,en_proceso:y.filter(h=>h.estado==="en_proceso").length,completado:y.filter(h=>h.estado==="completado").length,cancelado:y.filter(h=>h.estado==="cancelado").length,totalIngresos:y.reduce((h,J)=>h+parseFloat(J.total||0),0),totalPendiente:y.reduce((h,J)=>h+parseFloat(J.saldo||0),0),totalCobrado:y.reduce((h,J)=>h+(parseFloat(J.total||0)-parseFloat(J.saldo||0)),0)};return b?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando eventos..."}):e.jsxs("div",{children:[e.jsx(Lr,{toasts:r,removeToast:t}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Eventos"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de eventos"})]}),e.jsxs(Gr,{to:"/eventos/nuevo",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",textDecoration:"none",fontWeight:"500"},children:[e.jsx(Ur,{size:20}),"Nuevo Evento"]})]}),k&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:k}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:f?"1fr":"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1.25rem",borderRadius:"0.5rem",boxShadow:!p&&!W?"0 0 0 2px #6366f1":"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",gap:"1rem",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow=!p&&!W?"0 0 0 2px #6366f1, 0 4px 6px -1px rgba(0, 0, 0, 0.1)":"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow=!p&&!W?"0 0 0 2px #6366f1":"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},onClick:()=>{C(""),I("")},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"0.5rem",backgroundColor:"#6366f1",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(_t,{size:24,color:"white",strokeWidth:2.5})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"500",marginBottom:"0.25rem"},children:"Total Eventos"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1f2937"},children:re.total})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.25rem",borderRadius:"0.5rem",boxShadow:p==="en_proceso"?"0 0 0 2px #3b82f6":"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",gap:"1rem",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow=p==="en_proceso"?"0 0 0 2px #3b82f6, 0 4px 6px -1px rgba(0, 0, 0, 0.1)":"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow=p==="en_proceso"?"0 0 0 2px #3b82f6":"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},onClick:()=>{I(""),C(p==="en_proceso"?"":"en_proceso")},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"0.5rem",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(pc,{size:24,color:"white",strokeWidth:2.5})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"500",marginBottom:"0.25rem"},children:"En Proceso"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#3b82f6"},children:re.en_proceso})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.25rem",borderRadius:"0.5rem",boxShadow:p==="confirmado"?"0 0 0 2px #10b981":"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",gap:"1rem",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow=p==="confirmado"?"0 0 0 2px #10b981, 0 4px 6px -1px rgba(0, 0, 0, 0.1)":"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow=p==="confirmado"?"0 0 0 2px #10b981":"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},onClick:()=>{I(""),C(p==="confirmado"?"":"confirmado")},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"0.5rem",backgroundColor:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(jo,{size:24,color:"white",strokeWidth:2.5})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"500",marginBottom:"0.25rem"},children:"Confirmados"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10b981"},children:re.confirmado})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.25rem",borderRadius:"0.5rem",boxShadow:p==="completado"?"0 0 0 2px #8b5cf6":"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",gap:"1rem",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow=p==="completado"?"0 0 0 2px #8b5cf6, 0 4px 6px -1px rgba(0, 0, 0, 0.1)":"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow=p==="completado"?"0 0 0 2px #8b5cf6":"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},onClick:()=>{I(""),C(p==="completado"?"":"completado")},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"0.5rem",backgroundColor:"#8b5cf6",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ju,{size:24,color:"white",strokeWidth:2.5})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"500",marginBottom:"0.25rem"},children:"Completados"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#8b5cf6"},children:re.completado})]})]}),!a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1.25rem",borderRadius:"0.5rem",boxShadow:W==="pagado_completo"?"0 0 0 2px #10b981":"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",gap:"1rem",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow=W==="pagado_completo"?"0 0 0 2px #10b981, 0 4px 6px -1px rgba(0, 0, 0, 0.1)":"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow=W==="pagado_completo"?"0 0 0 2px #10b981":"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},onClick:()=>{C(""),I(W==="pagado_completo"?"":"pagado_completo")},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"0.5rem",backgroundColor:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(zt,{size:24,color:"white",strokeWidth:2.5})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"500",marginBottom:"0.25rem"},children:"Total Cobrado"}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10b981"},children:$(re.totalCobrado)})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.25rem",borderRadius:"0.5rem",boxShadow:W==="saldo_pendiente"?"0 0 0 2px #f59e0b":"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",gap:"1rem",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow=W==="saldo_pendiente"?"0 0 0 2px #f59e0b, 0 4px 6px -1px rgba(0, 0, 0, 0.1)":"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow=W==="saldo_pendiente"?"0 0 0 2px #f59e0b":"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},onClick:()=>{C(""),I(W==="saldo_pendiente"?"":"saldo_pendiente")},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"0.5rem",backgroundColor:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ut,{size:24,color:"white",strokeWidth:2.5})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"500",marginBottom:"0.25rem"},children:"Saldo Pendiente"}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#f59e0b"},children:$(re.totalPendiente)})]})]})]})]}),(p||W)&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",backgroundColor:"#fef3c7",borderRadius:"0.5rem",marginBottom:"1rem",border:"1px solid #fcd34d"},children:[e.jsx(bu,{size:18,color:"#d97706"}),e.jsxs("span",{style:{color:"#92400e",fontWeight:"500",flex:1},children:["Filtro activo: "," ",e.jsxs("strong",{children:[p==="en_proceso"&&"En Proceso",p==="confirmado"&&"Confirmados",p==="completado"&&"Completados",p==="cotizacion"&&"Cotizacin",p==="cancelado"&&"Cancelados",W==="saldo_pendiente"&&"Con Saldo Pendiente",W==="pagado_completo"&&"Pagado Completo"]})," "," (",ce.length," ",ce.length===1?"resultado":"resultados",")"]}),e.jsxs("button",{onClick:()=>{C(""),I("")},style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#fff",color:"#92400e",border:"1px solid #fcd34d",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"500",fontSize:"0.875rem",transition:"all 0.2s"},onMouseEnter:h=>{h.currentTarget.style.backgroundColor="#fef3c7"},onMouseLeave:h=>{h.currentTarget.style.backgroundColor="#fff"},children:[e.jsx(rr,{size:16}),"Quitar filtro"]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",flexWrap:"wrap",flexDirection:f?"column":"row"},children:[e.jsxs("div",{style:{position:"relative",flex:1,minWidth:f?"100%":"250px"},children:[e.jsx(Rt,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar eventos...",value:m,onChange:h=>B(h.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("select",{value:p,onChange:h=>C(h.target.value),style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",minWidth:f?"100%":"150px"},children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"cotizacion",children:"Cotizacin"}),e.jsx("option",{value:"confirmado",children:"Confirmado"}),e.jsx("option",{value:"en_proceso",children:"En Proceso"}),e.jsx("option",{value:"completado",children:"Completado"}),e.jsx("option",{value:"cancelado",children:"Cancelado"})]}),d&&e.jsxs("select",{value:S,onChange:h=>L(h.target.value),style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",minWidth:f?"100%":"150px"},children:[e.jsx("option",{value:"todos",children:"Todos los eventos"}),e.jsx("option",{value:"mios",children:"Mis eventos"})]})]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",overflow:"visible",position:"relative"},children:f?e.jsx("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:ce.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:"No hay eventos disponibles"}):ce.map(h=>e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"1rem",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06)",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem",fontWeight:"600"},children:["ID #",h.id_evento||h.id]}),e.jsx(Gr,{to:`/eventos/${h.id_evento||h.id}`,style:{fontWeight:"600",color:"#6366f1",textDecoration:"none",display:"block",marginBottom:"0.25rem",transition:"color 0.2s"},onMouseEnter:J=>{J.currentTarget.style.color="#4f46e5",J.currentTarget.style.textDecoration="underline"},onMouseLeave:J=>{J.currentTarget.style.color="#6366f1",J.currentTarget.style.textDecoration="none"},children:h.nombre_evento||"-"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:h.tipo_evento||"-"})]}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"600",backgroundColor:`${se(h.estado)}20`,color:se(h.estado),textTransform:"capitalize"},children:h.estado||"-"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Cliente"}),e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500"},children:h.nombre_cliente||"-"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:h.documento_identidad_cliente||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Fecha"}),e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500"},children:N(h.fecha_evento)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Hora"}),e.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"500"},children:[ee(h.hora_inicio),h.hora_fin?` - ${ee(h.hora_fin)}`:""]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Saln"}),e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500"},children:h.nombre_salon||h.salon||"-"})]})]}),!a&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Total"}),e.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600"},children:$(h.total||0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Saldo"}),e.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600",color:parseFloat(h.saldo||0)>0?"#f59e0b":"#10b981"},children:$(h.saldo||0)})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",justifyContent:"flex-end"},children:[e.jsxs(Gr,{to:`/eventos/${h.id_evento||h.id}`,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",textDecoration:"none",fontSize:"0.8rem",fontWeight:"500"},children:[e.jsx(St,{size:16,strokeWidth:2.5}),"Ver"]}),l&&e.jsxs(Gr,{to:`/eventos/editar/${h.id_evento||h.id}`,title:"Editar",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"#f59e0b",color:"white",borderRadius:"0.375rem",textDecoration:"none",fontSize:"0.8rem",fontWeight:"500"},children:[e.jsx(Jt,{size:16,strokeWidth:2.5}),"Editar"]}),e.jsxs("details",{style:{position:"relative"},children:[e.jsxs("summary",{style:{listStyle:"none",display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",fontSize:"0.8rem",fontWeight:"500",cursor:"pointer",userSelect:"none"},children:[e.jsx(jt,{size:16,strokeWidth:2.5}),"Archivos"]}),e.jsxs("div",{style:{position:"absolute",top:"110%",right:0,backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.08)",minWidth:"170px",zIndex:20,padding:"0.4rem"},children:[e.jsxs("button",{onClick:()=>Y(h.id_evento||h.id),style:{width:"100%",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"transparent",color:"#111827",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem",textAlign:"left"},children:[e.jsx(jt,{size:14,strokeWidth:2}),"Cotizacin"]}),e.jsxs("button",{onClick:()=>X(h.id_evento||h.id),style:{width:"100%",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"transparent",color:"#111827",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem",textAlign:"left"},children:[e.jsx(no,{size:14,strokeWidth:2}),"Contrato"]})]})]}),h.estado!=="completado"&&u&&e.jsxs("button",{onClick:()=>G(h),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"#f59e0b",color:"white",borderRadius:"0.375rem",fontSize:"0.8rem",fontWeight:"500",border:"none",cursor:"pointer"},children:[e.jsx(jo,{size:16,strokeWidth:2.5}),"Estado"]})]})]},h.id_evento||h.id))}):e.jsx("div",{style:{overflowX:"auto",overflowY:"visible",position:"relative",zIndex:1},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",position:"relative"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"2px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"ID"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Evento"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Cliente"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Fecha"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Hora"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Saln"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Plan"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Invitados"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Avance"}),!a&&e.jsxs(e.Fragment,{children:[e.jsx("th",{style:{padding:"1rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Total"}),e.jsx("th",{style:{padding:"1rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Saldo"})]}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap",minWidth:"200px"},children:"Acciones"})]})}),e.jsx("tbody",{children:ce.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:a?11:13,style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:"No hay eventos disponibles"})}):ce.map(h=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb",transition:"background-color 0.2s"},onMouseEnter:J=>J.currentTarget.style.backgroundColor="#f9fafb",onMouseLeave:J=>J.currentTarget.style.backgroundColor="white",children:[e.jsxs("td",{style:{padding:"1rem",fontSize:"0.85rem",color:"#6b7280",fontWeight:"600"},children:["#",h.id_evento||h.id]}),e.jsxs("td",{style:{padding:"1rem"},children:[e.jsx(Gr,{to:`/eventos/${h.id_evento||h.id}`,style:{fontWeight:"600",color:"#6366f1",marginBottom:"0.25rem",textDecoration:"none",display:"block",transition:"color 0.2s"},onMouseEnter:J=>{J.currentTarget.style.color="#4f46e5",J.currentTarget.style.textDecoration="underline"},onMouseLeave:J=>{J.currentTarget.style.color="#6366f1",J.currentTarget.style.textDecoration="none"},children:h.nombre_evento||"-"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:h.tipo_evento||"-"})]}),e.jsxs("td",{style:{padding:"1rem"},children:[e.jsx("div",{style:{fontWeight:"500",color:"#374151"},children:h.nombre_cliente||"-"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:h.documento_identidad_cliente||"-"})]}),e.jsx("td",{style:{padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_t,{size:16,color:"#6b7280"}),e.jsx("span",{style:{fontSize:"0.875rem"},children:h.fecha_evento})]})}),e.jsx("td",{style:{padding:"1rem"},children:h.hora_inicio?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Wn,{size:16,color:"#6b7280"}),e.jsxs("span",{style:{fontSize:"0.875rem"},children:[ee(h.hora_inicio),h.hora_fin?` - ${ee(h.hora_fin)}`:""]})]}):e.jsx("span",{style:{fontSize:"0.875rem",color:"#9ca3af"},children:"-"})}),e.jsx("td",{style:{padding:"1rem"},children:h.nombre_salon||h.salon?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Tn,{size:16,color:"#6b7280"}),e.jsx("span",{style:{fontSize:"0.875rem"},children:h.nombre_salon||h.salon})]}):e.jsx("span",{style:{fontSize:"0.875rem",color:"#9ca3af"},children:"-"})}),e.jsx("td",{style:{padding:"1rem"},children:h.nombre_plan?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Gt,{size:16,color:"#6b7280"}),e.jsx("span",{style:{fontSize:"0.875rem"},children:h.nombre_plan})]}):e.jsx("span",{style:{fontSize:"0.875rem",color:"#9ca3af"},children:"-"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:h.numero_invitados?e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(dn,{size:16,color:"#6b7280"}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500"},children:h.numero_invitados})]}):e.jsx("span",{style:{fontSize:"0.875rem",color:"#9ca3af"},children:"-"})}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.375rem 0.875rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"600",backgroundColor:`${se(h.estado)}20`,color:se(h.estado),textTransform:"capitalize",display:"inline-block"},children:h.estado||"-"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:h.porcentaje_avance_servicios!==void 0&&h.porcentaje_avance_servicios!==null?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem",minWidth:"80px"},children:[e.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#374151"},children:[h.porcentaje_avance_servicios,"%"]}),e.jsx("div",{style:{width:"100%",height:"6px",backgroundColor:"#e5e7eb",borderRadius:"9999px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${h.porcentaje_avance_servicios}%`,height:"100%",backgroundColor:h.porcentaje_avance_servicios>=100?"#10b981":"#6366f1",transition:"width 0.3s"}})})]}):e.jsx("span",{style:{fontSize:"0.875rem",color:"#9ca3af"},children:"-"})}),!a&&e.jsxs(e.Fragment,{children:[e.jsx("td",{style:{padding:"1rem",textAlign:"right"},children:e.jsx("div",{style:{fontWeight:"600",color:"#1f2937"},children:$(h.total||0)})}),e.jsx("td",{style:{padding:"1rem",textAlign:"right"},children:e.jsx("div",{style:{fontWeight:"600",color:parseFloat(h.saldo||0)>0?"#f59e0b":"#10b981"},children:$(h.saldo||0)})})]}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(Gr,{to:`/eventos/${h.id_evento||h.id}`,style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",textDecoration:"none",fontSize:"0.875rem",transition:"all 0.2s",border:"none",cursor:"pointer",minWidth:"36px",height:"36px"},onMouseEnter:J=>{J.currentTarget.style.backgroundColor="#4f46e5",J.currentTarget.style.transform="translateY(-1px)",J.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:J=>{J.currentTarget.style.backgroundColor="#6366f1",J.currentTarget.style.transform="translateY(0)",J.currentTarget.style.boxShadow="none"},title:"Ver detalles",children:e.jsx(St,{size:18,strokeWidth:2.5})}),l&&e.jsx(Gr,{to:`/eventos/editar/${h.id_evento||h.id}`,title:"Editar",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.5rem",backgroundColor:"#f59e0b",color:"white",borderRadius:"0.375rem",textDecoration:"none",fontSize:"0.875rem",transition:"all 0.2s",border:"none",cursor:"pointer",minWidth:"36px",height:"36px"},onMouseEnter:J=>{J.currentTarget.style.backgroundColor="#d97706",J.currentTarget.style.transform="translateY(-1px)",J.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:J=>{J.currentTarget.style.backgroundColor="#f59e0b",J.currentTarget.style.transform="translateY(0)",J.currentTarget.style.boxShadow="none"},children:e.jsx(Jt,{size:18,strokeWidth:2.5})}),e.jsxs("details",{style:{position:"relative",display:"inline-block"},children:[e.jsx("summary",{title:"Archivos",style:{listStyle:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s",userSelect:"none",minWidth:"36px",height:"36px"},onMouseEnter:J=>{J.currentTarget.style.backgroundColor="#059669",J.currentTarget.style.transform="translateY(-1px)",J.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:J=>{J.currentTarget.style.backgroundColor="#10b981",J.currentTarget.style.transform="translateY(0)",J.currentTarget.style.boxShadow="none"},children:e.jsx(jt,{size:18,strokeWidth:2.5})}),e.jsxs("div",{style:{position:"absolute",top:"110%",right:0,backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.08)",minWidth:"180px",zIndex:20,padding:"0.4rem",marginTop:"0.25rem"},children:[e.jsxs("button",{onClick:()=>Y(h.id_evento||h.id),style:{width:"100%",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"transparent",color:"#111827",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem",textAlign:"left"},children:[e.jsx(jt,{size:14,strokeWidth:2}),"Cotizacin"]}),e.jsxs("button",{onClick:()=>X(h.id_evento||h.id),style:{width:"100%",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"transparent",color:"#111827",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem",textAlign:"left"},children:[e.jsx(no,{size:14,strokeWidth:2}),"Contrato"]})]})]}),h.estado!=="completado"&&u&&e.jsx("button",{onClick:()=>G(h),style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.5rem",backgroundColor:"#f59e0b",color:"white",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:"500",border:"none",cursor:"pointer",transition:"all 0.2s",minWidth:"36px",height:"36px"},onMouseEnter:J=>{J.currentTarget.style.backgroundColor="#d97706",J.currentTarget.style.transform="translateY(-1px)",J.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:J=>{J.currentTarget.style.backgroundColor="#f59e0b",J.currentTarget.style.transform="translateY(0)",J.currentTarget.style.boxShadow="none"},title:"Cambiar estado",children:e.jsx(jo,{size:18,strokeWidth:2.5})})]})})]},h.id_evento||h.id))})]})})}),H&&R&&u&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:ye,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",maxWidth:"500px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(jo,{size:28,color:"#f59e0b",strokeWidth:2.5}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1f2937",margin:0},children:"Cambiar Estado"})]}),e.jsx("button",{onClick:ye,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",color:"#6b7280",borderRadius:"0.25rem",transition:"all 0.2s"},onMouseEnter:h=>{h.currentTarget.style.backgroundColor="#f3f4f6",h.currentTarget.style.color="#374151"},onMouseLeave:h=>{h.currentTarget.style.backgroundColor="transparent",h.currentTarget.style.color="#6b7280"},children:e.jsx(rr,{size:24,strokeWidth:2.5})})]}),e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsx(Gt,{size:18,color:"#6366f1",strokeWidth:2}),e.jsxs("p",{style:{margin:0,color:"#374151",fontSize:"0.875rem"},children:[e.jsx("strong",{children:"Evento:"})," ",R.nombre_evento]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsx(jo,{size:18,color:se(R.estado),strokeWidth:2}),e.jsxs("p",{style:{margin:0,color:"#374151",fontSize:"0.875rem"},children:[e.jsx("strong",{children:"Estado actual:"})," ",e.jsx("span",{style:{color:se(R.estado),fontWeight:"600"},children:(x=R.estado)==null?void 0:x.toUpperCase().replace("_"," ")})]})]}),parseFloat(R.saldo||0)>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",backgroundColor:"#fef3c7",borderRadius:"0.375rem",border:"1px solid #fde68a"},children:[e.jsx(ut,{size:18,color:"#f59e0b",strokeWidth:2.5}),e.jsxs("p",{style:{margin:0,color:"#92400e",fontSize:"0.875rem",fontWeight:"500"},children:["Saldo pendiente: ",$(parseFloat(R.saldo||0))]})]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:[e.jsx(Jt,{size:18,color:"#6366f1",strokeWidth:2}),"Nuevo Estado:"]}),e.jsx("select",{value:F,onChange:h=>K(h.target.value),style:{width:"100%",padding:"0.75rem 1rem",border:"2px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem",backgroundColor:"white",fontWeight:"500",color:"#374151",cursor:"pointer",transition:"all 0.2s"},onFocus:h=>{h.target.style.borderColor="#6366f1",h.target.style.boxShadow="0 0 0 3px rgba(99, 102, 241, 0.1)"},onBlur:h=>{h.target.style.borderColor="#d1d5db",h.target.style.boxShadow="none"},children:be(R).map(h=>e.jsx("option",{value:h,children:h.charAt(0).toUpperCase()+h.slice(1).replace("_"," ")},h))}),parseFloat(R.saldo||0)>0&&F==="completado"&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.75rem",padding:"0.75rem",backgroundColor:"#fee2e2",borderRadius:"0.375rem",border:"1px solid #fecaca"},children:[e.jsx(ut,{size:18,color:"#ef4444",strokeWidth:2.5}),e.jsx("p",{style:{margin:0,color:"#dc2626",fontSize:"0.875rem",fontWeight:"500"},children:'No se puede cambiar a "Completado" si hay saldo pendiente.'})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid #e5e7eb"},children:[e.jsxs("button",{onClick:ye,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:h=>{h.currentTarget.style.backgroundColor="#d1d5db",h.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:h=>{h.currentTarget.style.backgroundColor="#e5e7eb",h.currentTarget.style.transform="translateY(0)"},children:[e.jsx(rr,{size:18,strokeWidth:2.5}),"Cancelar"]}),e.jsx("button",{onClick:ie,disabled:D||parseFloat(R.saldo||0)>0&&F==="completado",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:D||parseFloat(R.saldo||0)>0&&F==="completado"?"#9ca3af":"#10b981",color:"white",borderRadius:"0.375rem",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:D||parseFloat(R.saldo||0)>0&&F==="completado"?"not-allowed":"pointer",transition:"all 0.2s"},onMouseEnter:h=>{!D&&!(parseFloat(R.saldo||0)>0&&F==="completado")&&(h.currentTarget.style.backgroundColor="#059669",h.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:h=>{!D&&!(parseFloat(R.saldo||0)>0&&F==="completado")&&(h.currentTarget.style.backgroundColor="#10b981",h.currentTarget.style.transform="translateY(0)")},children:D?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid white",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Guardando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(jo,{size:18,strokeWidth:2.5}),"Guardar Cambios"]})})]})]})})]})},wv=768,go=(r=wv)=>{const[t,o]=c.useState(!1);return c.useEffect(()=>{const n=()=>{o(window.innerWidth<r)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[r]),t},kv=({eventoId:r,puedeEditar:t=!1,compacto:o=!1,onConfirmacionCompleta:n})=>{var I,m;const{success:i,error:s}=Ar(),[a,d]=c.useState(null),[u,l]=c.useState(!0),[f,g]=c.useState(!o),[y,z]=c.useState(!1),[b,w]=c.useState({});c.useEffect(()=>{r&&k()},[r]);const k=async()=>{var B;try{l(!0);const H=await Cn.getResumenConfirmaciones(r);d(H);const E={};(B=H.confirmadas)==null||B.forEach(R=>{E[R.opcion_id]={seleccion:R.seleccion,cantidad:R.cantidad,observaciones:R.observaciones}}),w(E),H.completo&&n&&n(!0)}catch(H){console.error("Error al cargar resumen:",H)}finally{l(!1)}},j=(B,H,E=!1)=>{w(R=>{var K;const te=((K=R[B])==null?void 0:K.seleccion)||"";let F;if(E){const D=te?te.split("|"):[];D.includes(H)?F=D.filter(Z=>Z!==H).join("|"):F=[...D,H].join("|")}else F=H;return{...R,[B]:{...R[B],seleccion:F}}})},p=(B,H)=>{w(E=>({...E,[B]:{...E[B],cantidad:H?parseInt(H):null}}))},C=(B,H)=>{w(E=>({...E,[B]:{...E[B],observaciones:H}}))},S=async B=>{var E,R;const H=b[B];if(!(H!=null&&H.seleccion)){s("Debe seleccionar al menos una opcin");return}try{z(!0),await Cn.guardarSeleccion(r,{opcion_id:B,seleccion:H.seleccion,cantidad:H.cantidad,observaciones:H.observaciones}),i("Confirmacin guardada"),await k()}catch(te){s(((R=(E=te.response)==null?void 0:E.data)==null?void 0:R.error)||"Error al guardar")}finally{z(!1)}},L=async B=>{if(window.confirm("Eliminar esta confirmacin?"))try{await Cn.eliminarSeleccion(B),i("Confirmacin eliminada"),await k()}catch{s("Error al eliminar")}};if(u)return e.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#6b7280"},children:"Cargando confirmaciones..."});if(!a||a.total_pendientes===0&&a.total_confirmadas===0)return null;const W=a.total_pendientes+a.total_confirmadas;return e.jsxs("div",{style:{border:a.completo?"1px solid #86efac":"1px solid #fcd34d",borderRadius:"0.75rem",backgroundColor:a.completo?"#f0fdf4":"#fffbeb",overflow:"hidden",marginBottom:"1rem"},children:[e.jsxs("div",{onClick:()=>o&&g(!f),style:{padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:o?"pointer":"default",backgroundColor:a.completo?"#dcfce7":"#fef3c7"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.completo?e.jsx(jo,{size:24,style:{color:"#16a34a"}}):e.jsx(ci,{size:24,style:{color:"#d97706"}}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:"600",color:a.completo?"#166534":"#92400e"},children:a.completo?"Confirmaciones Completas":"Confirmaciones Pendientes"}),e.jsxs("p",{style:{margin:0,fontSize:"0.85rem",color:a.completo?"#15803d":"#a16207"},children:[a.total_confirmadas," de ",W," opciones confirmadas"]})]})]}),o&&e.jsx("button",{style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:f?e.jsx(q5,{size:20}):e.jsx(Ki,{size:20})})]}),f&&e.jsxs("div",{style:{padding:"1rem"},children:[((I=a.pendientes)==null?void 0:I.length)>0&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h5",{style:{margin:"0 0 0.75rem",fontSize:"0.9rem",fontWeight:"600",color:"#92400e"},children:["Por confirmar (",a.pendientes.length,")"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:a.pendientes.map(B=>{var H,E,R,te,F,K;return e.jsxs("div",{style:{padding:"1rem",backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{marginBottom:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"0.7rem",backgroundColor:"#dbeafe",color:"#1e40af",padding:"0.15rem 0.5rem",borderRadius:"0.25rem",marginBottom:"0.25rem",display:"inline-block"},children:B.producto_nombre}),e.jsxs("h6",{style:{margin:"0.25rem 0 0",fontWeight:"600",color:"#1f2937"},children:[B.nombre_grupo,B.requerido&&e.jsx("span",{style:{color:"#dc2626",marginLeft:"0.25rem"},children:"*"})]})]}),t?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"0.75rem"},children:(H=B.opciones_lista)==null?void 0:H.map((D,Z)=>{var N;const $=(((N=b[B.id])==null?void 0:N.seleccion)||"").split("|").includes(D);return e.jsx("button",{type:"button",onClick:()=>j(B.id,D,B.permite_multiple),style:{padding:"0.5rem 1rem",backgroundColor:$?"#4f46e5":"#f3f4f6",color:$?"white":"#374151",border:$?"2px solid #4f46e5":"2px solid #d1d5db",borderRadius:"0.5rem",cursor:"pointer",fontWeight:$?"600":"400",fontSize:"0.9rem",transition:"all 0.15s"},children:D},Z)})}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-end",flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"0 0 100px"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280",display:"block",marginBottom:"0.25rem"},children:"Cantidad"}),e.jsx("input",{type:"number",min:"1",value:((E=b[B.id])==null?void 0:E.cantidad)||"",onChange:D=>p(B.id,D.target.value),placeholder:"Opc.",style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{style:{flex:1,minWidth:"150px"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280",display:"block",marginBottom:"0.25rem"},children:"Observaciones"}),e.jsx("input",{type:"text",value:((R=b[B.id])==null?void 0:R.observaciones)||"",onChange:D=>C(B.id,D.target.value),placeholder:"Notas adicionales...",style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"}})]}),e.jsxs("button",{onClick:()=>S(B.id),disabled:y||!((te=b[B.id])!=null&&te.seleccion),style:{padding:"0.5rem 1rem",backgroundColor:(F=b[B.id])!=null&&F.seleccion?"#10b981":"#d1d5db",color:"white",border:"none",borderRadius:"0.375rem",cursor:(K=b[B.id])!=null&&K.seleccion?"pointer":"not-allowed",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.35rem",fontSize:"0.875rem"},children:[e.jsx(it,{size:16}),"Confirmar"]})]})]}):e.jsx("p",{style:{margin:0,color:"#6b7280",fontSize:"0.875rem",fontStyle:"italic"},children:"Pendiente de confirmacin por el cliente"})]},B.id)})})]}),((m=a.confirmadas)==null?void 0:m.length)>0&&e.jsxs("div",{children:[e.jsxs("h5",{style:{margin:"0 0 0.75rem",fontSize:"0.9rem",fontWeight:"600",color:"#166534"},children:["Confirmadas (",a.confirmadas.length,")"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:a.confirmadas.map(B=>{var H;return e.jsxs("div",{style:{padding:"0.75rem 1rem",backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #86efac",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.5rem"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[e.jsx(jo,{size:16,style:{color:"#16a34a"}}),e.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:B.producto_nombre}),e.jsx("span",{style:{color:"#d1d5db"},children:""}),e.jsx("span",{style:{fontWeight:"600",color:"#1f2937"},children:B.nombre_grupo})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.35rem",alignItems:"center"},children:[(H=B.seleccion_lista)==null?void 0:H.map((E,R)=>e.jsx("span",{style:{padding:"0.2rem 0.6rem",backgroundColor:"#dcfce7",color:"#166534",borderRadius:"0.25rem",fontSize:"0.8rem",fontWeight:"500"},children:E},R)),B.cantidad&&e.jsxs("span",{style:{fontSize:"0.8rem",color:"#6b7280",marginLeft:"0.5rem"},children:["(Cantidad: ",B.cantidad,")"]}),B.observaciones&&e.jsxs("span",{style:{fontSize:"0.8rem",color:"#6b7280",fontStyle:"italic"},children:["- ",B.observaciones]})]}),B.confirmado_por_nombre&&e.jsxs("div",{style:{fontSize:"0.7rem",color:"#9ca3af",marginTop:"0.25rem"},children:["Confirmado por ",B.confirmado_por_nombre]})]}),t&&e.jsx("button",{onClick:()=>L(B.id),style:{padding:"0.35rem",backgroundColor:"#fef2f2",color:"#dc2626",border:"1px solid #fecaca",borderRadius:"0.25rem",cursor:"pointer"},title:"Eliminar confirmacin",children:e.jsx(rr,{size:14})})]},B.id)})})]})]})]})},_v=()=>{const{id:r}=bl(),t=_o(),o=Nn(),{usuario:n}=st(),{toasts:i,removeToast:s,success:a,error:d}=Ar(),u=go(),[l,f]=c.useState(null),[g,y]=c.useState([]),[z,b]=c.useState([]),[w,k]=c.useState([]),[j,p]=c.useState(!1),[C,S]=c.useState([]),[L,W]=c.useState(!1),[I,m]=c.useState(null),[B,H]=c.useState(!1),[E,R]=c.useState([]),[te,F]=c.useState(!1),[K,D]=c.useState(0),[Z,P]=c.useState(0),[$,N]=c.useState(!0),[ee,Y]=c.useState(""),[X,se]=c.useState(!1),[G,ye]=c.useState(!1),[ie,be]=c.useState(null),[ce,re]=c.useState(null),[x,h]=c.useState([]),[J,fe]=c.useState(""),[ge,Re]=c.useState(!1),[me,Ie]=c.useState(!1),[Q,M]=c.useState(!1),[V,we]=c.useState(""),[Ne,U]=c.useState(!1),[pe,Ge]=c.useState([]),[We,cr]=c.useState([]),[gr,Sr]=c.useState(!1),[Ke,ur]=c.useState(null),[lr,Fr]=c.useState(null),[zr,Qe]=c.useState(!1),[Xe,ne]=c.useState({producto_id:"",cantidad:"1"}),[ke,Te]=c.useState(""),[Ae,ue]=c.useState(!1),[Ve,Je]=c.useState(!1),[q,Se]=c.useState(null),[ve,Oe]=c.useState(""),[Ce,Le]=c.useState(""),[De,Fe]=c.useState(!1),[ir,yr]=c.useState(!1),[vr,Pr]=c.useState({nombre:""}),[he,nr]=c.useState(""),[or,jr]=c.useState(!1),[wr,Nr]=c.useState(null),[O,Ee]=c.useState({monto:"",tipo_pago:"abono",metodo_pago:"efectivo",fecha_pago:new Date().toISOString().split("T")[0],numero_referencia:"",observaciones:""}),[He,er]=c.useState(!1),[kr,gt]=c.useState([]),[ro,Lo]=c.useState(!1),[Ei,A]=c.useState(!1),[le,Ue]=c.useState(!1),[qe,hr]=c.useState(!1),[_,je]=c.useState({observacion_finalizacion:"",tiene_danos:!1,descripcion_danos:"",costo_danos:"",cobrar_danos:!1}),[_e,Ze]=c.useState(null),[Dr,Wt]=c.useState([]),[zo,Ri]=c.useState(!1),[Ng,Cu]=c.useState(!1),[Dg,Su]=c.useState(!1),[Dn,wu]=c.useState(!1),[Yr,Ns]=c.useState({calificacion:5,observaciones:""}),[Bn,ku]=c.useState(!1),[ho,Ai]=c.useState({monto:"",metodo_pago:"efectivo",observaciones:""}),On=(l==null?void 0:l.estado)==="cancelado",Bg=(l==null?void 0:l.estado)==="completado",Kr=On||Bg,Ii=parseFloat((l==null?void 0:l.saldo)||0),Wi=xr(n,Ye.EVENTOS_AGREGAR_PRODUCTO,[T.ADMIN,T.MANAGER]),El=xr(n,Ye.EVENTOS_ACTUALIZAR_SERVICIOS,[T.ADMIN,T.MANAGER]),_u=xr(n,Ye.EVENTOS_DESCARTAR_SERVICIO,[T.ADMIN,T.MANAGER]),Og=xr(n,Ye.EVENTOS_GENERAR_SERVICIOS,[T.ADMIN,T.MANAGER]),Rl=xr(n,Ye.EVENTOS_GENERAR_SERVICIOS,[T.ADMIN,T.MANAGER]),Lg=xr(n,Ye.EVENTOS_ELIMINAR_PRODUCTO,[T.ADMIN,T.MANAGER]),Fg=xr(n,Ye.EVENTOS_ELIMINAR,[T.ADMIN,T.MANAGER]),Al=xr(n,Ye.EVENTOS_ASIGNAR_COORDINADOR,[T.ADMIN,T.MANAGER]),$g=!!(l!=null&&l.email||l!=null&&l.telefono),zu=xr(n,Ye.PAGOS_REGISTRAR,[T.ADMIN,T.MANAGER,T.COORDINATOR]),Eu=xr(n,Ye.PAGOS_REEMBOLSAR,[T.ADMIN,T.MANAGER]),Il=xr(n,Ye.PAGOS_APROBAR,[T.ADMIN,T.MANAGER]),Wl=xr(n,Ye.PAGOS_ANULAR,[T.ADMIN,T.MANAGER]),at=Math.max(0,(parseFloat(K)||0)-(parseFloat(Z)||0)),Ug=v=>!v||parseFloat(v)<=0?"abono":parseFloat(v)>=Ii&&Ii>0?"pago_completo":"abono",Gg=v=>{const de=v.target.value;if(O.tipo_pago!=="reembolso"){const xe=Ug(de);Ee({...O,monto:de,tipo_pago:xe})}else Ee({...O,monto:de})},Tl=c.useMemo(()=>{if(On)return 0;if((l==null?void 0:l.estado)==="completado")return 100;const v=C.filter(Me=>!Me.descartado),de=v.length;if(!de)return 0;const xe=v.filter(Me=>Me.completado).length;return Math.round(xe/de*100)},[C,On,l==null?void 0:l.estado]);c.useEffect(()=>{r&&(Ln(),Ds(),Au(),Jg(),Fn(),Hg())},[r]);const Hg=async()=>{try{const v=await Vo.getAll();h(v.cuentas||[])}catch(v){console.error("Error al cargar cuentas:",v)}};c.useEffect(()=>{if(!Al)return;(async()=>{try{Lo(!0);const de=await dt.getAll({rol:"coordinador"});gt(de.usuarios||[])}catch(de){console.error("Error al cargar coordinadores:",de),Y("Error al cargar coordinadores")}finally{Lo(!1)}})()},[Al]),c.useEffect(()=>{l!=null&&l.plan_id?th(l.plan_id):R([])},[l==null?void 0:l.plan_id]),c.useEffect(()=>{new URLSearchParams(o.search).get("tab")==="productos"&&!On&&Wi&&(Re(!0),w.length===0&&Tu())},[o.search,On,w.length,Wi]);const Ln=async()=>{var v;try{N(!0);const de=await dr.getById(r);f(de.evento),Y(""),((v=de.evento)==null?void 0:v.estado)==="completado"&&Vg()}catch(de){Y("Error al cargar el evento"),console.error(de)}finally{N(!1)}},Vg=async()=>{try{const v=await dr.obtenerDanos(r);Ze(v.info_finalizacion),Wt(v.danos||[])}catch(v){console.error("Error al cargar info de finalizacin:",v)}},qg=async()=>{var v,de;try{Ri(!0),await so.forzarNotificacion(r,"solicitud_calificacion"),a("Notificacin de evaluacin enviada al cliente")}catch(xe){const Me=((de=(v=xe.response)==null?void 0:v.data)==null?void 0:de.error)||"Error al enviar notificacin de evaluacin";d(Me)}finally{Ri(!1)}},Yg=()=>{if(l!=null&&l.nombre_coordinador)return l.nombre_coordinador;const v=l==null?void 0:l.coordinador_id;if(v&&kr.length>0){const de=kr.find(xe=>xe.id===v);if(de)return de.nombre_completo||de.nombre_usuario||"Coordinador"}return n!=null&&n.id&&v&&v===n.id?"Asignado a m":"-"},Kg=async v=>{var de,xe;if(l)try{A(!0),Y("");const Me=v?parseInt(v):null,mr=await dr.asignarCoordinador(l.id_evento||l.id,Me);f(mr.evento||{...l,coordinador_id:Me})}catch(Me){console.error("Error al asignar coordinador:",Me),Y(((xe=(de=Me.response)==null?void 0:de.data)==null?void 0:xe.error)||"Error al asignar coordinador")}finally{A(!1)}},Qg=async()=>{var v,de;if(l){if(at>0){we("Debes reembolsar todos los pagos antes de eliminar el evento.");return}try{M(!0),we(""),await dr.delete(l.id_evento||l.id),t("/eventos")}catch(xe){console.error("Error al eliminar evento:",xe),we(((de=(v=xe.response)==null?void 0:v.data)==null?void 0:de.error)||"No se pudo eliminar el evento.")}finally{M(!1)}}},Ds=async()=>{try{const v=await rt.getByEvento(r),de=(v.pagos||[]).sort((xe,Me)=>(Me.id||0)-(xe.id||0));if(y(de),v.total_pagado!==void 0&&v.total_pagado!==null)D(parseFloat(v.total_pagado)||0);else{const xe=(v.pagos||[]).reduce((Me,mr)=>{const Zr=parseFloat(mr.monto)||0;return mr.tipo_pago==="reembolso"?Me-Zr:Me+Zr},0);D(xe)}try{const xe=await rt.getTotalEvento(r);xe.total_pagado!==void 0&&xe.total_pagado!==null&&D(parseFloat(xe.total_pagado)||0),xe.total_reembolsos!==void 0&&xe.total_reembolsos!==null&&P(parseFloat(xe.total_reembolsos)||0)}catch(xe){console.error("Error al cargar totales de pagos:",xe)}}catch(v){console.error("Error al cargar pagos:",v),D(0),P(0)}},Fn=async()=>{try{Sr(!0);const v=await so.getProximasEvento(r);Ge(v.notificaciones||[]),cr(v.proximas_ejecuciones||[])}catch(v){console.error("Error al cargar notificaciones:",v),Ge([]),cr([])}finally{Sr(!1)}},Ru=(v,de)=>{let xe=v||"";return Object.entries(de).forEach(([Me,mr])=>{const Zr=new RegExp(`\\{${Me}\\}`,"g");xe=xe.replace(Zr,mr??"")}),xe},Xg=v=>{if(!v)return;const de=l!=null&&l.fecha_evento?new Date(l.fecha_evento):null,xe=de?Math.max(0,Math.ceil((de-new Date)/(1e3*60*60*24))):"",Me={nombre_cliente:(l==null?void 0:l.nombre_cliente)||"",nombre_evento:(l==null?void 0:l.nombre_evento)||(l==null?void 0:l.salon)||"",fecha_evento:(l==null?void 0:l.fecha_evento)||"",hora_inicio:(l==null?void 0:l.hora_inicio)||"",dias_restantes:xe,saldo_pendiente:(l==null?void 0:l.saldo)||"",total:(l==null?void 0:l.total)||""};Fr({titulo:v.nombre||"Recordatorio del evento",email:Ru(v.plantilla_email,Me),whatsapp:Ru(v.plantilla_whatsapp,Me)}),Qe(!0)},Au=async()=>{try{const v=await dr.getProductos(r);b(v.productos||[])}catch(v){console.error("Error al cargar productos:",v),b([])}},Jg=async()=>{try{W(!0);const v=await dr.getServicios(r);S(v.servicios||[])}catch(v){console.error("Error al cargar servicios del evento:",v),S([])}finally{W(!1)}},Zg=async(v,de)=>{try{m(v);const xe=await dr.actualizarServicio(l.id_evento||l.id,v,de);S(xe.servicios||[]),xe.porcentaje_avance!==void 0&&l&&f({...l,porcentaje_avance_servicios:xe.porcentaje_avance})}catch(xe){console.error("Error al actualizar servicio:",xe)}finally{m(null)}},Iu=async(v,de)=>{try{m(v);const xe=await dr.actualizarServicio(l.id_evento||l.id,v,null,de);S(xe.servicios||[]),xe.porcentaje_avance!==void 0&&l&&f({...l,porcentaje_avance_servicios:xe.porcentaje_avance})}catch(xe){console.error("Error al descartar servicio:",xe)}finally{m(null)}},eh=async()=>{var v,de;if(!(l!=null&&l.plan_id)){Y("El evento no tiene plan asociado.");return}try{H(!0),Y("");const Me=(await dr.generarServicios(l.id_evento||l.id)).servicios||[];S(Me),Me.length===0?Y("El plan seleccionado no tiene servicios configurados. Por favor, configura los servicios del plan primero."):(Y(""),a(`Servicios generados exitosamente: ${Me.length} servicio(s)`))}catch(xe){console.error("Error al generar servicios:",xe);const Me=((de=(v=xe.response)==null?void 0:v.data)==null?void 0:de.error)||"Error al generar servicios";Y(Me),d(Me)}finally{H(!1)}},Wu=async()=>{var v,de;if(!vr.nombre||!vr.nombre.trim()){nr("El nombre del servicio es requerido");return}try{jr(!0),nr("");const xe=await dr.crearServicioPersonalizado(l.id_evento||l.id,vr.nombre.trim());S(xe.servicios||[]),yr(!1),Pr({nombre:""}),a("Servicio personalizado creado exitosamente")}catch(xe){console.error("Error al crear servicio personalizado:",xe);const Me=((de=(v=xe.response)==null?void 0:v.data)==null?void 0:de.error)||"Error al crear servicio";nr(Me),d(Me)}finally{jr(!1)}},rh=async v=>{var de,xe;if(window.confirm("Est seguro de que desea eliminar este servicio personalizado?"))try{Nr(v);const Me=await dr.eliminarServicio(l.id_evento||l.id,v);S(Me.servicios||[]),a("Servicio eliminado exitosamente")}catch(Me){console.error("Error al eliminar servicio:",Me);const mr=((xe=(de=Me.response)==null?void 0:de.data)==null?void 0:xe.error)||"Error al eliminar servicio";d(mr)}finally{Nr(null)}},Tu=async()=>{try{p(!0);const v=await To.getAll(!0);k(v.productos||[])}catch(v){console.error("Error al cargar productos disponibles:",v),k([])}finally{p(!1)}},th=async v=>{try{F(!0);const de=await yt.getProductos(v);R(de.productos||[])}catch(de){console.error("Error al cargar productos del plan:",de),R([])}finally{F(!1)}},oh=v=>{Se(v),Oe(""),Le(""),Je(!0)},nh=async()=>{if(!Xe.producto_id||!Xe.cantidad||parseInt(Xe.cantidad,10)<=0){Te("Selecciona un producto y una cantidad vlida.");return}const v=w.find(Me=>Me.id===parseInt(Xe.producto_id,10));if(!v){Te("Producto no encontrado.");return}const de=v.id;if(z.some(Me=>(Me.producto_id||Me.id)===de)){Te("Este producto ya est agregado.");return}try{ue(!0),await dr.agregarProducto(l.id_evento||l.id,de,parseInt(Xe.cantidad,10),parseFloat(v.precio||0)),await Au(),ne({producto_id:"",cantidad:"1"}),Te(""),Re(!1)}catch(Me){console.error("Error al agregar producto:",Me),Te("No se pudo agregar el producto. Intenta nuevamente.")}finally{ue(!1)}},ih=async()=>{const v=ve.trim();if(!v){Le("Debes agregar una observacin antes de eliminar.");return}if(q)try{Fe(!0);const de=q.producto_id||q.id,xe=await dr.eliminarProducto(l.id_evento||l.id,de,v);b(Me=>Me.filter(mr=>(mr.producto_id||mr.id)!==de)),xe!=null&&xe.evento&&f(xe.evento),Je(!1),Se(null)}catch(de){console.error("Error al eliminar producto:",de),Le("No se pudo eliminar el producto. Intenta nuevamente.")}finally{Fe(!1)}},Mu=v=>{if(!v)return"-";try{if(typeof v=="string"&&v.includes(":")){const de=v.split(":");return`${de[0]}:${de[1]}`}return v}catch{return v}},Ir=v=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(v),Pu=v=>{if(!v)return null;if(typeof v=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(v)){const[de,xe,Me]=v.split("-").map(Number);return new Date(de,xe-1,Me)}return new Date(v)},Bs=v=>{if(!v)return"-";try{return Pu(v).toLocaleDateString("es-CO")}catch{return v}},sh=v=>{if(!v)return"-";try{const de=Pu(v),xe=de.getFullYear(),Me=String(de.getMonth()+1).padStart(2,"0"),mr=String(de.getDate()).padStart(2,"0"),Zr=String(de.getHours()).padStart(2,"0"),xo=String(de.getMinutes()).padStart(2,"0");return`${xe}-${Me}-${mr} ${Zr}:${xo}`}catch{return v}},Nu=v=>{switch(v){case"aprobado":return"Aprobado";case"rechazado":return"Rechazado";case"en_revision":default:return"En revisin"}},ah=v=>{switch(v){case"aprobado":return{backgroundColor:"#16a34a20",color:"#16a34a"};case"rechazado":return{backgroundColor:"#ef444420",color:"#ef4444"};default:return{backgroundColor:"#f59e0b20",color:"#d97706"}}},lh=v=>{be(v),ye(!0)},dh=async(v,de)=>{var xe,Me;if(v)try{await rt.updateEstado(v.id,de),await Ds(),await Ln(),a("Estado del pago actualizado")}catch(mr){const Zr=((Me=(xe=mr.response)==null?void 0:xe.data)==null?void 0:Me.error)||"No se pudo actualizar el estado del pago";d(Zr)}},Du=(v,de)=>{v&&(re({pago:v,nuevoEstado:de}),fe(v.cuenta_id||""))},ch=async()=>{if(!ce)return;const{pago:v,nuevoEstado:de}=ce;if(de==="aprobado"&&J)try{await rt.updateCuenta(v.id,parseInt(J))}catch(xe){console.error("Error al actualizar cuenta del pago:",xe)}re(null),fe(""),await dh(v,de)},uh=()=>l!=null&&l.creado_por_nombre?l.creado_por_nombre:l!=null&&l.nombre_cliente?l.nombre_cliente:"-",Bu=async(v=!1)=>{var de,xe;if(O.tipo_pago==="reembolso"&&parseFloat(O.monto)>at){Y("El monto del reembolso supera el saldo disponible para reembolsar.");return}if(O.tipo_pago==="reembolso"&&!v){U(!0);return}er(!0);try{const Me={evento_id:parseInt(r),monto:parseFloat(O.monto),tipo_pago:O.tipo_pago,metodo_pago:O.metodo_pago,fecha_pago:O.fecha_pago,numero_referencia:O.numero_referencia||null,observaciones:O.observaciones||null,origen:"web"};await rt.create(Me),await Ds(),await Ln(),se(!1),Ee({monto:"",tipo_pago:"abono",metodo_pago:"efectivo",fecha_pago:new Date().toISOString().split("T")[0],numero_referencia:"",observaciones:""}),Y(""),a(O.tipo_pago==="reembolso"?"Reembolso registrado exitosamente":"Pago registrado exitosamente")}catch(Me){console.error("Error al registrar pago:",Me),Y(((xe=(de=Me.response)==null?void 0:de.data)==null?void 0:xe.error)||"Error al registrar el pago")}finally{er(!1)}},mh=async v=>{v.preventDefault(),await Bu(!1)},Ou=v=>({cotizacion:"#6b7280",confirmado:"#10b981",en_proceso:"#3b82f6",completado:"#8b5cf6",cancelado:"#ef4444"})[v]||"#6b7280",ph=()=>{l&&(On||(Re(!0),w.length===0&&Tu()))},fh=()=>{je({observacion_finalizacion:"",tiene_danos:!1,descripcion_danos:"",costo_danos:"",cobrar_danos:!1}),Ue(!0)},Os=()=>{Ue(!1),je({observacion_finalizacion:"",tiene_danos:!1,descripcion_danos:"",costo_danos:"",cobrar_danos:!1})},gh=async()=>{var v,de;try{hr(!0);const xe={observacion_finalizacion:_.observacion_finalizacion,tiene_danos:_.tiene_danos,descripcion_danos:_.descripcion_danos,costo_danos:_.tiene_danos&&parseFloat(_.costo_danos)||0,cobrar_danos:_.tiene_danos&&_.cobrar_danos},Me=await dr.completarEvento(r,xe);Me!=null&&Me.evento&&f(Me.evento),Os(),a("Evento completado exitosamente"),await Ln(),await Ds()}catch(xe){const Me=((de=(v=xe.response)==null?void 0:v.data)==null?void 0:de.error)||"Error al finalizar el evento";d(Me)}finally{hr(!1)}},hh=((l==null?void 0:l.estado)==="confirmado"||(l==null?void 0:l.estado)==="en_proceso")&&Ii<=0,xh=()=>{const v=parseFloat((l==null?void 0:l.costo_danos)||0),de=parseFloat((l==null?void 0:l.monto_pagado_danos)||0),xe=v-de;Ai({monto:xe>0?xe.toFixed(2):"",metodo_pago:"efectivo",observaciones:""}),Cu(!0)},Ls=()=>{Cu(!1),Ai({monto:"",metodo_pago:"efectivo",observaciones:""})},yh=async()=>{var v,de;try{ku(!0);const xe=parseFloat(ho.monto);if(isNaN(xe)||xe<=0){d("Ingrese un monto vlido");return}await dr.registrarPagoDanos(r,xe,ho.metodo_pago,ho.observaciones),Ls(),a("Pago de daos registrado exitosamente"),await Ln()}catch(xe){const Me=((de=(v=xe.response)==null?void 0:v.data)==null?void 0:de.error)||"Error al registrar pago de daos";d(Me)}finally{ku(!1)}},bh=()=>{Ns({calificacion:(l==null?void 0:l.calificacion_cliente)||5,observaciones:(l==null?void 0:l.observaciones_calificacion)||""}),Su(!0)},Fs=()=>{Su(!1),Ns({calificacion:5,observaciones:""})},vh=async()=>{var v,de;try{wu(!0),await dr.registrarCalificacionManual(r,{calificacion:Yr.calificacion,observaciones:Yr.observaciones}),Fs(),a("Calificacin registrada exitosamente"),await Ln()}catch(xe){const Me=((de=(v=xe.response)==null?void 0:v.data)==null?void 0:de.error)||"Error al registrar calificacin";d(Me)}finally{wu(!1)}};return $?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando evento..."}):ee||!l?e.jsxs("div",{children:[e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:ee||"Evento no encontrado"}),e.jsxs("button",{onClick:()=>t("/eventos"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:[e.jsx(vi,{size:20}),"Volver a Eventos"]})]}):e.jsxs("div",{children:[e.jsx(Lr,{toasts:i,removeToast:s}),e.jsxs("div",{style:{marginBottom:u?"1.5rem":"2rem"},children:[e.jsxs("button",{onClick:()=>t("/eventos"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:u?"0.4rem 0.75rem":"0.5rem 1rem",backgroundColor:"transparent",color:"#6366f1",border:"1px solid #6366f1",borderRadius:"0.375rem",cursor:"pointer",marginBottom:"1rem",fontSize:u?"0.875rem":"1rem"},children:[e.jsx(vi,{size:u?14:16}),"Volver"]}),e.jsxs("div",{style:{display:"flex",flexDirection:u?"column":"row",justifyContent:"space-between",alignItems:u?"flex-start":"center",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:u?"1.5rem":"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:l.nombre_evento||"Evento"}),e.jsx("p",{style:{color:"#6b7280",fontSize:u?"0.875rem":"1rem"},children:"Detalle del evento"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",width:u?"100%":"auto"},children:[hh&&e.jsxs("button",{type:"button",onClick:fh,style:{padding:u?"0.4rem 0.75rem":"0.5rem 1rem",backgroundColor:"#8b5cf6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"600",fontSize:u?"0.875rem":"1rem",flex:u?1:"none",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.35rem"},children:[e.jsx(Ui,{size:16}),"Finalizar evento"]}),(l==null?void 0:l.estado)==="completado"&&e.jsx("button",{type:"button",onClick:qg,disabled:zo,style:{padding:u?"0.4rem 0.75rem":"0.5rem 1rem",backgroundColor:zo?"#9ca3af":"#f59e0b",color:"white",borderRadius:"0.375rem",border:"none",cursor:zo?"not-allowed":"pointer",fontWeight:"600",fontSize:u?"0.875rem":"1rem",flex:u?1:"none",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.35rem"},children:zo?"Enviando...":" Solicitar Evaluacin"}),l.estado==="completado"&&e.jsx("button",{type:"button",onClick:bh,style:{padding:u?"0.4rem 0.75rem":"0.5rem 1rem",backgroundColor:l.calificacion_cliente?"#10b981":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"600",fontSize:u?"0.875rem":"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.35rem",flex:u?1:"none"},children:l.calificacion_cliente?` Editar (${l.calificacion_cliente})`:" Calificar Manual"}),Fg&&e.jsx("button",{type:"button",onClick:()=>{we(""),Ie(!0)},style:{padding:u?"0.4rem 0.75rem":"0.5rem 1rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"600",fontSize:u?"0.875rem":"1rem",flex:u?1:"none"},children:"Eliminar evento"})]})]})]}),ee&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:ee}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:u?"1fr":"repeat(auto-fit, minmax(320px, 1fr))",gap:u?"1rem":"1.5rem",marginBottom:u?"1.5rem":"2rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:u?"1rem":"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[e.jsxs("h2",{style:{fontSize:u?"1.1rem":"1.25rem",fontWeight:"600",marginBottom:u?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_t,{size:u?18:20,color:"#6366f1"}),"Informacin del Evento"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(mo,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Cliente"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:l.nombre_cliente||"-"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(Tn,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Tipo de Evento"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:l.tipo_evento||"-"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(_t,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Fecha"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:Bs(l.fecha_evento)})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(_t,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Fecha de creacin"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:Bs(l.fecha_creacion)})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(mo,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Creado por"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:uh()})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Estado"}),e.jsx("span",{style:{padding:"0.375rem 0.875rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"600",backgroundColor:`${Ou(l.estado)}20`,color:Ou(l.estado),textTransform:"capitalize"},children:l.estado||"-"})]})}),e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(dn,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Nmero de Invitados"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:l.numero_invitados||0})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(Wn,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Hora de Inicio"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:Mu(l.hora_inicio)})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(Wn,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Hora de Fin"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:Mu(l.hora_fin)})]})]}),l.nombre_salon||l.salon?e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(Tn,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Saln"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:l.nombre_salon||l.salon||"-"})]})]}):null,e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(mo,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Coordinador"}),Al?e.jsxs("select",{value:l.coordinador_id||"",onChange:v=>Kg(v.target.value),disabled:ro||Ei,style:{padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem",minWidth:"220px"},children:[e.jsx("option",{value:"",children:"Sin asignar"}),kr.map(v=>e.jsx("option",{value:v.id,children:v.nombre_completo||v.nombre_usuario||"Coordinador"},v.id))]}):e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:Yg()})]})]})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:u?"1rem":"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[e.jsxs("h2",{style:{fontSize:u?"1.1rem":"1.25rem",fontWeight:"600",marginBottom:u?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_t,{size:u?18:20,color:"#6366f1"}),"Recordatorios programados"]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginBottom:"1rem",color:"#6b7280",fontSize:"0.85rem"},children:[e.jsxs("div",{children:["Correo: ",e.jsx("span",{style:{color:"#111827"},children:(l==null?void 0:l.email)||"No disponible"})]}),e.jsxs("div",{children:["Telefono: ",e.jsx("span",{style:{color:"#111827"},children:(l==null?void 0:l.telefono)||"No disponible"})]})]}),gr?e.jsx("p",{style:{color:"#6b7280"},children:"Cargando recordatorios..."}):pe.length===0?e.jsx("p",{style:{color:"#6b7280"},children:"No hay recordatorios activos para este evento."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:(()=>{var Fu,$u;const v=pe.filter(sr=>String(sr.tipo_notificacion||"").startsWith("recordatorio")),de=v.find(sr=>sr.tipo_notificacion==="recordatorio_evento"),xe=v.filter(sr=>sr.tipo_notificacion!=="recordatorio_evento"),Me=pe.filter(sr=>!String(sr.tipo_notificacion||"").startsWith("recordatorio")),mr=(de==null?void 0:de.total_envios)||0,Zr=(de==null?void 0:de.ultimo_envio)||null,xo=de||{tipo_notificacion:"recordatorio_evento",enviar_email:((Fu=xe[0])==null?void 0:Fu.enviar_email)??!0,enviar_whatsapp:(($u=xe[0])==null?void 0:$u.enviar_whatsapp)??!0},fn=[];v.length>0&&fn.push(e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",cursor:de?"pointer":"default"},onClick:()=>de&&Xg(de),children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600"},children:"Recordatorio del evento"}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.85rem"},children:["Automatico:"," ",xe.length>0?xe.map(sr=>`${sr.dias_antes} dias antes`).join(" y "):"No configurado"]}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.85rem"},children:["Medio:"," ",xe[0]?[xe[0].enviar_email?"Email":null,xe[0].enviar_whatsapp?"WhatsApp":null].filter(Boolean).join(" + "):"Sin canal"]}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.85rem"},children:[de!=null&&de.fecha_evento?`Quedan ${Math.max(0,Math.ceil((new Date(de.fecha_evento)-new Date)/(1e3*60*60*24)))} dias`:"Recordatorio manual",mr?`  Enviados: ${mr}`:"  Enviados: 0",Zr?`  Ultimo: ${new Date(Zr).toLocaleDateString()}`:""]})]}),v.length>0?e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:async sr=>{var wt,et;if(sr.stopPropagation(),!(l!=null&&l.email)){d("Este evento no tiene correo. No se puede enviar email.");return}try{ur("email");const Er=await so.forzarNotificacion(r,xo.tipo_notificacion,"email");Er!=null&&Er.success?a("Recordatorio enviado por email"):d((Er==null?void 0:Er.error)||"No se pudo enviar el recordatorio"),await Fn()}catch(Er){const Br=((et=(wt=Er.response)==null?void 0:wt.data)==null?void 0:et.error)||"No se pudo enviar el recordatorio";d(Br)}finally{ur(null)}},disabled:Ke==="email"||!(l!=null&&l.email),style:{padding:"0.5rem 0.9rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",background:Ke==="email"||!(l!=null&&l.email)?"#e5e7eb":"#f3f4f6",cursor:Ke==="email"||!(l!=null&&l.email)?"not-allowed":"pointer"},children:Ke==="email"?"Enviando...":"Forzar email"}),e.jsx("button",{onClick:async sr=>{var wt,et;if(sr.stopPropagation(),!(l!=null&&l.telefono)){d("Este evento no tiene telefono. No se puede enviar WhatsApp.");return}try{ur("whatsapp");const Er=await so.forzarNotificacion(r,xo.tipo_notificacion,"whatsapp");Er!=null&&Er.success?a("Recordatorio enviado por WhatsApp"):d((Er==null?void 0:Er.error)||"No se pudo enviar el recordatorio"),await Fn()}catch(Er){const Br=((et=(wt=Er.response)==null?void 0:wt.data)==null?void 0:et.error)||"No se pudo enviar el recordatorio";d(Br)}finally{ur(null)}},disabled:Ke==="whatsapp"||!(l!=null&&l.telefono),style:{padding:"0.5rem 0.9rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",background:Ke==="whatsapp"||!(l!=null&&l.telefono)?"#e5e7eb":"#f3f4f6",cursor:Ke==="whatsapp"||!(l!=null&&l.telefono)?"not-allowed":"pointer"},children:Ke==="whatsapp"?"Enviando...":"Forzar WhatsApp"})]}):null]},"recordatorio_evento"));const Lu=parseFloat((l==null?void 0:l.saldo)||(l==null?void 0:l.saldo_pendiente)||0);if(Lu>0){const sr=pe.find(wt=>wt.tipo_notificacion==="recordatorio_valores_pendientes")||{total_envios:0,ultimo_envio:null};fn.push(e.jsxs("div",{style:{border:"1px solid #fbbf24",borderRadius:"0.5rem",padding:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",backgroundColor:"#fffbeb"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#92400e"},children:"Recordatorio de valores pendientes"}),e.jsxs("div",{style:{color:"#b45309",fontSize:"0.85rem"},children:["Saldo pendiente: $",Lu.toLocaleString("es-EC",{minimumFractionDigits:2})]}),e.jsx("div",{style:{color:"#b45309",fontSize:"0.85rem"},children:"Medio: Email + WhatsApp"}),e.jsxs("div",{style:{color:"#b45309",fontSize:"0.85rem"},children:["Enviados: ",sr.total_envios||0,sr.ultimo_envio?`  Ultimo: ${new Date(sr.ultimo_envio).toLocaleDateString()}`:""]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:async wt=>{var et,Er;if(wt.stopPropagation(),!(l!=null&&l.email)){d("Este evento no tiene correo. No se puede enviar email.");return}try{ur("valores_email");const Br=await so.forzarNotificacion(r,"recordatorio_valores_pendientes","email");Br!=null&&Br.success?a("Recordatorio de valores pendientes enviado por email"):d((Br==null?void 0:Br.error)||"No se pudo enviar el recordatorio"),await Fn()}catch(Br){const $n=((Er=(et=Br.response)==null?void 0:et.data)==null?void 0:Er.error)||"No se pudo enviar el recordatorio";d($n)}finally{ur(null)}},disabled:Ke==="valores_email"||!(l!=null&&l.email),style:{padding:"0.5rem 0.9rem",borderRadius:"0.5rem",border:"1px solid #fbbf24",background:Ke==="valores_email"||!(l!=null&&l.email)?"#fef3c7":"#fff",cursor:Ke==="valores_email"||!(l!=null&&l.email)?"not-allowed":"pointer",color:"#92400e",fontWeight:"500"},children:Ke==="valores_email"?"Enviando...":"Forzar email"}),e.jsx("button",{onClick:async wt=>{var et,Er;if(wt.stopPropagation(),!(l!=null&&l.telefono)){d("Este evento no tiene telefono. No se puede enviar WhatsApp.");return}try{ur("valores_whatsapp");const Br=await so.forzarNotificacion(r,"recordatorio_valores_pendientes","whatsapp");Br!=null&&Br.success?a("Recordatorio de valores pendientes enviado por WhatsApp"):d((Br==null?void 0:Br.error)||"No se pudo enviar el recordatorio"),await Fn()}catch(Br){const $n=((Er=(et=Br.response)==null?void 0:et.data)==null?void 0:Er.error)||"No se pudo enviar el recordatorio";d($n)}finally{ur(null)}},disabled:Ke==="valores_whatsapp"||!(l!=null&&l.telefono),style:{padding:"0.5rem 0.9rem",borderRadius:"0.5rem",border:"1px solid #fbbf24",background:Ke==="valores_whatsapp"||!(l!=null&&l.telefono)?"#fef3c7":"#fff",cursor:Ke==="valores_whatsapp"||!(l!=null&&l.telefono)?"not-allowed":"pointer",color:"#92400e",fontWeight:"500"},children:Ke==="valores_whatsapp"?"Enviando...":"Forzar WhatsApp"})]})]},"recordatorio_valores_pendientes"))}return Me.forEach(sr=>{const wt=sr.fecha_evento?new Date(sr.fecha_evento):null;let et=null;wt&&(sr.dias_antes===-1?(et=new Date(wt),et.setDate(et.getDate()+1)):(et=new Date(wt),et.setDate(et.getDate()-sr.dias_antes)));const Er=[sr.enviar_email?"Email":null,sr.enviar_whatsapp?"WhatsApp":null].filter(Boolean);fn.push(e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600"},children:sr.nombre}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.85rem"},children:[sr.dias_antes===-1?"Despues del evento":`${sr.dias_antes} dias antes del evento`,et?`  ${et.toLocaleDateString()}`:""]}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.85rem"},children:["Medio: ",Er.length>0?Er.join(" + "):"Sin canal"]}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.85rem"},children:["Enviados: ",sr.total_envios||0,sr.ultimo_envio?`  Ultimo: ${new Date(sr.ultimo_envio).toLocaleDateString()}`:""]})]}),e.jsx("button",{onClick:async()=>{var Br,$n;try{ur(sr.tipo_notificacion),await so.forzarNotificacion(r,sr.tipo_notificacion),a("Recordatorio enviado"),await Fn()}catch(jh){const Ch=(($n=(Br=jh.response)==null?void 0:Br.data)==null?void 0:$n.error)||"No se pudo enviar el recordatorio";d(Ch)}finally{ur(null)}},disabled:Ke===sr.tipo_notificacion,style:{padding:"0.5rem 0.9rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",background:Ke===sr.tipo_notificacion?"#e5e7eb":"#f3f4f6",cursor:Ke===sr.tipo_notificacion?"not-allowed":"pointer"},children:Ke===sr.tipo_notificacion?"Enviando...":"Forzar envio"})]},sr.tipo_notificacion))}),fn})()}),We.length>0&&e.jsxs("div",{style:{marginTop:"1.5rem",borderTop:"1px solid #e5e7eb",paddingTop:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem",color:"#374151"},children:"Cronograma de Notificaciones Automticas"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:We.map((v,de)=>{const xe=xo=>{switch(xo){case"enviado":return{bg:"#dcfce7",color:"#166534",icon:""};case"hoy":return{bg:"#fef3c7",color:"#92400e",icon:""};case"pendiente":return{bg:"#e0e7ff",color:"#3730a3",icon:""};case"pasado":return{bg:"#fee2e2",color:"#991b1b",icon:""};default:return{bg:"#f3f4f6",color:"#374151",icon:""}}},Me=(xo,fn)=>{switch(xo){case"enviado":return"Enviado";case"hoy":return"Se ejecuta hoy";case"pendiente":return fn===1?"Maana":`En ${fn} das`;case"pasado":return"No enviado";default:return""}},mr=xe(v.estado),Zr=new Date(v.fecha_ejecucion+"T00:00:00").toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"short"});return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",backgroundColor:mr.bg,borderRadius:"0.5rem",fontSize:"0.875rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"1rem"},children:mr.icon}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500",color:mr.color},children:v.nombre}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.75rem"},children:[v.dias_antes>0?`${v.dias_antes} das antes del evento`:v.dias_antes===-1?"1 da despus del evento":"Da del evento","  ",[v.enviar_email?"Email":null,v.enviar_whatsapp?"WhatsApp":null].filter(Boolean).join(" + ")]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontWeight:"600",color:mr.color},children:Zr}),e.jsx("div",{style:{color:"#6b7280",fontSize:"0.75rem"},children:Me(v.estado,v.dias_restantes)})]})]},de)})})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(zt,{size:20,color:"#10b981"}),"Informacin Financiera"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[e.jsxs("div",{style:{paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Total del Evento"}),e.jsx("div",{style:{fontWeight:"700",fontSize:"1.5rem",color:"#1f2937"},children:Ir(parseFloat(l.total)||0)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Total Pagado"}),e.jsx("div",{style:{fontWeight:"700",fontSize:"1.5rem",color:"#10b981"},children:Ir(K)})]}),e.jsxs("div",{style:{paddingTop:"1rem",borderTop:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Saldo Pendiente"}),e.jsx("div",{style:{fontWeight:"700",fontSize:"1.5rem",color:"#f59e0b"},children:Ir(Math.max(0,(parseFloat(l.total)||0)-K))})]}),K>0&&e.jsxs("div",{style:{marginTop:"0.5rem"},children:[e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.75rem"},children:["Progreso: ",(K/(parseFloat(l.total)||1)*100).toFixed(1),"%"]}),e.jsx("div",{style:{width:"100%",height:"8px",backgroundColor:"#e5e7eb",borderRadius:"9999px",marginTop:"0.5rem",overflow:"hidden"},children:e.jsx("div",{style:{width:`${Math.min(100,K/(parseFloat(l.total)||1)*100)}%`,height:"100%",backgroundColor:"#10b981",transition:"width 0.3s"}})})]})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[l.nombre_plan||l.plan_id?e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Gt,{size:20,color:"#6366f1"}),"Plan"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Nombre del Plan"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:l.nombre_plan||"-"})]}),l.precio_plan!==void 0&&l.precio_plan!==null&&e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Precio del Plan"}),e.jsx("div",{style:{fontWeight:"600",fontSize:"1.1rem",color:"#6366f1"},children:Ir(parseFloat(l.precio_plan)||0)})]}),l.plan_incluye&&e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Consideraciones del Plan"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem",whiteSpace:"pre-wrap"},children:l.plan_incluye})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Productos y servicios del plan"}),te?e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Cargando..."}):E.length===0?e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"No hay productos asociados al plan."}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"0.5rem",textAlign:"left",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Producto"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"center",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Cantidad"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Precio Unit."}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Subtotal"})]})}),e.jsx("tbody",{children:E.map((v,de)=>{const xe=parseFloat(v.cantidad||0),Me=parseFloat(v.precio||0);return e.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[e.jsx("td",{style:{padding:"0.5rem",fontSize:"0.85rem",color:"#374151"},children:v.nombre_producto||"-"}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"center",fontSize:"0.85rem",color:"#374151"},children:xe}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",fontSize:"0.85rem",color:"#374151"},children:Ir(Me)}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",fontSize:"0.85rem",fontWeight:"500",color:"#374151"},children:Ir(xe*Me)})]},de)})})]})})]})]})]}):null,e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Gt,{size:20,color:"#6366f1"}),"Servicios del evento"]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[Rl&&!Kr&&e.jsx("button",{type:"button",onClick:()=>yr(!0),disabled:Kr,style:{padding:"0.5rem 0.75rem",backgroundColor:Kr?"#9ca3af":"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:Kr?"not-allowed":"pointer",fontWeight:"500",fontSize:"0.8rem"},children:"+ Agregar servicio"}),Og&&(l==null?void 0:l.plan_id)&&!Kr&&e.jsx("button",{type:"button",onClick:eh,disabled:Kr||B,style:{padding:"0.5rem 0.75rem",backgroundColor:Kr?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:Kr||B?"not-allowed":"pointer",fontWeight:"500",fontSize:"0.8rem"},children:B?"Generando...":"Generar servicios"})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.35rem"},children:["Avance: ",Tl,"%"]}),e.jsx("div",{style:{width:"100%",height:"8px",backgroundColor:"#e5e7eb",borderRadius:"9999px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${Tl}%`,height:"100%",backgroundColor:Tl>=100?"#10b981":"#6366f1",transition:"width 0.3s"}})})]}),L?e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Cargando servicios..."}):C.length===0?e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"No hay servicios configurados para este evento."}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[C.filter(v=>!v.descartado).map(v=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #e5e7eb",backgroundColor:v.completado?"#ecfdf5":"#f9fafb"},children:[e.jsx("input",{type:"checkbox",checked:!!v.completado,disabled:!El||Kr||I===v.id,onChange:de=>Zg(v.id,de.target.checked),style:{width:"1rem",height:"1rem",cursor:El&&!Kr?"pointer":"default"}}),e.jsxs("span",{style:{fontSize:"0.9rem",color:v.completado?"#10b981":"#374151",flex:1},children:[v.nombre,v.plan_servicio_id===null&&e.jsx("span",{style:{marginLeft:"0.5rem",fontSize:"0.75rem",color:"#6366f1",fontStyle:"italic"},children:"(Personalizado)"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[v.plan_servicio_id===null&&Rl&&!Kr&&e.jsx("button",{type:"button",onClick:()=>rh(v.id),disabled:wr===v.id,style:{padding:"0.25rem 0.5rem",backgroundColor:wr===v.id?"#9ca3af":"#ef4444",color:"white",borderRadius:"0.25rem",border:"none",cursor:wr===v.id?"not-allowed":"pointer",fontSize:"0.75rem"},title:"Eliminar servicio personalizado",children:wr===v.id?"Eliminando...":"Eliminar"}),v.plan_servicio_id!==null&&_u&&!Kr&&e.jsx("button",{type:"button",onClick:()=>Iu(v.id,!0),disabled:I===v.id,style:{padding:"0.25rem 0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.25rem",border:"none",cursor:I===v.id?"not-allowed":"pointer",fontSize:"0.75rem"},title:"Descartar servicio",children:"Descartar"})]})]},v.id)),C.filter(v=>v.descartado).length>0&&e.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.5rem",fontWeight:"500"},children:["Servicios descartados (",C.filter(v=>v.descartado).length,")"]}),C.filter(v=>v.descartado).map(v=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #e5e7eb",backgroundColor:"#fef2f2"},children:[e.jsx("span",{style:{fontSize:"0.85rem",color:"#9ca3af",textDecoration:"line-through"},children:v.nombre}),_u&&!Kr&&e.jsx("button",{type:"button",onClick:()=>Iu(v.id,!1),disabled:I===v.id,style:{padding:"0.25rem 0.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.25rem",border:"none",cursor:I===v.id?"not-allowed":"pointer",fontSize:"0.75rem"},title:"Reactivar servicio",children:"Reactivar"})]},v.id))]}),!El&&e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem"},children:"No tienes permisos para actualizar los servicios."})]})]}),l.observaciones?e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(jt,{size:20,color:"#6366f1"}),"Observaciones"]}),e.jsx("div",{style:{color:"#374151",fontSize:"0.95rem",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:l.observaciones})]}):null]}),(l==null?void 0:l.id_evento)&&e.jsx(kv,{eventoId:l.id_evento,puedeEditar:Wi&&!Kr,compacto:!0}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",marginBottom:"2rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Gt,{size:20,color:"#6366f1"}),"Productos Adicionales"]}),Wi&&!Kr&&e.jsx("button",{type:"button",onClick:ph,disabled:Kr,style:{padding:"0.5rem 1rem",backgroundColor:Kr?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:Kr?"not-allowed":"pointer",fontWeight:"500"},children:"Agregar adicionales"})]}),z.length===0?e.jsx("p",{style:{color:"#6b7280",textAlign:"center",padding:"1.5rem"},children:"No hay productos adicionales registrados"}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Producto"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Cantidad"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Precio Unit."}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Subtotal"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Acciones"})]})}),e.jsx("tbody",{children:z.map((v,de)=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"0.75rem",fontSize:"0.875rem",color:"#374151"},children:v.nombre_producto||v.nombre||"-"}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",color:"#374151"},children:v.cantidad||0}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",color:"#374151"},children:Ir(parseFloat(v.precio_unitario||v.precio||0))}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:Ir(parseFloat(v.subtotal||0))}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right"},children:Lg&&!Kr&&e.jsx("button",{type:"button",onClick:()=>oh(v),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",padding:"0.25rem"},title:"Eliminar producto",children:e.jsx(Tr,{size:16})})})]},de))}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #e5e7eb"},children:[e.jsx("td",{colSpan:"4",style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Total Productos:"}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#6366f1"},children:Ir(z.reduce((v,de)=>v+parseFloat(de.subtotal||0),0))})]})})]})})]}),l.estado==="completado"&&e.jsxs("div",{style:{backgroundColor:"white",padding:u?"1rem":"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",marginTop:"1.5rem"},children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem",color:"#8b5cf6",marginBottom:"1.25rem"},children:[e.jsx(Ui,{size:20}),"Informacin de Finalizacin"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:u?"1fr":"repeat(2, 1fr)",gap:"1.25rem"},children:[e.jsxs("div",{style:{gridColumn:u?"1":"1 / -1"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.35rem"},children:"Observaciones de Finalizacin"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem",backgroundColor:"#f9fafb",padding:"0.75rem",borderRadius:"0.375rem",minHeight:"60px"},children:(_e==null?void 0:_e.observacion_finalizacion)||l.observacion_finalizacion||"Sin observaciones registradas"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.35rem"},children:"Fecha de Finalizacin"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:_e!=null&&_e.fecha_finalizacion||l.fecha_finalizacion?new Date((_e==null?void 0:_e.fecha_finalizacion)||l.fecha_finalizacion).toLocaleString("es-EC"):"No registrada"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.35rem"},children:"Calificacin del Cliente"}),l.calificacion_cliente?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:"".repeat(l.calificacion_cliente)}),e.jsxs("span",{style:{fontWeight:"600",color:l.calificacion_cliente>=4?"#16a34a":l.calificacion_cliente>=3?"#f59e0b":"#dc2626"},children:[l.calificacion_cliente,"/5"]})]}):e.jsx("div",{style:{color:"#9ca3af",fontStyle:"italic"},children:"Pendiente de calificacin"})]})]}),l.observaciones_calificacion&&e.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:l.calificacion_cliente<5?"#fef3c7":"#ecfdf5",borderRadius:"0.375rem",border:`1px solid ${l.calificacion_cliente<5?"#fcd34d":"#6ee7b7"}`},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem",marginBottom:"0.35rem"},children:" Comentarios del cliente"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.9rem",color:"#374151"},children:l.observaciones_calificacion})]}),((_e==null?void 0:_e.tiene_danos)||l.tiene_danos)&&(()=>{const v=parseFloat(l.costo_danos||0),de=parseFloat(l.monto_pagado_danos||0),xe=v-de,Me=l.cobrar_danos,mr=l.danos_pagados;return e.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",backgroundColor:mr?"#ecfdf5":"#fef2f2",borderRadius:"0.5rem",border:`1px solid ${mr?"#6ee7b7":"#fecaca"}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"0.75rem",marginBottom:"1rem"},children:[e.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"600",color:mr?"#16a34a":"#dc2626",display:"flex",alignItems:"center",gap:"0.5rem"},children:[mr?"":""," Registro de Daos",mr&&e.jsx("span",{style:{fontSize:"0.75rem",backgroundColor:"#16a34a",color:"white",padding:"0.15rem 0.5rem",borderRadius:"9999px"},children:"PAGADO"}),Me&&!mr&&e.jsx("span",{style:{fontSize:"0.75rem",backgroundColor:"#f59e0b",color:"white",padding:"0.15rem 0.5rem",borderRadius:"9999px"},children:"PENDIENTE"})]}),Me&&!mr&&xe>0&&e.jsx("button",{onClick:xh,style:{padding:"0.5rem 1rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"600",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.35rem"},children:" Registrar Pago de Daos"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:u?"1fr":"repeat(4, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem",marginBottom:"0.25rem"},children:"Costo Total"}),e.jsx("div",{style:{fontWeight:"700",fontSize:"1.25rem",color:"#dc2626"},children:Ir(v)})]}),Me&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem",marginBottom:"0.25rem"},children:"Pagado"}),e.jsx("div",{style:{fontWeight:"700",fontSize:"1.25rem",color:"#16a34a"},children:Ir(de)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem",marginBottom:"0.25rem"},children:"Saldo Pendiente"}),e.jsx("div",{style:{fontWeight:"700",fontSize:"1.25rem",color:xe>0?"#f59e0b":"#16a34a"},children:Ir(Math.max(0,xe))})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem",marginBottom:"0.25rem"},children:"Se cobra al cliente?"}),e.jsx("div",{style:{fontWeight:"600",fontSize:"0.95rem",color:Me?"#16a34a":"#6b7280"},children:Me?" S, se cobra":" No (asumido por empresa)"})]})]}),mr&&l.fecha_pago_danos&&e.jsxs("div",{style:{backgroundColor:"white",padding:"0.75rem",borderRadius:"0.375rem",marginBottom:"1rem",border:"1px solid #6ee7b7"},children:[e.jsxs("div",{style:{display:"flex",gap:"1.5rem",flexWrap:"wrap",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280"},children:"Fecha de pago: "}),e.jsx("span",{style:{fontWeight:"500"},children:new Date(l.fecha_pago_danos).toLocaleString("es-EC")})]}),l.metodo_pago_danos&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280"},children:"Mtodo: "}),e.jsx("span",{style:{fontWeight:"500",textTransform:"capitalize"},children:l.metodo_pago_danos})]})]}),l.observaciones_pago_danos&&e.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem"},children:[e.jsx("span",{style:{color:"#6b7280"},children:"Observaciones: "}),e.jsx("span",{children:l.observaciones_pago_danos})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem",marginBottom:"0.35rem"},children:"Descripcin de los Daos"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.9rem",backgroundColor:"white",padding:"0.75rem",borderRadius:"0.375rem",border:`1px solid ${mr?"#6ee7b7":"#fecaca"}`},children:l.descripcion_danos||"Sin descripcin"})]}),Dr.length>0&&e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem",marginBottom:"0.5rem"},children:"Detalle de Daos Registrados"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Dr.map((Zr,xo)=>e.jsxs("div",{style:{backgroundColor:"white",padding:"0.75rem",borderRadius:"0.375rem",border:`1px solid ${mr?"#6ee7b7":"#fecaca"}`,fontSize:"0.875rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"0.5rem"},children:[e.jsx("span",{style:{fontWeight:"500"},children:Zr.item_danado||Zr.descripcion}),e.jsx("span",{style:{color:"#dc2626",fontWeight:"600"},children:Ir(parseFloat(Zr.costo_total)||0)})]}),Zr.observaciones&&e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem",marginTop:"0.25rem"},children:Zr.observaciones})]},Zr.id||xo))})]})]})})()]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",marginTop:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",gap:"1rem",flexWrap:"wrap"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"Pagos"}),zu&&e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[Ii>0&&!Kr&&e.jsxs("button",{onClick:()=>{Ee(v=>({...v,tipo_pago:"abono"})),se(!0)},style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1.25rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:v=>v.target.style.backgroundColor="#059669",onMouseLeave:v=>v.target.style.backgroundColor="#10b981",children:[e.jsx(zt,{size:16}),"Registrar Pago"]}),Eu&&!Kr&&e.jsxs("button",{onClick:()=>{if(at<=0){Y("No hay saldo disponible para reembolsar.");return}Ee(v=>({...v,tipo_pago:"reembolso",monto:at||""})),se(!0)},disabled:at<=0,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1.25rem",backgroundColor:at<=0?"#fca5a5":"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:at<=0?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500",transition:"background-color 0.2s"},children:[e.jsx(zt,{size:16}),"Registrar reembolso"]})]})]}),g.length===0?e.jsx("p",{style:{color:"#6b7280",textAlign:"center",padding:"2rem"},children:"No hay pagos registrados"}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"ID"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Fecha"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Tipo"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Mtodo"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Cuenta"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Referencia"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Observacin"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Monto"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Origen"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:g.map(v=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsxs("td",{style:{padding:"0.75rem",fontSize:"0.85rem",color:"#6b7280",fontWeight:"600"},children:["#",v.id]}),e.jsx("td",{style:{padding:"0.75rem",fontSize:"0.85rem"},children:sh(v.fecha_pago)}),e.jsx("td",{style:{padding:"0.75rem"},children:v.tipo_pago||"-"}),e.jsx("td",{style:{padding:"0.75rem"},children:v.metodo_pago||"-"}),e.jsx("td",{style:{padding:"0.75rem",fontSize:"0.8rem",color:"#4f46e5",fontWeight:"500"},children:v.nombre_cuenta||"-"}),e.jsx("td",{style:{padding:"0.75rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",...ah(v.estado_pago)},children:Nu(v.estado_pago)})}),e.jsx("td",{style:{padding:"0.75rem"},children:v.numero_referencia||"-"}),e.jsx("td",{style:{padding:"0.75rem"},children:v.observaciones||"-"}),e.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:"500",color:v.tipo_pago==="reembolso"?"#ef4444":"#10b981"},children:[v.tipo_pago==="reembolso"?"-":"+",Ir(v.monto||0)]}),e.jsx("td",{style:{padding:"0.75rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:v.origen==="web"?"#dbeafe":v.origen==="whatsapp"?"#dcfce7":"#f3f4f6",color:v.origen==="web"?"#1e40af":v.origen==="whatsapp"?"#166534":"#374151"},children:v.origen==="web"?"Web":v.origen==="whatsapp"?"WhatsApp":"Escritorio"})}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>lh(v),style:{padding:"0.35rem 0.5rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer"},title:"Ver detalle",children:e.jsx(St,{size:16})}),Eu&&e.jsx("button",{onClick:()=>{if(!(v.tipo_pago==="reembolso"||v.estado_pago!=="aprobado")){if(at<=0){Y("No hay saldo disponible para reembolsar.");return}Ee(de=>({...de,tipo_pago:"reembolso",monto:Math.min(parseFloat(v.monto||0),at),metodo_pago:de.metodo_pago||"efectivo",fecha_pago:new Date().toISOString().split("T")[0]})),se(!0)}},disabled:v.tipo_pago==="reembolso"||v.estado_pago!=="aprobado"||at<=0,style:{padding:"0.35rem 0.5rem",backgroundColor:v.tipo_pago==="reembolso"||v.estado_pago!=="aprobado"||at<=0?"#fca5a5":"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:v.tipo_pago==="reembolso"||v.estado_pago!=="aprobado"||at<=0?"not-allowed":"pointer"},title:"Registrar reembolso",children:e.jsx(zt,{size:16})}),v.estado_pago==="en_revision"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Du(v,"aprobado"),disabled:!Il,style:{padding:"0.35rem 0.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:Il?"pointer":"not-allowed",opacity:Il?1:.6},title:"Aprobar pago",children:e.jsx(Ui,{size:16})}),e.jsx("button",{onClick:()=>Du(v,"rechazado"),disabled:!Wl,style:{padding:"0.35rem 0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:Wl?"pointer":"not-allowed",opacity:Wl?1:.6},title:"Anular pago",children:e.jsx($5,{size:16})})]})]})})]},v.id))})]})})]}),X&&zu&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:()=>!He&&se(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600"},children:O.tipo_pago==="reembolso"?"Registrar Reembolso":"Registrar Pago"}),e.jsx("button",{onClick:()=>se(!1),disabled:He,style:{background:"none",border:"none",cursor:He?"not-allowed":"pointer",padding:"0.5rem",display:"flex",alignItems:"center",color:"#6b7280"},children:e.jsx(rr,{size:20})})]}),e.jsxs("form",{onSubmit:mh,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsx("div",{style:{background:"#f0f9ff",color:"#0369a1",border:"1px solid #bae6fd",borderRadius:"0.5rem",padding:"0.75rem",fontSize:"0.85rem"},children:$g?"Al registrar este pago se enviara una notificacion automatica al cliente.":"Este evento no tiene email/telefono registrado, por lo que no se enviara notificacion."}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Monto *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",required:!0,value:O.monto,onChange:Gg,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:["Tipo de Pago ",e.jsx("span",{style:{color:"#6b7280",fontWeight:"400",fontSize:"0.75rem"},children:"(automtico)"})]}),e.jsxs("div",{style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:O.tipo_pago==="reembolso"?"#fef2f2":O.tipo_pago==="pago_completo"?"#f0fdf4":"#eff6ff",color:O.tipo_pago==="reembolso"?"#dc2626":O.tipo_pago==="pago_completo"?"#16a34a":"#2563eb",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{children:O.tipo_pago==="abono"?"Abono":O.tipo_pago==="pago_completo"?"Pago Completo":"Reembolso"}),O.tipo_pago!=="reembolso"&&e.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"400"},children:["Saldo: $",Ii.toLocaleString("es-EC",{minimumFractionDigits:2})]})]}),O.tipo_pago==="pago_completo"&&e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"#16a34a"},children:"El monto cubre el saldo pendiente del evento."}),O.tipo_pago==="reembolso"&&e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",color:"#ef4444"},children:"Este reembolso se descontar del total pagado y requiere confirmacin."})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Mtodo de Pago *"}),e.jsxs("select",{required:!0,value:O.metodo_pago,onChange:v=>Ee({...O,metodo_pago:v.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"efectivo",children:"Efectivo"}),e.jsx("option",{value:"transferencia",children:"Transferencia"}),e.jsx("option",{value:"tarjeta",children:"Tarjeta"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"otro",children:"Otro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Fecha de Pago *"}),e.jsx("input",{type:"date",required:!0,value:O.fecha_pago,onChange:v=>Ee({...O,fecha_pago:v.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Nmero de Referencia"}),e.jsx("input",{type:"text",value:O.numero_referencia,onChange:v=>Ee({...O,numero_referencia:v.target.value}),placeholder:"Opcional",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Observaciones"}),e.jsx("textarea",{value:O.observaciones,onChange:v=>Ee({...O,observaciones:v.target.value}),placeholder:"Opcional",rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>se(!1),disabled:He,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:He?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:He,style:{flex:1,padding:"0.75rem",backgroundColor:He?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:He?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:He?"Guardando...":O.tipo_pago==="reembolso"?"Registrar Reembolso":"Registrar Pago"})]})]})]})}),G&&ie&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100,padding:"1rem"},onClick:()=>ye(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",margin:0},children:"Detalle del pago"}),e.jsx("button",{onClick:()=>ye(!1),style:{background:"none",border:"none",cursor:"pointer"},children:e.jsx(rr,{size:20,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem",fontSize:"0.95rem"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"ID:"})," ",ie.id]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Fecha:"})," ",Bs(ie.fecha_pago)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Tipo:"})," ",ie.tipo_pago||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Mtodo:"})," ",ie.metodo_pago||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Estado:"})," ",Nu(ie.estado_pago)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Referencia:"})," ",ie.numero_referencia||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Observacin:"})," ",ie.observaciones||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Monto:"})," ",Ir(ie.monto||0)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Origen:"})," ",ie.origen||"-"]})]})]})}),ce&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1200,padding:"1rem"},onClick:()=>re(null),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:v=>v.stopPropagation(),children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.75rem"},children:ce.nuevoEstado==="aprobado"?"Aprobar pago":"Anular pago"}),e.jsxs("div",{style:{color:"#374151",marginBottom:"0.5rem"},children:["Vas a ",ce.nuevoEstado==="aprobado"?"aprobar":"anular"," el pago de"," ",Ir(ce.pago.monto||0),"."]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:"1rem"},children:["Mtodo: ",ce.pago.metodo_pago||"-","  Fecha: ",Bs(ce.pago.fecha_pago)]}),ce.nuevoEstado==="aprobado"&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",fontWeight:"500",color:"#374151"},children:[e.jsx(sn,{size:18,color:"#4f46e5"}),"Cuenta Destino ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:J,onChange:v=>fe(v.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",backgroundColor:"white"},children:[e.jsx("option",{value:"",children:"Seleccionar cuenta..."}),x.map(v=>e.jsxs("option",{value:v.id,children:[v.nombre," ",v.numero_cuenta?`- ${v.numero_cuenta}`:""]},v.id))]}),!J&&e.jsx("div",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem"},children:"Seleccione la cuenta donde se registrar este pago"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsx("button",{type:"button",onClick:()=>re(null),style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:ch,disabled:ce.nuevoEstado==="aprobado"&&!J,style:{flex:1,padding:"0.75rem",backgroundColor:ce.nuevoEstado==="aprobado"&&!J?"#9ca3af":ce.nuevoEstado==="aprobado"?"#10b981":"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:ce.nuevoEstado==="aprobado"&&!J?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Confirmar"})]})]})}),Ne&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100,padding:"1rem"},onClick:()=>!He&&U(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:v=>v.stopPropagation(),children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.75rem"},children:"Confirmar reembolso"}),e.jsxs("div",{style:{color:"#374151",marginBottom:"0.5rem"},children:["Ests a punto de registrar un reembolso de ",Ir(O.monto||0),"."]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:["Disponible para reembolsar: ",Ir(at)]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>U(!1),disabled:He,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:He?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:async()=>{U(!1),await Bu(!0)},disabled:He,style:{flex:1,padding:"0.75rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:He?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Confirmar reembolso"})]})]})}),ge&&Wi&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:()=>!Ae&&Re(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"Agregar producto adicional"}),e.jsx("button",{onClick:()=>Re(!1),disabled:Ae,style:{background:"none",border:"none",cursor:Ae?"not-allowed":"pointer",padding:"0.5rem",display:"flex",alignItems:"center",color:"#6b7280"},children:e.jsx(rr,{size:20})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Producto *"}),e.jsxs("select",{value:Xe.producto_id,onChange:v=>ne({...Xe,producto_id:v.target.value}),disabled:j||Ae,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"",children:j?"Cargando productos...":"Selecciona un producto"}),w.map(v=>e.jsxs("option",{value:v.id,children:[v.nombre," ",v.precio?`- ${Ir(v.precio)}`:""]},v.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Cantidad *"}),e.jsx("input",{type:"number",min:"1",step:"1",value:Xe.cantidad,onChange:v=>ne({...Xe,cantidad:v.target.value}),disabled:Ae,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),ke&&e.jsx("div",{style:{color:"#ef4444",fontSize:"0.875rem",marginTop:"0.75rem"},children:ke}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>Re(!1),disabled:Ae,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:Ae?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:nh,disabled:Ae,style:{flex:1,padding:"0.75rem",backgroundColor:Ae?"#93c5fd":"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:Ae?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:Ae?"Agregando...":"Agregar"})]})]})}),Ve&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:()=>!De&&Je(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"Eliminar producto"}),e.jsx("button",{onClick:()=>Je(!1),disabled:De,style:{background:"none",border:"none",cursor:De?"not-allowed":"pointer",padding:"0.5rem",display:"flex",alignItems:"center",color:"#6b7280"},children:e.jsx(rr,{size:20})})]}),e.jsx("div",{style:{marginBottom:"1rem",color:"#374151"},children:(q==null?void 0:q.nombre_producto)||(q==null?void 0:q.nombre)||"Producto"}),e.jsx("div",{style:{marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Observacin *"}),e.jsx("textarea",{value:ve,onChange:v=>{Oe(v.target.value),Ce&&Le("")},placeholder:"Describe el motivo de la eliminacin",rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem",resize:"vertical"}}),Ce&&e.jsx("div",{style:{color:"#ef4444",fontSize:"0.875rem",marginTop:"0.5rem"},children:Ce}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>Je(!1),disabled:De,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:De?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:ih,disabled:De,style:{flex:1,padding:"0.75rem",backgroundColor:De?"#fca5a5":"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:De?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:De?"Eliminando...":"Eliminar"})]})]})}),Dg&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50,padding:u?"1rem":"0"},onClick:Fs,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:u?"1.25rem":"1.5rem",width:"100%",maxWidth:"450px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#6366f1",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Registrar Calificacin"}),e.jsx("button",{onClick:Fs,disabled:Dn,style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",color:"#6b7280"},children:e.jsx(rr,{size:20})})]}),e.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.75rem"},children:"Seleccione la calificacin del cliente"}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem"},children:[1,2,3,4,5].map(v=>e.jsx("button",{type:"button",onClick:()=>Ns({...Yr,calificacion:v}),style:{width:"3rem",height:"3rem",borderRadius:"0.5rem",border:Yr.calificacion===v?"3px solid #f59e0b":"1px solid #d1d5db",backgroundColor:Yr.calificacion>=v?"#fef3c7":"white",cursor:"pointer",fontSize:"1.5rem",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:Yr.calificacion>=v?"":""},v))}),e.jsxs("div",{style:{marginTop:"0.5rem",fontWeight:"600",color:"#f59e0b"},children:[Yr.calificacion===5&&"Excelente",Yr.calificacion===4&&"Muy Bueno",Yr.calificacion===3&&"Bueno",Yr.calificacion===2&&"Regular",Yr.calificacion===1&&"Malo"]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem"},children:["Observaciones del cliente ",Yr.calificacion<5&&e.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),e.jsx("textarea",{value:Yr.observaciones,onChange:v=>Ns({...Yr,observaciones:v.target.value}),placeholder:Yr.calificacion<5?"Ingrese los comentarios del cliente...":"Comentarios opcionales...",rows:3,style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",resize:"vertical"}}),Yr.calificacion<5&&!Yr.observaciones&&e.jsx("div",{style:{color:"#dc2626",fontSize:"0.75rem",marginTop:"0.25rem"},children:"Se requieren observaciones para calificaciones menores a 5"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:Fs,disabled:Dn,style:{padding:"0.65rem 1.25rem",backgroundColor:"#f3f4f6",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:vh,disabled:Dn||Yr.calificacion<5&&!Yr.observaciones.trim(),style:{padding:"0.65rem 1.25rem",backgroundColor:Dn?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:Dn||Yr.calificacion<5&&!Yr.observaciones.trim()?"not-allowed":"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.35rem"},children:Dn?"Guardando...":" Guardar Calificacin"})]})]})}),Ng&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50,padding:u?"1rem":"0"},onClick:Ls,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:u?"1.25rem":"1.5rem",width:"100%",maxWidth:"450px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#10b981",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Registrar Pago de Daos"}),e.jsx("button",{onClick:Ls,disabled:Bn,style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",color:"#6b7280"},children:e.jsx(rr,{size:20})})]}),e.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",backgroundColor:"#fef2f2",borderRadius:"0.5rem",border:"1px solid #fecaca"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem"},children:[e.jsx("span",{style:{color:"#6b7280"},children:"Costo total de daos:"}),e.jsx("span",{style:{fontWeight:"600",color:"#dc2626"},children:Ir(parseFloat((l==null?void 0:l.costo_danos)||0))})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem",marginTop:"0.25rem"},children:[e.jsx("span",{style:{color:"#6b7280"},children:"Ya pagado:"}),e.jsx("span",{style:{fontWeight:"600",color:"#16a34a"},children:Ir(parseFloat((l==null?void 0:l.monto_pagado_danos)||0))})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem",marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #fecaca"},children:[e.jsx("span",{style:{fontWeight:"500"},children:"Saldo pendiente:"}),e.jsx("span",{style:{fontWeight:"700",color:"#f59e0b"},children:Ir(Math.max(0,parseFloat((l==null?void 0:l.costo_danos)||0)-parseFloat((l==null?void 0:l.monto_pagado_danos)||0)))})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem"},children:"Monto a pagar *"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:ho.monto,onChange:v=>Ai({...ho,monto:v.target.value}),placeholder:"0.00",style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem"},children:"Mtodo de pago"}),e.jsxs("select",{value:ho.metodo_pago,onChange:v=>Ai({...ho,metodo_pago:v.target.value}),style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"},children:[e.jsx("option",{value:"efectivo",children:"Efectivo"}),e.jsx("option",{value:"transferencia",children:"Transferencia"}),e.jsx("option",{value:"tarjeta",children:"Tarjeta"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"otro",children:"Otro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem"},children:"Observaciones (opcional)"}),e.jsx("textarea",{value:ho.observaciones,onChange:v=>Ai({...ho,observaciones:v.target.value}),placeholder:"Notas adicionales sobre el pago...",rows:2,style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:Ls,disabled:Bn,style:{padding:"0.65rem 1.25rem",backgroundColor:"#f3f4f6",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:yh,disabled:Bn||!ho.monto,style:{padding:"0.65rem 1.25rem",backgroundColor:Bn?"#9ca3af":"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:Bn?"not-allowed":"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.35rem"},children:Bn?"Registrando...":" Registrar Pago"})]})]})}),le&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50,padding:u?"1rem":"0"},onClick:Os,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:u?"1.25rem":"1.5rem",width:"100%",maxWidth:"560px",maxHeight:u?"90vh":"85vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#8b5cf6",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ui,{size:24}),"Finalizar Evento"]}),e.jsx("button",{onClick:Os,disabled:qe,style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",color:"#6b7280"},children:e.jsx(rr,{size:20})})]}),e.jsx("div",{style:{marginBottom:"1.25rem",padding:"0.75rem",backgroundColor:"#f3f4f6",borderRadius:"0.5rem"},children:e.jsxs("p",{style:{fontSize:"0.875rem",color:"#4b5563"},children:["Al finalizar el evento, se marcar como ",e.jsx("strong",{children:"completado"})," y se enviar una notificacin al cliente solicitando su valoracin."]})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem"},children:"Observaciones de finalizacin"}),e.jsx("textarea",{value:_.observacion_finalizacion,onChange:v=>je({..._,observacion_finalizacion:v.target.value}),placeholder:"Ingrese observaciones generales sobre cmo se desarroll el evento...",rows:3,style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",resize:"vertical"}})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:_.tiene_danos?"#fef2f2":"#f9fafb",borderRadius:"0.5rem",border:_.tiene_danos?"1px solid #fecaca":"1px solid #e5e7eb"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:_.tiene_danos,onChange:v=>je({..._,tiene_danos:v.target.checked,descripcion_danos:v.target.checked?_.descripcion_danos:"",costo_danos:v.target.checked?_.costo_danos:"",cobrar_danos:v.target.checked?_.cobrar_danos:!1}),style:{width:"18px",height:"18px",accentColor:"#ef4444"}}),e.jsx("span",{style:{fontWeight:"600",color:_.tiene_danos?"#dc2626":"#374151"},children:"Hubo daos durante el evento"})]}),_.tiene_danos&&e.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.35rem",fontWeight:"500",fontSize:"0.8rem",color:"#6b7280"},children:"Descripcin de los daos *"}),e.jsx("textarea",{value:_.descripcion_danos,onChange:v=>je({..._,descripcion_danos:v.target.value}),placeholder:"Describa detalladamente los daos ocasionados (ej: Silla rota, mantel manchado, etc.)",rows:3,style:{width:"100%",padding:"0.6rem",border:"1px solid #fecaca",borderRadius:"0.375rem",fontSize:"0.875rem",resize:"vertical",backgroundColor:"white"}})]}),e.jsx("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:e.jsxs("div",{style:{flex:1,minWidth:"140px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.35rem",fontWeight:"500",fontSize:"0.8rem",color:"#6b7280"},children:"Costo de los daos ($)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:_.costo_danos,onChange:v=>je({..._,costo_danos:v.target.value}),placeholder:"0.00",style:{width:"100%",padding:"0.6rem",border:"1px solid #fecaca",borderRadius:"0.375rem",fontSize:"0.875rem",backgroundColor:"white"}})]})}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",padding:"0.75rem",backgroundColor:_.cobrar_danos?"#dcfce7":"white",borderRadius:"0.375rem",border:_.cobrar_danos?"1px solid #86efac":"1px solid #e5e7eb"},children:[e.jsx("input",{type:"checkbox",checked:_.cobrar_danos,onChange:v=>je({..._,cobrar_danos:v.target.checked}),style:{width:"16px",height:"16px",accentColor:"#16a34a"}}),e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:"500",color:"#374151"},children:"Cobrar al cliente"}),e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.15rem"},children:"Se agregar un cargo adicional al evento por el monto especificado"})]})]})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:Os,disabled:qe,style:{padding:"0.65rem 1.25rem",backgroundColor:"#f3f4f6",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:gh,disabled:qe||_.tiene_danos&&!_.descripcion_danos.trim(),style:{padding:"0.65rem 1.25rem",backgroundColor:qe?"#9ca3af":"#8b5cf6",color:"white",borderRadius:"0.375rem",border:"none",cursor:qe?"not-allowed":"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.35rem"},children:qe?"Finalizando...":e.jsxs(e.Fragment,{children:[e.jsx(Ui,{size:18}),"Finalizar evento"]})})]})]})}),me&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:()=>!Q&&Ie(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"Eliminar evento"}),e.jsx("button",{onClick:()=>Ie(!1),disabled:Q,style:{background:"none",border:"none",cursor:Q?"not-allowed":"pointer",padding:"0.5rem",display:"flex",alignItems:"center",color:"#6b7280"},children:e.jsx(rr,{size:20})})]}),e.jsx("div",{style:{color:"#374151",marginBottom:"0.75rem"},children:"Est seguro de eliminar este evento? Esta accin no se puede deshacer."}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#6b7280"},children:["Total pagado: ",Ir(K),"  Total reembolsos: ",Ir(Z)]}),at>0&&e.jsxs("div",{style:{marginTop:"0.5rem",color:"#ef4444",fontSize:"0.85rem"},children:["Debes reembolsar ",Ir(at)," antes de eliminar."]}),V&&e.jsx("div",{style:{marginTop:"0.5rem",color:"#ef4444",fontSize:"0.85rem"},children:V}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>Ie(!1),disabled:Q,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:Q?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:Qg,disabled:Q||at>0,style:{flex:1,padding:"0.75rem",backgroundColor:Q||at>0?"#fca5a5":"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:Q||at>0?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:Q?"Eliminando...":"Eliminar"})]})]})}),ir&&Rl&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:()=>{yr(!1),Pr({nombre:""}),nr("")},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"Agregar servicio personalizado"}),e.jsx("button",{type:"button",onClick:()=>{yr(!1),Pr({nombre:""}),nr("")},style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#6b7280",padding:0,width:"2rem",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#374151"},children:"Nombre del servicio"}),e.jsx("input",{type:"text",value:vr.nombre,onChange:v=>{Pr({nombre:v.target.value}),nr("")},placeholder:"Ej: Confirmar decoracin, Revisar iluminacin, etc.",style:{width:"100%",padding:"0.75rem",borderRadius:"0.375rem",border:"1px solid #d1d5db",fontSize:"0.875rem"},onKeyPress:v=>{v.key==="Enter"&&Wu()}}),he&&e.jsx("div",{style:{color:"#ef4444",fontSize:"0.875rem",marginTop:"0.5rem"},children:he})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>{yr(!1),Pr({nombre:""}),nr("")},style:{padding:"0.75rem 1.5rem",borderRadius:"0.375rem",border:"1px solid #d1d5db",backgroundColor:"white",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:Wu,disabled:or||!vr.nombre.trim(),style:{padding:"0.75rem 1.5rem",borderRadius:"0.375rem",border:"none",backgroundColor:or||!vr.nombre.trim()?"#9ca3af":"#10b981",color:"white",cursor:or||!vr.nombre.trim()?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:or?"Creando...":"Crear servicio"})]})]})}),zr&&lr&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(15, 23, 42, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1200,padding:"1rem"},onClick:()=>Qe(!1),children:e.jsxs("div",{style:{background:"white",borderRadius:"0.75rem",padding:"1.5rem",width:"100%",maxWidth:"860px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",marginBottom:"0.25rem"},children:lr.titulo}),e.jsx("p",{style:{color:"#6b7280",fontSize:"0.85rem"},children:"Vista previa del mensaje que se enviara"})]}),e.jsx("button",{onClick:()=>Qe(!1),style:{border:"none",background:"transparent",cursor:"pointer",fontSize:"1.2rem"},children:""})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"0.95rem",marginBottom:"0.5rem"},children:"Email"}),e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.75rem",background:"#f9fafb",minHeight:"180px"},dangerouslySetInnerHTML:{__html:lr.email.replace(/\n/g,"<br>")}})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"0.95rem",marginBottom:"0.5rem"},children:"WhatsApp"}),e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.75rem",background:"#f9fafb",minHeight:"180px",whiteSpace:"pre-wrap"},children:lr.whatsapp||"Sin plantilla"})]})]})]})})]})},Wp=()=>{const r=_o(),{id:t}=bl(),o=!!t,[n,i]=c.useState(!1),[s,a]=c.useState(""),[d,u]=c.useState(!1),[l,f]=c.useState(!1),[g,y]=c.useState(null),[z,b]=c.useState([]),[w,k]=c.useState([]),[j,p]=c.useState([]),[C,S]=c.useState([]),[L,W]=c.useState([]),[I,m]=c.useState(!0),[B,H]=c.useState([]),[E,R]=c.useState(!1),[te,F]=c.useState(0),[K,D]=c.useState(null),[Z,P]=c.useState(null),[$,N]=c.useState(null),[ee,Y]=c.useState(null),[X,se]=c.useState([]),[G,ye]=c.useState(!1),[ie,be]=c.useState({producto_id:"",cantidad:"1"}),ce=()=>new Date().toISOString().split("T")[0],[re,x]=c.useState({cliente_id:"",plan_id:"",id_salon:"",nombre_evento:"",tipo_evento:"",fecha_evento:ce(),hora_inicio:"20:00",hora_fin:"02:00",numero_invitados:"50",estado:"cotizacion",total:"",observaciones:""});c.useEffect(()=>{h()},[]),c.useEffect(()=>{!o||I||l||fe()},[o,I,l]);const h=async()=>{var ne;try{if(m(!0),a(""),!localStorage.getItem("token")){a("Sesin expirada. Por favor, inicia sesin nuevamente."),setTimeout(()=>{window.location.href="/login"},2e3);return}const Te=await Promise.allSettled([lo.getAll().then(ue=>({tipo:"clientes",data:ue})),yt.getAll(!0).then(ue=>({tipo:"planes",data:ue})),jn.getAll(!0).then(ue=>({tipo:"salones",data:ue})),To.getAll(!0).then(ue=>({tipo:"productos",data:ue})),Eg.getAll(!0).then(ue=>({tipo:"tipos_evento",data:ue}))]);let Ae=[];if(Te.forEach((ue,Ve)=>{var Je;if(ue.status==="fulfilled"){const{tipo:q,data:Se}=ue.value;q==="clientes"?b(Se.clientes||[]):q==="planes"?k(Se.planes||[]):q==="salones"?p(Se.salones||[]):q==="productos"?S(Se.productos||[]):q==="tipos_evento"&&W(Se.tipos_evento||[])}else{const q=ue.reason;console.error(`Error al cargar ${["clientes","planes","salones","productos","tipos_evento"][Ve]}:`,q),((Je=q.response)==null?void 0:Je.status)===401?Ae.push("Sesin expirada"):Ae.push(`Error al cargar ${["clientes","planes","salones","productos","tipos_evento"][Ve]}`)}}),Ae.some(ue=>ue==="Sesin expirada"))a("Tu sesin ha expirado. Por favor, inicia sesin nuevamente."),setTimeout(()=>{localStorage.removeItem("token"),localStorage.removeItem("usuario"),window.location.href="/login"},3e3);else if(Ae.length>0){const ue=Ae.length===5?"Error al cargar los datos. Por favor, verifica tu conexin y recarga la pgina.":`Algunos datos no se pudieron cargar: ${Ae.join(", ")}. Puedes continuar creando el evento.`;a(ue)}}catch(ke){console.error("Error inesperado al cargar datos:",ke),((ne=ke.response)==null?void 0:ne.status)===401?(a("Tu sesin ha expirado. Por favor, inicia sesin nuevamente."),setTimeout(()=>{localStorage.removeItem("token"),localStorage.removeItem("usuario"),window.location.href="/login"},3e3)):a("Error al cargar los datos necesarios. Por favor, recarga la pgina.")}finally{m(!1)}},J=ne=>{if(!ne)return"";if(typeof ne=="string"){const ke=ne.split(":");return ke.length>=2?`${ke[0]}:${ke[1]}`:ne}return ne},fe=async()=>{try{u(!0),a("");const ne=await dr.getById(t),ke=(ne==null?void 0:ne.evento)||ne;if(!ke){a("No se encontr el evento para editar.");return}y(ke),x({cliente_id:ke.id_cliente||ke.cliente_id||"",plan_id:ke.plan_id?String(ke.plan_id):"",id_salon:ke.id_salon?String(ke.id_salon):"",nombre_evento:ke.nombre_evento||"",tipo_evento:ke.tipo_evento||"",fecha_evento:ke.fecha_evento||ce(),hora_inicio:J(ke.hora_inicio),hora_fin:J(ke.hora_fin),numero_invitados:ke.numero_invitados?String(ke.numero_invitados):"",estado:ke.estado||"cotizacion",total:ke.total??"",observaciones:ke.observaciones||""});const Te=w.find(ue=>ue.id===parseInt(ke.plan_id));Te?(F(parseFloat(Te.precio_base||0)),D(Te.capacidad_minima||null),P(Te.capacidad_maxima||null),N(Te.duracion_horas||null)):(F(0),D(null),P(null),N(null));const Ae=j.find(ue=>(ue.id_salon||ue.id)===parseInt(ke.id_salon));Y(Ae&&Ae.capacidad||null);try{const ue=await dr.getProductos(t),Ve=(ue==null?void 0:ue.productos)||[];H(Ve.map(Je=>({producto_id:Je.producto_id,nombre:Je.nombre_producto||Je.nombre||"Producto",cantidad:parseInt(Je.cantidad||0,10),precio_unitario:parseFloat(Je.precio_unitario||0),subtotal:parseFloat(Je.subtotal||0)})))}catch(ue){console.error("Error al cargar productos del evento:",ue)}}catch(ne){console.error("Error al cargar evento para editar:",ne),a("Error al cargar el evento para edicin.")}finally{u(!1),f(!0)}},ge=ne=>{const{name:ke,value:Te}=ne.target;if(x(Ae=>({...Ae,[ke]:Te})),ke==="tipo_evento"&&x(Ae=>{const ue=Ae.nombre_evento||"",Ve=Ae.tipo_evento||"";if(!ue)return{...Ae,nombre_evento:Te?`${Te} - `:""};if(Ve&&ue.startsWith(`${Ve} - `)){const Je=ue.substring(Ve.length+3);return{...Ae,nombre_evento:Te?`${Te} - ${Je}`:Je}}return Ae}),ke==="plan_id"){const Ae=w.find(ue=>ue.id===parseInt(Te));Ae?(F(parseFloat(Ae.precio_base||0)),D(Ae.capacidad_minima||null),P(Ae.capacidad_maxima||null),N(Ae.duracion_horas||null)):(F(0),D(null),P(null),N(null))}if(ke==="numero_invitados"){const Ae=parseInt(Te),ue=w.find(ve=>ve.id===parseInt(re.plan_id)),Ve=ue==null?void 0:ue.capacidad_minima,Je=ue==null?void 0:ue.capacidad_maxima,q=j.find(ve=>(ve.id_salon||ve.id)===parseInt(re.id_salon)),Se=q==null?void 0:q.capacidad;if(!Te){x(ve=>({...ve,plan_id:"",id_salon:""})),F(0),D(null),P(null),N(null),Y(null);return}ue&&(Ve&&Ae<Ve||Je&&Ae>Je)&&(x(ve=>({...ve,plan_id:""})),F(0),D(null),P(null),N(null)),q&&Se&&Ae>Se&&(x(ve=>({...ve,id_salon:""})),Y(null))}if(ke==="id_salon"){const Ae=j.find(ue=>(ue.id_salon||ue.id)===parseInt(Te));Ae?(Y(Ae.capacidad||null),Re(parseInt(Te))):(Y(null),se([]))}},Re=async ne=>{if(!ne){se([]);return}try{ye(!0);const ke=await dr.getFechasOcupadas(ne);se(ke.fechas_ocupadas||[])}catch(ke){console.error("Error al cargar fechas ocupadas:",ke),se([])}finally{ye(!1)}},me=()=>{const ne=B.reduce((ke,Te)=>ke+(parseFloat(Te.subtotal)||0),0);return te+ne},Ie=()=>{if(!ie.producto_id||!ie.cantidad||parseInt(ie.cantidad)<=0){a("Debes seleccionar un producto y una cantidad vlida");return}const ne=C.find(Ve=>Ve.id===parseInt(ie.producto_id));if(!ne){a("Producto no encontrado");return}const ke=parseInt(ie.cantidad),Te=parseFloat(ne.precio||0),Ae=ke*Te;if(B.find(Ve=>Ve.producto_id===ne.id)){a("Este producto ya est agregado. Elimnalo primero si deseas cambiar la cantidad.");return}H(Ve=>[...Ve,{producto_id:ne.id,nombre:ne.nombre,cantidad:ke,precio_unitario:Te,subtotal:Ae}]),be({producto_id:"",cantidad:"1"}),R(!1),a("")},Q=ne=>{H(ke=>ke.filter(Te=>Te.producto_id!==ne))},M=ne=>{if(!ne)return!0;const[ke,Te,Ae]=ne.split("-").map(Number),ue=new Date(ke,Te-1,Ae),Ve=new Date;return Ve.setHours(0,0,0,0),ue.setHours(0,0,0,0),ue>=Ve},V=()=>{if(!re.hora_inicio||!re.hora_fin)return{valido:!0};const[ne,ke]=re.hora_inicio.split(":").map(Number),[Te,Ae]=re.hora_fin.split(":").map(Number);let ue=ne*60+ke,Ve=Te*60+Ae;Ve<=ue&&(Ve+=24*60);const q=(Ve-ue)/60;return q<2?{valido:!1,mensaje:"El evento debe durar al menos 2 horas"}:$&&q>$?{valido:!1,mensaje:`El evento no puede durar ms de ${$} horas segn el plan seleccionado`}:{valido:!0}},we=()=>{if(!re.numero_invitados)return{valido:!0};const ne=parseInt(re.numero_invitados);return ne<=0?{valido:!1,mensaje:"El nmero de invitados debe ser mayor a 0"}:Z&&ne>Z?{valido:!1,mensaje:`El nmero de invitados no puede superar la capacidad mxima del plan (${Z})`}:K&&ne<K?{valido:!1,mensaje:`El nmero de invitados no puede ser menor que la capacidad mnima del plan (${K})`}:ee&&ne>ee?{valido:!1,mensaje:`El nmero de invitados no puede superar la capacidad del saln (${ee})`}:{valido:!0}},Ne=ne=>{if(!ne)return null;const ke=ne.split(":");if(ke.length<2)return null;const Te=parseInt(ke[0],10),Ae=parseInt(ke[1],10);return Number.isNaN(Te)||Number.isNaN(Ae)?null:Te*60+Ae},U=(ne,ke)=>{if(ne===null||ke===null)return null;let Te=ne,Ae=ke;return(Ae<Te||Te>=12*60&&Ae<12*60)&&(Ae+=24*60),{inicioMin:Te,finMin:Ae}},pe=ne=>{const ke=ne.getFullYear(),Te=String(ne.getMonth()+1).padStart(2,"0"),Ae=String(ne.getDate()).padStart(2,"0");return`${ke}-${Te}-${Ae}`},Ge=(ne,ke)=>{const Te=new Date(`${ne}T00:00:00`);return Te.setDate(Te.getDate()+ke),pe(Te)},We=(ne,ke)=>{const Te=new Date(`${ne}T00:00:00`),Ae=new Date(`${ke}T00:00:00`);return Math.round((Te-Ae)/(24*60*60*1e3))},cr=async()=>{if(!re.fecha_evento||!re.id_salon||!re.hora_inicio||!re.hora_fin)return{disponible:!0};const ne=Ne(re.hora_inicio),ke=Ne(re.hora_fin),Te=U(ne,ke);if(!Te)return{disponible:!1,mensaje:"La hora de inicio o fin no es vlida"};const Ae=parseInt(re.id_salon);if(!Ae||isNaN(Ae))return{disponible:!0};const ue=re.fecha_evento,Ve=[Ge(ue,-1),ue,Ge(ue,1)];try{let q=(await Promise.all(Ve.map(ve=>dr.getAll({fecha:ve})))).flatMap(ve=>ve.eventos||[]);if(o&&t){const ve=parseInt(t,10);q=q.filter(Oe=>{const Ce=Oe.id_evento!==void 0&&Oe.id_evento!==null?parseInt(Oe.id_evento):Oe.id!==void 0&&Oe.id!==null?parseInt(Oe.id):null;return!Ce||Ce!==ve})}if(q.some(ve=>{if((ve.estado||"").toLowerCase()==="cancelado")return!1;const Ce=ve.id_salon!==void 0&&ve.id_salon!==null?parseInt(ve.id_salon):ve.salon_id!==void 0&&ve.salon_id!==null?parseInt(ve.salon_id):null;if(!Ce||isNaN(Ce)||Ce!==Ae)return!1;if(!ve.hora_inicio||!ve.hora_fin)return ve.fecha_evento===ue;const Le=Ne(ve.hora_inicio),De=Ne(ve.hora_fin);if(Le===null||De===null)return ve.fecha_evento===ue;const Fe=U(Le,De);if(!Fe)return ve.fecha_evento===ue;const yr=We(ve.fecha_evento,ue)*24*60,vr=Fe.inicioMin+yr,Pr=Fe.finMin+yr,he=Te.inicioMin,nr=Te.finMin;return he<Pr&&vr<nr})){const ve=q.find(Ce=>{if((Ce.estado||"").toLowerCase()==="cancelado")return!1;const De=Ce.id_salon!==void 0&&Ce.id_salon!==null?parseInt(Ce.id_salon):Ce.salon_id!==void 0&&Ce.salon_id!==null?parseInt(Ce.salon_id):null;if(!De||isNaN(De)||De!==Ae)return!1;if(!Ce.hora_inicio||!Ce.hora_fin)return Ce.fecha_evento===ue;const Fe=Ne(Ce.hora_inicio),ir=Ne(Ce.hora_fin);if(Fe===null||ir===null)return Ce.fecha_evento===ue;const yr=U(Fe,ir);if(!yr)return Ce.fecha_evento===ue;const Pr=We(Ce.fecha_evento,ue)*24*60,he=yr.inicioMin+Pr,nr=yr.finMin+Pr,or=Te.inicioMin,jr=Te.finMin;return or<nr&&he<jr});let Oe="Ya existe un evento en ese saln para la fecha y horario seleccionados";if(ve){const Ce=ue.split("-").reverse().join("/");ve.hora_inicio&&ve.hora_fin?Oe=`Ya existe un evento en ese saln el ${Ce} de ${ve.hora_inicio} a ${ve.hora_fin}. Tu evento (${re.hora_inicio} - ${re.hora_fin}) se solapa con este horario.`:Oe=`Ya existe un evento en ese saln el ${Ce} sin horario definido. Por favor, elige otra fecha.`}return{disponible:!1,mensaje:Oe}}return{disponible:!0}}catch(Je){return console.error("Error al verificar disponibilidad:",Je),{disponible:!0,advertencia:"No se pudo verificar la disponibilidad. Por favor, verifica manualmente que no haya conflictos."}}},gr=async ne=>{var ke,Te,Ae;ne.preventDefault(),a(""),i(!0);try{if(!re.cliente_id){a("Debes seleccionar un cliente"),i(!1);return}if(!M(re.fecha_evento)){a("La fecha del evento debe ser igual o mayor a la fecha de hoy"),i(!1);return}const ue=V();if(!ue.valido){a(ue.mensaje),i(!1);return}const Ve=we();if(!Ve.valido){a(Ve.mensaje),i(!1);return}const Je=await cr();if(!Je.disponible){a(Je.mensaje),i(!1);return}const q=me(),Se=o&&(g==null?void 0:g.saldo)!==void 0&&(g==null?void 0:g.saldo)!==null?parseFloat(g.saldo):q;let ve=null;if(re.id_salon){const Fe=j.find(ir=>(ir.id_salon||ir.id)===parseInt(re.id_salon));Fe&&(ve=Fe.nombre||null,ve&&Fe.capacidad&&(ve=`${ve} (Cap: ${Fe.capacidad})`))}const Oe=localStorage.getItem("usuario");let Ce=o&&(g==null?void 0:g.coordinador_id)||null;if(Oe)try{const Fe=JSON.parse(Oe);_r(Fe==null?void 0:Fe.rol,[T.COORDINATOR])&&!o&&(Ce=Fe.id)}catch(Fe){console.error("Error al parsear usuario:",Fe)}const Le={cliente_id:re.cliente_id?parseInt(re.cliente_id):g==null?void 0:g.id_cliente,nombre_evento:re.nombre_evento||null,tipo_evento:re.tipo_evento||null,fecha_evento:re.fecha_evento||null,hora_inicio:re.hora_inicio||null,hora_fin:re.hora_fin||null,numero_invitados:re.numero_invitados?parseInt(re.numero_invitados):null,estado:re.estado||"cotizacion",total:q,saldo:Se,observaciones:re.observaciones||null,coordinador_id:Ce};re.plan_id&&(Le.plan_id=parseInt(re.plan_id)),re.id_salon&&(Le.id_salon=parseInt(re.id_salon),ve&&(Le.salon=ve));const De=o?await dr.update(t,Le):await dr.create(Le);if(De.evento){const Fe=De.evento.id_evento||De.evento.id||t;if(B.length>0)try{for(const ir of B)await dr.agregarProducto(Fe,ir.producto_id,ir.cantidad,ir.precio_unitario);await dr.calcularTotal(Fe)}catch(ir){console.error("Error al agregar productos:",ir),a("El evento se actualiz pero hubo un error al agregar algunos productos. Puedes agregarlos manualmente desde el detalle del evento.")}r(`/eventos/${Fe}`)}else a(o?"Error al actualizar el evento. Intenta nuevamente.":"Error al crear el evento. Intenta nuevamente.")}catch(ue){if(console.error(o?"Error al actualizar evento:":"Error al crear evento:",ue),((ke=ue.response)==null?void 0:ke.status)===401||ue.isAuthError)a("Tu sesin ha expirado. Por favor, inicia sesin nuevamente."),setTimeout(()=>{localStorage.removeItem("token"),localStorage.removeItem("usuario"),window.location.href="/login"},3e3);else{const Ve=((Ae=(Te=ue.response)==null?void 0:Te.data)==null?void 0:Ae.error)||ue.message||(o?"Error al actualizar el evento":"Error al crear el evento");a(Ve)}}finally{i(!1)}},Sr=parseInt(re.numero_invitados),Ke=Number.isFinite(Sr)&&Sr>0,ur=Ke?w.filter(ne=>{const ke=parseInt(ne.capacidad_minima||"0",10)||0,Te=parseInt(ne.capacidad_maxima||"0",10)||0,Ae=Sr>=ke,ue=!Te||Sr<=Te;return Ae&&ue}):[],lr=Ke?j.filter(ne=>!ne.capacidad||parseInt(ne.capacidad)>=Sr):[],Fr=Ke?w.length===0&&I?"Cargando planes...":w.length===0?"No hay planes disponibles":ur.length===0?`No hay planes para ${Sr} invitados`:"Seleccione un plan":"Ingresa nmero de invitados",zr=!Ke||w.length===0||ur.length===0,Qe=Ke?j.length===0&&I?"Cargando salones...":j.length===0?"No hay salones disponibles":lr.length===0?`No hay salones para ${Sr} invitados`:"Seleccione un saln":"Ingresa nmero de invitados",Xe=!Ke||j.length===0||lr.length===0;return I&&!s?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:e.jsx("div",{children:"Cargando datos..."})}):o&&d&&!s?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:e.jsx("div",{children:"Cargando evento..."})}):s&&(s.includes("Sesin expirada")||s.includes("expirado"))&&z.length===0&&w.length===0&&j.length===0?e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("button",{onClick:()=>r("/eventos"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"transparent",color:"#6366f1",border:"1px solid #6366f1",borderRadius:"0.375rem",cursor:"pointer",marginBottom:"1rem"},children:[e.jsx(vi,{size:16}),"Volver"]}),e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:o?"Editar Evento":"Nuevo Evento"})]}),s&&e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"#fef3c7",color:"#92400e",borderRadius:"0.5rem",marginBottom:"1.5rem",border:"1px solid #fbbf24",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"0.5rem"},children:" Sesin Expirada"}),e.jsxs("div",{style:{marginBottom:"1rem"},children:["Tu sesin ha expirado. Por favor, inicia sesin nuevamente para ",o?"editar":"crear"," eventos."]}),e.jsx("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("usuario"),window.location.href="/login"},style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Ir al Login"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("button",{onClick:()=>r("/eventos"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"transparent",color:"#6366f1",border:"1px solid #6366f1",borderRadius:"0.375rem",cursor:"pointer",marginBottom:"1rem"},children:[e.jsx(vi,{size:16}),"Volver"]}),e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:o?"Editar Evento":"Nuevo Evento"}),e.jsx("p",{style:{color:"#6b7280"},children:o?"Actualizar informacin del evento":"Crear un nuevo evento"})]}),s&&e.jsxs("div",{style:{padding:"1rem",backgroundColor:s.includes("Sesin expirada")||s.includes("expirado")?"#fef3c7":s.includes("Algunos datos")||s.includes("Puedes continuar")?"#dbeafe":"#fee2e2",color:s.includes("Sesin expirada")||s.includes("expirado")?"#92400e":s.includes("Algunos datos")||s.includes("Puedes continuar")?"#1e40af":"#dc2626",borderRadius:"0.375rem",marginBottom:"1.5rem",border:`1px solid ${s.includes("Sesin expirada")||s.includes("expirado")?"#fbbf24":s.includes("Algunos datos")||s.includes("Puedes continuar")?"#60a5fa":"#fca5a5"}`},children:[e.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.includes("Sesin expirada")||s.includes("expirado")?"":s.includes("Algunos datos")||s.includes("Puedes continuar")?"":"",s]}),s.includes("Sesin expirada")||s.includes("expirado")?e.jsx("div",{style:{fontSize:"0.875rem",marginTop:"0.5rem"},children:"Por favor, inicia sesin nuevamente para continuar."}):s.includes("Algunos datos")||s.includes("Puedes continuar")?e.jsxs("div",{style:{fontSize:"0.875rem",marginTop:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Puedes continuar creando el evento. Los campos que no se cargaron estarn vacos.",e.jsxs("button",{onClick:h,disabled:I,style:{padding:"0.25rem 0.75rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:I?"not-allowed":"pointer",fontSize:"0.75rem",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(rl,{size:12}),"Recargar"]})]}):s&&!s.includes("Sesin expirada")&&!s.includes("expirado")?e.jsx("div",{style:{fontSize:"0.875rem",marginTop:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:e.jsxs("button",{onClick:h,disabled:I,style:{padding:"0.5rem 1rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:I?"not-allowed":"pointer",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(rl,{size:16}),I?"Recargando...":"Recargar Datos"]})}):null]}),e.jsx("form",{onSubmit:gr,children:e.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Nmero de Invitados"}),e.jsx("input",{type:"number",name:"numero_invitados",value:re.numero_invitados,onChange:ge,min:"1",max:ee||void 0,placeholder:"Ej: 120",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:ee?`Capacidad del saln seleccionado: ${ee} personas`:"Los planes se filtran segn esta cantidad"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Saln"}),e.jsxs("select",{name:"id_salon",value:re.id_salon,onChange:ge,disabled:Xe,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:Xe?"#f3f4f6":"white"},children:[e.jsx("option",{value:"",children:Qe}),lr.map(ne=>e.jsxs("option",{value:ne.id_salon||ne.id,children:[ne.nombre," - Capacidad: ",ne.capacidad||0]},ne.id_salon||ne.id))]}),re.id_salon&&ee&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:["Capacidad del saln: ",ee," personas"]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Plan disponible"}),e.jsxs("select",{name:"plan_id",value:re.plan_id,onChange:ge,disabled:zr,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:zr?"#f3f4f6":"white"},children:[e.jsx("option",{value:"",children:Fr}),ur.map(ne=>e.jsxs("option",{value:ne.id,children:[ne.nombre,"  Min: ",ne.capacidad_minima||0,ne.capacidad_maxima?` - Max: ${ne.capacidad_maxima}`:" - Max: Sin lmite"," "," ",new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(ne.precio_base||0)]},ne.id))]}),re.plan_id&&(K||Z||$)&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:[K&&`Capacidad mnima: ${K} personas`,K&&Z?"  ":"",Z&&`Capacidad mxima: ${Z} personas`,(K||Z)&&$?"  ":"",$&&`Duracin mxima: ${$} horas`]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Fecha del Evento"}),e.jsx("input",{type:"date",name:"fecha_evento",value:re.fecha_evento,onChange:ne=>{ge(ne),s&&s.includes("fecha")&&a("")},min:ce(),disabled:!re.id_salon||G,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:!re.id_salon||G?"#f3f4f6":"white"}}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:re.id_salon?G?"Cargando fechas ocupadas...":X.length>0?`${X.length} ${X.length===1?"fecha tiene eventos":"fechas tienen eventos"} para este saln. La disponibilidad se verifica segn horario al guardar.`:"La fecha debe ser igual o mayor a hoy y se valida disponibilidad segn saln y horario":"Selecciona un saln primero para ver las fechas disponibles"}),X.includes(re.fecha_evento)&&e.jsx("div",{style:{fontSize:"0.75rem",color:"#f59e0b",marginTop:"0.25rem",fontWeight:"500"},children:" Esta fecha tiene eventos. Se verificar la disponibilidad por horario al guardar."})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Cliente *"}),e.jsxs("select",{name:"cliente_id",value:re.cliente_id,onChange:ge,required:!0,disabled:z.length===0&&I,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:z.length===0&&I?"#f3f4f6":"white"},children:[e.jsx("option",{value:"",children:z.length===0&&I?"Cargando clientes...":z.length===0?"No hay clientes disponibles":"Seleccione un cliente"}),z.map(ne=>e.jsx("option",{value:ne.id,children:ne.nombre_completo||ne.email||`Cliente #${ne.id}`},ne.id))]}),z.length===0&&!I&&e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:"No se pudieron cargar los clientes. Puedes crear el evento manualmente ingresando el ID del cliente."})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Tipo de Evento"}),e.jsxs("select",{name:"tipo_evento",value:re.tipo_evento,onChange:ge,disabled:L.length===0&&I,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:L.length===0&&I?"#f3f4f6":"white"},children:[e.jsx("option",{value:"",children:L.length===0&&I?"Cargando tipos...":L.length===0?"No hay tipos disponibles":"Seleccione un tipo"}),L.map(ne=>e.jsx("option",{value:ne.nombre,children:ne.nombre},ne.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Nombre del Evento"}),e.jsx("input",{type:"text",name:"nombre_evento",value:re.nombre_evento,onChange:ge,placeholder:"Nombre descriptivo del evento",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Hora de Inicio"}),e.jsx("input",{type:"time",name:"hora_inicio",value:re.hora_inicio,onChange:ge,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}}),re.hora_inicio&&re.hora_fin&&e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:(()=>{const ne=Ne(re.hora_inicio),ke=Ne(re.hora_fin),Te=U(ne,ke);if(!Te)return"";const Ae=(Te.finMin-Te.inicioMin)/60;return Ae>0?`Duracin: ${Ae.toFixed(1)} horas${$?` (Mx: ${$}h)`:""}`:""})()})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Hora de Fin"}),e.jsx("input",{type:"time",name:"hora_fin",value:re.hora_fin,onChange:ge,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:"Mnimo 2 horas de duracin"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Estado"}),e.jsxs("select",{name:"estado",value:re.estado,onChange:ge,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"cotizacion",children:"Cotizacin"}),e.jsx("option",{value:"confirmado",children:"Confirmado"}),e.jsx("option",{value:"en_proceso",children:"En Proceso"}),e.jsx("option",{value:"completado",children:"Completado"}),e.jsx("option",{value:"cancelado",children:"Cancelado"})]})]})]}),e.jsxs("div",{style:{marginTop:"2rem",padding:"1.5rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#374151"},children:"Productos Adicionales"}),e.jsxs("button",{type:"button",onClick:()=>R(!0),disabled:C.length===0,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:C.length===0?"#d1d5db":"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:C.length===0?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[e.jsx(Ur,{size:16}),"Agregar Producto"]})]}),B.length===0?e.jsx("p",{style:{color:"#6b7280",textAlign:"center",padding:"1rem"},children:"No hay productos adicionales agregados"}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"white",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Producto"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Cantidad"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Precio Unit."}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Subtotal"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Accin"})]})}),e.jsx("tbody",{children:B.map(ne=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb",backgroundColor:"white"},children:[e.jsx("td",{style:{padding:"0.75rem"},children:ne.nombre}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:ne.cantidad}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(ne.precio_unitario)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:"500"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(ne.subtotal)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("button",{type:"button",onClick:()=>Q(ne.producto_id),style:{padding:"0.25rem 0.5rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.75rem"},children:e.jsx(Tr,{size:14})})})]},ne.producto_id))})]})})]}),e.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",backgroundColor:"#f3f4f6",borderRadius:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Precio Plan:"}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(te)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"+ Productos:"}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(B.reduce((ne,ke)=>ne+(parseFloat(ke.subtotal)||0),0))})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"0.5rem",borderTop:"2px solid #d1d5db"},children:[e.jsx("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#374151"},children:"= Total:"}),e.jsx("span",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#6366f1"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(me())})]})]}),E&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:()=>R(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:ne=>ne.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600"},children:"Agregar Producto"}),e.jsx("button",{onClick:()=>R(!1),style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",color:"#6b7280"},children:e.jsx(rr,{size:20})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Producto *"}),e.jsxs("select",{value:ie.producto_id,onChange:ne=>be({...ie,producto_id:ne.target.value}),disabled:C.length===0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:C.length===0?"#f3f4f6":"white"},children:[e.jsx("option",{value:"",children:C.length===0?"No hay productos disponibles":"Seleccione un producto"}),C.map(ne=>e.jsxs("option",{value:ne.id,children:[ne.nombre," - ",new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(ne.precio||0)]},ne.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Cantidad *"}),e.jsx("input",{type:"number",min:"1",value:ie.cantidad,onChange:ne=>be({...ie,cantidad:ne.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>R(!1),style:{padding:"0.75rem 1.5rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"button",onClick:Ie,disabled:!ie.producto_id||!ie.cantidad,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:!ie.producto_id||!ie.cantidad?"#9ca3af":"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:!ie.producto_id||!ie.cantidad?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[e.jsx(Ur,{size:16}),"Agregar"]})]})]})}),e.jsxs("div",{style:{marginTop:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Observaciones"}),e.jsx("textarea",{name:"observaciones",value:re.observaciones,onChange:ge,rows:4,placeholder:"Notas adicionales sobre el evento...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>r("/eventos"),disabled:n,style:{padding:"0.75rem 1.5rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:n?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:n,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:n?"#9ca3af":"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:n?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[e.jsx(it,{size:16}),n?"Guardando...":o?"Actualizar Evento":"Crear Evento"]})]})]})})]})},zv=()=>{const r=_o(),{usuario:t}=st(),o=_r(t==null?void 0:t.rol,[T.COORDINATOR]),n=_r(t==null?void 0:t.rol,[T.ADMIN,T.MANAGER]),[i,s]=c.useState([]),[a,d]=c.useState([]),[u,l]=c.useState(""),[f,g]=c.useState("todos"),[y,z]=c.useState(new Date),[b,w]=c.useState("mes"),[k,j]=c.useState(!0),[p,C]=c.useState(null),S=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],L=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"];c.useEffect(()=>{W()},[u,y,o,n,f,t==null?void 0:t.id]);const W=async()=>{var N;try{j(!0);const ee={incluir_porcentaje_avance:!0};(o&&(t!=null&&t.id)||n&&f==="mios"&&(t!=null&&t.id))&&(ee.coordinador_id=t.id);const[Y,X]=await Promise.all([dr.getAll(ee),jn.getAll(!0)]);let se=Y.eventos||[];if(u){const G=parseInt(u),ye=(N=X.salones)==null?void 0:N.find(ie=>(ie.id_salon||ie.id)===G);se=se.filter(ie=>{let be=null;return ie.id_salon!==void 0&&ie.id_salon!==null&&ie.id_salon!==""?be=parseInt(ie.id_salon):ie.salon_id!==void 0&&ie.salon_id!==null&&ie.salon_id!==""&&(be=parseInt(ie.salon_id)),be!==null&&!isNaN(be)?be===G:!!(ye&&ie.nombre_salon&&ie.nombre_salon===ye.nombre||ye&&ie.salon&&ie.salon.includes(ye.nombre))})}se=se.filter(G=>G.estado!=="cancelado"),s(se),d(X.salones||[])}catch(ee){console.error("Error al cargar datos:",ee)}finally{j(!1)}},I=N=>({cotizacion:"#6b7280",confirmado:"#10b981",en_proceso:"#3b82f6",completado:"#8b5cf6",cancelado:"#ef4444"})[N]||"#6b7280",m=N=>{const ee=B(N);return i.filter(Y=>Y.fecha_evento===ee)},B=N=>{if(typeof N=="string")return N;const ee=N.getFullYear(),Y=String(N.getMonth()+1).padStart(2,"0"),X=String(N.getDate()).padStart(2,"0");return`${ee}-${Y}-${X}`},H=()=>{const N=new Date(y.getFullYear(),y.getMonth(),1),Y=new Date(y.getFullYear(),y.getMonth()+1,0).getDate(),X=N.getDay(),se=[],ye=new Date(y.getFullYear(),y.getMonth(),0).getDate();for(let be=X-1;be>=0;be--)se.push(new Date(y.getFullYear(),y.getMonth()-1,ye-be));for(let be=1;be<=Y;be++)se.push(new Date(y.getFullYear(),y.getMonth(),be));const ie=42-se.length;for(let be=1;be<=ie;be++)se.push(new Date(y.getFullYear(),y.getMonth()+1,be));return se},E=N=>{const ee=new Date(y);ee.setMonth(ee.getMonth()+N),z(ee)},R=N=>{const ee=new Date(y);ee.setFullYear(ee.getFullYear()+N),z(ee)},te=()=>{z(new Date)},F=N=>N.length===0?{backgroundColor:"transparent",color:"#374151"}:N.length===1?{backgroundColor:`${I(N[0].estado)}20`,color:I(N[0].estado)}:{backgroundColor:"#f59e0b30",color:"#f59e0b",fontWeight:"600"},K=N=>{const ee=new Date;return N.toDateString()===ee.toDateString()},D=N=>N.getMonth()===y.getMonth()&&N.getFullYear()===y.getFullYear(),Z=()=>{const N=H(),ee={};return N.forEach(Y=>{const X=B(Y);ee[X]=m(X)}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.5rem"},children:[L.map(Y=>e.jsx("div",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"600",fontSize:"0.875rem",color:"#374151",backgroundColor:"#f9fafb"},children:Y},Y)),N.map((Y,X)=>{const se=B(Y),G=ee[se]||[],ye=F(G),ie=K(Y),be=D(Y);return e.jsxs("div",{onClick:()=>{G.length>0&&C({fecha:Y,eventos:G})},style:{minHeight:"100px",padding:"0.5rem",border:ie?"2px solid #6366f1":"1px solid #e5e7eb",borderRadius:"0.375rem",backgroundColor:be?ye.backgroundColor:"#f9fafb",color:be?ye.color:"#9ca3af",cursor:G.length>0?"pointer":"default",transition:"all 0.2s",position:"relative",opacity:be?1:.5},onMouseEnter:ce=>{G.length>0&&(ce.currentTarget.style.transform="scale(1.02)",ce.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)")},onMouseLeave:ce=>{ce.currentTarget.style.transform="scale(1)",ce.currentTarget.style.boxShadow="none"},children:[e.jsx("div",{style:{fontWeight:ie?"700":"500",marginBottom:"0.25rem"},children:Y.getDate()}),e.jsx("div",{style:{fontSize:"0.75rem"},children:G.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.125rem"},children:[G.length," ",G.length===1?"evento":"eventos"]}),G.slice(0,2).map((ce,re)=>e.jsxs("div",{style:{fontSize:"0.7rem",padding:"0.125rem 0.25rem",marginBottom:"0.125rem",backgroundColor:I(ce.estado),color:"white",borderRadius:"0.25rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:`${ce.nombre_evento||"Evento"} (${ce.estado})${ce.porcentaje_avance_servicios!==void 0&&ce.porcentaje_avance_servicios!==null?` - Avance: ${ce.porcentaje_avance_servicios}%`:""}`,children:[ce.nombre_evento||"Evento"," (",ce.estado,")",ce.porcentaje_avance_servicios!==void 0&&ce.porcentaje_avance_servicios!==null&&e.jsxs("span",{style:{marginLeft:"0.25rem",fontSize:"0.65rem",opacity:.9},children:[" ",ce.porcentaje_avance_servicios,"%"]})]},ce.id_evento||ce.id||re)),G.length>2&&e.jsxs("div",{style:{fontSize:"0.65rem",color:ye.color,fontWeight:"600"},children:["+",G.length-2," ms"]})]})})]},X)})]})},P=()=>{const N=[];for(let ee=0;ee<12;ee++)N.push(ee);return e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1.5rem"},children:N.map(ee=>{const Y=new Date(y.getFullYear(),ee,1),X=$(Y);return e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"1rem"},children:[e.jsx("h3",{style:{marginBottom:"0.75rem",fontSize:"1rem",fontWeight:"600",color:"#374151"},children:S[ee]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.25rem",fontSize:"0.75rem"},children:[L.map(se=>e.jsx("div",{style:{textAlign:"center",fontWeight:"600",color:"#6b7280",padding:"0.25rem"},children:se[0]},se)),X.map((se,G)=>{const ye=B(se),ie=m(ye),be=ie.length>0?F(ie):{backgroundColor:"transparent",color:"#374151"};return e.jsx("div",{style:{aspectRatio:"1",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"0.25rem",backgroundColor:be.backgroundColor,color:be.color,fontSize:"0.7rem",fontWeight:ie.length>0?"600":"400",cursor:ie.length>0?"pointer":"default"},onClick:()=>{ie.length>0&&(z(new Date(ye)),w("mes"),C({fecha:se,eventos:ie}))},title:ie.length>0?`${ie.length} eventos`:"",children:se.getDate()},G)})]})]},ee)})})},$=N=>{const ee=new Date(N.getFullYear(),N.getMonth(),1),X=new Date(N.getFullYear(),N.getMonth()+1,0).getDate(),se=ee.getDay(),G=[],ie=new Date(N.getFullYear(),N.getMonth(),0).getDate();for(let ce=se-1;ce>=0;ce--)G.push(new Date(N.getFullYear(),N.getMonth()-1,ie-ce));for(let ce=1;ce<=X;ce++)G.push(new Date(N.getFullYear(),N.getMonth(),ce));const be=42-G.length;for(let ce=1;ce<=be;ce++)G.push(new Date(N.getFullYear(),N.getMonth()+1,ce));return G};return k?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando calendario..."}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Calendario de Eventos"}),e.jsx("p",{style:{color:"#6b7280"},children:"Visualiza todos los eventos agendados"})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[n&&e.jsxs("select",{value:f,onChange:N=>g(N.target.value),style:{padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"todos",children:"Todos los eventos"}),e.jsx("option",{value:"mios",children:"Mis eventos"})]}),e.jsxs("select",{value:u,onChange:N=>l(N.target.value),style:{padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"",children:"Todos los salones"}),a.map(N=>e.jsx("option",{value:N.id_salon||N.id,children:N.nombre},N.id_salon||N.id))]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>w("mes"),style:{padding:"0.5rem 1rem",backgroundColor:b==="mes"?"#6366f1":"#f3f4f6",color:b==="mes"?"white":"#374151",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Vista Mensual"}),e.jsx("button",{onClick:()=>w("ao"),style:{padding:"0.5rem 1rem",backgroundColor:b==="ao"?"#6366f1":"#f3f4f6",color:b==="ao"?"white":"#374151",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Vista Anual"})]})]}),b==="mes"?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("button",{onClick:()=>E(-1),style:{padding:"0.5rem",backgroundColor:"#f3f4f6",border:"none",borderRadius:"0.375rem",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(zp,{size:20})}),e.jsx("div",{style:{minWidth:"200px",textAlign:"center"},children:e.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#374151"},children:[S[y.getMonth()]," ",y.getFullYear()]})}),e.jsx("button",{onClick:()=>E(1),style:{padding:"0.5rem",backgroundColor:"#f3f4f6",border:"none",borderRadius:"0.375rem",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(oi,{size:20})}),e.jsx("button",{onClick:te,style:{padding:"0.5rem 1rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Hoy"})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("button",{onClick:()=>R(-1),style:{padding:"0.5rem",backgroundColor:"#f3f4f6",border:"none",borderRadius:"0.375rem",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(zp,{size:20})}),e.jsx("div",{style:{minWidth:"100px",textAlign:"center"},children:e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#374151"},children:y.getFullYear()})}),e.jsx("button",{onClick:()=>R(1),style:{padding:"0.5rem",backgroundColor:"#f3f4f6",border:"none",borderRadius:"0.375rem",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(oi,{size:20})}),e.jsx("button",{onClick:te,style:{padding:"0.5rem 1rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Hoy"})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",marginBottom:"1.5rem",display:"flex",gap:"1.5rem",flexWrap:"wrap",fontSize:"0.875rem"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#374151"},children:"Leyenda:"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#6b728020",borderRadius:"0.25rem"}}),e.jsx("span",{children:"Cotizacin"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#10b98120",borderRadius:"0.25rem"}}),e.jsx("span",{children:"Confirmado"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#3b82f620",borderRadius:"0.25rem"}}),e.jsx("span",{children:"En Proceso"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#8b5cf620",borderRadius:"0.25rem"}}),e.jsx("span",{children:"Completado"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#f59e0b30",borderRadius:"0.25rem"}}),e.jsx("span",{children:"Mltiples Eventos"})]})]}),e.jsx("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:b==="mes"?Z():P()}),p&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>C(null),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflowY:"auto"},onClick:N=>N.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#374151"},children:["Eventos del ",p.fecha.getDate()," de ",S[p.fecha.getMonth()]," ",p.fecha.getFullYear()]}),e.jsx("button",{onClick:()=>C(null),style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#6b7280"},children:""})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:p.eventos.map(N=>e.jsxs("div",{onClick:()=>{r(`/eventos/${N.id_evento||N.id}`),C(null)},style:{padding:"1rem",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:"pointer",transition:"all 0.2s",backgroundColor:`${I(N.estado)}10`},onMouseEnter:ee=>{ee.currentTarget.style.borderColor=I(N.estado),ee.currentTarget.style.transform="translateX(4px)"},onMouseLeave:ee=>{ee.currentTarget.style.borderColor="#e5e7eb",ee.currentTarget.style.transform="translateX(0)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"0.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#374151",margin:0},children:N.nombre_evento||"Evento sin nombre"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"600",backgroundColor:I(N.estado),color:"white",textTransform:"capitalize"},children:N.estado})]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280",display:"flex",flexDirection:"column",gap:"0.25rem"},children:[N.nombre_cliente&&e.jsxs("div",{children:["Cliente: ",N.nombre_cliente]}),N.nombre_salon&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Tn,{size:14}),N.nombre_salon]}),N.hora_inicio&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Wn,{size:14}),N.hora_inicio," ",N.hora_fin?`- ${N.hora_fin}`:""]}),N.numero_invitados&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(dn,{size:14}),N.numero_invitados," invitados"]})]})]},N.id_evento||N.id))})]})})]})},Ev=()=>{const{toasts:r,removeToast:t,error:o}=Ar(),[n,i]=c.useState(null),[s,a]=c.useState([]),[d,u]=c.useState(!0),[l,f]=c.useState(""),[g,y]=c.useState([]),z=7;c.useEffect(()=>{(async()=>{var R,te;try{u(!0);const K=(await lo.getMe()).cliente;if(i(K),K){const D=K.id||K.cliente_id,Z=await dr.getAll({cliente_id:D,incluir_porcentaje_avance:!0});a(Z.eventos||[])}else a([]);f("")}catch(F){const K=((te=(R=F.response)==null?void 0:R.data)==null?void 0:te.error)||"No se pudo cargar la informacin del cliente";f(K),o(K)}finally{u(!1)}})()},[o]),c.useEffect(()=>{const E=(n==null?void 0:n.id)||(n==null?void 0:n.cliente_id);if(!E){y([]);return}try{const R=JSON.parse(localStorage.getItem(`alertas_eventos_vistas_${E}`)||"[]");y(Array.isArray(R)?R:[])}catch{y([])}},[n]);const b=E=>{if(!E)return"-";try{return new Date(E).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"numeric"})}catch{return E}},w=E=>{if(!E)return"-";if(typeof E=="string"&&E.includes(":")){const R=E.split(":");return`${R[0]}:${R[1]}`}return E},k=E=>{if(!E)return null;if(typeof E=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(E)){const[R,te,F]=E.split("-").map(Number);return new Date(R,te-1,F)}return new Date(E)},j=E=>{const R=k(E);if(!R||Number.isNaN(R.getTime()))return null;const te=new Date;te.setHours(0,0,0,0);const F=R.getTime()-te.getTime();return Math.ceil(F/(1e3*60*60*24))},p=E=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(E||0),C=c.useMemo(()=>[...s].sort((E,R)=>new Date(E.fecha_evento).getTime()-new Date(R.fecha_evento).getTime()),[s]),S=new Date,L=C.filter(E=>E.fecha_evento?new Date(E.fecha_evento)>=S:!1),W=s.reduce((E,R)=>E+(parseFloat(R.saldo||0)||0),0),I=c.useMemo(()=>{const E=new Set(["cancelado","completado"]);return C.filter(R=>R.fecha_evento&&!E.has(R.estado)).map(R=>({...R,diasRestantes:j(R.fecha_evento)})).filter(R=>{if(R.diasRestantes===null)return!1;const te=R.id_evento||R.id;return R.diasRestantes>=0&&R.diasRestantes<=z&&!g.includes(te)})},[C,g]),m=E=>{const R=(n==null?void 0:n.id)||(n==null?void 0:n.cliente_id);y(E),R&&localStorage.setItem(`alertas_eventos_vistas_${R}`,JSON.stringify(E))},B=E=>{if(!E)return;const R=Array.from(new Set([...g,E]));m(R)},H=()=>{const E=I.map(te=>te.id_evento||te.id).filter(Boolean);if(E.length===0)return;const R=Array.from(new Set([...g,...E]));m(R)};return d?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando tu portal..."}):e.jsxs("div",{children:[e.jsx(Lr,{toasts:r,removeToast:t}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Mi evento"}),e.jsx("p",{style:{color:"#6b7280"},children:n!=null&&n.nombre_completo?`Hola ${n.nombre_completo}`:"Consulta el estado de tus eventos"})]}),l&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:l}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Eventos registrados"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:s.length})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Prximos eventos"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:L.length})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Saldo pendiente"}),e.jsx("div",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#ef4444"},children:p(W)})]})]}),I.length>0&&e.jsxs("div",{style:{backgroundColor:"#fff7ed",borderRadius:"0.75rem",border:"1px solid #fed7aa",padding:"1rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ut,{size:18,color:"#f97316"}),e.jsx("strong",{style:{color:"#9a3412"},children:"Alertas de eventos prximos"})]}),e.jsx("button",{onClick:H,style:{padding:"0.4rem 0.75rem",borderRadius:"0.375rem",border:"1px solid #fdba74",backgroundColor:"white",color:"#9a3412",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"Marcar todas como revisadas"})]}),e.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:I.map(E=>{const R=E.id_evento||E.id;return e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #fde68a",padding:"0.75rem",display:"flex",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#111827"},children:E.nombre_evento||"Evento"}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[b(E.fecha_evento),"  ",w(E.hora_inicio)]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#9a3412"},children:["Faltan ",E.diasRestantes," da",E.diasRestantes===1?"":"s"]})]}),e.jsx("button",{onClick:()=>B(R),style:{padding:"0.4rem 0.75rem",borderRadius:"0.375rem",border:"1px solid #fdba74",backgroundColor:"#fff7ed",color:"#9a3412",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600",alignSelf:"flex-start"},children:"Revisado"})]},R)})})]}),C.length===0?e.jsx("div",{style:{padding:"2rem",backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",textAlign:"center",color:"#6b7280"},children:"No tienes eventos registrados todava."}):e.jsx("div",{style:{display:"grid",gap:"1rem"},children:C.map(E=>{const R=E.progreso_servicios??E.porcentaje_avance_servicios??0;return e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",border:"1px solid #e5e7eb",padding:"1.5rem",display:"grid",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700"},children:E.nombre_evento||"Evento"}),e.jsx("div",{style:{color:"#6b7280",fontSize:"0.85rem",marginTop:"0.25rem"},children:E.tipo_evento||"Evento social"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ut,{size:16,color:"#6b7280"}),e.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"600",textTransform:"capitalize"},children:E.estado||"-"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_t,{size:16,color:"#6b7280"}),e.jsx("span",{style:{fontSize:"0.85rem"},children:b(E.fecha_evento)})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Wn,{size:16,color:"#6b7280"}),e.jsxs("span",{style:{fontSize:"0.85rem"},children:[w(E.hora_inicio),E.hora_fin?` - ${w(E.hora_fin)}`:""]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Tn,{size:16,color:"#6b7280"}),e.jsx("span",{style:{fontSize:"0.85rem"},children:E.nombre_salon||E.salon||"-"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Gt,{size:16,color:"#6b7280"}),e.jsx("span",{style:{fontSize:"0.85rem"},children:E.nombre_plan||"Plan no definido"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8rem",color:"#6b7280"},children:[e.jsx("span",{children:"Avance del evento"}),e.jsxs("span",{children:[R,"%"]})]}),e.jsx("div",{style:{width:"100%",height:"8px",backgroundColor:"#e5e7eb",borderRadius:"9999px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${R}%`,height:"100%",backgroundColor:R>=100?"#10b981":"#6366f1",transition:"width 0.3s"}})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{style:{fontSize:"0.9rem",color:"#374151"},children:["Saldo pendiente: ",e.jsx("strong",{children:p(parseFloat(E.saldo||0)||0)})]}),e.jsx(Gr,{to:`/eventos/${E.id_evento||E.id}`,style:{padding:"0.5rem 1rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",textDecoration:"none",fontSize:"0.85rem",fontWeight:"600"},children:"Ver detalle"})]})]},E.id_evento||E.id)})})]})},Rv=()=>{const{usuario:r}=st(),{toasts:t,removeToast:o,error:n,success:i}=Ar(),[s,a]=c.useState(null),[d,u]=c.useState(null),[l,f]=c.useState(!0),[g,y]=c.useState(!1),[z,b]=c.useState(!1),[w,k]=c.useState({nombre_completo:"",email:"",telefono:""}),[j,p]=c.useState({nueva_contrasena:"",confirmar_contrasena:""}),[C,S]=c.useState("");c.useEffect(()=>{(async()=>{var m,B;try{if(f(!0),r!=null&&r.id){const E=(await dt.getById(r.id)).usuario||r;a(E),k({nombre_completo:(E==null?void 0:E.nombre_completo)||"",email:(E==null?void 0:E.email)||"",telefono:(E==null?void 0:E.telefono)||""})}else a(r||null),k({nombre_completo:(r==null?void 0:r.nombre_completo)||"",email:(r==null?void 0:r.email)||"",telefono:(r==null?void 0:r.telefono)||""});try{const H=await lo.getMe();u(H.cliente||null)}catch{u(null)}}catch(H){const E=((B=(m=H.response)==null?void 0:m.data)==null?void 0:B.error)||"No se pudo cargar el perfil";n(E)}finally{f(!1)}})()},[r==null?void 0:r.id,r,n]);const L=async I=>{var m,B;if(I.preventDefault(),!!(s!=null&&s.id))try{y(!0);const H={nombre_completo:w.nombre_completo,email:w.email||null,telefono:w.telefono||null,rol:s.rol,activo:s.activo!==void 0?s.activo:!0},E=await dt.update(s.id,H);a(E.usuario||{...s,...H}),i("Perfil actualizado")}catch(H){const E=((B=(m=H.response)==null?void 0:m.data)==null?void 0:B.error)||"No se pudo actualizar el perfil";n(E)}finally{y(!1)}},W=async I=>{var m,B;if(I.preventDefault(),S(""),!!(s!=null&&s.id)){if(!j.nueva_contrasena){S("La nueva contrasea es requerida.");return}if(j.nueva_contrasena!==j.confirmar_contrasena){S("Las contraseas no coinciden.");return}try{b(!0),await dt.cambiarContrasena(s.id,j.nueva_contrasena),p({nueva_contrasena:"",confirmar_contrasena:""}),i("Contrasea actualizada")}catch(H){const E=((B=(m=H.response)==null?void 0:m.data)==null?void 0:B.error)||"No se pudo cambiar la contrasea";n(E)}finally{b(!1)}}};return l?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando perfil..."}):e.jsxs("div",{children:[e.jsx(Lr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Mi perfil"}),e.jsx("p",{style:{color:"#6b7280"},children:"Consulta tu informacin personal y de cuenta."})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid #e5e7eb"},children:[e.jsx("h2",{style:{fontSize:"1.1rem",fontWeight:"700",marginBottom:"1rem"},children:"Cuenta"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(mo,{size:18,color:"#6b7280"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Nombre"}),e.jsx("div",{style:{fontWeight:"600"},children:(s==null?void 0:s.nombre_completo)||"-"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(jt,{size:18,color:"#6b7280"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Usuario"}),e.jsx("div",{style:{fontWeight:"600"},children:(s==null?void 0:s.nombre_usuario)||"-"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(_l,{size:18,color:"#6b7280"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Email"}),e.jsx("div",{style:{fontWeight:"600"},children:(s==null?void 0:s.email)||"-"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Wg,{size:18,color:"#6b7280"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Telfono"}),e.jsx("div",{style:{fontWeight:"600"},children:(s==null?void 0:s.telefono)||"-"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(lv,{size:18,color:"#6b7280"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Rol"}),e.jsx("div",{style:{fontWeight:"600",textTransform:"capitalize"},children:(s==null?void 0:s.rol)||"-"})]})]})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid #e5e7eb"},children:[e.jsx("h2",{style:{fontSize:"1.1rem",fontWeight:"700",marginBottom:"1rem"},children:"Editar perfil"}),e.jsxs("form",{onSubmit:L,style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["Nombre completo",e.jsx("input",{type:"text",value:w.nombre_completo,onChange:I=>k({...w,nombre_completo:I.target.value}),style:{width:"100%",marginTop:"0.35rem",padding:"0.6rem",borderRadius:"0.375rem",border:"1px solid #d1d5db"}})]}),e.jsxs("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["Email",e.jsx("input",{type:"email",value:w.email,onChange:I=>k({...w,email:I.target.value}),style:{width:"100%",marginTop:"0.35rem",padding:"0.6rem",borderRadius:"0.375rem",border:"1px solid #d1d5db"}})]}),e.jsxs("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["Telfono",e.jsx("input",{type:"text",value:w.telefono,onChange:I=>k({...w,telefono:I.target.value}),style:{width:"100%",marginTop:"0.35rem",padding:"0.6rem",borderRadius:"0.375rem",border:"1px solid #d1d5db"}})]}),e.jsx("button",{type:"submit",disabled:g,style:{marginTop:"0.5rem",padding:"0.65rem 1rem",borderRadius:"0.4rem",border:"none",backgroundColor:"#6366f1",color:"white",fontWeight:"600",cursor:g?"not-allowed":"pointer"},children:g?"Guardando...":"Guardar cambios"})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid #e5e7eb"},children:[e.jsx("h2",{style:{fontSize:"1.1rem",fontWeight:"700",marginBottom:"1rem"},children:"Cambiar contrasea"}),e.jsxs("form",{onSubmit:W,style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["Nueva contrasea",e.jsx("input",{type:"password",value:j.nueva_contrasena,onChange:I=>p({...j,nueva_contrasena:I.target.value}),style:{width:"100%",marginTop:"0.35rem",padding:"0.6rem",borderRadius:"0.375rem",border:"1px solid #d1d5db"}})]}),e.jsxs("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["Confirmar contrasea",e.jsx("input",{type:"password",value:j.confirmar_contrasena,onChange:I=>p({...j,confirmar_contrasena:I.target.value}),style:{width:"100%",marginTop:"0.35rem",padding:"0.6rem",borderRadius:"0.375rem",border:"1px solid #d1d5db"}})]}),C&&e.jsx("div",{style:{color:"#dc2626",fontSize:"0.85rem"},children:C}),e.jsx("button",{type:"submit",disabled:z,style:{marginTop:"0.5rem",padding:"0.65rem 1rem",borderRadius:"0.4rem",border:"none",backgroundColor:"#111827",color:"white",fontWeight:"600",cursor:z?"not-allowed":"pointer"},children:z?"Actualizando...":"Actualizar contrasea"})]})]}),d&&e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid #e5e7eb"},children:[e.jsx("h2",{style:{fontSize:"1.1rem",fontWeight:"700",marginBottom:"1rem"},children:"Datos de cliente"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Documento"}),e.jsx("div",{style:{fontWeight:"600"},children:(d==null?void 0:d.documento_identidad)||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Direccin"}),e.jsx("div",{style:{fontWeight:"600"},children:(d==null?void 0:d.direccion)||"-"})]})]})]})]})]})},Av=()=>{const{usuario:r}=st(),{toasts:t,removeToast:o,success:n,error:i}=Ar(),[s,a]=c.useState([]),d=go(),[u,l]=c.useState(!0),[f,g]=c.useState(""),[y,z]=c.useState(""),[b,w]=c.useState(!1),[k,j]=c.useState(!1),[p,C]=c.useState(!1),[S,L]=c.useState(!1),[W,I]=c.useState(null),[m,B]=c.useState({nombre_usuario:"",contrasena:"",nombre_completo:"",email:"",telefono:"",documento_identidad:"",direccion:"",fecha_nacimiento:"",pais:"Ecuador",provincia:"Guayas",ciudad:"Guayaquil"}),[H,E]=c.useState(!1),[R,te]=c.useState(""),F=_r(r==null?void 0:r.rol,[T.ADMIN,T.MANAGER,T.COORDINATOR]),K=_r(r==null?void 0:r.rol,[T.ADMIN,T.MANAGER,T.COORDINATOR]),D=_r(r==null?void 0:r.rol,[T.ADMIN,T.MANAGER]);c.useEffect(()=>{Z()},[]);const Z=async()=>{var x,h;try{l(!0);const J=await lo.getAll();a(J.clientes||[]),g("")}catch(J){const fe=((h=(x=J.response)==null?void 0:x.data)==null?void 0:h.error)||J.message||"Error al cargar los clientes";g(fe),console.error(J)}finally{l(!1)}},P=s.filter(x=>{var J,fe,ge,Re;if(!y)return!0;const h=y.toLowerCase();return((J=x.nombre_completo)==null?void 0:J.toLowerCase().includes(h))||((fe=x.email)==null?void 0:fe.toLowerCase().includes(h))||((ge=x.documento_identidad)==null?void 0:ge.toString().includes(y))||((Re=x.telefono)==null?void 0:Re.includes(y))}),$=()=>({nombre_usuario:"",contrasena:"",nombre_completo:"",email:"",telefono:"",documento_identidad:"",direccion:"",fecha_nacimiento:"",pais:"Ecuador",provincia:"Guayas",ciudad:"Guayaquil"}),N=()=>{B($()),te(""),w(!0)},ee=()=>{w(!1),B($()),te("")},Y=x=>{I(x),B({nombre_completo:x.nombre_completo||"",email:x.email||"",telefono:x.telefono||"",documento_identidad:x.documento_identidad||"",direccion:x.direccion||"",fecha_nacimiento:x.fecha_nacimiento?x.fecha_nacimiento.split("T")[0]:"",pais:x.pais||"Ecuador",provincia:x.provincia||"Guayas",ciudad:x.ciudad||"Guayaquil"}),te(""),j(!0)},X=()=>{j(!1),I(null),B($()),te("")},se=x=>{I(x),C(!0)},G=()=>{C(!1),I(null)},ye=x=>{I(x),L(!0)},ie=()=>{L(!1),I(null)},be=async x=>{var h,J;if(x.preventDefault(),te(""),!m.nombre_usuario||!m.contrasena||!m.nombre_completo){te("Los campos nombre de usuario, contrasea y nombre completo son requeridos");return}if(m.contrasena.length<6){te("La contrasea debe tener al menos 6 caracteres");return}try{E(!0),await lo.create(m),await Z(),ee(),n("Cliente creado exitosamente")}catch(fe){const ge=((J=(h=fe.response)==null?void 0:h.data)==null?void 0:J.error)||"Error al crear el cliente";te(ge),console.error(fe)}finally{E(!1)}},ce=async x=>{var h,J;if(x.preventDefault(),te(""),!m.nombre_completo){te("El nombre completo es requerido");return}try{E(!0),await lo.update(W.id,m),await Z(),X(),n("Cliente actualizado exitosamente")}catch(fe){const ge=((J=(h=fe.response)==null?void 0:h.data)==null?void 0:J.error)||"Error al actualizar el cliente";te(ge),console.error(fe)}finally{E(!1)}},re=async()=>{var x,h;try{E(!0),await lo.delete(W.id),await Z(),ie(),n("Cliente eliminado exitosamente")}catch(J){const fe=((h=(x=J.response)==null?void 0:x.data)==null?void 0:h.error)||"Error al eliminar el cliente";i(fe),console.error(J)}finally{E(!1)}};return u?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando clientes..."}):e.jsxs("div",{children:[e.jsx(Lr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:d?"1.5rem":"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Clientes"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de clientes"})]}),F&&e.jsxs("button",{onClick:N,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:x=>x.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:x=>x.currentTarget.style.backgroundColor="#6366f1",children:[e.jsx(Ur,{size:20}),"Nuevo Cliente"]})]}),f&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:f}),e.jsxs("div",{style:{marginBottom:"1.5rem",position:"relative",maxWidth:d?"100%":"400px"},children:[e.jsx(Rt,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar clientes...",value:y,onChange:x=>z(x.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",overflow:"hidden"},children:d?e.jsx("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:P.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:y?"No se encontraron clientes con ese criterio":"No hay clientes disponibles"}):P.map(x=>e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"1rem",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06)",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"50%",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(mo,{size:18,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#111827"},children:x.nombre_completo||"-"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:x.documento_identidad||"-"})]})]}),e.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[e.jsxs("div",{style:{fontSize:"0.85rem"},children:[e.jsx("strong",{children:"Email:"})," ",x.email||"-"]}),e.jsxs("div",{style:{fontSize:"0.85rem"},children:[e.jsx("strong",{children:"Telfono:"})," ",x.telefono||"-"]}),e.jsxs("div",{style:{fontSize:"0.85rem"},children:[e.jsx("strong",{children:"Direccin:"})," ",x.direccion||"-"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>se(x),style:{padding:"0.5rem 0.75rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(St,{size:16,strokeWidth:2.5}),"Ver"]}),K&&e.jsxs("button",{onClick:()=>Y(x),style:{padding:"0.5rem 0.75rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(Jt,{size:16,strokeWidth:2.5}),"Editar"]}),D&&e.jsxs("button",{onClick:()=>ye(x),style:{padding:"0.5rem 0.75rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(Tr,{size:16,strokeWidth:2.5}),"Eliminar"]})]})]},x.id))}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Cliente"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Documento"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Email"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Telfono"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Direccin"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:P.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:y?"No se encontraron clientes con ese criterio":"No hay clientes disponibles"})}):P.map(x=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"50%",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(mo,{size:20,color:"#6366f1"})}),e.jsx("div",{children:e.jsx("div",{style:{fontWeight:"500"},children:x.nombre_completo||"-"})})]})}),e.jsx("td",{style:{padding:"1rem"},children:x.documento_identidad||"-"}),e.jsx("td",{style:{padding:"1rem"},children:x.email||"-"}),e.jsx("td",{style:{padding:"1rem"},children:x.telefono||"-"}),e.jsx("td",{style:{padding:"1rem",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:x.direccion||"-"}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>se(x),style:{padding:"0.5rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:h=>h.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:h=>h.currentTarget.style.backgroundColor="#3b82f6",title:"Ver Detalle",children:e.jsx(St,{size:18,strokeWidth:2.5})}),K&&e.jsx("button",{onClick:()=>Y(x),style:{padding:"0.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:h=>h.currentTarget.style.backgroundColor="#059669",onMouseLeave:h=>h.currentTarget.style.backgroundColor="#10b981",title:"Editar",children:e.jsx(Jt,{size:18,strokeWidth:2.5})}),D&&e.jsx("button",{onClick:()=>ye(x),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:h=>h.currentTarget.style.backgroundColor="#dc2626",onMouseLeave:h=>h.currentTarget.style.backgroundColor="#ef4444",title:"Eliminar",children:e.jsx(Tr,{size:18,strokeWidth:2.5})})]})})]},x.id))})]})})}),b&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:ee,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Nuevo Cliente"}),e.jsx("button",{onClick:ee,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),R&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:R}),e.jsxs("form",{onSubmit:be,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre de Usuario ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:m.nombre_usuario,onChange:x=>B({...m,nombre_usuario:x.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Contrasea ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"password",value:m.contrasena,onChange:x=>B({...m,contrasena:x.target.value}),required:!0,minLength:6,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre Completo ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:m.nombre_completo,onChange:x=>B({...m,nombre_completo:x.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Email"}),e.jsx("input",{type:"email",value:m.email,onChange:x=>B({...m,email:x.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Telfono"}),e.jsx("input",{type:"tel",value:m.telefono,onChange:x=>B({...m,telefono:x.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Documento de Identidad"}),e.jsx("input",{type:"text",value:m.documento_identidad,onChange:x=>B({...m,documento_identidad:x.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Fecha de Nacimiento"}),e.jsx("input",{type:"date",value:m.fecha_nacimiento,onChange:x=>B({...m,fecha_nacimiento:x.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Pas"}),e.jsx("input",{type:"text",value:m.pais,onChange:x=>B({...m,pais:x.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Provincia"}),e.jsx("input",{type:"text",value:m.provincia,onChange:x=>B({...m,provincia:x.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Ciudad"}),e.jsx("input",{type:"text",value:m.ciudad,onChange:x=>B({...m,ciudad:x.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Direccin"}),e.jsx("textarea",{value:m.direccion,onChange:x=>B({...m,direccion:x.target.value}),rows:2,placeholder:"Calle, nmero, sector...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:ee,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:H,style:{padding:"0.75rem 1.5rem",backgroundColor:H?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:H?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),H?"Guardando...":"Guardar"]})]})]})]})}),k&&W&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:X,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Editar Cliente"}),e.jsx("button",{onClick:X,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),R&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:R}),e.jsxs("form",{onSubmit:ce,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre Completo ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:m.nombre_completo,onChange:x=>B({...m,nombre_completo:x.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Email"}),e.jsx("input",{type:"email",value:m.email,onChange:x=>B({...m,email:x.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Telfono"}),e.jsx("input",{type:"tel",value:m.telefono,onChange:x=>B({...m,telefono:x.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Documento de Identidad"}),e.jsx("input",{type:"text",value:m.documento_identidad,onChange:x=>B({...m,documento_identidad:x.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Fecha de Nacimiento"}),e.jsx("input",{type:"date",value:m.fecha_nacimiento,onChange:x=>B({...m,fecha_nacimiento:x.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Pas"}),e.jsx("input",{type:"text",value:m.pais,onChange:x=>B({...m,pais:x.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Provincia"}),e.jsx("input",{type:"text",value:m.provincia,onChange:x=>B({...m,provincia:x.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Ciudad"}),e.jsx("input",{type:"text",value:m.ciudad,onChange:x=>B({...m,ciudad:x.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Direccin"}),e.jsx("textarea",{value:m.direccion,onChange:x=>B({...m,direccion:x.target.value}),rows:2,placeholder:"Calle, nmero, sector...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:X,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:H,style:{padding:"0.75rem 1.5rem",backgroundColor:H?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:H?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),H?"Guardando...":"Guardar Cambios"]})]})]})]})}),p&&W&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:G,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Detalle del Cliente"}),e.jsx("button",{onClick:G,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{width:"4rem",height:"4rem",borderRadius:"50%",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(mo,{size:32,color:"#6366f1"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:W.nombre_completo||"N/A"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:W.edad?`${W.edad} aos`:"Cliente"})]}),W.cantidad_eventos_completados>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"#fef3c7",padding:"0.5rem 1rem",borderRadius:"2rem"},children:[e.jsx(F5,{size:18,color:"#d97706"}),e.jsxs("span",{style:{fontWeight:"600",color:"#92400e"},children:[W.cantidad_eventos_completados," evento",W.cantidad_eventos_completados>1?"s":""]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Documento de Identidad"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:W.documento_identidad||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Fecha de Nacimiento"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:W.fecha_nacimiento?new Date(W.fecha_nacimiento+"T00:00:00").toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Email"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:W.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Telfono"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:W.telefono||"N/A"})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.5rem",display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[e.jsx(Tn,{size:20,color:"#6b7280",style:{marginTop:"2px"}}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"500",marginBottom:"0.25rem"},children:[W.ciudad||"Guayaquil",", ",W.provincia||"Guayas"]}),e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:W.pais||"Ecuador"}),W.direccion&&e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginTop:"0.5rem"},children:W.direccion})]})]}),(W.cantidad_eventos_completados>0||W.fecha_ultimo_evento)&&e.jsxs("div",{style:{backgroundColor:"#eff6ff",padding:"1rem",borderRadius:"0.5rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.75rem",color:"#3b82f6",marginBottom:"0.25rem",textTransform:"uppercase",fontWeight:"600"},children:"Eventos Completados"}),e.jsx("p",{style:{margin:0,fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:W.cantidad_eventos_completados||0})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.75rem",color:"#3b82f6",marginBottom:"0.25rem",textTransform:"uppercase",fontWeight:"600"},children:"ltimo Evento"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500",color:"#1e40af"},children:W.fecha_ultimo_evento?new Date(W.fecha_ultimo_evento+"T00:00:00").toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"}):"N/A"})]})]})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:e.jsx("button",{onClick:G,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})})]})}),S&&W&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:ie,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"50%",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ut,{size:24,color:"#dc2626"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"Eliminar Cliente"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:"Est seguro de eliminar este cliente?"})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.375rem",marginBottom:"1.5rem"},children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:W.nombre_completo}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:W.email||"Sin email"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:ie,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{onClick:re,disabled:H,style:{padding:"0.75rem 1.5rem",backgroundColor:H?"#9ca3af":"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:H?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Tr,{size:18}),H?"Eliminando...":"Eliminar"]})]})]})})]})},Iv=({productoId:r,productoNombre:t,puedeEditar:o=!1,onClose:n})=>{const{success:i,error:s}=Ar(),[a,d]=c.useState([]),[u,l]=c.useState(!0),[f,g]=c.useState(!1),[y,z]=c.useState(null),[b,w]=c.useState(!1),[k,j]=c.useState({nombre_grupo:"",opciones:"",permite_multiple:!1,requerido:!0,orden:0});c.useEffect(()=>{r&&p()},[r]);const p=async()=>{try{l(!0);const m=await Cn.getOpcionesProducto(r);d(m.opciones||[])}catch(m){s("Error al cargar opciones"),console.error(m)}finally{l(!1)}},C=()=>{j({nombre_grupo:"",opciones:"",permite_multiple:!1,requerido:!0,orden:a.length}),z(null),g(!0)},S=m=>{j({nombre_grupo:m.nombre_grupo,opciones:m.opciones,permite_multiple:m.permite_multiple,requerido:m.requerido,orden:m.orden}),z(m),g(!0)},L=()=>{g(!1),z(null),j({nombre_grupo:"",opciones:"",permite_multiple:!1,requerido:!0,orden:0})},W=async m=>{var B,H;if(m.preventDefault(),!k.nombre_grupo.trim()){s("El nombre del grupo es requerido");return}if(!k.opciones.trim()){s("Las opciones son requeridas");return}try{w(!0),y?(await Cn.actualizarOpcion(y.id,k),i("Opcin actualizada exitosamente")):(await Cn.crearOpcion(r,k),i("Opcin creada exitosamente")),await p(),L()}catch(E){s(((H=(B=E.response)==null?void 0:B.data)==null?void 0:H.error)||"Error al guardar opcin")}finally{w(!1)}},I=async m=>{var B,H;if(window.confirm(`Eliminar el grupo "${m.nombre_grupo}"?`))try{await Cn.eliminarOpcion(m.id,!0),i("Opcin eliminada"),await p()}catch(E){s(((H=(B=E.response)==null?void 0:B.data)==null?void 0:H.error)||"Error al eliminar opcin")}};return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:n,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",width:"100%",maxWidth:"700px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(el,{size:24,style:{color:"#6366f1"}}),"Opciones del Producto"]}),e.jsx("p",{style:{margin:"0.25rem 0 0",color:"#6b7280",fontSize:"0.875rem"},children:t})]}),e.jsx("button",{onClick:n,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",color:"#6b7280"},children:e.jsx(rr,{size:24})})]}),e.jsxs("div",{style:{padding:"1.5rem",overflowY:"auto",flex:1},children:[e.jsxs("div",{style:{backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1.5rem",display:"flex",gap:"0.75rem"},children:[e.jsx(ut,{size:20,style:{color:"#0284c7",flexShrink:0,marginTop:"2px"}}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#0369a1"},children:[e.jsx("strong",{children:"Opciones que el cliente debe confirmar"}),e.jsxs("p",{style:{margin:"0.25rem 0 0"},children:['Define grupos de opciones (ej: "Tipo de Arroz") con sus variantes separadas por ',e.jsx("code",{style:{backgroundColor:"#e0f2fe",padding:"0.1rem 0.3rem",borderRadius:"0.25rem"},children:"|"}),' (ej: "Moro|Blanco|Con choclo").']})]})]}),u?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:"Cargando opciones..."}):e.jsxs(e.Fragment,{children:[a.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"2rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",color:"#6b7280"},children:[e.jsx(el,{size:48,style:{marginBottom:"1rem",opacity:.5}}),e.jsx("p",{children:"Este producto no tiene opciones configuradas"}),o&&e.jsxs("button",{onClick:C,style:{marginTop:"1rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontWeight:"500"},children:[e.jsx(Ur,{size:18}),"Agregar primera opcin"]})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:a.map(m=>{var B;return e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"1rem",backgroundColor:"#fafafa"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{margin:0,fontWeight:"600",color:"#1f2937"},children:m.nombre_grupo}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.25rem"},children:[m.requerido&&e.jsx("span",{style:{fontSize:"0.7rem",padding:"0.15rem 0.5rem",backgroundColor:"#fef2f2",color:"#dc2626",borderRadius:"9999px"},children:"Requerido"}),m.permite_multiple&&e.jsx("span",{style:{fontSize:"0.7rem",padding:"0.15rem 0.5rem",backgroundColor:"#f0fdf4",color:"#16a34a",borderRadius:"9999px"},children:"Mltiple"})]})]}),o&&e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>S(m),style:{padding:"0.4rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},title:"Editar",children:e.jsx(Ig,{size:14})}),e.jsx("button",{onClick:()=>I(m),style:{padding:"0.4rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},title:"Eliminar",children:e.jsx(Tr,{size:14})})]})]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:(B=m.opciones_lista)==null?void 0:B.map((H,E)=>e.jsx("span",{style:{padding:"0.35rem 0.75rem",backgroundColor:"#e0e7ff",color:"#4338ca",borderRadius:"0.375rem",fontSize:"0.8rem",fontWeight:"500"},children:H},E))})]},m.id)})}),o&&a.length>0&&!f&&e.jsxs("button",{onClick:C,style:{marginTop:"1rem",padding:"0.75rem 1rem",backgroundColor:"#f3f4f6",color:"#374151",border:"2px dashed #d1d5db",borderRadius:"0.5rem",cursor:"pointer",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontWeight:"500"},children:[e.jsx(Ur,{size:18}),"Agregar otro grupo de opciones"]}),f&&e.jsxs("div",{style:{marginTop:"1.5rem",padding:"1.5rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("h4",{style:{margin:"0 0 1rem",fontWeight:"600"},children:y?"Editar grupo de opciones":"Nuevo grupo de opciones"}),e.jsxs("form",{onSubmit:W,children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"Nombre del grupo *"}),e.jsx("input",{type:"text",value:k.nombre_grupo,onChange:m=>j({...k,nombre_grupo:m.target.value}),placeholder:"Ej: Tipo de Arroz, Tipo de Protena",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:["Opciones disponibles * ",e.jsx("span",{style:{fontWeight:"normal",color:"#6b7280"},children:"(separadas por |)"})]}),e.jsx("textarea",{value:k.opciones,onChange:m=>j({...k,opciones:m.target.value}),placeholder:"Ej: Moro|Blanco|Con choclo|Chicloso",rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem",resize:"vertical"}}),k.opciones&&e.jsx("div",{style:{marginTop:"0.5rem",display:"flex",flexWrap:"wrap",gap:"0.35rem"},children:k.opciones.split("|").filter(m=>m.trim()).map((m,B)=>e.jsx("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#dbeafe",color:"#1d4ed8",borderRadius:"0.25rem",fontSize:"0.75rem"},children:m.trim()},B))})]}),e.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:k.requerido,onChange:m=>j({...k,requerido:m.target.checked})}),e.jsx("span",{style:{fontSize:"0.875rem"},children:"Es requerido"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:k.permite_multiple,onChange:m=>j({...k,permite_multiple:m.target.checked})}),e.jsx("span",{style:{fontSize:"0.875rem"},children:"Permite seleccin mltiple"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:L,disabled:b,style:{padding:"0.6rem 1.25rem",backgroundColor:"#e5e7eb",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:b,style:{padding:"0.6rem 1.25rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:b?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem",opacity:b?.7:1},children:[e.jsx(it,{size:16}),b?"Guardando...":"Guardar"]})]})]})]})]})]}),e.jsx("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{onClick:n,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})})]})})},Wv=()=>{const{usuario:r}=st(),{toasts:t,removeToast:o,success:n,error:i}=Ar(),s=go(),[a,d]=c.useState([]),[u,l]=c.useState([]),[f,g]=c.useState(!0),[y,z]=c.useState(""),[b,w]=c.useState(""),[k,j]=c.useState(""),[p,C]=c.useState(!1),[S,L]=c.useState(!1),[W,I]=c.useState(!1),[m,B]=c.useState(!1),[H,E]=c.useState(!1),[R,te]=c.useState(null),[F,K]=c.useState({nombre:"",descripcion:"",detalles_adicionales:"",variantes:"",precio:"",precio_minimo:"",precio_maximo:"",duracion_horas:"",id_categoria:"",stock:"",unidad_medida:"unidad",tipo_servicio:"servicio",activo:!0}),[D,Z]=c.useState(!1),[P,$]=c.useState(""),N=_r(r==null?void 0:r.rol,[T.ADMIN,T.MANAGER,T.COORDINATOR]),ee=_r(r==null?void 0:r.rol,[T.ADMIN,T.MANAGER,T.COORDINATOR]),Y=_r(r==null?void 0:r.rol,[T.ADMIN,T.MANAGER]);c.useEffect(()=>{X(),se()},[k]);const X=async()=>{var M,V;try{g(!0);const we=await To.getAll(!1,k||null);d(we.productos||[]),z("")}catch(we){const Ne=((V=(M=we.response)==null?void 0:M.data)==null?void 0:V.error)||we.message||"Error al cargar los productos";z(Ne),console.error(we)}finally{g(!1)}},se=async()=>{try{const M=await Yi.getAll(!0);l(M.categorias||[])}catch(M){console.error("Error al cargar categoras:",M)}},G=M=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(M),ye=a.filter(M=>{var we,Ne;if(!b)return!0;const V=b.toLowerCase();return((we=M.nombre)==null?void 0:we.toLowerCase().includes(V))||((Ne=M.descripcion)==null?void 0:Ne.toLowerCase().includes(V))}),ie=()=>{K({nombre:"",descripcion:"",detalles_adicionales:"",variantes:"",precio:"",precio_minimo:"",precio_maximo:"",duracion_horas:"",id_categoria:"",stock:"0",unidad_medida:"unidad",tipo_servicio:"servicio",activo:!0}),$(""),C(!0)},be=()=>{C(!1),K({nombre:"",descripcion:"",detalles_adicionales:"",variantes:"",precio:"",precio_minimo:"",precio_maximo:"",duracion_horas:"",id_categoria:"",stock:"0",unidad_medida:"unidad",tipo_servicio:"servicio",activo:!0}),$("")},ce=M=>{te(M),K({nombre:M.nombre||"",descripcion:M.descripcion||"",detalles_adicionales:M.detalles_adicionales||"",variantes:M.variantes||"",precio:M.precio||"",precio_minimo:M.precio_minimo||"",precio_maximo:M.precio_maximo||"",duracion_horas:M.duracion_horas||"",id_categoria:M.id_categoria||M.categoria_id||"",stock:M.stock||"0",unidad_medida:M.unidad_medida||"unidad",tipo_servicio:M.tipo_servicio||"servicio",activo:M.activo!==!1}),$(""),L(!0)},re=()=>{L(!1),te(null),K({nombre:"",descripcion:"",detalles_adicionales:"",variantes:"",precio:"",precio_minimo:"",precio_maximo:"",duracion_horas:"",id_categoria:"",stock:"0",unidad_medida:"unidad",tipo_servicio:"servicio",activo:!0}),$("")},x=M=>{te(M),I(!0)},h=()=>{I(!1),te(null)},J=M=>{te(M),B(!0)},fe=()=>{B(!1),te(null)},ge=M=>{te(M),E(!0)},Re=()=>{E(!1),te(null)},me=async M=>{var V,we;if(M.preventDefault(),$(""),!F.nombre){$("El nombre del producto es requerido");return}try{Z(!0);const Ne={...F,precio:F.precio?parseFloat(F.precio):null,precio_minimo:F.precio_minimo?parseFloat(F.precio_minimo):null,precio_maximo:F.precio_maximo?parseFloat(F.precio_maximo):null,duracion_horas:F.duracion_horas?parseFloat(F.duracion_horas):null,id_categoria:F.id_categoria||null,stock:parseInt(F.stock)||0,activo:F.activo};await To.create(Ne),await X(),be(),n("Producto creado exitosamente")}catch(Ne){const U=((we=(V=Ne.response)==null?void 0:V.data)==null?void 0:we.error)||"Error al crear el producto";$(U),console.error(Ne)}finally{Z(!1)}},Ie=async M=>{var V,we;if(M.preventDefault(),$(""),!F.nombre){$("El nombre del producto es requerido");return}try{Z(!0);const Ne={...F,precio:F.precio?parseFloat(F.precio):null,precio_minimo:F.precio_minimo?parseFloat(F.precio_minimo):null,precio_maximo:F.precio_maximo?parseFloat(F.precio_maximo):null,duracion_horas:F.duracion_horas?parseFloat(F.duracion_horas):null,id_categoria:F.id_categoria||null,stock:parseInt(F.stock)||0,activo:F.activo};await To.update(R.id,Ne),await X(),re(),n("Producto actualizado exitosamente")}catch(Ne){const U=((we=(V=Ne.response)==null?void 0:V.data)==null?void 0:we.error)||"Error al actualizar el producto";$(U),console.error(Ne)}finally{Z(!1)}},Q=async()=>{var M,V;try{Z(!0),await To.delete(R.id),await X(),fe(),n("Producto eliminado exitosamente")}catch(we){const Ne=((V=(M=we.response)==null?void 0:M.data)==null?void 0:V.error)||"Error al eliminar el producto";i(Ne),console.error(we)}finally{Z(!1)}};return f?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando productos..."}):e.jsxs("div",{children:[e.jsx(Lr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:s?"1.5rem":"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Productos"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de productos y servicios"})]}),N&&e.jsxs("button",{onClick:ie,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:M=>M.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:M=>M.currentTarget.style.backgroundColor="#6366f1",children:[e.jsx(Ur,{size:20}),"Nuevo Producto"]})]}),y&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:y}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",flexWrap:"wrap",flexDirection:s?"column":"row"},children:[e.jsxs("div",{style:{position:"relative",flex:1,minWidth:s?"100%":"250px"},children:[e.jsx(Rt,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar productos...",value:b,onChange:M=>w(M.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("select",{value:k,onChange:M=>j(M.target.value),style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",minWidth:s?"100%":"200px"},children:[e.jsx("option",{value:"",children:"Todas las categoras"}),u.map(M=>e.jsx("option",{value:M.id,children:M.nombre},M.id))]})]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",overflow:"hidden"},children:s?e.jsx("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:ye.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:b||k?"No se encontraron productos con ese criterio":"No hay productos disponibles"}):ye.map(M=>e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"1rem",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06)",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"0.375rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Gt,{size:18,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#111827"},children:M.nombre||"-"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:M.nombre_categoria||"-"})]})]}),e.jsx("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:M.descripcion||"-"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Precio"}),e.jsx("div",{style:{fontWeight:"600"},children:G(M.precio||0)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Stock"}),e.jsx("div",{style:{fontWeight:"600"},children:M.stock||0})]})]}),e.jsx("div",{children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:M.activo!==!1?"#10b98120":"#ef444420",color:M.activo!==!1?"#10b981":"#ef4444"},children:M.activo!==!1?"Activo":"Inactivo"})}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>x(M),style:{padding:"0.5rem 0.75rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(St,{size:16,strokeWidth:2.5}),"Ver"]}),ee&&e.jsxs("button",{onClick:()=>ce(M),style:{padding:"0.5rem 0.75rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(Jt,{size:16,strokeWidth:2.5}),"Editar"]}),Y&&e.jsxs("button",{onClick:()=>J(M),style:{padding:"0.5rem 0.75rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(Tr,{size:16,strokeWidth:2.5}),"Eliminar"]}),ee&&M.tipo_servicio!=="servicio"&&e.jsxs("button",{onClick:()=>ge(M),style:{padding:"0.5rem 0.75rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(el,{size:16,strokeWidth:2.5}),"Opciones"]})]})]},M.id))}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Producto"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Categora"}),e.jsx("th",{style:{padding:"1rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Precio"}),e.jsx("th",{style:{padding:"1rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Stock"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:ye.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:b||k?"No se encontraron productos con ese criterio":"No hay productos disponibles"})}):ye.map(M=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"0.375rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Gt,{size:20,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:M.nombre||"-"}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginTop:"0.25rem",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:M.descripcion||"-"})]})]})}),e.jsx("td",{style:{padding:"1rem"},children:M.nombre_categoria||"-"}),e.jsx("td",{style:{padding:"1rem",textAlign:"right",fontWeight:"500"},children:G(M.precio||0)}),e.jsx("td",{style:{padding:"1rem",textAlign:"right"},children:M.stock||0}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:M.activo!==!1?"#10b98120":"#ef444420",color:M.activo!==!1?"#10b981":"#ef4444"},children:M.activo!==!1?"Activo":"Inactivo"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>x(M),style:{padding:"0.5rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:V=>V.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:V=>V.currentTarget.style.backgroundColor="#3b82f6",title:"Ver Detalle",children:e.jsx(St,{size:18,strokeWidth:2.5})}),ee&&e.jsx("button",{onClick:()=>ce(M),style:{padding:"0.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:V=>V.currentTarget.style.backgroundColor="#059669",onMouseLeave:V=>V.currentTarget.style.backgroundColor="#10b981",title:"Editar",children:e.jsx(Jt,{size:18,strokeWidth:2.5})}),Y&&e.jsx("button",{onClick:()=>J(M),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:V=>V.currentTarget.style.backgroundColor="#dc2626",onMouseLeave:V=>V.currentTarget.style.backgroundColor="#ef4444",title:"Eliminar",children:e.jsx(Tr,{size:18,strokeWidth:2.5})}),ee&&M.tipo_servicio!=="servicio"&&e.jsx("button",{onClick:()=>ge(M),style:{padding:"0.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:V=>V.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:V=>V.currentTarget.style.backgroundColor="#6366f1",title:"Opciones de confirmacin",children:e.jsx(el,{size:18,strokeWidth:2.5})})]})})]},M.id))})]})})}),p&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:be,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"700px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:M=>M.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Nuevo Producto"}),e.jsx("button",{onClick:be,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),P&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:P}),e.jsxs("form",{onSubmit:me,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:F.nombre,onChange:M=>K({...F,nombre:M.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:F.descripcion,onChange:M=>K({...F,descripcion:M.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio"}),e.jsx("input",{type:"number",step:"0.01",value:F.precio,onChange:M=>K({...F,precio:M.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Stock"}),e.jsx("input",{type:"number",min:"0",step:"1",value:F.stock,onChange:M=>K({...F,stock:M.target.value}),onWheel:M=>M.target.blur(),onKeyDown:M=>{(M.key==="ArrowUp"||M.key==="ArrowDown")&&M.preventDefault()},style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio Mnimo"}),e.jsx("input",{type:"number",step:"0.01",value:F.precio_minimo,onChange:M=>K({...F,precio_minimo:M.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio Mximo"}),e.jsx("input",{type:"number",step:"0.01",value:F.precio_maximo,onChange:M=>K({...F,precio_maximo:M.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Categora"}),e.jsxs("select",{value:F.id_categoria,onChange:M=>K({...F,id_categoria:M.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"",children:"Sin categora"}),u.map(M=>e.jsx("option",{value:M.id,children:M.nombre},M.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Duracin (horas)"}),e.jsx("input",{type:"number",step:"0.5",value:F.duracion_horas,onChange:M=>K({...F,duracion_horas:M.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Unidad de Medida"}),e.jsxs("select",{value:F.unidad_medida,onChange:M=>K({...F,unidad_medida:M.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"unidad",children:"Unidad"}),e.jsx("option",{value:"hora",children:"Hora"}),e.jsx("option",{value:"dia",children:"Da"}),e.jsx("option",{value:"servicio",children:"Servicio"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Tipo de Servicio"}),e.jsxs("select",{value:F.tipo_servicio,onChange:M=>K({...F,tipo_servicio:M.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"servicio",children:"Servicio"}),e.jsx("option",{value:"producto",children:"Producto"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Detalles Adicionales"}),e.jsx("textarea",{value:F.detalles_adicionales,onChange:M=>K({...F,detalles_adicionales:M.target.value}),rows:2,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Variantes"}),e.jsx("input",{type:"text",value:F.variantes,onChange:M=>K({...F,variantes:M.target.value}),placeholder:"Ej: Tamao pequeo, mediano, grande",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:F.activo,onChange:M=>K({...F,activo:M.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Producto activo"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:be,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:D,style:{padding:"0.75rem 1.5rem",backgroundColor:D?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:D?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),D?"Guardando...":"Guardar"]})]})]})]})}),S&&R&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:re,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"700px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:M=>M.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Editar Producto"}),e.jsx("button",{onClick:re,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),P&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:P}),e.jsxs("form",{onSubmit:Ie,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:F.nombre,onChange:M=>K({...F,nombre:M.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:F.descripcion,onChange:M=>K({...F,descripcion:M.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio"}),e.jsx("input",{type:"number",step:"0.01",value:F.precio,onChange:M=>K({...F,precio:M.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Stock"}),e.jsx("input",{type:"number",min:"0",step:"1",value:F.stock,onChange:M=>K({...F,stock:M.target.value}),onWheel:M=>M.target.blur(),onKeyDown:M=>{(M.key==="ArrowUp"||M.key==="ArrowDown")&&M.preventDefault()},style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio Mnimo"}),e.jsx("input",{type:"number",step:"0.01",value:F.precio_minimo,onChange:M=>K({...F,precio_minimo:M.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio Mximo"}),e.jsx("input",{type:"number",step:"0.01",value:F.precio_maximo,onChange:M=>K({...F,precio_maximo:M.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Categora"}),e.jsxs("select",{value:F.id_categoria,onChange:M=>K({...F,id_categoria:M.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"",children:"Sin categora"}),u.map(M=>e.jsx("option",{value:M.id,children:M.nombre},M.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Duracin (horas)"}),e.jsx("input",{type:"number",step:"0.5",value:F.duracion_horas,onChange:M=>K({...F,duracion_horas:M.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Unidad de Medida"}),e.jsxs("select",{value:F.unidad_medida,onChange:M=>K({...F,unidad_medida:M.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"unidad",children:"Unidad"}),e.jsx("option",{value:"hora",children:"Hora"}),e.jsx("option",{value:"dia",children:"Da"}),e.jsx("option",{value:"servicio",children:"Servicio"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Tipo de Servicio"}),e.jsxs("select",{value:F.tipo_servicio,onChange:M=>K({...F,tipo_servicio:M.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"servicio",children:"Servicio"}),e.jsx("option",{value:"producto",children:"Producto"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Detalles Adicionales"}),e.jsx("textarea",{value:F.detalles_adicionales,onChange:M=>K({...F,detalles_adicionales:M.target.value}),rows:2,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Variantes"}),e.jsx("input",{type:"text",value:F.variantes,onChange:M=>K({...F,variantes:M.target.value}),placeholder:"Ej: Tamao pequeo, mediano, grande",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:F.activo,onChange:M=>K({...F,activo:M.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Producto activo"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:re,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:D,style:{padding:"0.75rem 1.5rem",backgroundColor:D?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:D?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),D?"Guardando...":"Guardar Cambios"]})]})]})]})}),W&&R&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:h,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:M=>M.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Detalle del Producto"}),e.jsx("button",{onClick:h,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{width:"4rem",height:"4rem",borderRadius:"0.5rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Gt,{size:32,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:R.nombre||"N/A"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:R.nombre_categoria||"Sin categora"})]})]}),e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Descripcin"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:R.descripcion||"N/A"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Precio"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:G(R.precio||0)})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Stock"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:R.stock||0})]})]}),R.precio_minimo&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Precio Mnimo"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:G(R.precio_minimo)})]}),R.precio_maximo&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Precio Mximo"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:G(R.precio_maximo)})]})]}),R.duracion_horas&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Duracin"}),e.jsxs("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:[R.duracion_horas," horas"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Unidad de Medida"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:R.unidad_medida||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Tipo"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:R.tipo_servicio||"N/A"})]})]}),R.detalles_adicionales&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Detalles Adicionales"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:R.detalles_adicionales})]}),R.variantes&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Variantes"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:R.variantes})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Estado"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:R.activo!==!1?"#10b98120":"#ef444420",color:R.activo!==!1?"#10b981":"#ef4444"},children:R.activo!==!1?"Activo":"Inactivo"})]})]})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:e.jsx("button",{onClick:h,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})})]})}),m&&R&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:fe,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:M=>M.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"50%",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ut,{size:24,color:"#dc2626"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"Eliminar Producto"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:"Est seguro de eliminar este producto?"})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.375rem",marginBottom:"1.5rem"},children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:R.nombre}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:R.nombre_categoria||"Sin categora"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:fe,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{onClick:Q,disabled:D,style:{padding:"0.75rem 1.5rem",backgroundColor:D?"#9ca3af":"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:D?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Tr,{size:18}),D?"Eliminando...":"Eliminar"]})]})]})}),H&&R&&e.jsx(Iv,{productoId:R.id_producto||R.id,productoNombre:R.nombre,puedeEditar:ee,onClose:Re})]})},Tv=()=>{const{usuario:r}=st(),{toasts:t,removeToast:o,success:n,error:i}=Ar(),s=go(),[a,d]=c.useState([]),[u,l]=c.useState(!0),[f,g]=c.useState(""),[y,z]=c.useState(""),[b,w]=c.useState(!1),[k,j]=c.useState(!1),[p,C]=c.useState(!1),[S,L]=c.useState(!1),[W,I]=c.useState(null),[m,B]=c.useState({nombre:"",descripcion:"",activo:!0}),[H,E]=c.useState(!1),[R,te]=c.useState(""),F=_r(r==null?void 0:r.rol,[T.ADMIN,T.MANAGER,T.COORDINATOR]),K=_r(r==null?void 0:r.rol,[T.ADMIN,T.MANAGER,T.COORDINATOR]),D=_r(r==null?void 0:r.rol,[T.ADMIN,T.MANAGER]);c.useEffect(()=>{Z()},[]);const Z=async()=>{var re,x;try{l(!0);const h=await Yi.getAll(!1);d(h.categorias||[]),g("")}catch(h){const J=((x=(re=h.response)==null?void 0:re.data)==null?void 0:x.error)||h.message||"Error al cargar las categoras";g(J),console.error(h)}finally{l(!1)}},P=a.filter(re=>{var h,J;if(!y)return!0;const x=y.toLowerCase();return((h=re.nombre)==null?void 0:h.toLowerCase().includes(x))||((J=re.descripcion)==null?void 0:J.toLowerCase().includes(x))}),$=()=>{B({nombre:"",descripcion:"",activo:!0}),te(""),w(!0)},N=()=>{w(!1),B({nombre:"",descripcion:"",activo:!0}),te("")},ee=re=>{I(re),B({nombre:re.nombre||"",descripcion:re.descripcion||"",activo:re.activo!==!1}),te(""),j(!0)},Y=()=>{j(!1),I(null),B({nombre:"",descripcion:"",activo:!0}),te("")},X=re=>{I(re),C(!0)},se=()=>{C(!1),I(null)},G=re=>{I(re),L(!0)},ye=()=>{L(!1),I(null)},ie=async re=>{var x,h;if(re.preventDefault(),te(""),!m.nombre){te("El nombre de la categora es requerido");return}try{E(!0),await Yi.create(m),await Z(),N(),n("Categora creada exitosamente")}catch(J){const fe=((h=(x=J.response)==null?void 0:x.data)==null?void 0:h.error)||"Error al crear la categora";te(fe),console.error(J)}finally{E(!1)}},be=async re=>{var x,h;if(re.preventDefault(),te(""),!m.nombre){te("El nombre de la categora es requerido");return}try{E(!0),await Yi.update(W.id,m),await Z(),Y(),n("Categora actualizada exitosamente")}catch(J){const fe=((h=(x=J.response)==null?void 0:x.data)==null?void 0:h.error)||"Error al actualizar la categora";te(fe),console.error(J)}finally{E(!1)}},ce=async()=>{var re,x;try{E(!0),await Yi.delete(W.id),await Z(),ye(),n("Categora eliminada exitosamente")}catch(h){const J=((x=(re=h.response)==null?void 0:re.data)==null?void 0:x.error)||"Error al eliminar la categora";i(J),console.error(h)}finally{E(!1)}};return u?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando categoras..."}):e.jsxs("div",{children:[e.jsx(Lr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:s?"1.5rem":"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Categoras"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de categoras de productos"})]}),F&&e.jsxs("button",{onClick:$,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:re=>re.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:re=>re.currentTarget.style.backgroundColor="#6366f1",children:[e.jsx(Ur,{size:20}),"Nueva Categora"]})]}),f&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:f}),e.jsxs("div",{style:{marginBottom:"1.5rem",position:"relative",maxWidth:s?"100%":"400px"},children:[e.jsx(Rt,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar categoras...",value:y,onChange:re=>z(re.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"repeat(auto-fill, minmax(300px, 1fr))",gap:"1.5rem"},children:P.length===0?e.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"2rem",color:"#6b7280"},children:y?"No se encontraron categoras con ese criterio":"No hay categoras disponibles"}):P.map(re=>e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseEnter:x=>{x.currentTarget.style.transform="translateY(-2px)",x.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:x=>{x.currentTarget.style.transform="translateY(0)",x.currentTarget.style.boxShadow="0 1px 3px 0 rgba(0, 0, 0, 0.1)"},onClick:()=>X(re),children:[e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"1rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"0.5rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Za,{size:24,color:"#6366f1"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.5rem",margin:0},children:re.nombre}),e.jsx("p",{style:{color:"#6b7280",fontSize:"0.875rem",margin:0},children:re.descripcion||"Sin descripcin"})]})]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:re.activo!==!1?"#10b98120":"#ef444420",color:re.activo!==!1?"#10b981":"#ef4444"},children:re.activo!==!1?"Activa":"Inactiva"})}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},onClick:x=>x.stopPropagation(),children:[e.jsxs("button",{onClick:()=>X(re),style:{flex:1,padding:"0.5rem 1rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background-color 0.2s"},onMouseEnter:x=>x.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:x=>x.currentTarget.style.backgroundColor="#3b82f6",children:[e.jsx(St,{size:16}),"Ver"]}),K&&e.jsxs("button",{onClick:()=>ee(re),style:{flex:1,padding:"0.5rem 1rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background-color 0.2s"},onMouseEnter:x=>x.currentTarget.style.backgroundColor="#059669",onMouseLeave:x=>x.currentTarget.style.backgroundColor="#10b981",children:[e.jsx(Jt,{size:16}),"Editar"]}),D&&e.jsxs("button",{onClick:()=>G(re),style:{flex:1,padding:"0.5rem 1rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background-color 0.2s"},onMouseEnter:x=>x.currentTarget.style.backgroundColor="#dc2626",onMouseLeave:x=>x.currentTarget.style.backgroundColor="#ef4444",children:[e.jsx(Tr,{size:16}),"Eliminar"]})]})]},re.id))}),b&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:N,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:re=>re.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Nueva Categora"}),e.jsx("button",{onClick:N,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),R&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:R}),e.jsxs("form",{onSubmit:ie,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:m.nombre,onChange:re=>B({...m,nombre:re.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:m.descripcion,onChange:re=>B({...m,descripcion:re.target.value}),rows:4,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:m.activo,onChange:re=>B({...m,activo:re.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Categora activa"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:N,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:H,style:{padding:"0.75rem 1.5rem",backgroundColor:H?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:H?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),H?"Guardando...":"Guardar"]})]})]})]})}),k&&W&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:Y,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:re=>re.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Editar Categora"}),e.jsx("button",{onClick:Y,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),R&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:R}),e.jsxs("form",{onSubmit:be,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:m.nombre,onChange:re=>B({...m,nombre:re.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:m.descripcion,onChange:re=>B({...m,descripcion:re.target.value}),rows:4,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:m.activo,onChange:re=>B({...m,activo:re.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Categora activa"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:Y,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:H,style:{padding:"0.75rem 1.5rem",backgroundColor:H?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:H?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),H?"Guardando...":"Guardar Cambios"]})]})]})]})}),p&&W&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:se,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:re=>re.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Detalle de la Categora"}),e.jsx("button",{onClick:se,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{width:"4rem",height:"4rem",borderRadius:"0.5rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Za,{size:32,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:W.nombre||"N/A"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:"Categora"})]})]}),e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Descripcin"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:W.descripcion||"Sin descripcin"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Estado"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:W.activo!==!1?"#10b98120":"#ef444420",color:W.activo!==!1?"#10b981":"#ef4444"},children:W.activo!==!1?"Activa":"Inactiva"})]})]})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:e.jsx("button",{onClick:se,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})})]})}),S&&W&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:ye,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:re=>re.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"50%",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ut,{size:24,color:"#dc2626"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"Eliminar Categora"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:"Est seguro de eliminar esta categora?"})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.375rem",marginBottom:"1.5rem"},children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:W.nombre}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:W.descripcion||"Sin descripcin"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:ye,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{onClick:ce,disabled:H,style:{padding:"0.75rem 1.5rem",backgroundColor:H?"#9ca3af":"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:H?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Tr,{size:18}),H?"Eliminando...":"Eliminar"]})]})]})})]})},Mv=()=>{const{usuario:r}=st(),{toasts:t,removeToast:o,success:n,error:i}=Ar(),s=go(),[a,d]=c.useState([]),[u,l]=c.useState([]),[f,g]=c.useState(!0),[y,z]=c.useState(""),[b,w]=c.useState(""),[k,j]=c.useState("todos"),[p,C]=c.useState(""),[S,L]=c.useState(""),[W,I]=c.useState("fecha_desc"),[m,B]=c.useState(!1),[H,E]=c.useState(!1),[R,te]=c.useState(!1),[F,K]=c.useState(!1),[D,Z]=c.useState(!1),[P,$]=c.useState(null),[N,ee]=c.useState([]),[Y,X]=c.useState({nombre:"",descripcion:"",precio_base:"",capacidad_minima:"",capacidad_maxima:"",duracion_horas:"",incluye:"",activo:!0}),[se,G]=c.useState(!1),[ye,ie]=c.useState(""),[be,ce]=c.useState(""),[re,x]=c.useState("1"),[h,J]=c.useState(""),[fe,ge]=c.useState("1"),[Re,me]=c.useState(""),[Ie,Q]=c.useState([]),[M,V]=c.useState([]),[we,Ne]=c.useState(!1),[U,pe]=c.useState([]),[Ge,We]=c.useState([]),[cr,gr]=c.useState(""),[Sr,Ke]=c.useState(""),ur=xr(r,Ye.PLANES_CREAR,[T.ADMIN,T.MANAGER]),lr=xr(r,Ye.PLANES_EDITAR,[T.ADMIN,T.MANAGER]),Fr=xr(r,Ye.PLANES_ELIMINAR,[T.ADMIN,T.MANAGER]);c.useEffect(()=>{zr(),Qe()},[]);const zr=async()=>{var A,le;try{g(!0);const Ue=await yt.getAll(!1);d(Ue.planes||[]),z("")}catch(Ue){const qe=((le=(A=Ue.response)==null?void 0:A.data)==null?void 0:le.error)||Ue.message||"Error al cargar los planes";z(qe),console.error(Ue)}finally{g(!1)}},Qe=async()=>{try{const A=await To.getAll(!0);l(A.productos||[])}catch(A){console.error("Error al cargar productos:",A)}},Xe=async A=>{try{const le=await yt.getProductos(A);ee(le.productos||[])}catch(le){console.error("Error al cargar productos del plan:",le),ee([])}},ne=A=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(A),ke=A=>u.find(le=>le.id===A),Te=A=>(A||[]).map(le=>({producto_id:Number(le.producto_id),cantidad:Number(le.cantidad)})),Ae=A=>(A||[]).map(le=>({producto_id:Number(le.producto_id),nombre_producto:le.nombre_producto||le.nombre||"N/A",cantidad:Number(le.cantidad)||1,precio_unitario:Number(le.precio_unitario??le.precio??0)})),ue=Ie.reduce((A,le)=>{const Ue=Number(le.precio_unitario??le.precio??0),qe=Number(le.cantidad)||0;return A+Ue*qe},0),Ve=Number.isFinite(parseFloat(Y.precio_base))?parseFloat(Y.precio_base):0,Je=Math.max(0,ue-Ve),q=N.reduce((A,le)=>{const Ue=Number(le.precio||0),qe=Number(le.cantidad)||0;return A+Ue*qe},0),Se=Math.max(0,q-Number((P==null?void 0:P.precio_base)||0)),ve=p===""?null:parseFloat(p),Oe=S===""?null:parseFloat(S),Ce=a.filter(A=>{var Ue,qe;if(!b)return!0;const le=b.toLowerCase();return((Ue=A.nombre)==null?void 0:Ue.toLowerCase().includes(le))||((qe=A.descripcion)==null?void 0:qe.toLowerCase().includes(le))}).filter(A=>k==="activos"?A.activo!==!1:k==="inactivos"?A.activo===!1:!0).filter(A=>{if(ve===null&&Oe===null)return!0;const le=Number(A.precio_base||0);return!(ve!==null&&le<ve||Oe!==null&&le>Oe)}).sort((A,le)=>{const Ue=A.fecha_creacion||A.created_at||A.fecha||A.fecha_creado||A.fechaCreacion||A.id,qe=le.fecha_creacion||le.created_at||le.fecha||le.fecha_creado||le.fechaCreacion||le.id;switch(W){case"nombre_desc":return(le.nombre||"").localeCompare(A.nombre||"");case"fecha_desc":return new Date(qe).getTime()-new Date(Ue).getTime();case"fecha_asc":return new Date(Ue).getTime()-new Date(qe).getTime();case"precio_asc":return Number(A.precio_base||0)-Number(le.precio_base||0);case"precio_desc":return Number(le.precio_base||0)-Number(A.precio_base||0);case"capacidad_desc":return Number(le.capacidad_maxima||0)-Number(A.capacidad_maxima||0);case"duracion_desc":return Number(le.duracion_horas||0)-Number(A.duracion_horas||0);default:return(A.nombre||"").localeCompare(le.nombre||"")}}),Le=()=>{X({nombre:"",descripcion:"",precio_base:"",capacidad_minima:"",capacidad_maxima:"",duracion_horas:"",incluye:"",activo:!0}),J(""),ge("1"),me(""),Q([]),V([]),pe([]),We([]),gr(""),Ke(""),ie(""),B(!0)},De=()=>{B(!1),X({nombre:"",descripcion:"",precio_base:"",capacidad_minima:"",capacidad_maxima:"",duracion_horas:"",incluye:"",activo:!0}),J(""),ge("1"),me(""),Q([]),V([]),pe([]),We([]),gr(""),Ke(""),ie("")},Fe=async A=>{$(A),X({nombre:A.nombre||"",descripcion:A.descripcion||"",precio_base:A.precio_base||"",capacidad_minima:A.capacidad_minima||"",capacidad_maxima:A.capacidad_maxima||"",duracion_horas:A.duracion_horas||"",incluye:A.incluye||"",activo:A.activo!==!1}),J(""),ge("1"),me(""),Ne(!0),E(!0);try{const le=await yt.getProductos(A.id),Ue=Ae(le.productos||[]);Q(Ue),V(Ue);const hr=((await yt.getServicios(A.id)).servicios||[]).map(_=>({id:_.id,nombre:_.nombre,orden:_.orden}));pe(hr),We(hr)}catch(le){console.error("Error al cargar productos del plan:",le),Q([]),V([]),pe([]),We([])}finally{Ne(!1)}ie("")},ir=()=>{E(!1),$(null),X({nombre:"",descripcion:"",precio_base:"",capacidad_minima:"",capacidad_maxima:"",duracion_horas:"",incluye:"",activo:!0}),J(""),ge("1"),me(""),Q([]),V([]),pe([]),We([]),gr(""),Ke(""),ie("")},yr=async A=>{$(A),await Xe(A.id);try{const le=await yt.getServicios(A.id);pe(le.servicios||[])}catch(le){console.error("Error al cargar servicios del plan:",le),pe([])}te(!0)},vr=()=>{te(!1),$(null),ee([]),pe([])},Pr=A=>{$(A),K(!0)},he=()=>{K(!1),$(null)},nr=async A=>{$(A),await Xe(A.id),ce(""),x("1"),Z(!0)},or=()=>{Z(!1),$(null),ee([]),ce(""),x("1")},jr=()=>{if(!h||!fe||parseInt(fe)<=0){i("Seleccione un producto y una cantidad vlida");return}const A=parseInt(h),le=parseInt(fe),Ue=ke(A);if(!Ue){i("Producto no encontrado");return}if(Ie.some(hr=>hr.producto_id===A)){i("Este producto ya est agregado al plan");return}Q(hr=>[...hr,{producto_id:A,nombre_producto:Ue.nombre||"N/A",cantidad:le,precio_unitario:Number(Ue.precio||0)}]),J(""),ge("1")},wr=A=>{Q(le=>le.filter(Ue=>Ue.producto_id!==A))},Nr=(A,le)=>{const Ue=parseInt(le);!Number.isFinite(Ue)||Ue<=0||Q(qe=>qe.map(hr=>hr.producto_id===A?{...hr,cantidad:Ue}:hr))},O=()=>{const A=cr.trim();if(!A){Ke("Ingresa un servicio vlido.");return}if(U.some(Ue=>{var qe;return((qe=Ue.nombre)==null?void 0:qe.trim().toLowerCase())===A.toLowerCase()})){Ke("Este servicio ya est agregado.");return}pe(Ue=>[...Ue,{nombre:A,orden:Ue.length+1}]),gr(""),Ke("")},Ee=A=>{pe(le=>le.filter((Ue,qe)=>qe!==A))},He=async(A,le,Ue=[])=>{const qe=new Map(Te(Ue).map(_e=>[_e.producto_id,_e])),hr=new Map(Te(le).map(_e=>[_e.producto_id,_e])),_=[],je=[];qe.forEach(_e=>{const Ze=hr.get(_e.producto_id);if(!Ze){_.push(_e.producto_id);return}Ze.cantidad!==_e.cantidad&&(_.push(_e.producto_id),je.push(Ze))}),hr.forEach(_e=>{qe.has(_e.producto_id)||je.push(_e)});for(const _e of _)await yt.eliminarProducto(A,_e);for(const _e of je)await yt.agregarProducto(A,_e.producto_id,_e.cantidad)},er=async(A,le)=>{const Ue=(le||[]).map((qe,hr)=>({nombre:qe.nombre,orden:hr+1}));await yt.actualizarServicios(A,Ue)},kr=async A=>{var le,Ue,qe;if(A.preventDefault(),ie(""),!Y.nombre||!Y.precio_base){ie("El nombre y el precio base son requeridos");return}try{G(!0);const hr={...Y,precio_base:parseFloat(Y.precio_base),capacidad_minima:Y.capacidad_minima?parseInt(Y.capacidad_minima):null,capacidad_maxima:Y.capacidad_maxima?parseInt(Y.capacidad_maxima):null,duracion_horas:Y.duracion_horas?parseFloat(Y.duracion_horas):null,activo:Y.activo},_=await yt.create(hr),je=(le=_==null?void 0:_.plan)==null?void 0:le.id;if(je&&Ie.length>0)try{await He(je,Ie,[])}catch(_e){console.error("Error al agregar productos al plan:",_e),i("Plan creado, pero ocurri un error al agregar productos")}if(je)try{await er(je,U)}catch(_e){console.error("Error al agregar servicios al plan:",_e),i("Plan creado, pero ocurri un error al agregar servicios")}await zr(),De(),n("Plan creado exitosamente")}catch(hr){const _=((qe=(Ue=hr.response)==null?void 0:Ue.data)==null?void 0:qe.error)||"Error al crear el plan";ie(_),console.error(hr)}finally{G(!1)}},gt=async A=>{var le,Ue;if(A.preventDefault(),ie(""),!Y.nombre||!Y.precio_base){ie("El nombre y el precio base son requeridos");return}try{G(!0);const qe={...Y,precio_base:parseFloat(Y.precio_base),capacidad_minima:Y.capacidad_minima?parseInt(Y.capacidad_minima):null,capacidad_maxima:Y.capacidad_maxima?parseInt(Y.capacidad_maxima):null,duracion_horas:Y.duracion_horas?parseFloat(Y.duracion_horas):null,activo:Y.activo};await yt.update(P.id,qe),await He(P.id,Ie,M),await er(P.id,U),await zr(),V(Ie),We(U),ir(),n("Plan actualizado exitosamente")}catch(qe){const hr=((Ue=(le=qe.response)==null?void 0:le.data)==null?void 0:Ue.error)||"Error al actualizar el plan";ie(hr),console.error(qe)}finally{G(!1)}},ro=async()=>{var A,le;try{G(!0),await yt.delete(P.id),await zr(),he(),n("Plan eliminado exitosamente")}catch(Ue){const qe=((le=(A=Ue.response)==null?void 0:A.data)==null?void 0:le.error)||"Error al eliminar el plan";i(qe),console.error(Ue)}finally{G(!1)}},Lo=async()=>{var A,le;if(!be||!re||parseInt(re)<=0){i("Seleccione un producto y una cantidad vlida");return}try{await yt.agregarProducto(P.id,parseInt(be),parseInt(re)),await Xe(P.id),ce(""),x("1"),n("Producto agregado al plan exitosamente")}catch(Ue){const qe=((le=(A=Ue.response)==null?void 0:A.data)==null?void 0:le.error)||"Error al agregar el producto";i(qe),console.error(Ue)}},Ei=async A=>{var le,Ue;try{await yt.eliminarProducto(P.id,A),await Xe(P.id),n("Producto eliminado del plan exitosamente")}catch(qe){const hr=((Ue=(le=qe.response)==null?void 0:le.data)==null?void 0:Ue.error)||"Error al eliminar el producto";i(hr),console.error(qe)}};return f?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando planes..."}):e.jsxs("div",{children:[e.jsx(Lr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:s?"1.5rem":"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Planes"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de planes de eventos"})]}),ur&&e.jsxs("button",{onClick:Le,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:A=>A.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:A=>A.currentTarget.style.backgroundColor="#6366f1",children:[e.jsx(Ur,{size:20}),"Nuevo Plan"]})]}),y&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:y}),e.jsxs("div",{style:{marginBottom:"1.5rem",display:"grid",gap:"1rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"2fr 1fr",gap:"1rem"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Rt,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar planes...",value:b,onChange:A=>w(A.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsx("div",{children:e.jsxs("select",{value:W,onChange:A=>I(A.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"fecha_desc",children:"Ordenar: Fecha creacin (Ms recientes)"}),e.jsx("option",{value:"fecha_asc",children:"Ordenar: Fecha creacin (Ms antiguos)"}),e.jsx("option",{value:"nombre_asc",children:"Ordenar: Nombre (A-Z)"}),e.jsx("option",{value:"nombre_desc",children:"Ordenar: Nombre (Z-A)"}),e.jsx("option",{value:"precio_asc",children:"Ordenar: Precio (Menor a mayor)"}),e.jsx("option",{value:"precio_desc",children:"Ordenar: Precio (Mayor a menor)"}),e.jsx("option",{value:"capacidad_desc",children:"Ordenar: Capacidad (Mayor a menor)"}),e.jsx("option",{value:"duracion_desc",children:"Ordenar: Duracin (Mayor a menor)"})]})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"1fr 1fr 1fr",gap:"1rem",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Estado"}),e.jsxs("select",{value:k,onChange:A=>j(A.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"todos",children:"Todos"}),e.jsx("option",{value:"activos",children:"Activos"}),e.jsx("option",{value:"inactivos",children:"Inactivos"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio mnimo"}),e.jsx("input",{type:"number",min:"0",value:p,onChange:A=>C(A.target.value),placeholder:"0",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio mximo"}),e.jsx("input",{type:"number",min:"0",value:S,onChange:A=>L(A.target.value),placeholder:"Sin tope",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:Ce.length===0?e.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"2rem",color:"#6b7280"},children:b?"No se encontraron planes con ese criterio":"No hay planes disponibles"}):Ce.map(A=>e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:le=>{le.currentTarget.style.transform="translateY(-2px)",le.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:le=>{le.currentTarget.style.transform="translateY(0)",le.currentTarget.style.boxShadow="0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"1rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"0.5rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(jt,{size:24,color:"#6366f1"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.25rem",margin:0},children:A.nombre}),e.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#6366f1",margin:0},children:ne(A.precio_base||0)})]})]}),e.jsx("p",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"1rem"},children:A.descripcion||"Sin descripcin"}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"1rem"},children:[A.capacidad_minima&&e.jsxs("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#f3f4f6",borderRadius:"9999px",fontSize:"0.75rem",color:"#6b7280"},children:["Min: ",A.capacidad_minima," personas"]}),A.capacidad_maxima&&e.jsxs("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#f3f4f6",borderRadius:"9999px",fontSize:"0.75rem",color:"#6b7280"},children:["Max: ",A.capacidad_maxima," personas"]}),A.duracion_horas&&e.jsxs("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#f3f4f6",borderRadius:"9999px",fontSize:"0.75rem",color:"#6b7280"},children:[A.duracion_horas," horas"]}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:A.activo!==!1?"#10b98120":"#ef444420",color:A.activo!==!1?"#10b981":"#ef4444"},children:A.activo!==!1?"Activo":"Inactivo"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>yr(A),style:{flex:1,padding:"0.5rem 1rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background-color 0.2s"},onMouseEnter:le=>le.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:le=>le.currentTarget.style.backgroundColor="#3b82f6",children:[e.jsx(St,{size:16}),"Ver Detalle"]}),lr&&e.jsx("button",{onClick:()=>Fe(A),style:{padding:"0.5rem 1rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:le=>le.currentTarget.style.backgroundColor="#059669",onMouseLeave:le=>le.currentTarget.style.backgroundColor="#10b981",title:"Editar",children:e.jsx(Jt,{size:16})}),Fr&&e.jsx("button",{onClick:()=>Pr(A),style:{padding:"0.5rem 1rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:le=>le.currentTarget.style.backgroundColor="#dc2626",onMouseLeave:le=>le.currentTarget.style.backgroundColor="#ef4444",title:"Eliminar",children:e.jsx(Tr,{size:16})})]})]},A.id))}),m&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:De,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:A=>A.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Nuevo Plan"}),e.jsx("button",{onClick:De,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),ye&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:ye}),e.jsxs("form",{onSubmit:kr,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:Y.nombre,onChange:A=>X({...Y,nombre:A.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:Y.descripcion,onChange:A=>X({...Y,descripcion:A.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Precio del Plan ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:Y.precio_base,onChange:A=>X({...Y,precio_base:A.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Duracin (horas)"}),e.jsx("input",{type:"number",step:"0.5",value:Y.duracion_horas,onChange:A=>X({...Y,duracion_horas:A.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Total Productos"}),e.jsx("input",{type:"text",value:ne(ue),readOnly:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:"#f9fafb"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descuento (Oferta)"}),e.jsx("input",{type:"text",value:ne(Je),readOnly:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:"#f9fafb"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Capacidad Mnima"}),e.jsx("input",{type:"number",value:Y.capacidad_minima,onChange:A=>X({...Y,capacidad_minima:A.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Capacidad Mxima"}),e.jsx("input",{type:"number",value:Y.capacidad_maxima,onChange:A=>X({...Y,capacidad_maxima:A.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",padding:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem"},children:"Productos del Plan"}),we&&e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280"},children:"Cargando productos..."}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr auto",gap:"0.75rem",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Producto"}),e.jsx("input",{type:"text",value:Re,onChange:A=>me(A.target.value),placeholder:"Buscar producto...",style:{width:"100%",padding:"0.6rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",marginBottom:"0.5rem"}}),e.jsxs("select",{value:h,onChange:A=>J(A.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"",children:"Seleccione un producto"}),u.filter(A=>!Ie.some(le=>le.producto_id===A.id)).filter(A=>{var le;return(le=A.nombre)==null?void 0:le.toLowerCase().includes(Re.toLowerCase())}).map(A=>e.jsxs("option",{value:A.id,children:[A.nombre," - ",ne(A.precio||0)]},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Cantidad"}),e.jsx("input",{type:"number",min:"1",value:fe,onChange:A=>ge(A.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("button",{type:"button",onClick:jr,style:{padding:"0.75rem 1rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ur,{size:18}),"Agregar"]})]}),e.jsx("div",{style:{marginTop:"1rem"},children:Ie.length===0?e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"No hay productos asignados a este plan"}):e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Producto"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Cantidad"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Precio Unit."}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Subtotal"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Accin"})]})}),e.jsx("tbody",{children:Ie.map(A=>e.jsxs("tr",{style:{borderTop:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"0.75rem"},children:A.nombre_producto||"N/A"}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("input",{type:"number",min:"1",value:A.cantidad,onChange:le=>Nr(A.producto_id,le.target.value),style:{width:"5rem",padding:"0.4rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem",textAlign:"center"}})}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right"},children:ne(A.precio_unitario||0)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:"500"},children:ne((A.precio_unitario||0)*(A.cantidad||1))}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("button",{type:"button",onClick:()=>wr(A.producto_id),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Eliminar",children:e.jsx(Tr,{size:16})})})]},A.producto_id))})]})})})]}),e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",padding:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem"},children:"Servicios del Plan"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr auto",gap:"0.75rem",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Servicio"}),e.jsx("input",{type:"text",value:cr,onChange:A=>gr(A.target.value),placeholder:"Ej: Confirmacin de protenas",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("button",{type:"button",onClick:O,style:{padding:"0.75rem 1rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ur,{size:18}),"Agregar"]})]}),Sr&&e.jsx("div",{style:{marginTop:"0.5rem",color:"#ef4444",fontSize:"0.875rem"},children:Sr}),e.jsx("div",{style:{marginTop:"1rem"},children:U.length===0?e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"No hay servicios asignados a este plan"}):e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Servicio"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Accin"})]})}),e.jsx("tbody",{children:U.map((A,le)=>e.jsxs("tr",{style:{borderTop:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"0.75rem"},children:A.nombre}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("button",{type:"button",onClick:()=>Ee(le),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Eliminar",children:e.jsx(Tr,{size:16})})})]},`${A.nombre}-${le}`))})]})})})]}),e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",padding:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem"},children:"Servicios del Plan"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr auto",gap:"0.75rem",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Servicio"}),e.jsx("input",{type:"text",value:cr,onChange:A=>gr(A.target.value),placeholder:"Ej: Confirmacin de protenas",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("button",{type:"button",onClick:O,style:{padding:"0.75rem 1rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ur,{size:18}),"Agregar"]})]}),Sr&&e.jsx("div",{style:{marginTop:"0.5rem",color:"#ef4444",fontSize:"0.875rem"},children:Sr}),e.jsx("div",{style:{marginTop:"1rem"},children:U.length===0?e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"No hay servicios asignados a este plan"}):e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Servicio"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Accin"})]})}),e.jsx("tbody",{children:U.map((A,le)=>e.jsxs("tr",{style:{borderTop:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"0.75rem"},children:A.nombre}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("button",{type:"button",onClick:()=>Ee(le),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Eliminar",children:e.jsx(Tr,{size:16})})})]},`${A.nombre}-${le}`))})]})})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:Y.activo,onChange:A=>X({...Y,activo:A.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Plan activo"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Consideraciones"}),e.jsx("textarea",{value:Y.incluye,onChange:A=>X({...Y,incluye:A.target.value}),rows:3,placeholder:"Notas, restricciones o consideraciones del plan...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:De,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:se,style:{padding:"0.75rem 1.5rem",backgroundColor:se?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:se?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),se?"Guardando...":"Guardar"]})]})]})]})}),H&&P&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:ir,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:A=>A.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Editar Plan"}),e.jsx("button",{onClick:ir,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),ye&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:ye}),e.jsxs("form",{onSubmit:gt,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:Y.nombre,onChange:A=>X({...Y,nombre:A.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:Y.descripcion,onChange:A=>X({...Y,descripcion:A.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Precio del Plan ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:Y.precio_base,onChange:A=>X({...Y,precio_base:A.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Duracin (horas)"}),e.jsx("input",{type:"number",step:"0.5",value:Y.duracion_horas,onChange:A=>X({...Y,duracion_horas:A.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Total Productos"}),e.jsx("input",{type:"text",value:ne(ue),readOnly:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:"#f9fafb"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descuento (Oferta)"}),e.jsx("input",{type:"text",value:ne(Je),readOnly:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:"#f9fafb"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Capacidad Mnima"}),e.jsx("input",{type:"number",value:Y.capacidad_minima,onChange:A=>X({...Y,capacidad_minima:A.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Capacidad Mxima"}),e.jsx("input",{type:"number",value:Y.capacidad_maxima,onChange:A=>X({...Y,capacidad_maxima:A.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",padding:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem"},children:"Productos del Plan"}),we&&e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280"},children:"Cargando productos..."}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr auto",gap:"0.75rem",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Producto"}),e.jsx("input",{type:"text",value:Re,onChange:A=>me(A.target.value),placeholder:"Buscar producto...",style:{width:"100%",padding:"0.6rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",marginBottom:"0.5rem"}}),e.jsxs("select",{value:h,onChange:A=>J(A.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"",children:"Seleccione un producto"}),u.filter(A=>!Ie.some(le=>le.producto_id===A.id)).filter(A=>{var le;return(le=A.nombre)==null?void 0:le.toLowerCase().includes(Re.toLowerCase())}).map(A=>e.jsxs("option",{value:A.id,children:[A.nombre," - ",ne(A.precio||0)]},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Cantidad"}),e.jsx("input",{type:"number",min:"1",value:fe,onChange:A=>ge(A.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("button",{type:"button",onClick:jr,style:{padding:"0.75rem 1rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ur,{size:18}),"Agregar"]})]}),e.jsx("div",{style:{marginTop:"1rem"},children:Ie.length===0?e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"No hay productos asignados a este plan"}):e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Producto"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Cantidad"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Precio Unit."}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Subtotal"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Accin"})]})}),e.jsx("tbody",{children:Ie.map(A=>e.jsxs("tr",{style:{borderTop:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"0.75rem"},children:A.nombre_producto||"N/A"}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("input",{type:"number",min:"1",value:A.cantidad,onChange:le=>Nr(A.producto_id,le.target.value),style:{width:"5rem",padding:"0.4rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem",textAlign:"center"}})}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right"},children:ne(A.precio_unitario||0)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:"500"},children:ne((A.precio_unitario||0)*(A.cantidad||1))}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("button",{type:"button",onClick:()=>wr(A.producto_id),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Eliminar",children:e.jsx(Tr,{size:16})})})]},A.producto_id))})]})})})]}),e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",padding:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem"},children:"Servicios del Plan"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr auto",gap:"0.75rem",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Servicio"}),e.jsx("input",{type:"text",value:cr,onChange:A=>gr(A.target.value),onKeyPress:A=>{A.key==="Enter"&&(A.preventDefault(),O())},placeholder:"Ej: Confirmacin de protenas",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("button",{type:"button",onClick:O,style:{padding:"0.75rem 1rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ur,{size:18}),"Agregar"]})]}),Sr&&e.jsx("div",{style:{marginTop:"0.5rem",color:"#ef4444",fontSize:"0.875rem"},children:Sr}),e.jsx("div",{style:{marginTop:"1rem"},children:U.length===0?e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"No hay servicios asignados a este plan"}):e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",width:"3rem"},children:"Orden"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Servicio"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Accin"})]})}),e.jsx("tbody",{children:U.map((A,le)=>e.jsxs("tr",{style:{borderTop:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"0.75rem",textAlign:"center",color:"#6b7280"},children:le+1}),e.jsx("td",{style:{padding:"0.75rem"},children:A.nombre}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("button",{type:"button",onClick:()=>Ee(le),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Eliminar",children:e.jsx(Tr,{size:16})})})]},`${A.nombre}-${le}`))})]})})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:Y.activo,onChange:A=>X({...Y,activo:A.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Plan activo"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Consideraciones"}),e.jsx("textarea",{value:Y.incluye,onChange:A=>X({...Y,incluye:A.target.value}),rows:3,placeholder:"Notas, restricciones o consideraciones del plan...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:ir,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:se,style:{padding:"0.75rem 1.5rem",backgroundColor:se?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:se?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),se?"Guardando...":"Guardar Cambios"]})]})]})]})}),R&&P&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:vr,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"700px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:A=>A.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Detalle del Plan"}),e.jsx("button",{onClick:vr,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{width:"4rem",height:"4rem",borderRadius:"0.5rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(jt,{size:32,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:P.nombre||"N/A"}),e.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#6366f1",margin:"0.25rem 0 0 0"},children:ne(P.precio_base||0)})]})]}),e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Descripcin"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:P.descripcion||"Sin descripcin"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[P.capacidad_minima&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Capacidad Mnima"}),e.jsxs("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:[P.capacidad_minima," personas"]})]}),P.capacidad_maxima&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Capacidad Mxima"}),e.jsxs("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:[P.capacidad_maxima," personas"]})]})]}),P.duracion_horas&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Duracin"}),e.jsxs("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:[P.duracion_horas," horas"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Total Productos"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:ne(q)})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Descuento (Oferta)"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:ne(Se)})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Estado"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:P.activo!==!1?"#10b98120":"#ef444420",color:P.activo!==!1?"#10b981":"#ef4444"},children:P.activo!==!1?"Activo":"Inactivo"})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Productos Incluidos"}),lr&&e.jsxs("button",{onClick:()=>{vr(),nr(P)},style:{padding:"0.5rem 1rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ur,{size:16}),"Gestionar Productos"]})]}),N.length===0?e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"No hay productos asignados a este plan"}):e.jsx("div",{style:{backgroundColor:"#f9fafb",borderRadius:"0.375rem",padding:"1rem"},children:N.map(A=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0",borderBottom:"1px solid #e5e7eb"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:A.nombre_producto||"N/A"}),e.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:["Cantidad: ",A.cantidad]})]}),e.jsx("p",{style:{margin:0,fontWeight:"500",color:"#6366f1"},children:ne(A.precio||0)})]},A.producto_id))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Servicios del Plan"}),U.length===0?e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"No hay servicios asignados a este plan"}):e.jsx("div",{style:{backgroundColor:"#f9fafb",borderRadius:"0.375rem",padding:"1rem"},children:U.map((A,le)=>e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0",borderBottom:"1px solid #e5e7eb"},children:e.jsx("p",{style:{margin:0,fontWeight:"500"},children:A.nombre})},`${A.nombre}-${le}`))})]}),P.incluye&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Consideraciones"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:P.incluye})]})]})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:e.jsx("button",{onClick:vr,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})})]})}),F&&P&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:he,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:A=>A.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"50%",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ut,{size:24,color:"#dc2626"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"Eliminar Plan"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:"Est seguro de eliminar este plan?"})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.375rem",marginBottom:"1.5rem"},children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:P.nombre}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:ne(P.precio_base||0)})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:he,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{onClick:ro,disabled:se,style:{padding:"0.75rem 1.5rem",backgroundColor:se?"#9ca3af":"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:se?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Tr,{size:18}),se?"Eliminando...":"Eliminar"]})]})]})}),D&&P&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:or,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"700px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:A=>A.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Gestionar Productos del Plan"}),e.jsx("button",{onClick:or,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),e.jsx("div",{style:{marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"0.375rem"},children:e.jsxs("p",{style:{margin:0,fontWeight:"500"},children:["Plan: ",P.nombre]})}),e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",border:"1px solid #e5e7eb",borderRadius:"0.375rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem"},children:"Agregar Producto"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr auto",gap:"0.75rem",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Producto"}),e.jsxs("select",{value:be,onChange:A=>ce(A.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"",children:"Seleccione un producto"}),u.filter(A=>!N.some(le=>le.producto_id===A.id)).map(A=>e.jsxs("option",{value:A.id,children:[A.nombre," - ",ne(A.precio||0)]},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Cantidad"}),e.jsx("input",{type:"number",min:"1",value:re,onChange:A=>x(A.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("button",{onClick:Lo,style:{padding:"0.75rem 1rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ur,{size:18}),"Agregar"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem"},children:"Productos Incluidos"}),N.length===0?e.jsx("p",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:"No hay productos asignados a este plan"}):e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Producto"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Cantidad"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Precio Unit."}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Subtotal"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Accin"})]})}),e.jsx("tbody",{children:N.map(A=>e.jsxs("tr",{style:{borderTop:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"0.75rem"},children:A.nombre_producto||"N/A"}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:A.cantidad}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right"},children:ne(A.precio||0)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:"500"},children:ne((A.precio||0)*(A.cantidad||1))}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("button",{onClick:()=>Ei(A.producto_id),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Eliminar",children:e.jsx(Tr,{size:16})})})]},A.producto_id))})]})})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:e.jsx("button",{onClick:or,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})})]})})]})},Pv=()=>{var qe,hr;const{usuario:r}=st(),{toasts:t,removeToast:o,success:n,error:i,warning:s}=Ar(),a=go(),[d,u]=c.useState([]),[l,f]=c.useState([]),[g,y]=c.useState([]),[z,b]=c.useState(null),[w,k]=c.useState(0),[j,p]=c.useState(0),[C,S]=c.useState(!0),[L,W]=c.useState(""),[I,m]=c.useState(""),[B,H]=c.useState(""),[E,R]=c.useState("todos"),[te,F]=c.useState(""),[K,D]=c.useState("todos"),[Z,P]=c.useState("todos"),[$,N]=c.useState(""),[ee,Y]=c.useState(""),[X,se]=c.useState(""),[G,ye]=c.useState(""),[ie,be]=c.useState("id_desc"),[ce,re]=c.useState(!1),[x,h]=c.useState(!1),[J,fe]=c.useState(!1),[ge,Re]=c.useState(!1),[me,Ie]=c.useState(null),[Q,M]=c.useState(null),[V,we]=c.useState(""),[Ne,U]=c.useState(!1),[pe,Ge]=c.useState(!1),[We,cr]=c.useState({evento_id:"",monto:"",metodo_pago:"efectivo",tipo_pago:"abono",fecha_pago:new Date().toISOString().split("T")[0],numero_referencia:"",observaciones:""}),[gr,Sr]=c.useState(!1),[Ke,ur]=c.useState(""),lr=xr(r,Ye.PAGOS_REGISTRAR,[T.ADMIN,T.MANAGER,T.COORDINATOR]),Fr=xr(r,Ye.PAGOS_REEMBOLSAR,[T.ADMIN,T.MANAGER]),zr=xr(r,Ye.EVENTOS_AGREGAR_PRODUCTO,[T.ADMIN,T.MANAGER]);xr(r,Ye.PAGOS_ELIMINAR,[T.ADMIN,T.MANAGER]);const Qe=xr(r,Ye.PAGOS_APROBAR,[T.ADMIN,T.MANAGER]),Xe=xr(r,Ye.PAGOS_ANULAR,[T.ADMIN,T.MANAGER]);c.useEffect(()=>{ke(),ne()},[r==null?void 0:r.id]);const ne=async()=>{try{const _=await Vo.getAll();y(_.cuentas||[])}catch(_){console.error("Error al cargar cuentas:",_)}};c.useEffect(()=>{I?(Te(),Ae()):(u([]),k(0),b(null))},[I]);const ke=async()=>{try{const _={};_r(r==null?void 0:r.rol,[T.COORDINATOR])&&(r!=null&&r.id)&&(_.coordinador_id=r.id);const je=await dr.getAll(_);f(je.eventos||[])}catch(_){console.error("Error al cargar eventos:",_)}},Te=async()=>{var _,je;try{S(!0);const _e=await rt.getByEvento(I);u(_e.pagos||[]),k(_e.total_pagado||0);try{const Ze=await rt.getTotalEvento(I);Ze.total_pagado!==void 0&&Ze.total_pagado!==null&&k(parseFloat(Ze.total_pagado)||0),Ze.total_reembolsos!==void 0&&Ze.total_reembolsos!==null&&p(parseFloat(Ze.total_reembolsos)||0)}catch(Ze){console.error("Error al cargar totales de pagos:",Ze)}W("")}catch(_e){const Ze=((je=(_=_e.response)==null?void 0:_.data)==null?void 0:je.error)||"Error al cargar los pagos";W(Ze),i(Ze),console.error(_e)}finally{S(!1)}},Ae=async()=>{try{const _=l.find(je=>je.id_evento===parseInt(I));_&&b(_)}catch(_){console.error("Error al cargar informacin del evento:",_)}},ue=_=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(_),Ve=_=>{if(!_)return null;if(typeof _=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(_)){const[je,_e,Ze]=_.split("-").map(Number);return new Date(je,_e-1,Ze)}return new Date(_)},Je=_=>{if(!_)return"-";try{return Ve(_).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"numeric"})}catch{return _}},q=_=>{if(!_)return"-";try{const je=Ve(_),_e=je.getFullYear(),Ze=String(je.getMonth()+1).padStart(2,"0"),Dr=String(je.getDate()).padStart(2,"0"),Wt=String(je.getHours()).padStart(2,"0"),zo=String(je.getMinutes()).padStart(2,"0");return`${_e}-${Ze}-${Dr} ${Wt}:${zo}`}catch{return _}},Se=_=>{const je=Number.parseFloat(_);return Number.isFinite(je)?je:0},ve=_=>(_||"").toString().toLowerCase(),Oe=Math.max(0,w-j),Ce=_=>{switch(_){case"aprobado":return"Aprobado";case"rechazado":return"Rechazado";case"en_revision":default:return"En revisin"}},Le=_=>{switch(_){case"aprobado":return{backgroundColor:"#16a34a20",color:"#16a34a"};case"rechazado":return{backgroundColor:"#ef444420",color:"#ef4444"};default:return{backgroundColor:"#f59e0b20",color:"#d97706"}}},De=d.filter(_=>{if(!te)return!0;const je=ve(te);return ve(_.numero_referencia).includes(je)||ve(_.observaciones).includes(je)||ve(_.metodo_pago).includes(je)||ve(_.tipo_pago).includes(je)}).filter(_=>K==="todos"?!0:_.tipo_pago===K).filter(_=>Z==="todos"?!0:_.metodo_pago===Z).filter(_=>{if(!$&&!ee)return!0;const je=Ve(_.fecha_pago);return!($&&je<Ve($)||ee&&je>new Date(`${ee}T23:59:59`))}).filter(_=>{if(!X&&!G)return!0;const je=Se(_.monto||0);return!(X&&je<Se(X)||G&&je>Se(G))}).sort((_,je)=>{let _e=0;switch(ie){case"monto_asc":_e=Se(_.monto||0)-Se(je.monto||0);break;case"monto_desc":_e=Se(je.monto||0)-Se(_.monto||0);break;case"fecha_asc":_e=Ve(_.fecha_pago).getTime()-Ve(je.fecha_pago).getTime();break;case"fecha_desc":_e=Ve(je.fecha_pago).getTime()-Ve(_.fecha_pago).getTime();break;case"id_desc":default:_e=Se(je.id||0)-Se(_.id||0);break}return _e!==0?_e:Se(je.id||0)-Se(_.id||0)}),Fe=De.reduce((_,je)=>{const _e=Se(je.monto||0);return _.totalPagos+=1,je.tipo_pago==="reembolso"?_.totalReembolsos+=_e:_.totalIngresos+=_e,_},{totalPagos:0,totalIngresos:0,totalReembolsos:0}),ir=Fe.totalIngresos-Fe.totalReembolsos,yr=(qe=De[0])==null?void 0:qe.fecha_pago,vr=Math.max(0,w-j),Pr=async(_=null,je="abono")=>{const _e=_||z,Ze=(_e==null?void 0:_e.id_evento)||(_e==null?void 0:_e.id)||I;if(!_e||!Ze){s("Por favor seleccione un evento primero");return}if(je!=="reembolso"){const Dr=(_e==null?void 0:_e.saldo)??er();if(Se(Dr)<=0){s("Este evento no tiene saldo pendiente. Agregue adicionales al evento si desea registrar pagos.");return}}else{let Dr=Math.max(0,w-j);try{const Wt=await rt.getTotalEvento(Ze),zo=parseFloat(Wt.total_pagado)||0,Ri=parseFloat(Wt.total_reembolsos)||0;k(zo),p(Ri),Dr=Math.max(0,zo-Ri)}catch(Wt){console.error("Error al cargar totales para reembolso:",Wt)}if(Dr<=0){s("No hay saldo disponible para reembolsar.");return}}cr({evento_id:Ze,monto:je==="reembolso"?Math.max(0,w-j):"",metodo_pago:"efectivo",tipo_pago:je,fecha_pago:new Date().toISOString().split("T")[0],numero_referencia:"",observaciones:""}),ur(""),re(!0)},he=()=>{re(!1),cr({evento_id:"",monto:"",metodo_pago:"efectivo",tipo_pago:"abono",fecha_pago:new Date().toISOString().split("T")[0],numero_referencia:"",observaciones:""}),ur("")},nr=_=>{Ie(_),h(!0)},or=()=>{h(!1),Ie(null)},jr=async(_,je)=>{var _e,Ze;if(_)try{U(!0),await rt.updateEstado(_.id,je),await Te();const Dr=await rt.getById(_.id);Dr!=null&&Dr.pago&&Ie(Dr.pago),n("Estado del pago actualizado")}catch(Dr){const Wt=((Ze=(_e=Dr.response)==null?void 0:_e.data)==null?void 0:Ze.error)||"No se pudo actualizar el estado";i(Wt)}finally{U(!1)}},wr=_=>{M(_),we(_.cuenta_id||""),Re(!0)},Nr=()=>{Re(!1),M(null),we("")},O=async()=>{var _,je;if(!Q||!V){i("Debe seleccionar una cuenta");return}try{Ge(!0),await rt.updateCuenta(Q.id,parseInt(V)),await Te(),n("Cuenta del pago actualizada correctamente"),Nr()}catch(_e){const Ze=((je=(_=_e.response)==null?void 0:_.data)==null?void 0:je.error)||"No se pudo actualizar la cuenta";i(Ze)}finally{Ge(!1)}},Ee=async(_=!1)=>{var je,_e;if(ur(""),!We.monto||parseFloat(We.monto)<=0){ur("El monto debe ser mayor a cero");return}if(!We.fecha_pago){ur("La fecha de pago es requerida");return}if(We.tipo_pago==="reembolso"&&parseFloat(We.monto)>vr){ur("El monto del reembolso supera el saldo disponible para reembolsar.");return}if(We.tipo_pago==="reembolso"&&!_){fe(!0);return}try{Sr(!0);const Ze={evento_id:parseInt(We.evento_id),monto:parseFloat(We.monto),metodo_pago:We.metodo_pago,tipo_pago:We.tipo_pago,fecha_pago:We.fecha_pago,numero_referencia:We.numero_referencia||null,observaciones:We.observaciones||null,origen:"web"};await rt.create(Ze),await Te(),he(),n(We.tipo_pago==="reembolso"?"Reembolso registrado exitosamente":"Pago registrado exitosamente")}catch(Ze){const Dr=((_e=(je=Ze.response)==null?void 0:je.data)==null?void 0:_e.error)||"Error al registrar el pago";ur(Dr),console.error(Ze)}finally{Sr(!1)}},He=async _=>{_.preventDefault(),await Ee(!1)},er=()=>{if(!z)return 0;const _=parseFloat(z.total||0);return Math.max(0,_-Oe)},kr=er()>0,gt=(z==null?void 0:z.estado)==="cancelado",ro=_=>{if(!_||parseFloat(_)<=0)return"abono";const je=parseFloat(_),_e=er();return je>=_e&&_e>0?"pago_completo":"abono"},Lo=_=>{const je=_.target.value;if(We.tipo_pago!=="reembolso"){const _e=ro(je);cr({...We,monto:je,tipo_pago:_e})}else cr({...We,monto:je})},Ei=()=>{if(!z)return;if(gt){s("No se pueden agregar adicionales a un evento cancelado.");return}const _=`/eventos/${z.id_evento||z.id}?tab=productos`;window.location.href=_},A=_=>{if(!_)return;const je=_.id_evento||_.id;m(String(je)),b(_);const _e=Se(_.total||0),Ze=Se(_.saldo||0);k(Math.max(0,_e-Ze))},le=l.filter(_=>{if(!B)return!0;const je=ve(B);return ve(_.nombre_evento).includes(je)||ve(_.nombre_cliente).includes(je)||ve(_.tipo_evento).includes(je)}).filter(_=>E==="todos"?!0:_.estado===E).sort((_,je)=>new Date(je.fecha_evento).getTime()-new Date(_.fecha_evento).getTime()),Ue=le.reduce((_,je)=>{const _e=Se(je.total||0),Ze=Se(je.saldo||0);return _.totalEventos+=1,_.totalFacturado+=_e,_.totalSaldo+=Ze,_.totalPagado+=Math.max(0,_e-Ze),_},{totalEventos:0,totalFacturado:0,totalPagado:0,totalSaldo:0});return C&&I?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando pagos..."}):e.jsxs("div",{children:[e.jsx(Lr,{toasts:t,removeToast:o}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Pagos"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de pagos y abonos"})]})}),L&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:L}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:a?"1fr":"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Eventos"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:Ue.totalEventos})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Total facturado"}),e.jsx("div",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#6366f1"},children:ue(Ue.totalFacturado)})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Total pagado"}),e.jsx("div",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#10b981"},children:ue(Ue.totalPagado)})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Saldo pendiente"}),e.jsx("div",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#ef4444"},children:ue(Ue.totalSaldo)})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",marginBottom:"1rem",display:"flex",gap:"1rem",flexWrap:"wrap",flexDirection:a?"column":"row"},children:[e.jsxs("div",{style:{position:"relative",flex:1,minWidth:a?"100%":"260px"},children:[e.jsx(Rt,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar por evento, cliente o tipo...",value:B,onChange:_=>H(_.target.value),style:{width:"100%",padding:"0.65rem 0.75rem 0.65rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"}})]}),e.jsxs("select",{value:E,onChange:_=>R(_.target.value),style:{padding:"0.65rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem",minWidth:a?"100%":"180px"},children:[e.jsx("option",{value:"todos",children:"Todos los estados"}),e.jsx("option",{value:"cotizacion",children:"Cotizacin"}),e.jsx("option",{value:"confirmado",children:"Confirmado"}),e.jsx("option",{value:"en_proceso",children:"En proceso"}),e.jsx("option",{value:"completado",children:"Completado"}),e.jsx("option",{value:"cancelado",children:"Cancelado"})]})]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",overflow:"hidden",marginBottom:"2rem"},children:a?e.jsx("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:le.length===0?e.jsx("div",{style:{padding:"1.5rem",textAlign:"center",color:"#6b7280"},children:"No hay eventos con ese filtro."}):le.map(_=>{const je=Se(_.total||0),_e=Se(_.saldo||0),Ze=Math.max(0,je-_e),Dr=_.id_evento||_.id,Wt=_.estado==="cancelado";return e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"1rem",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06)",backgroundColor:I&&parseInt(I,10)===Dr?"#eef2ff":"white",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#111827"},children:_.nombre_evento||"Evento"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:_.nombre_cliente||"-"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Fecha"}),e.jsx("div",{style:{fontWeight:"600"},children:Je(_.fecha_evento)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Estado"}),e.jsx("div",{style:{fontWeight:"600",textTransform:"capitalize"},children:_.estado||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Total"}),e.jsx("div",{style:{fontWeight:"600"},children:ue(je)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Saldo"}),e.jsx("div",{style:{fontWeight:"600",color:"#ef4444"},children:ue(_e)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Pagado"}),e.jsx("div",{style:{fontWeight:"600",color:"#10b981"},children:ue(Ze)})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx(Gr,{to:`/pagos/evento/${_.id_evento||_.id}`,style:{padding:"0.4rem 0.75rem",borderRadius:"0.375rem",border:"1px solid #e5e7eb",backgroundColor:"#f3f4f6",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600",textDecoration:"none",color:"#374151",display:"inline-block"},children:"Ver pagos"}),lr&&_e>0&&!Wt&&e.jsx("button",{type:"button",onClick:()=>{A(_),Pr(_,"abono")},style:{padding:"0.4rem 0.75rem",borderRadius:"0.375rem",border:"none",backgroundColor:"#10b981",color:"white",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"Registrar pago"}),Fr&&Ze>0&&e.jsx("button",{type:"button",onClick:()=>{A(_),Pr(_,"reembolso")},style:{padding:"0.4rem 0.75rem",borderRadius:"0.375rem",border:"none",backgroundColor:"#ef4444",color:"white",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"Registrar reembolso"})]})]},Dr)})}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"0.85rem",textAlign:"left",fontSize:"0.85rem",fontWeight:"600"},children:"Evento"}),e.jsx("th",{style:{padding:"0.85rem",textAlign:"left",fontSize:"0.85rem",fontWeight:"600"},children:"Cliente"}),e.jsx("th",{style:{padding:"0.85rem",textAlign:"left",fontSize:"0.85rem",fontWeight:"600"},children:"Fecha"}),e.jsx("th",{style:{padding:"0.85rem",textAlign:"right",fontSize:"0.85rem",fontWeight:"600"},children:"Total"}),e.jsx("th",{style:{padding:"0.85rem",textAlign:"right",fontSize:"0.85rem",fontWeight:"600"},children:"Pagado"}),e.jsx("th",{style:{padding:"0.85rem",textAlign:"right",fontSize:"0.85rem",fontWeight:"600"},children:"Saldo"}),e.jsx("th",{style:{padding:"0.85rem",textAlign:"left",fontSize:"0.85rem",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"0.85rem",textAlign:"center",fontSize:"0.85rem",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:le.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",style:{padding:"1.5rem",textAlign:"center",color:"#6b7280"},children:"No hay eventos con ese filtro."})}):le.map(_=>{const je=Se(_.total||0),_e=Se(_.saldo||0),Ze=Math.max(0,je-_e),Dr=_.id_evento||_.id,Wt=_.estado==="cancelado";return e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb",backgroundColor:I&&parseInt(I,10)===Dr?"#eef2ff":"white"},children:[e.jsx("td",{style:{padding:"0.85rem",fontSize:"0.9rem",fontWeight:"600"},children:_.nombre_evento||"Evento"}),e.jsx("td",{style:{padding:"0.85rem",fontSize:"0.85rem"},children:_.nombre_cliente||"-"}),e.jsx("td",{style:{padding:"0.85rem",fontSize:"0.85rem"},children:Je(_.fecha_evento)}),e.jsx("td",{style:{padding:"0.85rem",textAlign:"right",fontSize:"0.85rem"},children:ue(je)}),e.jsx("td",{style:{padding:"0.85rem",textAlign:"right",fontSize:"0.85rem",color:"#10b981"},children:ue(Ze)}),e.jsx("td",{style:{padding:"0.85rem",textAlign:"right",fontSize:"0.85rem",color:"#ef4444"},children:ue(_e)}),e.jsx("td",{style:{padding:"0.85rem",fontSize:"0.8rem",textTransform:"capitalize"},children:_.estado||"-"}),e.jsx("td",{style:{padding:"0.85rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(Gr,{to:`/pagos/evento/${_.id_evento||_.id}`,style:{padding:"0.4rem 0.75rem",borderRadius:"0.375rem",border:"1px solid #e5e7eb",backgroundColor:"#f3f4f6",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600",textDecoration:"none",color:"#374151",display:"inline-block"},children:"Ver pagos"}),lr&&_e>0&&!Wt&&e.jsx("button",{type:"button",onClick:()=>{A(_),Pr(_,"abono")},style:{padding:"0.4rem 0.75rem",borderRadius:"0.375rem",border:"none",backgroundColor:"#10b981",color:"white",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"Registrar pago"}),Fr&&Ze>0&&e.jsx("button",{type:"button",onClick:()=>{A(_),Pr(_,"reembolso")},style:{padding:"0.4rem 0.75rem",borderRadius:"0.375rem",border:"none",backgroundColor:"#ef4444",color:"white",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"Registrar reembolso"})]})})]},Dr)})})]})})}),z&&e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"600",color:"#374151"},children:"Resumen del evento"}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:"Agrega adicionales para generar saldo pendiente y registrar pagos."})]}),zr&&e.jsx("button",{type:"button",onClick:Ei,disabled:gt,style:{padding:"0.5rem 1rem",backgroundColor:gt?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:gt?"not-allowed":"pointer",fontWeight:"500"},children:"Agregar adicionales"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(jt,{size:18,color:"#6366f1"}),e.jsx("label",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Evento"})]}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"600"},children:z.nombre_evento}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:z.nombre_cliente})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(zt,{size:18,color:"#10b981"}),e.jsx("label",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Total Evento"})]}),e.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:"bold",color:"#6366f1"},children:ue(parseFloat(z.total||0))})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(zt,{size:18,color:"#10b981"}),e.jsx("label",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Total Pagado"})]}),e.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:"bold",color:"#10b981"},children:ue(Oe)})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(zt,{size:18,color:"#ef4444"}),e.jsx("label",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Saldo Pendiente"})]}),e.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:"bold",color:"#ef4444"},children:ue(er())})]})]})]}),I&&e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Rt,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar por referencia, observaciones, mtodo...",value:te,onChange:_=>F(_.target.value),style:{width:"100%",padding:"0.65rem 0.75rem 0.65rem 2.25rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"}})]}),e.jsxs("select",{value:K,onChange:_=>D(_.target.value),style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"},children:[e.jsx("option",{value:"todos",children:"Todos los tipos"}),e.jsx("option",{value:"abono",children:"Abono"}),e.jsx("option",{value:"pago_completo",children:"Pago Completo"}),e.jsx("option",{value:"reembolso",children:"Reembolso"})]}),e.jsxs("select",{value:Z,onChange:_=>P(_.target.value),style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"},children:[e.jsx("option",{value:"todos",children:"Todos los mtodos"}),e.jsx("option",{value:"efectivo",children:"Efectivo"}),e.jsx("option",{value:"transferencia",children:"Transferencia"}),e.jsx("option",{value:"tarjeta_debito",children:"Tarjeta Dbito"}),e.jsx("option",{value:"tarjeta_credito",children:"Tarjeta Crdito"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"otro",children:"Otro"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:a?"1fr":"1fr 1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.35rem"},children:"Desde"}),e.jsx("input",{type:"date",value:$,onChange:_=>N(_.target.value),style:{width:"100%",padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.35rem"},children:"Hasta"}),e.jsx("input",{type:"date",value:ee,onChange:_=>Y(_.target.value),style:{width:"100%",padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.35rem"},children:"Monto mnimo"}),e.jsx("input",{type:"number",min:"0",value:X,onChange:_=>se(_.target.value),placeholder:"0",style:{width:"100%",padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.35rem"},children:"Monto mximo"}),e.jsx("input",{type:"number",min:"0",value:G,onChange:_=>ye(_.target.value),placeholder:"Sin tope",style:{width:"100%",padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"}})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:a?"stretch":"flex-end",marginTop:"0.75rem"},children:e.jsxs("select",{value:ie,onChange:_=>be(_.target.value),style:{padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",minWidth:a?"100%":"220px"},children:[e.jsx("option",{value:"fecha_desc",children:"Ordenar: Ms recientes"}),e.jsx("option",{value:"fecha_asc",children:"Ordenar: Ms antiguos"}),e.jsx("option",{value:"monto_desc",children:"Ordenar: Monto mayor"}),e.jsx("option",{value:"monto_asc",children:"Ordenar: Monto menor"})]})})]}),I&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:a?"1fr":"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Pagos encontrados"}),e.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700"},children:Fe.totalPagos})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Total ingresos"}),e.jsx("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700",color:"#10b981"},children:ue(Fe.totalIngresos)})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Total reembolsos"}),e.jsx("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700",color:"#ef4444"},children:ue(Fe.totalReembolsos)})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Neto"}),e.jsx("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700",color:"#6366f1"},children:ue(ir)})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"ltimo pago"}),e.jsx("p",{style:{margin:0,fontSize:"0.95rem",fontWeight:"600"},children:yr?q(yr):"Sin pagos"})]})]}),I&&e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",gap:"1rem",flexWrap:"wrap"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"700",color:"#374151"},children:"Pagos del evento"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[lr&&e.jsx("button",{type:"button",onClick:()=>Pr(z,"abono"),disabled:!z||!kr,style:{padding:"0.5rem 0.85rem",borderRadius:"0.375rem",border:"none",backgroundColor:!z||!kr?"#9ca3af":"#10b981",color:"white",cursor:!z||!kr?"not-allowed":"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"Registrar pago"}),Fr&&e.jsx("button",{type:"button",onClick:()=>Pr(z,"reembolso"),disabled:!z||vr<=0,style:{padding:"0.5rem 0.85rem",borderRadius:"0.375rem",border:"none",backgroundColor:!z||vr<=0?"#fca5a5":"#ef4444",color:"white",cursor:!z||vr<=0?"not-allowed":"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"Registrar reembolso"})]})]}),a?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:De.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:"No hay pagos que coincidan con los filtros"}):De.map(_=>e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"1rem",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06)",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginBottom:"0.25rem"},children:["ID #",_.id]}),e.jsx("div",{style:{fontWeight:"600",color:"#111827"},children:q(_.fecha_pago)}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:_.metodo_pago||"-"})]}),e.jsxs("div",{style:{fontWeight:"600",color:_.tipo_pago==="reembolso"?"#ef4444":"#10b981"},children:[_.tipo_pago==="reembolso"?"-":"+",ue(_.monto||0)]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:_.tipo_pago==="reembolso"?"#ef444420":_.tipo_pago==="pago_completo"?"#10b98120":"#3b82f620",color:_.tipo_pago==="reembolso"?"#ef4444":_.tipo_pago==="pago_completo"?"#10b981":"#3b82f6"},children:_.tipo_pago==="reembolso"?"Reembolso":_.tipo_pago==="pago_completo"?"Pago Completo":"Abono"}),e.jsx("span",{style:{marginLeft:"0.5rem",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",...Le(_.estado_pago)},children:Ce(_.estado_pago)}),e.jsx("span",{style:{marginLeft:"0.5rem",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:_.origen==="web"?"#3b82f620":_.origen==="whatsapp"?"#22c55e20":"#6b728020",color:_.origen==="web"?"#3b82f6":_.origen==="whatsapp"?"#16a34a":"#6b7280"},children:_.origen==="web"?"Web":_.origen==="whatsapp"?"WhatsApp":"Escritorio"})]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[e.jsx("strong",{children:"Referencia:"})," ",_.numero_referencia||"-"]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[e.jsx("strong",{children:"Observaciones:"})," ",_.observaciones||"-"]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:e.jsxs("button",{onClick:()=>nr(_),style:{padding:"0.5rem 0.75rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(St,{size:16}),"Ver"]})})]},_.id))}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"ID"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Fecha"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Tipo"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Mtodo"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Cuenta Destino"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Referencia"}),e.jsx("th",{style:{padding:"1rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Monto"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Origen"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Observaciones"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:De.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"11",style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:"No hay pagos que coincidan con los filtros"})}):De.map(_=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsxs("td",{style:{padding:"1rem",fontSize:"0.85rem",color:"#6b7280",fontWeight:"600"},children:["#",_.id]}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.85rem"},children:q(_.fecha_pago)}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:_.tipo_pago==="reembolso"?"#ef444420":_.tipo_pago==="pago_completo"?"#10b98120":"#3b82f620",color:_.tipo_pago==="reembolso"?"#ef4444":_.tipo_pago==="pago_completo"?"#10b981":"#3b82f6"},children:_.tipo_pago==="reembolso"?"Reembolso":_.tipo_pago==="pago_completo"?"Pago Completo":"Abono"})}),e.jsx("td",{style:{padding:"1rem"},children:_.metodo_pago||"-"}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.85rem",color:"#4f46e5",fontWeight:"500"},children:_.nombre_cuenta||"-"}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",...Le(_.estado_pago)},children:Ce(_.estado_pago)})}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.875rem",color:"#6b7280"},children:_.numero_referencia||"-"}),e.jsxs("td",{style:{padding:"1rem",textAlign:"right",fontWeight:"600",color:_.tipo_pago==="reembolso"?"#ef4444":"#10b981"},children:[_.tipo_pago==="reembolso"?"-":"+",ue(_.monto||0)]}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:_.origen==="web"?"#3b82f620":_.origen==="whatsapp"?"#22c55e20":"#6b728020",color:_.origen==="web"?"#3b82f6":_.origen==="whatsapp"?"#16a34a":"#6b7280"},children:_.origen==="web"?"Web":_.origen==="whatsapp"?"WhatsApp":"Escritorio"})}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.875rem",color:"#6b7280",maxWidth:"200px"},children:e.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:_.observaciones||"-"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>nr(_),style:{padding:"0.5rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:je=>je.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:je=>je.currentTarget.style.backgroundColor="#3b82f6",title:"Ver Detalle",children:e.jsx(St,{size:16})}),lr&&e.jsx("button",{onClick:()=>wr(_),style:{padding:"0.5rem",backgroundColor:"#4f46e5",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:je=>je.currentTarget.style.backgroundColor="#4338ca",onMouseLeave:je=>je.currentTarget.style.backgroundColor="#4f46e5",title:"Cambiar Cuenta",children:e.jsx(sn,{size:16})})]})})]},_.id))})]})})]}),ce&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:he,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:_=>_.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:We.tipo_pago==="reembolso"?"Registrar Reembolso":"Registrar Pago"}),e.jsx("button",{onClick:he,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),Ke&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:Ke}),e.jsxs("form",{onSubmit:He,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Evento"}),e.jsx("input",{type:"text",value:((hr=l.find(_=>_.id_evento===parseInt(I)))==null?void 0:hr.nombre_evento)||"",disabled:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:"#f3f4f6",color:"#6b7280"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Tipo de Pago ",e.jsx("span",{style:{color:"#6b7280",fontWeight:"400",fontSize:"0.8rem"},children:"(automtico)"})]}),e.jsxs("div",{style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:We.tipo_pago==="reembolso"?"#fef2f2":We.tipo_pago==="pago_completo"?"#f0fdf4":"#eff6ff",color:We.tipo_pago==="reembolso"?"#dc2626":We.tipo_pago==="pago_completo"?"#16a34a":"#2563eb",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{children:We.tipo_pago==="abono"?"Abono":We.tipo_pago==="pago_completo"?"Pago Completo":"Reembolso"}),We.tipo_pago!=="reembolso"&&e.jsxs("span",{style:{fontSize:"0.7rem",color:"#6b7280",fontWeight:"400"},children:["Saldo: ",ue(er())]})]}),We.tipo_pago==="pago_completo"&&e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"#16a34a"},children:"El monto cubre el saldo pendiente del evento."}),We.tipo_pago==="reembolso"&&e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",color:"#ef4444"},children:"Este reembolso se descontar del total pagado y requiere confirmacin."})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Mtodo de Pago ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:We.metodo_pago,onChange:_=>cr({...We,metodo_pago:_.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"efectivo",children:"Efectivo"}),e.jsx("option",{value:"transferencia",children:"Transferencia"}),e.jsx("option",{value:"tarjeta_debito",children:"Tarjeta Dbito"}),e.jsx("option",{value:"tarjeta_credito",children:"Tarjeta Crdito"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"otro",children:"Otro"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Monto ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",value:We.monto,onChange:Lo,required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Fecha de Pago ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"date",value:We.fecha_pago,onChange:_=>cr({...We,fecha_pago:_.target.value}),required:!0,max:new Date().toISOString().split("T")[0],style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Nmero de Referencia"}),e.jsx("input",{type:"text",value:We.numero_referencia,onChange:_=>cr({...We,numero_referencia:_.target.value}),placeholder:"Nmero de transaccin, cheque, etc.",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Observaciones"}),e.jsx("textarea",{value:We.observaciones,onChange:_=>cr({...We,observaciones:_.target.value}),rows:3,placeholder:"Notas adicionales sobre el pago...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:he,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:gr,style:{padding:"0.75rem 1.5rem",backgroundColor:gr?"#9ca3af":"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:gr?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),gr?"Registrando...":We.tipo_pago==="reembolso"?"Registrar Reembolso":"Registrar Pago"]})]})]})]})}),x&&me&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:or,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:_=>_.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Detalle del Pago"}),e.jsx("button",{onClick:or,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{width:"4rem",height:"4rem",borderRadius:"50%",backgroundColor:"#10b98120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(zt,{size:32,color:"#10b981"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:ue(me.monto||0)}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:q(me.fecha_pago)})]})]}),e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Tipo de Pago"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:me.tipo_pago==="reembolso"?"#ef444420":me.tipo_pago==="pago_completo"?"#10b98120":"#3b82f620",color:me.tipo_pago==="reembolso"?"#ef4444":me.tipo_pago==="pago_completo"?"#10b981":"#3b82f6"},children:me.tipo_pago==="reembolso"?"Reembolso":me.tipo_pago==="pago_completo"?"Pago Completo":"Abono"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Mtodo de Pago"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:me.metodo_pago||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Estado del Pago"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",...Le(me.estado_pago)},children:Ce(me.estado_pago)})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Nmero de Referencia"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:me.numero_referencia||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Cuenta Destino"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(sn,{size:18,color:"#4f46e5"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:me.nombre_cuenta||"Sin cuenta asignada"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Origen"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:me.origen==="web"?"#3b82f620":me.origen==="whatsapp"?"#22c55e20":"#6b728020",color:me.origen==="web"?"#3b82f6":me.origen==="whatsapp"?"#16a34a":"#6b7280"},children:me.origen==="web"?"Web":me.origen==="whatsapp"?"WhatsApp":"Escritorio"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Observaciones"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:me.observaciones||"-"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[me.estado_pago==="en_revision"&&(Qe||Xe)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>jr(me,"rechazado"),disabled:Ne||!Xe,style:{padding:"0.75rem 1.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:Ne||!Xe?"not-allowed":"pointer",fontWeight:"500",opacity:Ne||!Xe?.7:1},children:"Rechazar"}),e.jsx("button",{onClick:()=>jr(me,"aprobado"),disabled:Ne||!Qe,style:{padding:"0.75rem 1.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:Ne||!Qe?"not-allowed":"pointer",fontWeight:"500",opacity:Ne||!Qe?.7:1},children:"Aprobar"})]}),e.jsx("button",{onClick:or,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})]})]})}),J&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100,padding:"1rem"},onClick:()=>!gr&&fe(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:_=>_.stopPropagation(),children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.75rem"},children:"Confirmar reembolso"}),e.jsxs("div",{style:{color:"#374151",marginBottom:"0.5rem"},children:["Ests a punto de registrar un reembolso de ",ue(We.monto||0),"."]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:["Disponible para reembolsar: ",ue(vr)]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>fe(!1),disabled:gr,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:gr?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:async()=>{fe(!1),await Ee(!0)},disabled:gr,style:{flex:1,padding:"0.75rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:gr?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Confirmar reembolso"})]})]})}),ge&&Q&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:Nr,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",width:"90%",maxWidth:"450px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:_=>_.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"0.5rem",backgroundColor:"#eef2ff",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(sn,{size:20,color:"#4f46e5"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"700",margin:0,color:"#111827"},children:"Cambiar Cuenta Destino"}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:0},children:["Pago #",Q.id," - ",ue(Q.monto)]})]})]}),e.jsx("button",{onClick:Nr,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#374151"},children:"Cuenta Actual"}),e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#f3f4f6",borderRadius:"0.375rem",fontSize:"0.9rem",color:"#6b7280"},children:Q.nombre_cuenta||"Sin cuenta asignada"})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#374151"},children:["Nueva Cuenta ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:V,onChange:_=>we(_.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"",children:"Seleccionar cuenta..."}),g.map(_=>e.jsxs("option",{value:_.id,children:[_.nombre," ",_.numero_cuenta?`- ${_.numero_cuenta}`:""]},_.id))]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{onClick:Nr,disabled:pe,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:pe?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{onClick:O,disabled:pe||!V,style:{flex:1,padding:"0.75rem",backgroundColor:pe||!V?"#9ca3af":"#4f46e5",color:"white",border:"none",borderRadius:"0.375rem",cursor:pe||!V?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(it,{size:16}),pe?"Guardando...":"Guardar"]})]})]})})]})},Nv=()=>{var Nr;const{id:r}=bl(),t=_o(),{usuario:o}=st(),{toasts:n,removeToast:i,success:s,error:a,warning:d}=Ar(),u=go(),[l,f]=c.useState([]),[g,y]=c.useState(null),[z,b]=c.useState(0),[w,k]=c.useState(0),[j,p]=c.useState(!0),[C,S]=c.useState(""),[L,W]=c.useState(""),[I,m]=c.useState("todos"),[B,H]=c.useState("todos"),[E,R]=c.useState(""),[te,F]=c.useState(""),[K,D]=c.useState(""),[Z,P]=c.useState(""),[$,N]=c.useState("id_desc"),[ee,Y]=c.useState(!1),[X,se]=c.useState(!1),[G,ye]=c.useState(!1),[ie,be]=c.useState(!1),[ce,re]=c.useState(null),[x,h]=c.useState(null),[J,fe]=c.useState([]),[ge,Re]=c.useState(""),[me,Ie]=c.useState(!1),[Q,M]=c.useState({evento_id:"",monto:"",metodo_pago:"efectivo",tipo_pago:"abono",fecha_pago:new Date().toISOString().split("T")[0],numero_referencia:"",observaciones:""}),[V,we]=c.useState(!1),[Ne,U]=c.useState(""),pe=xr(o,Ye.PAGOS_REGISTRAR,[T.ADMIN,T.MANAGER,T.COORDINATOR]),Ge=xr(o,Ye.PAGOS_REEMBOLSAR,[T.ADMIN,T.MANAGER]),We=xr(o,Ye.EVENTOS_AGREGAR_PRODUCTO,[T.ADMIN,T.MANAGER]),cr=xr(o,Ye.PAGOS_APROBAR,[T.ADMIN,T.MANAGER]),gr=xr(o,Ye.PAGOS_ANULAR,[T.ADMIN,T.MANAGER]);c.useEffect(()=>{r&&(Ke(),ur(),Sr())},[r]);const Sr=async()=>{try{const O=await Vo.getAll();fe(O.cuentas||[])}catch(O){console.error("Error al cargar cuentas:",O)}},Ke=async()=>{try{const O=await dr.getById(r);O.evento?(y(O.evento),M(Ee=>({...Ee,evento_id:O.evento.id_evento||O.evento.id}))):(a("Evento no encontrado"),t("/pagos"))}catch(O){console.error("Error al cargar evento:",O),a("Error al cargar el evento"),t("/pagos")}},ur=async()=>{var O,Ee;try{p(!0);const He=await rt.getByEvento(r);f(He.pagos||[]),b(He.total_pagado||0);try{const er=await rt.getTotalEvento(r);er.total_pagado!==void 0&&er.total_pagado!==null&&b(parseFloat(er.total_pagado)||0),er.total_reembolsos!==void 0&&er.total_reembolsos!==null&&k(parseFloat(er.total_reembolsos)||0)}catch(er){console.error("Error al cargar totales de pagos:",er)}S("")}catch(He){const er=((Ee=(O=He.response)==null?void 0:O.data)==null?void 0:Ee.error)||"Error al cargar los pagos";S(er),a(er),console.error(He)}finally{p(!1)}},lr=O=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(O),Fr=O=>{if(!O)return null;if(typeof O=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(O)){const[Ee,He,er]=O.split("-").map(Number);return new Date(Ee,He-1,er)}return new Date(O)},zr=O=>{if(!O)return"-";try{const Ee=Fr(O),He=Ee.getFullYear(),er=String(Ee.getMonth()+1).padStart(2,"0"),kr=String(Ee.getDate()).padStart(2,"0"),gt=String(Ee.getHours()).padStart(2,"0"),ro=String(Ee.getMinutes()).padStart(2,"0");return`${He}-${er}-${kr} ${gt}:${ro}`}catch{return O}},Qe=O=>{const Ee=Number.parseFloat(O);return Number.isFinite(Ee)?Ee:0},Xe=O=>(O||"").toString().toLowerCase(),ne=Math.max(0,z-w),ke=()=>{if(!g)return 0;const O=parseFloat(g.total||0);return Math.max(0,O-ne)},Te=O=>{if(!O||parseFloat(O)<=0)return"abono";const Ee=parseFloat(O),He=ke();return Ee>=He&&He>0?"pago_completo":"abono"},Ae=O=>{const Ee=O.target.value;if(Q.tipo_pago!=="reembolso"){const He=Te(Ee);M({...Q,monto:Ee,tipo_pago:He})}else M({...Q,monto:Ee})},ue=O=>{switch(O){case"aprobado":return"Aprobado";case"rechazado":return"Rechazado";case"en_revision":default:return"En revisin"}},Ve=O=>{switch(O){case"aprobado":return{backgroundColor:"#16a34a20",color:"#16a34a"};case"rechazado":return{backgroundColor:"#ef444420",color:"#ef4444"};default:return{backgroundColor:"#f59e0b20",color:"#d97706"}}},Je=l.filter(O=>{if(!L)return!0;const Ee=Xe(L);return Xe(O.numero_referencia).includes(Ee)||Xe(O.observaciones).includes(Ee)||Xe(O.metodo_pago).includes(Ee)||Xe(O.tipo_pago).includes(Ee)}).filter(O=>I==="todos"?!0:O.tipo_pago===I).filter(O=>B==="todos"?!0:O.metodo_pago===B).filter(O=>{if(!E&&!te)return!0;const Ee=Fr(O.fecha_pago);return!(E&&Ee<Fr(E)||te&&Ee>new Date(`${te}T23:59:59`))}).filter(O=>{if(!K&&!Z)return!0;const Ee=Qe(O.monto||0);return!(K&&Ee<Qe(K)||Z&&Ee>Qe(Z))}).sort((O,Ee)=>{let He=0;switch($){case"monto_asc":He=Qe(O.monto||0)-Qe(Ee.monto||0);break;case"monto_desc":He=Qe(Ee.monto||0)-Qe(O.monto||0);break;case"fecha_asc":He=Fr(O.fecha_pago).getTime()-Fr(Ee.fecha_pago).getTime();break;case"fecha_desc":He=Fr(Ee.fecha_pago).getTime()-Fr(O.fecha_pago).getTime();break;case"id_desc":default:He=Qe(Ee.id||0)-Qe(O.id||0);break}return He!==0?He:Qe(Ee.id||0)-Qe(O.id||0)}),q=Je.reduce((O,Ee)=>{const He=Qe(Ee.monto||0);return O.totalPagos+=1,Ee.tipo_pago==="reembolso"?O.totalReembolsos+=He:O.totalIngresos+=He,O},{totalPagos:0,totalIngresos:0,totalReembolsos:0}),Se=q.totalIngresos-q.totalReembolsos,ve=(Nr=Je[0])==null?void 0:Nr.fecha_pago,Oe=Math.max(0,z-w),Ce=async(O="abono")=>{if(!g){d("Evento no encontrado");return}if(O!=="reembolso"){const Ee=ke();if(Qe(Ee)<=0){d("Este evento no tiene saldo pendiente. Agregue adicionales al evento si desea registrar pagos.");return}}else{let Ee=Math.max(0,z-w);try{const He=await rt.getTotalEvento(r),er=parseFloat(He.total_pagado)||0,kr=parseFloat(He.total_reembolsos)||0;b(er),k(kr),Ee=Math.max(0,er-kr)}catch(He){console.error("Error al cargar totales para reembolso:",He)}if(Ee<=0){d("No hay saldo disponible para reembolsar.");return}}M({evento_id:g.id_evento||g.id,monto:O==="reembolso"?Math.max(0,z-w):"",metodo_pago:"efectivo",tipo_pago:O,fecha_pago:new Date().toISOString().split("T")[0],numero_referencia:"",observaciones:""}),U(""),Y(!0)},Le=()=>{Y(!1),M({evento_id:(g==null?void 0:g.id_evento)||(g==null?void 0:g.id)||"",monto:"",metodo_pago:"efectivo",tipo_pago:"abono",fecha_pago:new Date().toISOString().split("T")[0],numero_referencia:"",observaciones:""}),U("")},De=O=>{re(O),se(!0)},Fe=()=>{se(!1),re(null)},ir=async(O,Ee)=>{var He,er;if(O)try{Ie(!0),await rt.updateEstado(O.id,Ee),await ur();const kr=await rt.getById(O.id);kr!=null&&kr.pago&&re(kr.pago),s("Estado del pago actualizado")}catch(kr){const gt=((er=(He=kr.response)==null?void 0:He.data)==null?void 0:er.error)||"No se pudo actualizar el estado";a(gt)}finally{Ie(!1)}},yr=O=>{h(O),Re(O.cuenta_id||""),be(!0)},vr=()=>{be(!1),h(null),Re("")},Pr=async()=>{var O,Ee;if(!x||!ge){a("Debe seleccionar una cuenta destino");return}try{Ie(!0),await rt.updateCuenta(x.id,parseInt(ge)),await rt.updateEstado(x.id,"aprobado"),await ur(),vr(),Fe(),s("Pago aprobado correctamente")}catch(He){const er=((Ee=(O=He.response)==null?void 0:O.data)==null?void 0:Ee.error)||"No se pudo aprobar el pago";a(er)}finally{Ie(!1)}},he=async(O=!1)=>{var Ee,He;if(U(""),!Q.monto||parseFloat(Q.monto)<=0){U("El monto debe ser mayor a cero");return}if(!Q.fecha_pago){U("La fecha de pago es requerida");return}if(Q.tipo_pago==="reembolso"&&parseFloat(Q.monto)>Oe){U("El monto del reembolso supera el saldo disponible para reembolsar.");return}if(Q.tipo_pago==="reembolso"&&!O){ye(!0);return}try{we(!0);const er={evento_id:parseInt(Q.evento_id),monto:parseFloat(Q.monto),metodo_pago:Q.metodo_pago,tipo_pago:Q.tipo_pago,fecha_pago:Q.fecha_pago,numero_referencia:Q.numero_referencia||null,observaciones:Q.observaciones||null,origen:"web"};await rt.create(er),await ur(),Le(),s(Q.tipo_pago==="reembolso"?"Reembolso registrado exitosamente":"Pago registrado exitosamente")}catch(er){const kr=((He=(Ee=er.response)==null?void 0:Ee.data)==null?void 0:He.error)||"Error al registrar el pago";U(kr),console.error(er)}finally{we(!1)}},nr=async O=>{O.preventDefault(),await he(!1)},or=ke()>0,jr=(g==null?void 0:g.estado)==="cancelado",wr=()=>{if(g){if(jr){d("No se pueden agregar adicionales a un evento cancelado.");return}t(`/eventos/${g.id_evento||g.id}?tab=productos`)}};return j?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando pagos..."}):g?e.jsxs("div",{children:[e.jsx(Lr,{toasts:n,removeToast:i}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(Gr,{to:"/pagos",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #e5e7eb",backgroundColor:"#f3f4f6",color:"#374151",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:O=>{O.currentTarget.style.backgroundColor="#e5e7eb"},onMouseLeave:O=>{O.currentTarget.style.backgroundColor="#f3f4f6"},children:e.jsx(vi,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Pagos del Evento"}),e.jsx("p",{style:{color:"#6b7280",margin:0},children:g.nombre_evento||"Evento"})]})]})}),C&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:C}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"600",color:"#374151"},children:"Resumen del evento"}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:"Agrega adicionales para generar saldo pendiente y registrar pagos."})]}),We&&e.jsx("button",{type:"button",onClick:wr,disabled:jr,style:{padding:"0.5rem 1rem",backgroundColor:jr?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:jr?"not-allowed":"pointer",fontWeight:"500"},children:"Agregar adicionales"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(jt,{size:18,color:"#6366f1"}),e.jsx("label",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Evento"})]}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"600"},children:g.nombre_evento}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:g.nombre_cliente})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(zt,{size:18,color:"#10b981"}),e.jsx("label",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Total Evento"})]}),e.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:"bold",color:"#6366f1"},children:lr(parseFloat(g.total||0))})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(zt,{size:18,color:"#10b981"}),e.jsx("label",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Total Pagado"})]}),e.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:"bold",color:"#10b981"},children:lr(ne)})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(zt,{size:18,color:"#ef4444"}),e.jsx("label",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Saldo Pendiente"})]}),e.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:"bold",color:"#ef4444"},children:lr(ke())})]})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:u?"1fr":"2fr 1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Rt,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar por referencia, observaciones, mtodo...",value:L,onChange:O=>W(O.target.value),style:{width:"100%",padding:"0.65rem 0.75rem 0.65rem 2.25rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"}})]}),e.jsxs("select",{value:I,onChange:O=>m(O.target.value),style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"},children:[e.jsx("option",{value:"todos",children:"Todos los tipos"}),e.jsx("option",{value:"abono",children:"Abono"}),e.jsx("option",{value:"pago_completo",children:"Pago Completo"}),e.jsx("option",{value:"reembolso",children:"Reembolso"})]}),e.jsxs("select",{value:B,onChange:O=>H(O.target.value),style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"},children:[e.jsx("option",{value:"todos",children:"Todos los mtodos"}),e.jsx("option",{value:"efectivo",children:"Efectivo"}),e.jsx("option",{value:"transferencia",children:"Transferencia"}),e.jsx("option",{value:"tarjeta_debito",children:"Tarjeta Dbito"}),e.jsx("option",{value:"tarjeta_credito",children:"Tarjeta Crdito"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"otro",children:"Otro"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:u?"1fr":"1fr 1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.35rem"},children:"Desde"}),e.jsx("input",{type:"date",value:E,onChange:O=>R(O.target.value),style:{width:"100%",padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.35rem"},children:"Hasta"}),e.jsx("input",{type:"date",value:te,onChange:O=>F(O.target.value),style:{width:"100%",padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.35rem"},children:"Monto mnimo"}),e.jsx("input",{type:"number",min:"0",value:K,onChange:O=>D(O.target.value),placeholder:"0",style:{width:"100%",padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.35rem"},children:"Monto mximo"}),e.jsx("input",{type:"number",min:"0",value:Z,onChange:O=>P(O.target.value),placeholder:"Sin tope",style:{width:"100%",padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"}})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:u?"stretch":"flex-end",marginTop:"0.75rem"},children:e.jsxs("select",{value:$,onChange:O=>N(O.target.value),style:{padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",minWidth:u?"100%":"220px"},children:[e.jsx("option",{value:"id_desc",children:"Ordenar: Ms recientes (ID)"}),e.jsx("option",{value:"fecha_desc",children:"Ordenar: Ms recientes (Fecha)"}),e.jsx("option",{value:"fecha_asc",children:"Ordenar: Ms antiguos"}),e.jsx("option",{value:"monto_desc",children:"Ordenar: Monto mayor"}),e.jsx("option",{value:"monto_asc",children:"Ordenar: Monto menor"})]})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:u?"1fr":"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Pagos encontrados"}),e.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700"},children:q.totalPagos})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Total ingresos"}),e.jsx("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700",color:"#10b981"},children:lr(q.totalIngresos)})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Total reembolsos"}),e.jsx("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700",color:"#ef4444"},children:lr(q.totalReembolsos)})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Neto"}),e.jsx("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700",color:"#6366f1"},children:lr(Se)})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"ltimo pago"}),e.jsx("p",{style:{margin:0,fontSize:"0.95rem",fontWeight:"600"},children:ve?zr(ve):"Sin pagos"})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",gap:"1rem",flexWrap:"wrap"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"700",color:"#374151"},children:"Pagos del evento"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[pe&&e.jsx("button",{type:"button",onClick:()=>Ce("abono"),disabled:!or,style:{padding:"0.5rem 0.85rem",borderRadius:"0.375rem",border:"none",backgroundColor:or?"#10b981":"#9ca3af",color:"white",cursor:or?"pointer":"not-allowed",fontSize:"0.8rem",fontWeight:"600"},children:"Registrar pago"}),Ge&&e.jsx("button",{type:"button",onClick:()=>Ce("reembolso"),disabled:Oe<=0,style:{padding:"0.5rem 0.85rem",borderRadius:"0.375rem",border:"none",backgroundColor:Oe<=0?"#fca5a5":"#ef4444",color:"white",cursor:Oe<=0?"not-allowed":"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"Registrar reembolso"})]})]}),u?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:Je.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:"No hay pagos que coincidan con los filtros"}):Je.map(O=>e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"1rem",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06)",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginBottom:"0.25rem"},children:["ID #",O.id]}),e.jsx("div",{style:{fontWeight:"600",color:"#111827"},children:zr(O.fecha_pago)}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:O.metodo_pago||"-"})]}),e.jsxs("div",{style:{fontWeight:"600",color:O.tipo_pago==="reembolso"?"#ef4444":"#10b981"},children:[O.tipo_pago==="reembolso"?"-":"+",lr(O.monto||0)]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:O.tipo_pago==="reembolso"?"#ef444420":O.tipo_pago==="pago_completo"?"#10b98120":"#3b82f620",color:O.tipo_pago==="reembolso"?"#ef4444":O.tipo_pago==="pago_completo"?"#10b981":"#3b82f6"},children:O.tipo_pago==="reembolso"?"Reembolso":O.tipo_pago==="pago_completo"?"Pago Completo":"Abono"}),e.jsx("span",{style:{marginLeft:"0.5rem",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",...Ve(O.estado_pago)},children:ue(O.estado_pago)}),e.jsx("span",{style:{marginLeft:"0.5rem",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:O.origen==="web"?"#3b82f620":O.origen==="whatsapp"?"#22c55e20":"#6b728020",color:O.origen==="web"?"#3b82f6":O.origen==="whatsapp"?"#16a34a":"#6b7280"},children:O.origen==="web"?"Web":O.origen==="whatsapp"?"WhatsApp":"Escritorio"})]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[e.jsx("strong",{children:"Referencia:"})," ",O.numero_referencia||"-"]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[e.jsx("strong",{children:"Observaciones:"})," ",O.observaciones||"-"]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:e.jsxs("button",{onClick:()=>De(O),style:{padding:"0.5rem 0.75rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(St,{size:16}),"Ver"]})})]},O.id))}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"ID"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Fecha"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Tipo"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Mtodo"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Cuenta"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Referencia"}),e.jsx("th",{style:{padding:"1rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Monto"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Origen"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Observaciones"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:Je.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"11",style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:"No hay pagos que coincidan con los filtros"})}):Je.map(O=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsxs("td",{style:{padding:"1rem",fontSize:"0.85rem",color:"#6b7280",fontWeight:"600"},children:["#",O.id]}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.85rem"},children:zr(O.fecha_pago)}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:O.tipo_pago==="reembolso"?"#ef444420":O.tipo_pago==="pago_completo"?"#10b98120":"#3b82f620",color:O.tipo_pago==="reembolso"?"#ef4444":O.tipo_pago==="pago_completo"?"#10b981":"#3b82f6"},children:O.tipo_pago==="reembolso"?"Reembolso":O.tipo_pago==="pago_completo"?"Pago Completo":"Abono"})}),e.jsx("td",{style:{padding:"1rem"},children:O.metodo_pago||"-"}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.8rem",color:"#4f46e5",fontWeight:"500"},children:O.nombre_cuenta||"-"}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",...Ve(O.estado_pago)},children:ue(O.estado_pago)})}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.875rem",color:"#6b7280"},children:O.numero_referencia||"-"}),e.jsxs("td",{style:{padding:"1rem",textAlign:"right",fontWeight:"600",color:O.tipo_pago==="reembolso"?"#ef4444":"#10b981"},children:[O.tipo_pago==="reembolso"?"-":"+",lr(O.monto||0)]}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:O.origen==="web"?"#3b82f620":O.origen==="whatsapp"?"#22c55e20":"#6b728020",color:O.origen==="web"?"#3b82f6":O.origen==="whatsapp"?"#16a34a":"#6b7280"},children:O.origen==="web"?"Web":O.origen==="whatsapp"?"WhatsApp":"Escritorio"})}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.875rem",color:"#6b7280",maxWidth:"200px"},children:e.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:O.observaciones||"-"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:e.jsx("button",{onClick:()=>De(O),style:{padding:"0.5rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:Ee=>Ee.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:Ee=>Ee.currentTarget.style.backgroundColor="#3b82f6",title:"Ver Detalle",children:e.jsx(St,{size:16})})})})]},O.id))})]})})]}),ee&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:Le,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:O=>O.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:Q.tipo_pago==="reembolso"?"Registrar Reembolso":"Registrar Pago"}),e.jsx("button",{onClick:Le,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),Ne&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:Ne}),e.jsxs("form",{onSubmit:nr,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Evento"}),e.jsx("input",{type:"text",value:(g==null?void 0:g.nombre_evento)||"",disabled:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:"#f3f4f6",color:"#6b7280"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Tipo de Pago ",e.jsx("span",{style:{color:"#6b7280",fontWeight:"400",fontSize:"0.8rem"},children:"(automtico)"})]}),e.jsxs("div",{style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:Q.tipo_pago==="reembolso"?"#fef2f2":Q.tipo_pago==="pago_completo"?"#f0fdf4":"#eff6ff",color:Q.tipo_pago==="reembolso"?"#dc2626":Q.tipo_pago==="pago_completo"?"#16a34a":"#2563eb",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{children:Q.tipo_pago==="abono"?"Abono":Q.tipo_pago==="pago_completo"?"Pago Completo":"Reembolso"}),Q.tipo_pago!=="reembolso"&&e.jsxs("span",{style:{fontSize:"0.7rem",color:"#6b7280",fontWeight:"400"},children:["Saldo: ",lr(ke())]})]}),Q.tipo_pago==="pago_completo"&&e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"#16a34a"},children:"El monto cubre el saldo pendiente del evento."}),Q.tipo_pago==="reembolso"&&e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",color:"#ef4444"},children:"Este reembolso se descontar del total pagado y requiere confirmacin."})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Mtodo de Pago ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:Q.metodo_pago,onChange:O=>M({...Q,metodo_pago:O.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"efectivo",children:"Efectivo"}),e.jsx("option",{value:"transferencia",children:"Transferencia"}),e.jsx("option",{value:"tarjeta_debito",children:"Tarjeta Dbito"}),e.jsx("option",{value:"tarjeta_credito",children:"Tarjeta Crdito"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"otro",children:"Otro"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Monto ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",value:Q.monto,onChange:Ae,required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Fecha de Pago ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"date",value:Q.fecha_pago,onChange:O=>M({...Q,fecha_pago:O.target.value}),required:!0,max:new Date().toISOString().split("T")[0],style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Nmero de Referencia"}),e.jsx("input",{type:"text",value:Q.numero_referencia,onChange:O=>M({...Q,numero_referencia:O.target.value}),placeholder:"Nmero de transaccin, cheque, etc.",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Observaciones"}),e.jsx("textarea",{value:Q.observaciones,onChange:O=>M({...Q,observaciones:O.target.value}),rows:3,placeholder:"Notas adicionales sobre el pago...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:Le,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:V,style:{padding:"0.75rem 1.5rem",backgroundColor:V?"#9ca3af":"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:V?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),V?"Registrando...":Q.tipo_pago==="reembolso"?"Registrar Reembolso":"Registrar Pago"]})]})]})]})}),X&&ce&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:Fe,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:O=>O.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Detalle del Pago"}),e.jsx("button",{onClick:Fe,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{width:"4rem",height:"4rem",borderRadius:"50%",backgroundColor:"#10b98120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(zt,{size:32,color:"#10b981"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:lr(ce.monto||0)}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:zr(ce.fecha_pago)})]})]}),e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Tipo de Pago"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:ce.tipo_pago==="reembolso"?"#ef444420":ce.tipo_pago==="pago_completo"?"#10b98120":"#3b82f620",color:ce.tipo_pago==="reembolso"?"#ef4444":ce.tipo_pago==="pago_completo"?"#10b981":"#3b82f6"},children:ce.tipo_pago==="reembolso"?"Reembolso":ce.tipo_pago==="pago_completo"?"Pago Completo":"Abono"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Mtodo de Pago"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:ce.metodo_pago||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Cuenta Destino"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500",color:"#4f46e5"},children:ce.nombre_cuenta||"Sin asignar"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Estado del Pago"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",...Ve(ce.estado_pago)},children:ue(ce.estado_pago)})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Nmero de Referencia"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:ce.numero_referencia||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Origen"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:ce.origen==="web"?"#3b82f620":ce.origen==="whatsapp"?"#22c55e20":"#6b728020",color:ce.origen==="web"?"#3b82f6":ce.origen==="whatsapp"?"#16a34a":"#6b7280"},children:ce.origen==="web"?"Web":ce.origen==="whatsapp"?"WhatsApp":"Escritorio"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Observaciones"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:ce.observaciones||"-"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[ce.estado_pago==="en_revision"&&(cr||gr)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ir(ce,"rechazado"),disabled:me||!gr,style:{padding:"0.75rem 1.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:me||!gr?"not-allowed":"pointer",fontWeight:"500",opacity:me||!gr?.7:1},children:"Rechazar"}),e.jsx("button",{onClick:()=>yr(ce),disabled:me||!cr,style:{padding:"0.75rem 1.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:me||!cr?"not-allowed":"pointer",fontWeight:"500",opacity:me||!cr?.7:1},children:"Aprobar"})]}),e.jsx("button",{onClick:Fe,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})]})]})}),G&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100,padding:"1rem"},onClick:()=>!V&&ye(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:O=>O.stopPropagation(),children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.75rem"},children:"Confirmar reembolso"}),e.jsxs("div",{style:{color:"#374151",marginBottom:"0.5rem"},children:["Ests a punto de registrar un reembolso de ",lr(Q.monto||0),"."]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:["Disponible para reembolsar: ",lr(Oe)]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>ye(!1),disabled:V,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:V?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:async()=>{ye(!1),await he(!0)},disabled:V,style:{flex:1,padding:"0.75rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:V?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Confirmar reembolso"})]})]})}),ie&&x&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100,padding:"1rem"},onClick:vr,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:O=>O.stopPropagation(),children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.75rem"},children:"Aprobar pago"}),e.jsxs("div",{style:{color:"#374151",marginBottom:"0.5rem"},children:["Vas a aprobar el pago de ",lr(x.monto||0),"."]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:"1rem"},children:["Mtodo: ",x.metodo_pago||"-","  Fecha: ",zr(x.fecha_pago)]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",fontWeight:"500",color:"#374151"},children:[e.jsx(sn,{size:18,color:"#4f46e5"}),"Cuenta Destino ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:ge,onChange:O=>Re(O.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",backgroundColor:"white"},children:[e.jsx("option",{value:"",children:"Seleccionar cuenta..."}),J.map(O=>e.jsxs("option",{value:O.id,children:[O.nombre," ",O.numero_cuenta?`- ${O.numero_cuenta}`:""]},O.id))]}),!ge&&e.jsx("div",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem"},children:"Seleccione la cuenta donde se registrar este pago"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsx("button",{type:"button",onClick:vr,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:Pr,disabled:me||!ge,style:{flex:1,padding:"0.75rem",backgroundColor:me||!ge?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:me||!ge?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:me?"Aprobando...":"Confirmar"})]})]})})]}):e.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[e.jsx("p",{children:"Evento no encontrado"}),e.jsx(Gr,{to:"/pagos",style:{color:"#6366f1",textDecoration:"none"},children:"Volver a Pagos"})]})},da=[{valor:"ahorros",etiqueta:"Cuenta de Ahorros",icono:sn},{valor:"corriente",etiqueta:"Cuenta Corriente",icono:ks},{valor:"digital",etiqueta:"Billetera Digital",icono:gv},{valor:"efectivo",etiqueta:"Cuenta en Efectivo",icono:U5},{valor:"otro",etiqueta:"Otro",icono:ks}],Dv=()=>{const{usuario:r}=st(),{toasts:t,removeToast:o,success:n,error:i}=Ar(),[s,a]=c.useState([]),[d,u]=c.useState(!0),[l,f]=c.useState(""),[g,y]=c.useState("todos"),[z,b]=c.useState(!1),[w,k]=c.useState(!1),[j,p]=c.useState(!1),[C,S]=c.useState(null),[L,W]=c.useState(!1),[I,m]=c.useState({nombre:"",tipo:"ahorros",numero_cuenta:"",descripcion:""}),B=xr(r,Ye.CUENTAS_CREAR,[T.ADMIN,T.MANAGER]),H=xr(r,Ye.CUENTAS_EDITAR,[T.ADMIN,T.MANAGER]),E=xr(r,Ye.CUENTAS_ELIMINAR,[T.ADMIN,T.MANAGER]);c.useEffect(()=>{R()},[z]);const R=async()=>{var X,se;try{u(!0);const G=await Vo.getAll(z);a(G.cuentas||[])}catch(G){const ye=((se=(X=G.response)==null?void 0:X.data)==null?void 0:se.error)||"Error al cargar las cuentas";i(ye)}finally{u(!1)}},te=X=>{const se=da.find(G=>G.valor===X);return(se==null?void 0:se.icono)||ks},F=X=>{const se=da.find(G=>G.valor===X);return(se==null?void 0:se.etiqueta)||X},K=s.filter(X=>{var G,ye;if(!l)return!0;const se=l.toLowerCase();return((G=X.nombre)==null?void 0:G.toLowerCase().includes(se))||((ye=X.descripcion)==null?void 0:ye.toLowerCase().includes(se))}).filter(X=>g==="todos"?!0:X.tipo===g),D=()=>{m({nombre:"",tipo:"ahorros",numero_cuenta:"",descripcion:""}),S(null),k(!0)},Z=X=>{m({nombre:X.nombre||"",tipo:X.tipo||"ahorros",numero_cuenta:X.numero_cuenta||"",descripcion:X.descripcion||""}),S(X),k(!0)},P=()=>{k(!1),S(null),m({nombre:"",tipo:"ahorros",numero_cuenta:"",descripcion:""})},$=async X=>{var se,G;if(X.preventDefault(),!I.nombre.trim()){i("El nombre de la cuenta es requerido");return}try{W(!0),C?(await Vo.update(C.id,I),n("Cuenta actualizada exitosamente")):(await Vo.create(I),n("Cuenta creada exitosamente")),await R(),P()}catch(ye){const ie=((G=(se=ye.response)==null?void 0:se.data)==null?void 0:G.error)||"Error al guardar la cuenta";i(ie)}finally{W(!1)}},N=X=>{S(X),p(!0)},ee=async()=>{var X,se;if(C)try{W(!0),await Vo.delete(C.id),n("Cuenta desactivada exitosamente"),await R(),p(!1),S(null)}catch(G){const ye=((se=(X=G.response)==null?void 0:X.data)==null?void 0:se.error)||"Error al desactivar la cuenta";i(ye)}finally{W(!1)}},Y=async X=>{var se,G;try{await Vo.activar(X.id),n("Cuenta activada exitosamente"),await R()}catch(ye){const ie=((G=(se=ye.response)==null?void 0:se.data)==null?void 0:G.error)||"Error al activar la cuenta";i(ie)}};return d?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando cuentas..."}):e.jsxs("div",{children:[e.jsx(Lr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Cuentas"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de cuentas para confirmacin de pagos"})]}),B&&e.jsxs("button",{onClick:D,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#4f46e5",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600"},children:[e.jsx(Ur,{size:20}),"Nueva Cuenta"]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",marginBottom:"1.5rem",display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px"},children:[e.jsx(Rt,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o descripcin...",value:l,onChange:X=>f(X.target.value),style:{width:"100%",padding:"0.65rem 0.75rem 0.65rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"}})]}),e.jsxs("select",{value:g,onChange:X=>y(X.target.value),style:{padding:"0.65rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem",minWidth:"180px"},children:[e.jsx("option",{value:"todos",children:"Todos los tipos"}),da.map(X=>e.jsx("option",{value:X.valor,children:X.etiqueta},X.valor))]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:z,onChange:X=>b(X.target.checked)}),e.jsx("span",{style:{fontSize:"0.9rem",color:"#374151"},children:"Mostrar inactivas"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Total Cuentas"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:K.length})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Activas"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10b981"},children:K.filter(X=>X.activo).length})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Ahorros"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#6366f1"},children:K.filter(X=>X.tipo==="ahorros").length})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Corrientes"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#0ea5e9"},children:K.filter(X=>X.tipo==="corriente").length})]})]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",overflow:"hidden"},children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Cuenta"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Tipo"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Nmero de Cuenta"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Descripcin"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:K.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:"No hay cuentas que mostrar"})}):K.map(X=>{const se=te(X.tipo);return e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"0.5rem",backgroundColor:X.activo?"#eef2ff":"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(se,{size:20,color:X.activo?"#4f46e5":"#9ca3af"})}),e.jsx("div",{children:e.jsx("div",{style:{fontWeight:"600",color:X.activo?"#111827":"#9ca3af"},children:X.nombre})})]})}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:X.tipo==="ahorros"?"#dbeafe":X.tipo==="corriente"?"#e0f2fe":X.tipo==="digital"?"#f3e8ff":X.tipo==="efectivo"?"#dcfce7":"#f3f4f6",color:X.tipo==="ahorros"?"#1d4ed8":X.tipo==="corriente"?"#0369a1":X.tipo==="digital"?"#7c3aed":X.tipo==="efectivo"?"#16a34a":"#6b7280"},children:F(X.tipo)})}),e.jsx("td",{style:{padding:"1rem",color:"#374151",fontSize:"0.875rem",fontFamily:"monospace"},children:X.numero_cuenta||"-"}),e.jsx("td",{style:{padding:"1rem",color:"#6b7280",fontSize:"0.875rem",maxWidth:"300px"},children:X.descripcion||"-"}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:X.activo?"#dcfce7":"#fee2e2",color:X.activo?"#16a34a":"#dc2626"},children:X.activo?"Activa":"Inactiva"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[H&&e.jsx("button",{onClick:()=>Z(X),style:{padding:"0.5rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer"},title:"Editar",children:e.jsx(Ig,{size:16})}),E&&X.activo&&e.jsx("button",{onClick:()=>N(X),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer"},title:"Desactivar",children:e.jsx(mv,{size:16})}),E&&!X.activo&&e.jsx("button",{onClick:()=>Y(X),style:{padding:"0.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer"},title:"Activar",children:e.jsx(uv,{size:16})})]})})]},X.id)})})]})})}),w&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:P,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:X=>X.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:C?"Editar Cuenta":"Nueva Cuenta"}),e.jsx("button",{onClick:P,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),e.jsxs("form",{onSubmit:$,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:I.nombre,onChange:X=>m({...I,nombre:X.target.value}),required:!0,placeholder:"Ej: Bancolombia Ahorros",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Tipo ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("select",{value:I.tipo,onChange:X=>m({...I,tipo:X.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:da.map(X=>e.jsx("option",{value:X.valor,children:X.etiqueta},X.valor))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Nmero de Cuenta"}),e.jsx("input",{type:"text",value:I.numero_cuenta,onChange:X=>m({...I,numero_cuenta:X.target.value}),placeholder:"Ej: 2200012345",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",fontFamily:"monospace"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:I.descripcion,onChange:X=>m({...I,descripcion:X.target.value}),rows:3,placeholder:"Descripcin opcional de la cuenta...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:P,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:L,style:{padding:"0.75rem 1.5rem",backgroundColor:L?"#9ca3af":"#4f46e5",color:"white",borderRadius:"0.375rem",border:"none",cursor:L?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),L?"Guardando...":"Guardar"]})]})]})]})}),j&&C&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>p(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"400px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:X=>X.stopPropagation(),children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem"},children:"Desactivar cuenta"}),e.jsxs("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:["Ests seguro de desactivar la cuenta ",e.jsx("strong",{children:C.nombre}),"? Podrs reactivarla ms tarde si lo necesitas."]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>p(!1),disabled:L,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{onClick:ee,disabled:L,style:{padding:"0.75rem 1.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:L?"not-allowed":"pointer",fontWeight:"500"},children:L?"Desactivando...":"Desactivar"})]})]})})]})},Bv=()=>{const r=go(),[t,o]=c.useState("stock"),[n,i]=c.useState([]),[s,a]=c.useState([]),[d,u]=c.useState([]),[l,f]=c.useState([]),[g,y]=c.useState(!0),[z,b]=c.useState(""),[w,k]=c.useState(""),[j,p]=c.useState(""),[C,S]=c.useState("todos"),[L,W]=c.useState(!1),[I,m]=c.useState(null),[B,H]=c.useState("entrada"),[E,R]=c.useState(""),[te,F]=c.useState(""),[K,D]=c.useState(!1),[Z,P]=c.useState(""),[$,N]=c.useState(1),[ee]=c.useState(15);c.useEffect(()=>{Y()},[t]);const Y=async()=>{y(!0);try{t==="stock"||t==="alertas"?await X():t==="movimientos"?await se():t==="eventos"&&await G()}catch{b("Error al cargar datos")}finally{y(!1)}},X=async()=>{try{const Q=await To.getAll();i(Q.productos||[])}catch(Q){console.error("Error al cargar productos:",Q)}},se=async()=>{try{const Q=localStorage.getItem("token"),M=await fetch("/api/inventario/movimientos",{headers:{Authorization:`Bearer ${Q}`}});if(M.ok){const V=await M.json();a(V.movimientos||[])}}catch(Q){console.error("Error al cargar movimientos:",Q),a([])}},G=async()=>{try{const Q=await dr.getAll();f(Q.eventos||[])}catch(Q){console.error("Error al cargar eventos:",Q)}},ye=async Q=>{try{const M=await T5.getByEvento(Q);u(M.inventario||[])}catch(M){console.error("Error al cargar inventario:",M)}},ie=async()=>{if(!(!I||!E||parseInt(E)<=0))try{const Q=B==="entrada"?parseInt(E):-parseInt(E),M=localStorage.getItem("token");(await fetch(`/api/productos/${I.id}/stock`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${M}`},body:JSON.stringify({cantidad:Q,motivo:te||`${B==="entrada"?"Entrada":"Salida"} manual de stock`})})).ok&&(await X(),W(!1),m(null),R(""),F(""))}catch(Q){console.error("Error al ajustar stock:",Q)}},be=(Q,M)=>Q<=0?"#ef4444":M&&Q<=M?"#f59e0b":"#10b981",ce=[{id:"stock",label:"Stock General",icon:Gt},{id:"movimientos",label:"Movimientos",icon:Ep},{id:"eventos",label:"Por Evento",icon:_t},{id:"alertas",label:"Alertas",icon:ci}],re=n.filter(Q=>{var M,V;return w?((M=Q.nombre)==null?void 0:M.toLowerCase().includes(w.toLowerCase()))||((V=Q.nombre_categoria)==null?void 0:V.toLowerCase().includes(w.toLowerCase())):!0}),x=n.filter(Q=>{const M=parseInt(Q.stock||Q.stock_disponible||0),V=parseInt(Q.stock_minimo||0);return M<=V||M<=0}),h=()=>e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",borderBottom:"1px solid #e5e7eb",paddingBottom:"0.5rem",overflowX:"auto"},children:ce.map(Q=>{const M=Q.icon,V=t===Q.id,we=Q.id==="alertas"?x.length:0;return e.jsxs("button",{onClick:()=>o(Q.id),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",backgroundColor:V?"#6366f1":"transparent",color:V?"white":"#6b7280",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:V?"600":"500",fontSize:r?"0.8rem":"0.875rem",whiteSpace:"nowrap",position:"relative"},children:[e.jsx(M,{size:18}),!r&&Q.label,we>0&&e.jsx("span",{style:{backgroundColor:"#ef4444",color:"white",borderRadius:"9999px",padding:"0.125rem 0.5rem",fontSize:"0.7rem",fontWeight:"700"},children:we})]},Q.id)})}),J=()=>e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px"},children:[e.jsx(Rt,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar producto...",value:w,onChange:Q=>k(Q.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",fontSize:"0.95rem"}})]}),e.jsxs("button",{onClick:()=>X(),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",backgroundColor:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.875rem"},children:[e.jsx(rl,{size:16}),"Actualizar"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:r?"repeat(2, 1fr)":"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Total Productos"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:n.length})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Con Stock"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10b981"},children:n.filter(Q=>(Q.stock||Q.stock_disponible||0)>0).length})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Stock Bajo"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#f59e0b"},children:x.filter(Q=>(Q.stock||Q.stock_disponible||0)>0).length})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Agotados"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#ef4444"},children:n.filter(Q=>(Q.stock||Q.stock_disponible||0)<=0).length})]})]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",overflow:"hidden"},children:r?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",padding:"0.5rem"},children:re.map(Q=>{const M=parseInt(Q.stock||Q.stock_disponible||0),V=parseInt(Q.stock_minimo||0);return e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600"},children:Q.nombre}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:Q.nombre_categoria||"Sin categora"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:Q.unidad_medida||"unidad"})]}),e.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.875rem",fontWeight:"700",backgroundColor:`${be(M,V)}15`,color:be(M,V)},children:[M," ",Q.unidad_medida||"uds"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>{m(Q),H("entrada"),W(!0)},style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",padding:"0.5rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem"},children:[e.jsx(Ur,{size:14})," Entrada"]}),e.jsxs("button",{onClick:()=>{m(Q),H("salida"),W(!0)},style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",padding:"0.5rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem"},children:[e.jsx(sv,{size:14})," Salida"]})]})]},Q.id)})}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Producto"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Categora"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Unidad"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Stock Actual"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Stock Mnimo"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:re.map(Q=>{const M=parseInt(Q.stock||Q.stock_disponible||0),V=parseInt(Q.stock_minimo||0),we=Q.unidad_medida||"unidad";let Ne="Normal",U="#10b981";return M<=0?(Ne="Agotado",U="#ef4444"):V&&M<=V&&(Ne="Stock Bajo",U="#f59e0b"),e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"1rem"},children:e.jsx("div",{style:{fontWeight:"500"},children:Q.nombre})}),e.jsx("td",{style:{padding:"1rem",color:"#6b7280"},children:Q.nombre_categoria||"Sin categora"}),e.jsx("td",{style:{padding:"1rem",textAlign:"center",color:"#6b7280",fontSize:"0.875rem"},children:we}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"0.375rem",fontWeight:"700",backgroundColor:`${be(M,V)}15`,color:be(M,V)},children:M})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center",color:"#6b7280"},children:V||"-"}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:`${U}15`,color:U},children:Ne})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>{m(Q),H("entrada"),W(!0)},title:"Registrar entrada",style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.5rem 0.75rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem"},children:[e.jsx(ju,{size:14})," Entrada"]}),e.jsxs("button",{onClick:()=>{m(Q),H("salida"),W(!0)},title:"Registrar salida",style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.5rem 0.75rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem"},children:[e.jsx(pv,{size:14})," Salida"]})]})})]},Q.id)})})]})})]}),fe=async()=>{if(window.confirm("Est seguro de recalcular el inventario? Esto ajustar el stock de todos los productos basndose en los movimientos registrados.")){D(!0);try{const Q=localStorage.getItem("token"),M=await fetch("/api/inventario/recalcular",{method:"POST",headers:{Authorization:`Bearer ${Q}`}});if(M.ok){const V=await M.json();alert(V.message),await X(),await se()}}catch(Q){console.error("Error al recalcular:",Q)}finally{D(!1)}}},ge=()=>{const Q=s.filter(U=>{if(!Z)return!0;const pe=Z.toLowerCase();return(U.producto_nombre||"").toLowerCase().includes(pe)||(U.tipo_movimiento||"").toLowerCase().includes(pe)||(U.cliente_nombre||"").toLowerCase().includes(pe)||(U.nombre_evento||"").toLowerCase().includes(pe)||(U.motivo||"").toLowerCase().includes(pe)||String(U.evento_id||"").includes(pe)}),M=Math.ceil(Q.length/ee),V=($-1)*ee,we=V+ee,Ne=Q.slice(V,we);return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px",maxWidth:"400px"},children:[e.jsx(Rt,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar por producto, cliente, evento, tipo...",value:Z,onChange:U=>{P(U.target.value),N(1)},style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("button",{onClick:fe,disabled:K,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.5rem",cursor:K?"wait":"pointer",fontSize:"0.875rem",opacity:K?.7:1},children:[e.jsx(rl,{size:16,className:K?"animate-spin":""}),K?"Recalculando...":"Recalcular Inventario"]})]}),Z&&e.jsxs("div",{style:{marginBottom:"0.75rem",fontSize:"0.875rem",color:"#6b7280"},children:[Q.length," resultado(s) encontrado(s)",Z&&e.jsx("button",{onClick:()=>{P(""),N(1)},style:{marginLeft:"0.5rem",padding:"0.25rem 0.5rem",backgroundColor:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"0.25rem",fontSize:"0.75rem",cursor:"pointer"},children:"Limpiar filtro"})]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",overflow:"hidden"},children:s.length===0?e.jsxs("div",{style:{padding:"3rem",textAlign:"center",color:"#6b7280"},children:[e.jsx(Ep,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),e.jsx("p",{children:"No hay movimientos registrados"}),e.jsx("p",{style:{fontSize:"0.875rem"},children:"Los movimientos se registrarn automticamente al:"}),e.jsxs("ul",{style:{textAlign:"left",maxWidth:"300px",margin:"1rem auto",fontSize:"0.875rem"},children:[e.jsx("li",{children:"Reservar productos para eventos"}),e.jsx("li",{children:"Devolver productos de eventos"}),e.jsx("li",{children:"Ajustar stock manualmente"})]})]}):Q.length===0?e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:[e.jsx(Rt,{size:32,style:{margin:"0 auto 0.5rem",opacity:.5}}),e.jsxs("p",{children:['No se encontraron movimientos con "',Z,'"']})]}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"900px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:"600",fontSize:"0.8rem"},children:"Fecha"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:"600",fontSize:"0.8rem"},children:"Producto"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"600",fontSize:"0.8rem"},children:"Tipo"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"600",fontSize:"0.8rem"},children:"Cant."}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"600",fontSize:"0.8rem"},children:"Anterior"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"600",fontSize:"0.8rem"},children:"Nuevo"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:"600",fontSize:"0.8rem"},children:"Evento"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:"600",fontSize:"0.8rem"},children:"Cliente"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:"600",fontSize:"0.8rem"},children:"Motivo"})]})}),e.jsx("tbody",{children:Ne.map(U=>{const pe={entrada:"#10b981",salida:"#ef4444",ajuste:"#3b82f6",reserva:"#f59e0b",devolucion:"#8b5cf6"}[U.tipo_movimiento]||"#6b7280",Ge={completado:"#10b981",confirmado:"#3b82f6",en_proceso:"#f59e0b",cancelado:"#ef4444"}[U.evento_estado]||"#6b7280";return e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"0.75rem",fontSize:"0.8rem"},children:U.fecha_movimiento?new Date(U.fecha_movimiento).toLocaleString("es-CO"):"-"}),e.jsx("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:U.producto_nombre||`ID: ${U.producto_id}`}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.2rem 0.5rem",borderRadius:"9999px",fontSize:"0.7rem",fontWeight:"500",backgroundColor:`${pe}15`,color:pe,textTransform:"capitalize"},children:U.tipo_movimiento})}),e.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"600",fontSize:"0.875rem"},children:[U.tipo_movimiento==="entrada"||U.tipo_movimiento==="devolucion"?"+":"-",U.cantidad]}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center",color:"#6b7280",fontSize:"0.875rem"},children:U.stock_anterior}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"600",fontSize:"0.875rem"},children:U.stock_nuevo}),e.jsx("td",{style:{padding:"0.75rem",fontSize:"0.8rem"},children:U.evento_id?e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"500"},children:["#",U.evento_id]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:U.nombre_evento||""}),U.evento_estado&&e.jsx("span",{style:{padding:"0.1rem 0.4rem",borderRadius:"4px",fontSize:"0.65rem",backgroundColor:`${Ge}15`,color:Ge,textTransform:"capitalize"},children:U.evento_estado})]}):"-"}),e.jsx("td",{style:{padding:"0.75rem",fontSize:"0.8rem",color:"#374151"},children:U.cliente_nombre||"-"}),e.jsx("td",{style:{padding:"0.75rem",fontSize:"0.75rem",color:"#6b7280",maxWidth:"200px"},children:U.motivo||"-"})]},U.id)})})]})})}),Q.length>ee&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem",padding:"0.75rem",backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",flexWrap:"wrap",gap:"0.5rem"},children:[e.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Mostrando ",V+1," - ",Math.min(we,Q.length)," de ",Q.length]}),e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[e.jsx("button",{onClick:()=>N(1),disabled:$===1,style:{padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",backgroundColor:$===1?"#f3f4f6":"white",cursor:$===1?"not-allowed":"pointer",opacity:$===1?.5:1,fontSize:"0.875rem"},children:""}),e.jsx("button",{onClick:()=>N(U=>Math.max(U-1,1)),disabled:$===1,style:{padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",backgroundColor:$===1?"#f3f4f6":"white",cursor:$===1?"not-allowed":"pointer",opacity:$===1?.5:1,fontSize:"0.875rem"},children:""}),Array.from({length:Math.min(5,M)},(U,pe)=>{let Ge;return M<=5||$<=3?Ge=pe+1:$>=M-2?Ge=M-4+pe:Ge=$-2+pe,e.jsx("button",{onClick:()=>N(Ge),style:{padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",backgroundColor:$===Ge?"#6366f1":"white",color:$===Ge?"white":"#374151",cursor:"pointer",fontWeight:$===Ge?"600":"400",fontSize:"0.875rem"},children:Ge},Ge)}),e.jsx("button",{onClick:()=>N(U=>Math.min(U+1,M)),disabled:$===M,style:{padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",backgroundColor:$===M?"#f3f4f6":"white",cursor:$===M?"not-allowed":"pointer",opacity:$===M?.5:1,fontSize:"0.875rem"},children:""}),e.jsx("button",{onClick:()=>N(M),disabled:$===M,style:{padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",backgroundColor:$===M?"#f3f4f6":"white",cursor:$===M?"not-allowed":"pointer",opacity:$===M?.5:1,fontSize:"0.875rem"},children:""})]})]})]})},Re=()=>e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#374151"},children:"Seleccionar Evento"}),e.jsxs("select",{value:j,onChange:Q=>{p(Q.target.value),Q.target.value&&ye(Q.target.value)},style:{width:"100%",maxWidth:"500px",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",fontSize:"1rem"},children:[e.jsx("option",{value:"",children:"Seleccione un evento"}),l.map(Q=>e.jsxs("option",{value:Q.id_evento,children:[Q.nombre_evento," - ",Q.nombre_cliente," (",Q.estado,")"]},Q.id_evento))]})]}),j&&e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",overflow:"hidden"},children:d.length===0?e.jsxs("div",{style:{padding:"3rem",textAlign:"center",color:"#6b7280"},children:[e.jsx(Gt,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),e.jsx("p",{children:"No hay productos asignados a este evento"})]}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Producto"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Cantidad"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Fecha Reserva"})]})}),e.jsx("tbody",{children:d.map(Q=>{const M={disponible:"#10b981",reservado:"#3b82f6",en_uso:"#f59e0b",devuelto:"#6b7280"}[Q.estado]||"#6b7280";return e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"1rem"},children:Q.nombre_producto}),e.jsx("td",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:Q.cantidad_solicitada}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:`${M}15`,color:M,textTransform:"capitalize"},children:Q.estado})}),e.jsx("td",{style:{padding:"1rem",color:"#6b7280"},children:Q.fecha_reserva?new Date(Q.fecha_reserva).toLocaleDateString("es-CO"):"-"})]},Q.id)})})]})})]}),me=()=>e.jsx("div",{children:x.length===0?e.jsxs("div",{style:{backgroundColor:"white",padding:"3rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",textAlign:"center",color:"#6b7280"},children:[e.jsx(ci,{size:48,style:{margin:"0 auto 1rem",opacity:.5,color:"#10b981"}}),e.jsx("p",{style:{fontWeight:"600",color:"#10b981"},children:"Todo en orden"}),e.jsx("p",{children:"No hay productos con stock bajo o agotado"})]}):e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fef3c7",borderBottom:"1px solid #fcd34d"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#92400e"},children:[e.jsx(ci,{size:20}),e.jsxs("span",{style:{fontWeight:"600"},children:[x.length," producto(s) requieren atencin"]})]})}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Producto"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Stock Actual"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Stock Mnimo"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Accin"})]})}),e.jsx("tbody",{children:x.map(Q=>{const M=parseInt(Q.stock||Q.stock_disponible||0),V=parseInt(Q.stock_minimo||0),we=M<=0;return e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsxs("td",{style:{padding:"1rem"},children:[e.jsx("div",{style:{fontWeight:"500"},children:Q.nombre}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:Q.nombre_categoria})]}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"0.375rem",fontWeight:"700",backgroundColor:we?"#fee2e2":"#fef3c7",color:we?"#ef4444":"#f59e0b"},children:M})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center",color:"#6b7280"},children:V}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:we?"#fee2e2":"#fef3c7",color:we?"#ef4444":"#f59e0b"},children:we?"AGOTADO":"Stock Bajo"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("button",{onClick:()=>{m(Q),H("entrada"),W(!0)},style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.5rem 0.75rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem",margin:"0 auto"},children:[e.jsx(Ur,{size:14})," Reponer"]})})]},Q.id)})})]})]})}),Ie=()=>!L||!I?null:e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:"1.5rem",width:"100%",maxWidth:"400px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[e.jsx("h3",{style:{margin:"0 0 1rem",fontSize:"1.25rem",fontWeight:"600"},children:B==="entrada"?"Registrar Entrada":"Registrar Salida"}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontSize:"0.875rem",color:"#6b7280"},children:"Producto"}),e.jsx("div",{style:{fontWeight:"600"},children:I.nombre}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Stock actual: ",I.stock||I.stock_disponible||0," ",I.unidad_medida||"unidades"]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:["Cantidad (",I.unidad_medida||"unidades",")"]}),e.jsx("input",{type:"number",min:"1",value:E,onChange:Q=>R(Q.target.value),placeholder:`Ingrese cantidad en ${I.unidad_medida||"unidades"}`,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Motivo (opcional)"}),e.jsx("input",{type:"text",value:te,onChange:Q=>F(Q.target.value),placeholder:"Ej: Compra, Ajuste de inventario...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{W(!1),m(null),R(""),F("")},style:{padding:"0.75rem 1.25rem",backgroundColor:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{onClick:ie,disabled:!E||parseInt(E)<=0,style:{padding:"0.75rem 1.25rem",backgroundColor:B==="entrada"?"#10b981":"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"500",opacity:!E||parseInt(E)<=0?.5:1},children:B==="entrada"?"Registrar Entrada":"Registrar Salida"})]})]})});return g&&t!=="eventos"?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando..."}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h1",{style:{fontSize:r?"1.5rem":"2rem",fontWeight:"bold",marginBottom:"0.25rem"},children:"Inventario"}),e.jsx("p",{style:{color:"#6b7280"},children:"Control de stock, movimientos y alertas"})]}),z&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:z}),h(),t==="stock"&&J(),t==="movimientos"&&ge(),t==="eventos"&&Re(),t==="alertas"&&me(),Ie()]})},Ov=()=>{const{usuario:r}=st(),{toasts:t,removeToast:o,success:n,error:i}=Ar(),s=go(),[a,d]=c.useState([]),[u,l]=c.useState(!0),[f,g]=c.useState(""),[y,z]=c.useState(""),[b,w]=c.useState("todos"),[k,j]=c.useState(""),[p,C]=c.useState(""),[S,L]=c.useState(""),[W,I]=c.useState(""),[m,B]=c.useState("fecha_desc"),[H,E]=c.useState(!1),[R,te]=c.useState(!1),[F,K]=c.useState(!1),[D,Z]=c.useState(!1),[P,$]=c.useState(null),[N,ee]=c.useState({nombre:"",capacidad:"",ubicacion:"",descripcion:"",precio_base:"",activo:!0}),[Y,X]=c.useState(!1),[se,G]=c.useState(""),ye=_r(r==null?void 0:r.rol,[T.ADMIN,T.MANAGER,T.COORDINATOR]),ie=_r(r==null?void 0:r.rol,[T.ADMIN,T.MANAGER,T.COORDINATOR]),be=_r(r==null?void 0:r.rol,[T.ADMIN,T.MANAGER]);c.useEffect(()=>{ce()},[]);const ce=async()=>{var U,pe;try{l(!0);const Ge=await jn.getAll(!1);d(Ge.salones||[]),g("")}catch(Ge){const We=((pe=(U=Ge.response)==null?void 0:U.data)==null?void 0:pe.error)||Ge.message||"Error al cargar los salones";g(We),console.error(Ge)}finally{l(!1)}},re=U=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(U),x=U=>{const pe=Number.parseFloat(U);return Number.isFinite(pe)?pe:null},h=a.filter(U=>{var Ge,We,cr;if(!y)return!0;const pe=y.toLowerCase();return((Ge=U.nombre)==null?void 0:Ge.toLowerCase().includes(pe))||((We=U.ubicacion)==null?void 0:We.toLowerCase().includes(pe))||((cr=U.descripcion)==null?void 0:cr.toLowerCase().includes(pe))}).filter(U=>b==="activos"?U.activo!==!1:b==="inactivos"?U.activo===!1:!0).filter(U=>{const pe=x(k),Ge=x(p);if(pe===null&&Ge===null)return!0;const We=Number(U.capacidad||0);return!(pe!==null&&We<pe||Ge!==null&&We>Ge)}).filter(U=>{const pe=x(S),Ge=x(W);if(pe===null&&Ge===null)return!0;const We=Number(U.precio_base||0);return!(pe!==null&&We<pe||Ge!==null&&We>Ge)}).sort((U,pe)=>{const Ge=U.fecha_creacion||U.created_at||U.fecha||U.fecha_creado||U.fechaCreacion||U.id_salon,We=pe.fecha_creacion||pe.created_at||pe.fecha||pe.fecha_creado||pe.fechaCreacion||pe.id_salon;switch(m){case"nombre_asc":return(U.nombre||"").localeCompare(pe.nombre||"");case"nombre_desc":return(pe.nombre||"").localeCompare(U.nombre||"");case"capacidad_desc":return Number(pe.capacidad||0)-Number(U.capacidad||0);case"capacidad_asc":return Number(U.capacidad||0)-Number(pe.capacidad||0);case"precio_desc":return Number(pe.precio_base||0)-Number(U.precio_base||0);case"precio_asc":return Number(U.precio_base||0)-Number(pe.precio_base||0);case"fecha_asc":return new Date(Ge).getTime()-new Date(We).getTime();default:return new Date(We).getTime()-new Date(Ge).getTime()}}),J=()=>{ee({nombre:"",capacidad:"",ubicacion:"",descripcion:"",precio_base:"",activo:!0}),G(""),E(!0)},fe=()=>{E(!1),ee({nombre:"",capacidad:"",ubicacion:"",descripcion:"",precio_base:"",activo:!0}),G("")},ge=U=>{$(U),ee({nombre:U.nombre||"",capacidad:U.capacidad||"",ubicacion:U.ubicacion||"",descripcion:U.descripcion||"",precio_base:U.precio_base||"",activo:U.activo!==!1}),G(""),te(!0)},Re=()=>{te(!1),$(null),ee({nombre:"",capacidad:"",ubicacion:"",descripcion:"",precio_base:"",activo:!0}),G("")},me=U=>{$(U),K(!0)},Ie=()=>{K(!1),$(null)},Q=U=>{$(U),Z(!0)},M=()=>{Z(!1),$(null)},V=async U=>{var pe,Ge;if(U.preventDefault(),G(""),!N.nombre||!N.capacidad){G("El nombre y la capacidad son requeridos");return}try{X(!0);const We={...N,capacidad:parseInt(N.capacidad),precio_base:N.precio_base?parseFloat(N.precio_base):0,activo:N.activo};await jn.create(We),await ce(),fe(),n("Saln creado exitosamente")}catch(We){const cr=((Ge=(pe=We.response)==null?void 0:pe.data)==null?void 0:Ge.error)||"Error al crear el saln";G(cr),console.error(We)}finally{X(!1)}},we=async U=>{var pe,Ge;if(U.preventDefault(),G(""),!N.nombre||!N.capacidad){G("El nombre y la capacidad son requeridos");return}try{X(!0);const We={...N,capacidad:parseInt(N.capacidad),precio_base:N.precio_base?parseFloat(N.precio_base):0,activo:N.activo};await jn.update(P.id_salon,We),await ce(),Re(),n("Saln actualizado exitosamente")}catch(We){const cr=((Ge=(pe=We.response)==null?void 0:pe.data)==null?void 0:Ge.error)||"Error al actualizar el saln";G(cr),console.error(We)}finally{X(!1)}},Ne=async()=>{var U,pe;try{X(!0),await jn.delete(P.id_salon),await ce(),M(),n("Saln desactivado exitosamente")}catch(Ge){const We=((pe=(U=Ge.response)==null?void 0:U.data)==null?void 0:pe.error)||"Error al desactivar el saln";i(We),console.error(Ge)}finally{X(!1)}};return u?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando salones..."}):e.jsxs("div",{children:[e.jsx(Lr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:s?"1.5rem":"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Salones"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de salones y espacios"})]}),ye&&e.jsxs("button",{onClick:J,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:U=>U.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:U=>U.currentTarget.style.backgroundColor="#6366f1",children:[e.jsx(Ur,{size:20}),"Nuevo Saln"]})]}),f&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:f}),e.jsxs("div",{style:{marginBottom:"1.5rem",display:"grid",gap:"1rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"2fr 1fr",gap:"1rem"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Rt,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar salones...",value:y,onChange:U=>z(U.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsx("div",{children:e.jsxs("select",{value:m,onChange:U=>B(U.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"fecha_desc",children:"Ordenar: Creacin (Ms recientes)"}),e.jsx("option",{value:"fecha_asc",children:"Ordenar: Creacin (Ms antiguos)"}),e.jsx("option",{value:"nombre_asc",children:"Ordenar: Nombre (A-Z)"}),e.jsx("option",{value:"nombre_desc",children:"Ordenar: Nombre (Z-A)"}),e.jsx("option",{value:"capacidad_desc",children:"Ordenar: Capacidad (Mayor a menor)"}),e.jsx("option",{value:"capacidad_asc",children:"Ordenar: Capacidad (Menor a mayor)"}),e.jsx("option",{value:"precio_desc",children:"Ordenar: Precio (Mayor a menor)"}),e.jsx("option",{value:"precio_asc",children:"Ordenar: Precio (Menor a mayor)"})]})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"1fr 1fr 1fr 1fr 1fr",gap:"1rem",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Estado"}),e.jsxs("select",{value:b,onChange:U=>w(U.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"todos",children:"Todos"}),e.jsx("option",{value:"activos",children:"Activos"}),e.jsx("option",{value:"inactivos",children:"Inactivos"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Capacidad mn."}),e.jsx("input",{type:"number",min:"0",value:k,onChange:U=>j(U.target.value),placeholder:"0",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Capacidad mx."}),e.jsx("input",{type:"number",min:"0",value:p,onChange:U=>C(U.target.value),placeholder:"Sin tope",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio mn."}),e.jsx("input",{type:"number",min:"0",value:S,onChange:U=>L(U.target.value),placeholder:"0",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio mx."}),e.jsx("input",{type:"number",min:"0",value:W,onChange:U=>I(U.target.value),placeholder:"Sin tope",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:h.length===0?e.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"2rem",color:"#6b7280"},children:y?"No se encontraron salones con ese criterio":"No hay salones disponibles"}):h.map(U=>e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:pe=>{pe.currentTarget.style.transform="translateY(-2px)",pe.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:pe=>{pe.currentTarget.style.transform="translateY(0)",pe.currentTarget.style.boxShadow="0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"1rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"0.5rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Ja,{size:24,color:"#6366f1"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.25rem",margin:0},children:U.nombre}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:0},children:U.ubicacion||"Sin ubicacin"})]})]}),e.jsx("p",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"1rem"},children:U.descripcion||"Sin descripcin"}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsxs("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#f3f4f6",borderRadius:"9999px",fontSize:"0.75rem",color:"#6b7280"},children:["Capacidad: ",U.capacidad||0," personas"]}),U.precio_base&&U.precio_base>0&&e.jsx("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#f3f4f6",borderRadius:"9999px",fontSize:"0.75rem",color:"#6b7280"},children:re(U.precio_base)}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:U.activo!==!1?"#10b98120":"#ef444420",color:U.activo!==!1?"#10b981":"#ef4444"},children:U.activo!==!1?"Activo":"Inactivo"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>me(U),style:{flex:1,padding:"0.5rem 1rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background-color 0.2s"},onMouseEnter:pe=>pe.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:pe=>pe.currentTarget.style.backgroundColor="#3b82f6",children:[e.jsx(St,{size:16}),"Ver Detalle"]}),ie&&e.jsx("button",{onClick:()=>ge(U),style:{padding:"0.5rem 1rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:pe=>pe.currentTarget.style.backgroundColor="#059669",onMouseLeave:pe=>pe.currentTarget.style.backgroundColor="#10b981",title:"Editar",children:e.jsx(Jt,{size:16})}),be&&e.jsx("button",{onClick:()=>Q(U),style:{padding:"0.5rem 1rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:pe=>pe.currentTarget.style.backgroundColor="#dc2626",onMouseLeave:pe=>pe.currentTarget.style.backgroundColor="#ef4444",title:"Eliminar",children:e.jsx(Tr,{size:16})})]})]},U.id_salon))}),H&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:fe,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:U=>U.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Nuevo Saln"}),e.jsx("button",{onClick:fe,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),se&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:se}),e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:N.nombre,onChange:U=>ee({...N,nombre:U.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Capacidad ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"number",min:"1",value:N.capacidad,onChange:U=>ee({...N,capacidad:U.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio Base"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:N.precio_base,onChange:U=>ee({...N,precio_base:U.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Ubicacin"}),e.jsx("input",{type:"text",value:N.ubicacion,onChange:U=>ee({...N,ubicacion:U.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:N.descripcion,onChange:U=>ee({...N,descripcion:U.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:N.activo,onChange:U=>ee({...N,activo:U.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Saln activo"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:fe,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:Y,style:{padding:"0.75rem 1.5rem",backgroundColor:Y?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:Y?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),Y?"Guardando...":"Guardar"]})]})]})]})}),R&&P&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:Re,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:U=>U.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Editar Saln"}),e.jsx("button",{onClick:Re,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),se&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:se}),e.jsxs("form",{onSubmit:we,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:N.nombre,onChange:U=>ee({...N,nombre:U.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Capacidad ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"number",min:"1",value:N.capacidad,onChange:U=>ee({...N,capacidad:U.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio Base"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:N.precio_base,onChange:U=>ee({...N,precio_base:U.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Ubicacin"}),e.jsx("input",{type:"text",value:N.ubicacion,onChange:U=>ee({...N,ubicacion:U.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:N.descripcion,onChange:U=>ee({...N,descripcion:U.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:N.activo,onChange:U=>ee({...N,activo:U.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Saln activo"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:Re,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:Y,style:{padding:"0.75rem 1.5rem",backgroundColor:Y?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:Y?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),Y?"Guardando...":"Guardar Cambios"]})]})]})]})}),F&&P&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:Ie,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:U=>U.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Detalle del Saln"}),e.jsx("button",{onClick:Ie,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{width:"4rem",height:"4rem",borderRadius:"0.5rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ja,{size:32,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:P.nombre||"N/A"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:P.ubicacion||"Sin ubicacin"})]})]}),e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Capacidad"}),e.jsxs("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:[P.capacidad||0," personas"]})]}),P.precio_base&&P.precio_base>0&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Precio Base"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500",color:"#6366f1"},children:re(P.precio_base)})]}),P.descripcion&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Descripcin"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:P.descripcion})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Estado"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:P.activo!==!1?"#10b98120":"#ef444420",color:P.activo!==!1?"#10b981":"#ef4444"},children:P.activo!==!1?"Activo":"Inactivo"})]})]})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:e.jsx("button",{onClick:Ie,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})})]})}),D&&P&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:M,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:U=>U.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"50%",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ut,{size:24,color:"#dc2626"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"Desactivar Saln"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:"Est seguro de desactivar este saln?"})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.375rem",marginBottom:"1.5rem"},children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:P.nombre}),e.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:["Capacidad: ",P.capacidad||0," personas"]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:M,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{onClick:Ne,disabled:Y,style:{padding:"0.75rem 1.5rem",backgroundColor:Y?"#9ca3af":"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:Y?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Tr,{size:18}),Y?"Desactivando...":"Desactivar"]})]})]})})]})},Lv=({titulo:r="Dashboard Ejecutivo",subtitulo:t="Resumen de operaciones y mtricas clave",mostrarToast:o=!0})=>{var Q,M,V,we,Ne,U,pe,Ge,We,cr,gr,Sr,Ke,ur,lr,Fr,zr,Qe,Xe,ne,ke,Te,Ae,ue,Ve,Je,q,Se,ve,Oe,Ce,Le,De,Fe,ir,yr,vr,Pr;const{toasts:n,removeToast:i,error:s}=Ar(),[a,d]=c.useState(null),[u,l]=c.useState(null),[f,g]=c.useState(null),[y,z]=c.useState(null),[b,w]=c.useState(null),[k,j]=c.useState(null),[p,C]=c.useState(!0),[S,L]=c.useState(""),[W,I]=c.useState(null),[m,B]=c.useState(!1),[H,E]=c.useState(!1),[R,te]=c.useState(""),[F,K]=c.useState("");c.useEffect(()=>{D();const he=()=>{B(window.innerWidth<640),E(window.innerWidth>=640&&window.innerWidth<1024)};return he(),window.addEventListener("resize",he),()=>window.removeEventListener("resize",he)},[]);const D=async(he=R,nr=F)=>{var or,jr,wr,Nr;try{if(C(!0),!localStorage.getItem("token")){L("No hay sesin activa. Por favor, inicia sesin nuevamente."),C(!1);return}const Ee={};he&&(Ee.fecha_desde=he),nr&&(Ee.fecha_hasta=nr);const[He,er,kr,gt,ro,Lo]=await Promise.all([Tt.getMetricas(Ee),Tt.getEventosPorEstado().catch(()=>null),Tt.getResumenFinanciero().catch(()=>null),Tt.getResumenDanos(Ee).catch(()=>null),Tt.getResumenCalificaciones(Ee).catch(()=>null),Tt.getPagosPorCuenta(Ee).catch(()=>null)]);d(He.metricas),l((er==null?void 0:er.resumen)||null),g((kr==null?void 0:kr.resumen_financiero)||null),z((gt==null?void 0:gt.resumen)||null),w((ro==null?void 0:ro.resumen)||null),j(Lo||null),L("")}catch(O){const Ee=((jr=(or=O.response)==null?void 0:or.data)==null?void 0:jr.error)||(((wr=O.response)==null?void 0:wr.status)===401?"Sesin expirada. Por favor, inicia sesin nuevamente.":"Error al cargar los reportes");L(Ee),o&&s(Ee),console.error(O),((Nr=O.response)==null?void 0:Nr.status)===401&&setTimeout(()=>{localStorage.removeItem("token"),localStorage.removeItem("usuario"),window.location.href="/login"},2e3)}finally{C(!1)}},Z=()=>{D(R,F)},P=()=>{te(""),K(""),D("","")},$=async he=>{try{I(he);const nr={};R&&(nr.fecha_desde=R),F&&(nr.fecha_hasta=F);let or;switch(he){case"eventos":or=await Tt.descargarEventos(nr);break;case"inventario":or=await Tt.descargarInventario();break;case"cardex":or=await Tt.descargarCardex(nr);break;case"notificaciones":or=await Tt.descargarNotificaciones(nr);break;case"clientes":or=await Tt.descargarClientes();break;case"pagos":or=await Tt.descargarPagos(nr);break;case"danos":or=await Tt.descargarDanos(nr);break;case"calificaciones":or=await Tt.descargarCalificaciones(nr);break;default:return}const jr=window.URL.createObjectURL(new Blob([or.data])),wr=document.createElement("a");wr.href=jr;const Nr=or.headers["content-disposition"];let O=`reporte_${he}_${new Date().toISOString().slice(0,10)}.csv`;if(Nr){const Ee=Nr.match(/filename=(.+)/);Ee&&(O=Ee[1])}wr.setAttribute("download",O),document.body.appendChild(wr),wr.click(),wr.remove(),window.URL.revokeObjectURL(jr)}catch(nr){console.error(`Error al descargar reporte de ${he}:`,nr),o&&s(`Error al descargar el reporte de ${he}`)}finally{I(null)}},N=he=>new Intl.NumberFormat("es-EC",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(he),ee=he=>new Intl.NumberFormat("es-EC",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(he),Y=({titulo:he,valor:nr,subtexto:or,icono:jr,color:wr,tendencia:Nr})=>e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:m?"1rem":"1.25rem",border:"1px solid #e5e7eb",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{minWidth:0,flex:1},children:[e.jsx("p",{style:{fontSize:m?"0.7rem":"0.75rem",color:"#6b7280",margin:0,textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:he}),e.jsx("p",{style:{fontSize:m?"1.25rem":"1.75rem",fontWeight:700,color:"#111827",margin:"0.25rem 0",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:nr}),or&&e.jsxs("p",{style:{fontSize:m?"0.65rem":"0.75rem",color:Nr==="up"?"#059669":Nr==="down"?"#dc2626":"#6b7280",margin:0,display:"flex",alignItems:"center",gap:"0.25rem",whiteSpace:"nowrap"},children:[Nr==="up"&&e.jsx(L5,{size:m?10:12}),Nr==="down"&&e.jsx(O5,{size:m?10:12}),or]})]}),e.jsx("div",{style:{width:m?"2rem":"2.5rem",height:m?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:`${wr}15`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,marginLeft:"0.5rem"},children:ka.createElement(jr,{size:m?16:20,color:wr})})]})}),X=({label:he,valor:nr,total:or,color:jr})=>{const wr=or>0?nr/or*100:0;return e.jsxs("div",{style:{marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[e.jsx("span",{style:{fontSize:"0.8rem",color:"#4b5563"},children:he}),e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"#111827"},children:nr})]}),e.jsx("div",{style:{height:"6px",backgroundColor:"#f3f4f6",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${Math.min(wr,100)}%`,backgroundColor:jr,borderRadius:"3px",transition:"width 0.3s"}})})]})},se=({icono:he,label:nr,valor:or,color:jr,bgColor:wr})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:m?"0.5rem":"0.75rem",padding:m?"0.6rem 0.75rem":"0.75rem 1rem",backgroundColor:wr,borderRadius:"0.5rem",flex:1,minWidth:m?"100px":"140px"},children:[ka.createElement(he,{size:m?14:18,color:jr}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:m?"1rem":"1.25rem",fontWeight:700,color:jr,margin:0},children:or}),e.jsx("p",{style:{fontSize:m?"0.6rem":"0.7rem",color:"#6b7280",margin:0},children:nr})]})]});if(p)return e.jsxs("div",{style:{textAlign:"center",padding:"4rem"},children:[e.jsx(pc,{size:48,color:"#6366f1",style:{margin:"0 auto 1rem",animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{color:"#6b7280",fontSize:"1rem"},children:"Cargando dashboard..."})]});if(S)return e.jsxs("div",{style:{textAlign:"center",padding:"4rem"},children:[e.jsx(ut,{size:48,color:"#ef4444",style:{margin:"0 auto 1rem"}}),e.jsx("p",{style:{color:"#ef4444",marginBottom:"1rem"},children:S}),e.jsx("button",{onClick:D,style:{padding:"0.6rem 1.25rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Reintentar"})]});if(!a)return e.jsx("div",{style:{textAlign:"center",padding:"4rem"},children:e.jsx("p",{style:{color:"#ef4444"},children:"No se pudieron cargar los reportes"})});const G=((Q=a.financiero)==null?void 0:Q.total_ingresos)||0,ye=((M=a.financiero)==null?void 0:M.total_cobrado)||0,ie=((V=a.financiero)==null?void 0:V.total_pendiente)||0,be=G>0?(ye/G*100).toFixed(1):0,ce=((we=a.eventos)==null?void 0:we.total)||0,re=((Ne=a.eventos)==null?void 0:Ne.confirmados)||0,x=((U=a.eventos)==null?void 0:U.en_proceso)||0,h=((pe=a.eventos)==null?void 0:pe.completados)||0,J=((Ge=a.eventos)==null?void 0:Ge.cancelados)||0,fe=((We=a.eventos)==null?void 0:We.cotizacion)||0,ge=((cr=a.notificaciones)==null?void 0:cr.whatsapp_total_out)||0,Re=(gr=a.notificaciones)==null?void 0:gr.maximo_whatsapp,me=((Ke=(Sr=a.notificaciones)==null?void 0:Sr.envios)==null?void 0:Ke.email)||0,Ie=(ur=a.notificaciones)==null?void 0:ur.maximo_email;return e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:m?"0 0.5rem":0},children:[o&&e.jsx(Lr,{toasts:n,removeToast:i}),e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",flexDirection:m?"column":"row",justifyContent:"space-between",alignItems:m?"stretch":"flex-start",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:m?"1.25rem":"1.5rem",fontWeight:700,marginBottom:"0.25rem",color:"#111827"},children:r}),e.jsx("p",{style:{color:"#6b7280",fontSize:m?"0.8rem":"0.875rem",margin:0},children:t})]}),e.jsxs("div",{style:{display:"flex",flexDirection:m?"column":"row",alignItems:m?"stretch":"center",gap:"0.75rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:m?"wrap":"nowrap"},children:[!m&&e.jsx(_t,{size:16,color:"#6b7280"}),e.jsx("input",{type:"date",value:R,onChange:he=>te(he.target.value),style:{padding:"0.5rem 0.75rem",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"0.875rem",flex:m?1:"none",minWidth:m?"0":"auto"},placeholder:"Desde"}),e.jsx("span",{style:{color:"#6b7280",display:m?"none":"inline"},children:"-"}),e.jsx("input",{type:"date",value:F,onChange:he=>K(he.target.value),style:{padding:"0.5rem 0.75rem",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"0.875rem",flex:m?1:"none",minWidth:m?"0":"auto"},placeholder:"Hasta"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{type:"button",onClick:Z,style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"none",background:"#3b82f6",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.35rem",fontSize:"0.875rem",flex:m?1:"none"},children:[e.jsx(bu,{size:14}),"Filtrar"]}),(R||F)&&e.jsx("button",{type:"button",onClick:P,style:{padding:"0.5rem 0.75rem",borderRadius:"8px",border:"1px solid #d1d5db",background:"#f3f4f6",color:"#374151",cursor:"pointer",fontSize:"0.875rem",flex:m?1:"none"},children:"Limpiar"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:m?"repeat(2, 1fr)":H?"repeat(3, 1fr)":"repeat(auto-fit, minmax(200px, 1fr))",gap:m?"0.75rem":"1rem",marginBottom:"1.5rem"},children:[e.jsx(Y,{titulo:"Ingresos Totales",valor:N(G),subtexto:`${ce} eventos`,icono:zt,color:"#059669"}),e.jsx(Y,{titulo:"Cobrado",valor:N(ye),subtexto:`${be}% recaudado`,icono:_p,color:"#3b82f6",tendencia:"up"}),e.jsx(Y,{titulo:"Pendiente",valor:N(ie),subtexto:"Por cobrar",icono:Wn,color:"#f59e0b",tendencia:ie>ye?"down":null}),e.jsx(Y,{titulo:"Ticket Promedio",valor:N(((lr=a.financiero)==null?void 0:lr.ticket_promedio)||0),subtexto:"Por evento",icono:ju,color:"#8b5cf6"}),e.jsx(Y,{titulo:"Clientes",valor:((Fr=a.clientes)==null?void 0:Fr.total)||0,subtexto:`${(((zr=a.clientes)==null?void 0:zr.promedio_eventos_cliente)||0).toFixed(1)} eventos/cliente`,icono:dn,color:"#ec4899"})]}),(y||b)&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:m?"repeat(2, 1fr)":H?"repeat(3, 1fr)":"repeat(auto-fit, minmax(180px, 1fr))",gap:m?"0.75rem":"1rem",marginBottom:"1.5rem"},children:[y&&e.jsxs(e.Fragment,{children:[e.jsx(Y,{titulo:"Eventos con Daos",valor:y.total_eventos_con_danos||0,subtexto:`${y.eventos_pendientes_pago||0} pendientes pago`,icono:ci,color:"#dc2626",tendencia:y.eventos_pendientes_pago>0?"down":null}),e.jsx(Y,{titulo:"Costo Total Daos",valor:N(y.costo_total_danos||0),subtexto:`${N(y.total_asumido_empresa||0)} asumido`,icono:ut,color:"#f59e0b"}),e.jsx(Y,{titulo:"Daos Cobrados",valor:N(y.total_pagado||0),subtexto:`${N(y.total_pendiente||0)} pendiente`,icono:zt,color:y.total_pendiente>0?"#f59e0b":"#10b981",tendencia:y.total_pendiente>0?"down":"up"})]}),b&&e.jsxs(e.Fragment,{children:[e.jsx(Y,{titulo:"Promedio Calificacin",valor:`${(b.promedio_calificacion||0).toFixed(1)} / 5`,subtexto:`${b.total_calificaciones||0} evaluaciones`,icono:ud,color:"#f59e0b",tendencia:b.promedio_calificacion>=4?"up":b.promedio_calificacion<3?"down":null}),e.jsx(Y,{titulo:"Calificaciones 5",valor:b.calificaciones_5||0,subtexto:`${((b.calificaciones_5||0)/Math.max(b.total_calificaciones||1,1)*100).toFixed(0)}% del total`,icono:ud,color:"#10b981",tendencia:"up"}),e.jsx(Y,{titulo:"Pendientes de Calificar",valor:b.pendientes_calificar||0,subtexto:"Eventos completados",icono:Wn,color:"#6366f1"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:m?"1fr":"repeat(auto-fit, minmax(320px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:m?"1rem":"1.25rem",border:"1px solid #e5e7eb"},children:[e.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:600,margin:"0 0 1rem 0",color:"#374151"},children:"Estado de Cartera"}),e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",height:"32px",borderRadius:"6px",overflow:"hidden",backgroundColor:"#f3f4f6"},children:[e.jsx("div",{style:{width:`${G>0?ye/G*100:0}%`,backgroundColor:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",transition:"width 0.5s ease"},children:G>0&&ye/G*100>15&&e.jsx("span",{style:{color:"white",fontSize:"0.75rem",fontWeight:600},children:N(ye)})}),e.jsx("div",{style:{width:`${G>0?ie/G*100:0}%`,backgroundColor:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",transition:"width 0.5s ease"},children:G>0&&ie/G*100>15&&e.jsx("span",{style:{color:"white",fontSize:"0.75rem",fontWeight:600},children:N(ie)})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"2px",backgroundColor:"#10b981"}}),e.jsxs("span",{style:{fontSize:"0.7rem",color:"#6b7280"},children:["Cobrado (",be,"%)"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"2px",backgroundColor:"#f59e0b"}}),e.jsxs("span",{style:{fontSize:"0.7rem",color:"#6b7280"},children:["Pendiente (",(100-parseFloat(be)).toFixed(1),"%)"]})]})]})]}),e.jsx("div",{style:{borderTop:"1px solid #f3f4f6",paddingTop:"1rem"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Total de pagos recibidos"}),e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"#111827"},children:((Qe=a.financiero)==null?void 0:Qe.total_pagos)||0})]})})]}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:m?"1rem":"1.25rem",border:"1px solid #e5e7eb"},children:[e.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:600,margin:"0 0 1rem 0",color:"#374151"},children:"Pipeline de Eventos"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:m?"repeat(2, 1fr)":"repeat(auto-fit, minmax(140px, 1fr))",gap:m?"0.5rem":"0.75rem"},children:[e.jsx(se,{icono:jt,label:"Cotizacin",valor:fe,color:"#6b7280",bgColor:"#f9fafb"}),e.jsx(se,{icono:_p,label:"Confirmados",valor:re,color:"#8b5cf6",bgColor:"#f5f3ff"}),e.jsx(se,{icono:pc,label:"En Proceso",valor:x,color:"#3b82f6",bgColor:"#eff6ff"}),e.jsx(se,{icono:cv,label:"Completados",valor:h,color:"#059669",bgColor:"#ecfdf5"}),e.jsx(se,{icono:Mg,label:"Cancelados",valor:J,color:"#dc2626",bgColor:"#fef2f2"})]}),e.jsx("div",{style:{borderTop:"1px solid #f3f4f6",paddingTop:"1rem",marginTop:"1rem"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Promedio invitados/evento"}),e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"#111827"},children:Math.round(((Xe=a.estadisticas)==null?void 0:Xe.promedio_invitados)||0)})]})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:m?"1fr":"repeat(auto-fit, minmax(320px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[(a==null?void 0:a.notificaciones)&&e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:m?"1rem":"1.25rem",border:"1px solid #e5e7eb"},children:[e.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:600,margin:"0 0 1rem 0",color:"#374151"},children:"Comunicaciones"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{backgroundColor:"#f0fdf4",borderRadius:"0.5rem",padding:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(vu,{size:16,color:"#059669"}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#059669"},children:"WhatsApp"})]}),e.jsxs("p",{style:{fontSize:"1.25rem",fontWeight:700,color:"#111827",margin:0},children:[ge,e.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:400,color:"#6b7280"},children:[" ","/ ",Re!=null?Re.toLocaleString():""]})]}),Re!=null&&ge>Re&&e.jsxs("p",{style:{fontSize:"0.7rem",color:"#dc2626",margin:"0.25rem 0 0 0"},children:["Excedidos: ",ge-Re]})]}),e.jsxs("div",{style:{backgroundColor:"#eff6ff",borderRadius:"0.5rem",padding:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(_l,{size:16,color:"#3b82f6"}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#3b82f6"},children:"Email"})]}),e.jsxs("p",{style:{fontSize:"1.25rem",fontWeight:700,color:"#111827",margin:0},children:[me,e.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:400,color:"#6b7280"},children:[" ","/ ",Ie!=null?Ie.toLocaleString():""]})]}),Ie!=null&&me>Ie&&e.jsxs("p",{style:{fontSize:"0.7rem",color:"#dc2626",margin:"0.25rem 0 0 0"},children:["Excedidos: ",me-Ie]})]})]}),e.jsxs("div",{style:{borderTop:"1px solid #f3f4f6",paddingTop:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.35rem"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Costo WhatsApp"}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#111827"},children:ee(a.notificaciones.whatsapp_total_cost||0)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Costo Email"}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#111827"},children:ee(a.notificaciones.email_total_cost||0)})]})]})]}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:m?"1rem":"1.25rem",border:"1px solid #e5e7eb"},children:[e.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:600,margin:"0 0 1rem 0",color:"#374151"},children:"Recursos del Sistema"}),e.jsx(X,{label:"Productos activos",valor:`${((ke=(ne=a.recursos)==null?void 0:ne.productos)==null?void 0:ke.activos)||0} / ${((Ae=(Te=a.recursos)==null?void 0:Te.productos)==null?void 0:Ae.total)||0}`,total:((Ve=(ue=a.recursos)==null?void 0:ue.productos)==null?void 0:Ve.total)||1,color:"#6366f1"}),e.jsx(X,{label:"Planes activos",valor:`${((q=(Je=a.recursos)==null?void 0:Je.planes)==null?void 0:q.activos)||0} / ${((ve=(Se=a.recursos)==null?void 0:Se.planes)==null?void 0:ve.total)||0}`,total:((Ce=(Oe=a.recursos)==null?void 0:Oe.planes)==null?void 0:Ce.total)||1,color:"#8b5cf6"}),e.jsx(X,{label:"Salones activos",valor:`${((De=(Le=a.recursos)==null?void 0:Le.salones)==null?void 0:De.activos)||0} / ${((ir=(Fe=a.recursos)==null?void 0:Fe.salones)==null?void 0:ir.total)||0}`,total:((vr=(yr=a.recursos)==null?void 0:yr.salones)==null?void 0:vr.total)||1,color:"#10b981"})]})]}),((Pr=a==null?void 0:a.notificaciones)==null?void 0:Pr.por_tipo)&&a.notificaciones.por_tipo.length>0&&e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:m?"1rem":"1.25rem",border:"1px solid #e5e7eb"},children:[e.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:600,margin:"0 0 1rem 0",color:"#374151"},children:"Detalle de Notificaciones"}),e.jsx("div",{style:{overflowX:"auto",margin:m?"0 -1rem":0,padding:m?"0 1rem":0},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:m?"0.75rem":"0.8rem",minWidth:m?"400px":"auto"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb"},children:[e.jsx("th",{style:{padding:m?"0.5rem":"0.6rem",textAlign:"left",fontWeight:600,color:"#374151",whiteSpace:"nowrap"},children:"Tipo"}),e.jsx("th",{style:{padding:m?"0.5rem":"0.6rem",textAlign:"center",fontWeight:600,color:"#374151"},children:"Email"}),e.jsx("th",{style:{padding:m?"0.5rem":"0.6rem",textAlign:"center",fontWeight:600,color:"#374151"},children:"WA"}),e.jsx("th",{style:{padding:m?"0.5rem":"0.6rem",textAlign:"center",fontWeight:600,color:"#374151"},children:"Total"}),e.jsx("th",{style:{padding:m?"0.5rem":"0.6rem",textAlign:"right",fontWeight:600,color:"#374151"},children:"Costo"})]})}),e.jsx("tbody",{children:a.notificaciones.por_tipo.map(he=>e.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[e.jsx("td",{style:{padding:m?"0.5rem":"0.6rem",color:"#4b5563",whiteSpace:"nowrap"},children:he.tipo_notificacion.replace(/_/g," ")}),e.jsx("td",{style:{padding:m?"0.5rem":"0.6rem",textAlign:"center",color:"#4b5563"},children:he.email_out}),e.jsx("td",{style:{padding:m?"0.5rem":"0.6rem",textAlign:"center",color:"#4b5563"},children:he.whatsapp_out}),e.jsx("td",{style:{padding:m?"0.5rem":"0.6rem",textAlign:"center",fontWeight:600,color:"#111827"},children:he.total}),e.jsx("td",{style:{padding:m?"0.5rem":"0.6rem",textAlign:"right",color:"#4b5563",whiteSpace:"nowrap"},children:ee((he.costo_email||0)+(he.costo_whatsapp||0))})]},he.tipo_notificacion))})]})})]}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:m?"1rem":"1.5rem",border:"1px solid #e5e7eb",marginTop:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsx(Q5,{size:m?18:20,color:"#6366f1"}),e.jsx("h3",{style:{fontSize:m?"0.9rem":"1rem",fontWeight:600,margin:0,color:"#374151"},children:"Descargar Reportes"})]}),e.jsx("p",{style:{fontSize:m?"0.8rem":"0.85rem",color:"#6b7280",marginBottom:"1rem"},children:m?"Descarga los datos en CSV.":`Descarga los datos de su sistema. ${R||F?"Los reportes con filtro de fecha usarn el rango seleccionado.":"Usa los filtros de fecha para limitar los datos."}`}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:m?"1fr":H?"repeat(2, 1fr)":"repeat(auto-fill, minmax(200px, 1fr))",gap:m?"0.75rem":"1rem"},children:[e.jsxs("button",{onClick:()=>$("eventos"),disabled:W==="eventos",style:{display:"flex",alignItems:"center",gap:m?"0.5rem":"0.75rem",padding:m?"0.75rem":"1rem",backgroundColor:W==="eventos"?"#f3f4f6":"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:W==="eventos"?"wait":"pointer",transition:"all 0.2s"},onMouseEnter:he=>!W&&(he.currentTarget.style.backgroundColor="#f3f4f6"),onMouseLeave:he=>!W&&(he.currentTarget.style.backgroundColor="#f9fafb"),children:[e.jsx("div",{style:{width:m?"2rem":"2.5rem",height:m?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:"#dbeafe",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(_t,{size:m?14:18,color:"#2563eb"})}),e.jsxs("div",{style:{textAlign:"left",flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:m?"0.85rem":"0.9rem",color:"#111827"},children:"Eventos"}),e.jsx("div",{style:{fontSize:m?"0.7rem":"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:W==="eventos"?"Descargando...":"Lista completa"})]}),e.jsx(no,{size:m?14:18,color:"#6b7280"})]}),e.jsxs("button",{onClick:()=>$("pagos"),disabled:W==="pagos",style:{display:"flex",alignItems:"center",gap:m?"0.5rem":"0.75rem",padding:m?"0.75rem":"1rem",backgroundColor:W==="pagos"?"#f3f4f6":"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:W==="pagos"?"wait":"pointer",transition:"all 0.2s"},onMouseEnter:he=>!W&&(he.currentTarget.style.backgroundColor="#f3f4f6"),onMouseLeave:he=>!W&&(he.currentTarget.style.backgroundColor="#f9fafb"),children:[e.jsx("div",{style:{width:m?"2rem":"2.5rem",height:m?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:"#dcfce7",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ks,{size:m?14:18,color:"#16a34a"})}),e.jsxs("div",{style:{textAlign:"left",flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:m?"0.85rem":"0.9rem",color:"#111827"},children:"Pagos"}),e.jsx("div",{style:{fontSize:m?"0.7rem":"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:W==="pagos"?"Descargando...":"Historial"})]}),e.jsx(no,{size:m?14:18,color:"#6b7280"})]}),e.jsxs("button",{onClick:()=>$("inventario"),disabled:W==="inventario",style:{display:"flex",alignItems:"center",gap:m?"0.5rem":"0.75rem",padding:m?"0.75rem":"1rem",backgroundColor:W==="inventario"?"#f3f4f6":"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:W==="inventario"?"wait":"pointer",transition:"all 0.2s"},onMouseEnter:he=>!W&&(he.currentTarget.style.backgroundColor="#f3f4f6"),onMouseLeave:he=>!W&&(he.currentTarget.style.backgroundColor="#f9fafb"),children:[e.jsx("div",{style:{width:m?"2rem":"2.5rem",height:m?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:"#fef3c7",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Gt,{size:m?14:18,color:"#d97706"})}),e.jsxs("div",{style:{textAlign:"left",flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:m?"0.85rem":"0.9rem",color:"#111827"},children:"Inventario"}),e.jsx("div",{style:{fontSize:m?"0.7rem":"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:W==="inventario"?"Descargando...":"Productos"})]}),e.jsx(no,{size:m?14:18,color:"#6b7280"})]}),e.jsxs("button",{onClick:()=>$("cardex"),disabled:W==="cardex",style:{display:"flex",alignItems:"center",gap:m?"0.5rem":"0.75rem",padding:m?"0.75rem":"1rem",backgroundColor:W==="cardex"?"#f3f4f6":"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:W==="cardex"?"wait":"pointer",transition:"all 0.2s"},onMouseEnter:he=>!W&&(he.currentTarget.style.backgroundColor="#f3f4f6"),onMouseLeave:he=>!W&&(he.currentTarget.style.backgroundColor="#f9fafb"),children:[e.jsx("div",{style:{width:m?"2rem":"2.5rem",height:m?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:"#e0e7ff",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(H5,{size:m?14:18,color:"#4f46e5"})}),e.jsxs("div",{style:{textAlign:"left",flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:m?"0.85rem":"0.9rem",color:"#111827"},children:"Cardex"}),e.jsx("div",{style:{fontSize:m?"0.7rem":"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:W==="cardex"?"Descargando...":"Movimientos"})]}),e.jsx(no,{size:m?14:18,color:"#6b7280"})]}),e.jsxs("button",{onClick:()=>$("notificaciones"),disabled:W==="notificaciones",style:{display:"flex",alignItems:"center",gap:m?"0.5rem":"0.75rem",padding:m?"0.75rem":"1rem",backgroundColor:W==="notificaciones"?"#f3f4f6":"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:W==="notificaciones"?"wait":"pointer",transition:"all 0.2s"},onMouseEnter:he=>!W&&(he.currentTarget.style.backgroundColor="#f3f4f6"),onMouseLeave:he=>!W&&(he.currentTarget.style.backgroundColor="#f9fafb"),children:[e.jsx("div",{style:{width:m?"2rem":"2.5rem",height:m?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:"#fce7f3",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Ag,{size:m?14:18,color:"#db2777"})}),e.jsxs("div",{style:{textAlign:"left",flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:m?"0.85rem":"0.9rem",color:"#111827"},children:"Notificaciones"}),e.jsx("div",{style:{fontSize:m?"0.7rem":"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:W==="notificaciones"?"Descargando...":"Historial"})]}),e.jsx(no,{size:m?14:18,color:"#6b7280"})]}),e.jsxs("button",{onClick:()=>$("clientes"),disabled:W==="clientes",style:{display:"flex",alignItems:"center",gap:m?"0.5rem":"0.75rem",padding:m?"0.75rem":"1rem",backgroundColor:W==="clientes"?"#f3f4f6":"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:W==="clientes"?"wait":"pointer",transition:"all 0.2s"},onMouseEnter:he=>!W&&(he.currentTarget.style.backgroundColor="#f3f4f6"),onMouseLeave:he=>!W&&(he.currentTarget.style.backgroundColor="#f9fafb"),children:[e.jsx("div",{style:{width:m?"2rem":"2.5rem",height:m?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:"#f3e8ff",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(dn,{size:m?14:18,color:"#9333ea"})}),e.jsxs("div",{style:{textAlign:"left",flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:m?"0.85rem":"0.9rem",color:"#111827"},children:"Clientes"}),e.jsx("div",{style:{fontSize:m?"0.7rem":"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:W==="clientes"?"Descargando...":"Base de datos"})]}),e.jsx(no,{size:m?14:18,color:"#6b7280"})]}),e.jsxs("button",{onClick:()=>$("danos"),disabled:W==="danos",style:{display:"flex",alignItems:"center",gap:m?"0.5rem":"0.75rem",padding:m?"0.75rem":"1rem",backgroundColor:W==="danos"?"#f3f4f6":"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:W==="danos"?"wait":"pointer",transition:"all 0.2s"},onMouseEnter:he=>!W&&(he.currentTarget.style.backgroundColor="#f3f4f6"),onMouseLeave:he=>!W&&(he.currentTarget.style.backgroundColor="#f9fafb"),children:[e.jsx("div",{style:{width:m?"2rem":"2.5rem",height:m?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:"#fef2f2",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ci,{size:m?14:18,color:"#dc2626"})}),e.jsxs("div",{style:{textAlign:"left",flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:m?"0.85rem":"0.9rem",color:"#111827"},children:"Daos"}),e.jsx("div",{style:{fontSize:m?"0.7rem":"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:W==="danos"?"Descargando...":"Registro de daos"})]}),e.jsx(no,{size:m?14:18,color:"#6b7280"})]}),e.jsxs("button",{onClick:()=>$("calificaciones"),disabled:W==="calificaciones",style:{display:"flex",alignItems:"center",gap:m?"0.5rem":"0.75rem",padding:m?"0.75rem":"1rem",backgroundColor:W==="calificaciones"?"#f3f4f6":"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:W==="calificaciones"?"wait":"pointer",transition:"all 0.2s"},onMouseEnter:he=>!W&&(he.currentTarget.style.backgroundColor="#f3f4f6"),onMouseLeave:he=>!W&&(he.currentTarget.style.backgroundColor="#f9fafb"),children:[e.jsx("div",{style:{width:m?"2rem":"2.5rem",height:m?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:"#fef9c3",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ud,{size:m?14:18,color:"#ca8a04"})}),e.jsxs("div",{style:{textAlign:"left",flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:m?"0.85rem":"0.9rem",color:"#111827"},children:"Calificaciones"}),e.jsx("div",{style:{fontSize:m?"0.7rem":"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:W==="calificaciones"?"Descargando...":"Evaluaciones clientes"})]}),e.jsx(no,{size:m?14:18,color:"#6b7280"})]})]})]}),k&&k.pagos_por_cuenta&&k.pagos_por_cuenta.length>0&&e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",border:"1px solid #e5e7eb",padding:m?"1rem":"1.5rem",marginTop:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"0.5rem",backgroundColor:"#eef2ff",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(sn,{size:20,color:"#4f46e5"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"700",margin:0,color:"#111827"},children:"Pagos por Cuenta Destino"}),e.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:0},children:"Distribucin de ingresos por cuenta bancaria"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:m?"1fr":"repeat(3, 1fr)",gap:"1rem",marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Total Ingresos"}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10b981"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(k.total_ingresos||0)})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Total Reembolsos"}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#ef4444"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(k.total_reembolsos||0)})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Neto Total"}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#4f46e5"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(k.total_general||0)})]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Cuenta"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Tipo"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Pagos"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Ingresos"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Reembolsos"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Neto"})]})}),e.jsx("tbody",{children:k.pagos_por_cuenta.map(he=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsxs("td",{style:{padding:"0.75rem"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#111827",fontSize:"0.875rem"},children:he.nombre_cuenta}),he.numero_cuenta&&e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontFamily:"monospace"},children:he.numero_cuenta})]}),e.jsx("td",{style:{padding:"0.75rem"},children:e.jsx("span",{style:{padding:"0.2rem 0.5rem",borderRadius:"9999px",fontSize:"0.7rem",fontWeight:"500",backgroundColor:he.tipo_cuenta==="ahorros"?"#dbeafe":he.tipo_cuenta==="corriente"?"#e0f2fe":he.tipo_cuenta==="digital"?"#f3e8ff":he.tipo_cuenta==="efectivo"?"#dcfce7":"#f3f4f6",color:he.tipo_cuenta==="ahorros"?"#1d4ed8":he.tipo_cuenta==="corriente"?"#0369a1":he.tipo_cuenta==="digital"?"#7c3aed":he.tipo_cuenta==="efectivo"?"#16a34a":"#6b7280"},children:he.tipo_cuenta==="ahorros"?"Ahorros":he.tipo_cuenta==="corriente"?"Corriente":he.tipo_cuenta==="digital"?"Digital":he.tipo_cuenta==="efectivo"?"Efectivo":he.tipo_cuenta})}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:he.total_pagos}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",color:"#10b981",fontWeight:"500"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(he.total_ingresos)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",color:"#ef4444",fontWeight:"500"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(he.total_reembolsos)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",color:"#4f46e5",fontWeight:"700"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(he.total_neto)})]},he.cuenta_id))})]})})]})]})},Fv=()=>{const{usuario:r}=st(),{toasts:t,removeToast:o,success:n,error:i}=Ar(),s=go(),[a,d]=c.useState([]),[u,l]=c.useState(!0),[f,g]=c.useState(""),[y,z]=c.useState(""),[b,w]=c.useState(""),[k,j]=c.useState(!1),[p,C]=c.useState(!1),[S,L]=c.useState(!1),[W,I]=c.useState(!1),[m,B]=c.useState(!1),[H,E]=c.useState(null),[R,te]=c.useState({nombre_usuario:"",contrasena:"",nombre_completo:"",email:"",telefono:"",rol:"cliente",activo:!0}),[F,K]=c.useState({nueva_contrasena:"",confirmar_contrasena:""}),[D,Z]=c.useState(!1),[P,$]=c.useState(""),N=_r(r==null?void 0:r.rol,[T.ADMIN]),ee=_r(r==null?void 0:r.rol,[T.ADMIN,T.MANAGER]),Y=_r(r==null?void 0:r.rol,[T.ADMIN]),X=_r(r==null?void 0:r.rol,[T.ADMIN,T.MANAGER]);c.useEffect(()=>{se()},[b]);const se=async()=>{var V,we;try{l(!0);const Ne=b?{rol:b}:{},U=await dt.getAll(Ne);d(U.usuarios||[]),g("")}catch(Ne){const U=((we=(V=Ne.response)==null?void 0:V.data)==null?void 0:we.error)||Ne.message||"Error al cargar los usuarios";g(U),console.error(Ne)}finally{l(!1)}},G=a.filter(V=>{var Ne,U,pe;if(!y)return!0;const we=y.toLowerCase();return((Ne=V.nombre_usuario)==null?void 0:Ne.toLowerCase().includes(we))||((U=V.nombre_completo)==null?void 0:U.toLowerCase().includes(we))||((pe=V.email)==null?void 0:pe.toLowerCase().includes(we))}),ye=()=>{te({nombre_usuario:"",contrasena:"",nombre_completo:"",email:"",telefono:"",rol:"cliente",activo:!0}),$(""),j(!0)},ie=()=>{j(!1),te({nombre_usuario:"",contrasena:"",nombre_completo:"",email:"",telefono:"",rol:"cliente",activo:!0}),$("")},be=V=>{E(V),te({nombre_usuario:V.nombre_usuario||"",contrasena:"",nombre_completo:V.nombre_completo||"",email:V.email||"",telefono:V.telefono||"",rol:V.rol||"cliente",activo:V.activo!==!1}),$(""),C(!0)},ce=()=>{C(!1),E(null),te({nombre_usuario:"",contrasena:"",nombre_completo:"",email:"",telefono:"",rol:"cliente",activo:!0}),$("")},re=V=>{E(V),L(!0)},x=()=>{L(!1),E(null)},h=V=>{E(V),I(!0)},J=()=>{I(!1),E(null)},fe=V=>{E(V),K({nueva_contrasena:"",confirmar_contrasena:""}),$(""),B(!0)},ge=()=>{B(!1),E(null),K({nueva_contrasena:"",confirmar_contrasena:""}),$("")},Re=async V=>{var we,Ne;if(V.preventDefault(),$(""),!R.nombre_usuario||!R.contrasena||!R.nombre_completo||!R.rol){$("Los campos nombre de usuario, contrasea, nombre completo y rol son requeridos");return}if(R.contrasena.length<6){$("La contrasea debe tener al menos 6 caracteres");return}try{Z(!0);const U={...R,activo:R.activo};await dt.create(U),await se(),ie(),n("Usuario creado exitosamente")}catch(U){const pe=((Ne=(we=U.response)==null?void 0:we.data)==null?void 0:Ne.error)||"Error al crear el usuario";$(pe),console.error(U)}finally{Z(!1)}},me=async V=>{var we,Ne;if(V.preventDefault(),$(""),!R.nombre_completo){$("El nombre completo es requerido");return}try{Z(!0);const U={nombre_completo:R.nombre_completo,email:R.email||null,telefono:R.telefono||null,activo:R.activo};_r(r==null?void 0:r.rol,[T.ADMIN])&&(U.rol=R.rol),await dt.update(H.id,U),await se(),ce(),n("Usuario actualizado exitosamente")}catch(U){const pe=((Ne=(we=U.response)==null?void 0:we.data)==null?void 0:Ne.error)||"Error al actualizar el usuario";$(pe),console.error(U)}finally{Z(!1)}},Ie=async()=>{var V,we;try{Z(!0),await dt.delete(H.id),await se(),J(),n("Usuario eliminado exitosamente")}catch(Ne){const U=((we=(V=Ne.response)==null?void 0:V.data)==null?void 0:we.error)||"Error al eliminar el usuario";i(U),console.error(Ne)}finally{Z(!1)}},Q=async V=>{var we,Ne;if(V.preventDefault(),$(""),!F.nueva_contrasena||!F.confirmar_contrasena){$("Ambos campos son requeridos");return}if(F.nueva_contrasena.length<6){$("La contrasea debe tener al menos 6 caracteres");return}if(F.nueva_contrasena!==F.confirmar_contrasena){$("Las contraseas no coinciden");return}try{Z(!0),await dt.cambiarContrasena(H.id,F.nueva_contrasena),ge(),n("Contrasea cambiada exitosamente")}catch(U){const pe=((Ne=(we=U.response)==null?void 0:we.data)==null?void 0:Ne.error)||"Error al cambiar la contrasea";$(pe),console.error(U)}finally{Z(!1)}},M=V=>{if(!V)return"-";try{return new Date(V).toLocaleDateString("es-CO",{year:"numeric",month:"long",day:"numeric"})}catch{return V}};return u?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando usuarios..."}):e.jsxs("div",{children:[e.jsx(Lr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:s?"1.5rem":"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Usuarios"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de usuarios del sistema"})]}),N&&e.jsxs("button",{onClick:ye,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:V=>V.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:V=>V.currentTarget.style.backgroundColor="#6366f1",children:[e.jsx(Ur,{size:20}),"Nuevo Usuario"]})]}),f&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:f}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",flexWrap:"wrap",flexDirection:s?"column":"row"},children:[e.jsxs("div",{style:{position:"relative",flex:1,minWidth:s?"100%":"250px"},children:[e.jsx(Rt,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar usuarios...",value:y,onChange:V=>z(V.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("select",{value:b,onChange:V=>w(V.target.value),style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",minWidth:s?"100%":"200px"},children:[e.jsx("option",{value:"",children:"Todos los roles"}),e.jsx("option",{value:"administrador",children:"Administrador"}),e.jsx("option",{value:"gerente_general",children:"Gerente General"}),e.jsx("option",{value:"coordinador",children:"Coordinador"}),e.jsx("option",{value:"cliente",children:"Cliente"})]})]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",overflow:"hidden"},children:s?e.jsx("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:G.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:y||b?"No se encontraron usuarios con ese criterio":"No hay usuarios disponibles"}):G.map(V=>e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"1rem",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06)",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"50%",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(mo,{size:18,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#111827"},children:V.nombre_usuario||"-"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:V.nombre_completo||"-"})]})]}),e.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[e.jsxs("div",{style:{fontSize:"0.85rem"},children:[e.jsx("strong",{children:"Email:"})," ",V.email||"-"]}),e.jsxs("div",{style:{fontSize:"0.85rem"},children:[e.jsx("strong",{children:"Rol:"})," ",V.rol||"-"]}),e.jsx("div",{children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:V.activo?"#10b98120":"#ef444420",color:V.activo?"#10b981":"#ef4444"},children:V.activo?"Activo":"Inactivo"})})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>re(V),style:{padding:"0.5rem 0.75rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(St,{size:16}),"Ver"]}),ee&&e.jsxs("button",{onClick:()=>be(V),style:{padding:"0.5rem 0.75rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(Jt,{size:16}),"Editar"]}),X&&e.jsxs("button",{onClick:()=>fe(V),style:{padding:"0.5rem 0.75rem",backgroundColor:"#f59e0b",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(ui,{size:16}),"Clave"]}),Y&&e.jsxs("button",{onClick:()=>h(V),style:{padding:"0.5rem 0.75rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(Tr,{size:16}),"Eliminar"]})]})]},V.id))}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Usuario"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Nombre Completo"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Email"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Rol"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:G.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:y||b?"No se encontraron usuarios con ese criterio":"No hay usuarios disponibles"})}):G.map(V=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"50%",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(mo,{size:20,color:"#6366f1"})}),e.jsx("div",{style:{fontWeight:"500"},children:V.nombre_usuario||"-"})]})}),e.jsx("td",{style:{padding:"1rem"},children:V.nombre_completo||"-"}),e.jsx("td",{style:{padding:"1rem"},children:V.email||"-"}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:"#6366f120",color:"#6366f1"},children:V.rol||"-"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:V.activo?"#10b98120":"#ef444420",color:V.activo?"#10b981":"#ef4444"},children:V.activo?"Activo":"Inactivo"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>re(V),style:{padding:"0.5rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:we=>we.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:we=>we.currentTarget.style.backgroundColor="#3b82f6",title:"Ver Detalle",children:e.jsx(St,{size:16})}),ee&&e.jsx("button",{onClick:()=>be(V),style:{padding:"0.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:we=>we.currentTarget.style.backgroundColor="#059669",onMouseLeave:we=>we.currentTarget.style.backgroundColor="#10b981",title:"Editar",children:e.jsx(Jt,{size:16})}),X&&e.jsx("button",{onClick:()=>fe(V),style:{padding:"0.5rem",backgroundColor:"#f59e0b",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:we=>we.currentTarget.style.backgroundColor="#d97706",onMouseLeave:we=>we.currentTarget.style.backgroundColor="#f59e0b",title:"Cambiar Contrasea",children:e.jsx(ui,{size:16})}),Y&&e.jsx("button",{onClick:()=>h(V),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:we=>we.currentTarget.style.backgroundColor="#dc2626",onMouseLeave:we=>we.currentTarget.style.backgroundColor="#ef4444",title:"Eliminar",children:e.jsx(Tr,{size:16})})]})})]},V.id))})]})})}),k&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:ie,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:V=>V.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Nuevo Usuario"}),e.jsx("button",{onClick:ie,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),P&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:P}),e.jsxs("form",{onSubmit:Re,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre de Usuario ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:R.nombre_usuario,onChange:V=>te({...R,nombre_usuario:V.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Contrasea ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"password",value:R.contrasena,onChange:V=>te({...R,contrasena:V.target.value}),required:!0,minLength:6,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre Completo ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:R.nombre_completo,onChange:V=>te({...R,nombre_completo:V.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Email"}),e.jsx("input",{type:"email",value:R.email,onChange:V=>te({...R,email:V.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Telfono"}),e.jsx("input",{type:"tel",value:R.telefono,onChange:V=>te({...R,telefono:V.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Rol ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:R.rol,onChange:V=>te({...R,rol:V.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"cliente",children:"Cliente"}),e.jsx("option",{value:"coordinador",children:"Coordinador"}),e.jsx("option",{value:"gerente_general",children:"Gerente General"}),e.jsx("option",{value:"administrador",children:"Administrador"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"1.75rem"},children:[e.jsx("input",{type:"checkbox",checked:R.activo,onChange:V=>te({...R,activo:V.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Usuario activo"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:ie,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:D,style:{padding:"0.75rem 1.5rem",backgroundColor:D?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:D?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),D?"Guardando...":"Guardar"]})]})]})]})}),p&&H&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:ce,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:V=>V.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Editar Usuario"}),e.jsx("button",{onClick:ce,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),P&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:P}),e.jsxs("form",{onSubmit:me,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Nombre de Usuario"}),e.jsx("input",{type:"text",value:R.nombre_usuario,disabled:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:"#f3f4f6",color:"#6b7280"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre Completo ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:R.nombre_completo,onChange:V=>te({...R,nombre_completo:V.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Email"}),e.jsx("input",{type:"email",value:R.email,onChange:V=>te({...R,email:V.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Telfono"}),e.jsx("input",{type:"tel",value:R.telefono,onChange:V=>te({...R,telefono:V.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),_r(r==null?void 0:r.rol,[T.ADMIN])&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Rol"}),e.jsxs("select",{value:R.rol,onChange:V=>te({...R,rol:V.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"cliente",children:"Cliente"}),e.jsx("option",{value:"coordinador",children:"Coordinador"}),e.jsx("option",{value:"gerente_general",children:"Gerente General"}),e.jsx("option",{value:"administrador",children:"Administrador"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"1.75rem"},children:[e.jsx("input",{type:"checkbox",checked:R.activo,onChange:V=>te({...R,activo:V.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Usuario activo"})]})]}),!_r(r==null?void 0:r.rol,[T.ADMIN])&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:R.activo,onChange:V=>te({...R,activo:V.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Usuario activo"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:ce,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:D,style:{padding:"0.75rem 1.5rem",backgroundColor:D?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:D?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),D?"Guardando...":"Guardar Cambios"]})]})]})]})}),S&&H&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:x,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:V=>V.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Detalle del Usuario"}),e.jsx("button",{onClick:x,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{width:"4rem",height:"4rem",borderRadius:"50%",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(mo,{size:32,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:H.nombre_completo||"N/A"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["@",H.nombre_usuario||"N/A"]})]})]}),e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Email"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:H.email||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Telfono"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:H.telefono||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Rol"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:"#6366f120",color:"#6366f1"},children:H.rol||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Estado"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:H.activo?"#10b98120":"#ef444420",color:H.activo?"#10b981":"#ef4444"},children:H.activo?"Activo":"Inactivo"})]}),H.fecha_creacion&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Fecha de Creacin"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:M(H.fecha_creacion)})]}),H.fecha_ultimo_acceso&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"ltimo Acceso"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:M(H.fecha_ultimo_acceso)})]})]})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:e.jsx("button",{onClick:x,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})})]})}),W&&H&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:J,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:V=>V.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"50%",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ut,{size:24,color:"#dc2626"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"Eliminar Usuario"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:"Est seguro de eliminar este usuario?"})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.375rem",marginBottom:"1.5rem"},children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:H.nombre_completo}),e.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:["@",H.nombre_usuario]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:J,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{onClick:Ie,disabled:D,style:{padding:"0.75rem 1.5rem",backgroundColor:D?"#9ca3af":"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:D?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Tr,{size:18}),D?"Eliminando...":"Eliminar"]})]})]})}),m&&H&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:ge,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:V=>V.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Cambiar Contrasea"}),e.jsx("button",{onClick:ge,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(rr,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.375rem",marginBottom:"1.5rem"},children:[e.jsxs("p",{style:{margin:0,fontWeight:"500"},children:["Usuario: ",H.nombre_completo]}),e.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:["@",H.nombre_usuario]})]}),P&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:P}),e.jsxs("form",{onSubmit:Q,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nueva Contrasea ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"password",value:F.nueva_contrasena,onChange:V=>K({...F,nueva_contrasena:V.target.value}),required:!0,minLength:6,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Confirmar Contrasea ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"password",value:F.confirmar_contrasena,onChange:V=>K({...F,confirmar_contrasena:V.target.value}),required:!0,minLength:6,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:ge,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:D,style:{padding:"0.75rem 1.5rem",backgroundColor:D?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:D?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ui,{size:18}),D?"Cambiando...":"Cambiar Contrasea"]})]})]})]})})]})},Tp=[{key:Be.COTIZADOR,label:"Cotizador"},{key:Be.DASHBOARD,label:"Dashboard"},{key:Be.EVENTOS,label:"Eventos"},{key:Be.PORTAL_CLIENTE,label:"Portal cliente"},{key:Be.PERFIL,label:"Perfil"},{key:Be.CLIENTES,label:"Clientes"},{key:Be.PRODUCTOS,label:"Productos"},{key:Be.CATEGORIAS,label:"Categoras"},{key:Be.PLANES,label:"Planes"},{key:Be.PAGOS,label:"Pagos"},{key:Be.CUENTAS,label:"Cuentas"},{key:Be.INVENTARIO,label:"Inventario"},{key:Be.SALONES,label:"Salones"},{key:Be.NOTIFICACIONES_NATIVAS,label:"Notificaciones"},{key:Be.REPORTES,label:"Reportes"},{key:Be.USUARIOS,label:"Usuarios"},{key:Be.PERMISOS,label:"Roles y Permisos"},{key:Be.INTEGRACIONES,label:"Integraciones"},{key:Be.WHATSAPP_CHAT,label:"WhatsApp Chat"},{key:Be.WHATSAPP_METRICAS,label:"Panel WhatsApp/Email"},{key:Be.WHATSAPP_TEMPLATES,label:"Plantillas WhatsApp"},{key:Be.CARGA_MASIVA,label:"Carga masiva"},{key:Be.CONFIG_DATOS,label:"Limpieza de datos"}],Mp=[{key:Ye.EVENTOS_EDITAR_ESTADO,label:"Eventos  Editar estado"},{key:Ye.EVENTOS_AGREGAR_PRODUCTO,label:"Eventos  Agregar producto"},{key:Ye.EVENTOS_ELIMINAR_PRODUCTO,label:"Eventos  Eliminar producto"},{key:Ye.EVENTOS_ELIMINAR,label:"Eventos  Eliminar"},{key:Ye.EVENTOS_ACTUALIZAR_SERVICIOS,label:"Eventos  Actualizar servicios"},{key:Ye.EVENTOS_GENERAR_SERVICIOS,label:"Eventos  Generar servicios"},{key:Ye.EVENTOS_DESCARTAR_SERVICIO,label:"Eventos  Descartar servicio"},{key:Ye.EVENTOS_ASIGNAR_COORDINADOR,label:"Eventos  Asignar coordinador"},{key:Ye.PAGOS_REGISTRAR,label:"Pagos  Registrar"},{key:Ye.PAGOS_REEMBOLSAR,label:"Pagos  Reembolsar"},{key:Ye.PAGOS_ELIMINAR,label:"Pagos  Eliminar"},{key:Ye.PAGOS_APROBAR,label:"Pagos  Aprobar"},{key:Ye.PAGOS_ANULAR,label:"Pagos  Anular"},{key:Ye.CUENTAS_VER,label:"Cuentas  Ver"},{key:Ye.CUENTAS_CREAR,label:"Cuentas  Crear"},{key:Ye.CUENTAS_EDITAR,label:"Cuentas  Editar"},{key:Ye.CUENTAS_ELIMINAR,label:"Cuentas  Eliminar"},{key:Ye.PLANES_CREAR,label:"Planes  Crear"},{key:Ye.PLANES_EDITAR,label:"Planes  Editar"},{key:Ye.PLANES_ELIMINAR,label:"Planes  Eliminar"}],$v=()=>{const{toasts:r,removeToast:t,success:o,error:n}=Ar(),[i,s]=c.useState([]),[a,d]=c.useState([]),[u,l]=c.useState(!0),[f,g]=c.useState(null),[y,z]=c.useState([]),[b,w]=c.useState(""),[k,j]=c.useState([]),[p,C]=c.useState(!1),[S,L]=c.useState("usuarios");c.useEffect(()=>{(async()=>{var D,Z;try{l(!0);const[P,$]=await Promise.all([dt.getAll(),dt.getRoles()]);s(P.usuarios||[]),d($.roles||[])}catch(P){const $=((Z=(D=P.response)==null?void 0:D.data)==null?void 0:Z.error)||"Error al cargar usuarios";n($)}finally{l(!1)}})()},[n]);const W=async K=>{var D,Z;g(K);try{const P=await dt.getPermisos(K.id);z(P.permisos||[])}catch(P){const $=((Z=(D=P.response)==null?void 0:D.data)==null?void 0:Z.error)||"Error al cargar permisos";n($),z([])}},I=K=>{z(D=>D.includes(K)?D.filter(Z=>Z!==K):[...D,K])},m=K=>{j(D=>D.includes(K)?D.filter(Z=>Z!==K):[...D,K])},B=async()=>{var K,D;if(f)try{C(!0),await dt.updatePermisos(f.id,y),o("Permisos actualizados")}catch(Z){const P=((D=(K=Z.response)==null?void 0:K.data)==null?void 0:D.error)||"Error al guardar permisos";n(P)}finally{C(!1)}},H=async()=>{var K,D;if(f)try{C(!0),await dt.deletePermisos(f.id),z([]),o("Permisos restablecidos al rol")}catch(Z){const P=((D=(K=Z.response)==null?void 0:K.data)==null?void 0:D.error)||"Error al restablecer permisos";n(P)}finally{C(!1)}},E=async K=>{var D,Z;w(K);try{const P=await dt.getPermisosRol(K);j(P.permisos||[])}catch(P){const $=((Z=(D=P.response)==null?void 0:D.data)==null?void 0:Z.error)||"Error al cargar permisos del rol";n($),j([])}},R=async()=>{var K,D;if(b)try{C(!0),await dt.updatePermisosRol(b,k),o("Permisos de rol actualizados")}catch(Z){const P=((D=(K=Z.response)==null?void 0:K.data)==null?void 0:D.error)||"Error al guardar permisos del rol";n(P)}finally{C(!1)}},te=async()=>{var K,D;if(b)try{C(!0),await dt.deletePermisosRol(b),j([]),o("Permisos del rol restablecidos")}catch(Z){const P=((D=(K=Z.response)==null?void 0:K.data)==null?void 0:D.error)||"Error al restablecer permisos del rol";n(P)}finally{C(!1)}},F=c.useMemo(()=>f?f.nombre_completo||f.nombre_usuario:"Selecciona un usuario",[f]);return u?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando usuarios..."}):e.jsxs("div",{children:[e.jsx(Lr,{toasts:r,removeToast:t}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Roles y Permisos"}),e.jsx("p",{style:{color:"#6b7280"},children:"Define permisos por rol y permisos personalizados por usuario."}),e.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"0.75rem"},children:[e.jsx("button",{type:"button",onClick:()=>L("roles"),style:{padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"1px solid #e2e8f0",backgroundColor:S==="roles"?"#6366f1":"white",color:S==="roles"?"white":"#374151",fontWeight:"600",cursor:"pointer"},children:"Permisos por rol"}),e.jsx("button",{type:"button",onClick:()=>L("usuarios"),style:{padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"1px solid #e2e8f0",backgroundColor:S==="usuarios"?"#6366f1":"white",color:S==="usuarios"?"white":"#374151",fontWeight:"600",cursor:"pointer"},children:"Permisos por usuario"})]})]}),S==="roles"?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"320px 1fr",gap:"2rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{padding:"1rem",borderBottom:"1px solid #e5e7eb",fontWeight:"600"},children:"Roles"}),e.jsx("div",{style:{maxHeight:"560px",overflowY:"auto"},children:a.map(K=>{const D=b===K;return e.jsx("button",{type:"button",onClick:()=>E(K),style:{width:"100%",textAlign:"left",padding:"0.85rem 1rem",border:"none",backgroundColor:D?"#eef2ff":"transparent",color:D?"#3730a3":"#111827",cursor:"pointer",borderBottom:"1px solid #f1f5f9"},children:e.jsx("div",{style:{fontWeight:"600",textTransform:"capitalize"},children:K})},K)})})]}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",border:"1px solid #e5e7eb",padding:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.25rem"},children:b?`Rol: ${b}`:"Selecciona un rol"}),e.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Marca los mdulos y acciones permitidas para este rol."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:Tp.map(K=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.6rem",padding:"0.75rem",borderRadius:"0.6rem",border:"1px solid #e2e8f0",backgroundColor:k.includes(K.key)?"#eef2ff":"white",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:k.includes(K.key),onChange:()=>m(K.key)}),e.jsx("span",{style:{fontWeight:"600",color:"#0f172a"},children:K.label})]},K.key))}),e.jsxs("div",{style:{marginTop:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"700",marginBottom:"0.75rem",color:"#111827"},children:"Acciones"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:Mp.map(K=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.6rem",padding:"0.75rem",borderRadius:"0.6rem",border:"1px solid #e2e8f0",backgroundColor:k.includes(K.key)?"#eef2ff":"white",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:k.includes(K.key),onChange:()=>m(K.key)}),e.jsx("span",{style:{fontWeight:"600",color:"#0f172a"},children:K.label})]},K.key))})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:te,disabled:!b,style:{padding:"0.7rem 1.2rem",borderRadius:"0.6rem",border:"1px solid #e2e8f0",backgroundColor:"white",cursor:b?"pointer":"not-allowed",fontWeight:"600",color:"#64748b"},children:"Restablecer rol"}),e.jsx("button",{type:"button",onClick:R,disabled:!b||p,style:{padding:"0.7rem 1.4rem",borderRadius:"0.6rem",border:"none",backgroundColor:"#4f46e5",color:"white",cursor:!b||p?"not-allowed":"pointer",fontWeight:"700"},children:p?"Guardando...":"Guardar permisos"})]})]})]}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"320px 1fr",gap:"2rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{padding:"1rem",borderBottom:"1px solid #e5e7eb",fontWeight:"600"},children:"Usuarios"}),e.jsx("div",{style:{maxHeight:"560px",overflowY:"auto"},children:i.map(K=>{const D=(f==null?void 0:f.id)===K.id;return e.jsxs("button",{type:"button",onClick:()=>W(K),style:{width:"100%",textAlign:"left",padding:"0.85rem 1rem",border:"none",backgroundColor:D?"#eef2ff":"transparent",color:D?"#3730a3":"#111827",cursor:"pointer",borderBottom:"1px solid #f1f5f9"},children:[e.jsx("div",{style:{fontWeight:"600"},children:K.nombre_completo||K.nombre_usuario}),e.jsx("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:K.rol})]},K.id)})})]}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",border:"1px solid #e5e7eb",padding:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.25rem"},children:F}),e.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Marca los mdulos y acciones permitidas para este usuario."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:Tp.map(K=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.6rem",padding:"0.75rem",borderRadius:"0.6rem",border:"1px solid #e2e8f0",backgroundColor:y.includes(K.key)?"#eef2ff":"white",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:y.includes(K.key),onChange:()=>I(K.key)}),e.jsx("span",{style:{fontWeight:"600",color:"#0f172a"},children:K.label})]},K.key))}),e.jsxs("div",{style:{marginTop:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"700",marginBottom:"0.75rem",color:"#111827"},children:"Acciones"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:Mp.map(K=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.6rem",padding:"0.75rem",borderRadius:"0.6rem",border:"1px solid #e2e8f0",backgroundColor:y.includes(K.key)?"#eef2ff":"white",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:y.includes(K.key),onChange:()=>I(K.key)}),e.jsx("span",{style:{fontWeight:"600",color:"#0f172a"},children:K.label})]},K.key))})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:H,disabled:!f,style:{padding:"0.7rem 1.2rem",borderRadius:"0.6rem",border:"1px solid #e2e8f0",backgroundColor:"white",cursor:f?"pointer":"not-allowed",fontWeight:"600",color:"#64748b"},children:"Usar permisos del rol"}),e.jsx("button",{type:"button",onClick:B,disabled:!f||p,style:{padding:"0.7rem 1.4rem",borderRadius:"0.6rem",border:"none",backgroundColor:"#4f46e5",color:"white",cursor:!f||p?"not-allowed":"pointer",fontWeight:"700"},children:p?"Guardando...":"Guardar permisos"})]})]})]})]})},Uv=()=>{const{toasts:r,removeToast:t,success:o,error:n}=Ar(),[i,s]=c.useState(!0),[a,d]=c.useState([]),u=_o(),l=async()=>{var w,k;try{s(!0);const j=await so.getConfiguraciones();d(j.configuraciones||[])}catch(j){const p=((k=(w=j.response)==null?void 0:w.data)==null?void 0:k.error)||j.message||"Error al cargar notificaciones";n(p)}finally{s(!1)}};c.useEffect(()=>{l()},[]);const f=w=>{const k=[];return w.enviar_email&&k.push("Email"),w.enviar_whatsapp&&k.push("WhatsApp"),k.length===0?"Sin canal":k.join(" + ")},g=w=>{const k=Number(w.dias_antes??0);return k===0?"Inmediato (al registrar pago)":k===-1?"Despues del evento":`${k} dias antes del evento`},y=async w=>{var k,j;try{const p=!w.activo;await so.updateEstado(w.tipo_notificacion,p),d(C=>C.map(S=>S.tipo_notificacion===w.tipo_notificacion?{...S,activo:p}:S)),o(p?"Notificacion activada":"Notificacion desactivada")}catch(p){const C=((j=(k=p.response)==null?void 0:k.data)==null?void 0:j.error)||p.message||"Error al actualizar estado";n(C)}},z=w=>{u(`/notificaciones-nativas/${w.tipo_notificacion}`)},b=c.useMemo(()=>a,[a]);return e.jsxs("div",{style:{padding:"1.5rem 2rem"},children:[e.jsx(Lr,{toasts:r,removeToast:t}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.6rem",marginBottom:"0.25rem"},children:"Notificaciones nativas"}),e.jsx("p",{style:{color:"var(--gray-600)"},children:"Lista de notificaciones del sistema actual, con su estado, canal y momento de ejecucion."})]}),i?e.jsx("p",{children:"Cargando..."}):e.jsx("div",{style:{background:"white",borderRadius:"14px",border:"1px solid var(--gray-100)"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"var(--gray-50)"},children:[e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Nombre"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Tipo"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Medio"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Cuando se ejecuta"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Envios"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Estado"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Accion"})]})}),e.jsxs("tbody",{children:[b.map(w=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--gray-100)"},children:[e.jsx("td",{style:{padding:"0.75rem"},children:w.nombre}),e.jsx("td",{style:{padding:"0.75rem"},children:w.tipo_notificacion}),e.jsx("td",{style:{padding:"0.75rem"},children:f(w)}),e.jsx("td",{style:{padding:"0.75rem"},children:g(w)}),e.jsx("td",{style:{padding:"0.75rem"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"},children:[e.jsxs("span",{children:["Email: ",w.total_envios_email??0]}),e.jsxs("span",{children:["WhatsApp: ",w.total_envios_whatsapp??0]})]})}),e.jsx("td",{style:{padding:"0.75rem"},children:w.activo?"Activo":"Inactivo"}),e.jsx("td",{style:{padding:"0.75rem"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>y(w),style:{padding:"0.35rem 0.8rem",borderRadius:"8px",border:"1px solid var(--gray-200)",background:w.activo?"var(--gray-100)":"var(--primary)",color:w.activo?"var(--gray-700)":"white",cursor:"pointer"},children:w.activo?"Desactivar":"Activar"}),e.jsx("button",{onClick:()=>z(w),style:{padding:"0.35rem 0.8rem",borderRadius:"8px",border:"1px solid var(--gray-200)",background:"white",color:"var(--gray-700)",cursor:"pointer"},children:"Editar mensaje"})]})})]},w.tipo_notificacion)),b.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,style:{padding:"1rem",color:"var(--gray-500)"},children:"No hay configuraciones registradas."})})]})]})})]})},Gv=()=>{const{tipo:r}=bl(),t=_o(),{toasts:o,removeToast:n,success:i,error:s}=Ar(),{nombrePlataforma:a}=zl(),[d,u]=c.useState(!0),[l,f]=c.useState({nombre:"",descripcion:"",enviar_email:!0,enviar_whatsapp:!0,plantilla_email:"",plantilla_whatsapp:""}),[g,y]=c.useState(""),[z,b]=c.useState(""),[w,k]=c.useState(""),[j,p]=c.useState("");c.useEffect(()=>{w||y(I=>I||a),j||b(I=>I||`${a}  Estamos para ayudarte.`)},[a,w,j]);const C=I=>{var R,te;const m=I||"",B=m.match(/<div[^>]*font-size:18px;[^>]*>(.*?)<\/div>/is),H=m.match(/<td[^>]*padding:20px 32px[^>]*>(.*?)<\/td>/is),E=m.match(/<td[^>]*padding:28px 32px[^>]*>([\s\S]*?)<\/td>/i);return E&&E[1]?{header:(R=B==null?void 0:B[1])==null?void 0:R.trim(),footer:(te=H==null?void 0:H[1])==null?void 0:te.trim(),body:E[1].trim(),isWrapped:!0}:{header:null,footer:null,body:m,isWrapped:!1}},S=(I,m)=>{const B=I||"",H=B.toLowerCase();if(H.includes("<html")||H.includes("<body"))return B;const te=H.includes("<table")||H.includes("<div")||H.includes("<p")?B:B.replace(/\n/g,"<br>");return`<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body style="margin:0; padding:0; background-color:#f3f4f6; font-family:Arial, sans-serif;">
    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" style="background-color:#f3f4f6; padding:24px 0;">
      <tr>
        <td align="center">
          <table role="presentation" width="600" cellspacing="0" cellpadding="0" style="background-color:#ffffff; border-radius:12px; overflow:hidden; border:1px solid #e5e7eb;">
            <tr>
              <td style="background-color:#111827; color:#ffffff; padding:24px 32px;">
                <div style="font-size:18px; font-weight:700;">${g}</div>
                <div style="font-size:13px; opacity:0.85; margin-top:4px;">${m||"Notificacion"}</div>
              </td>
            </tr>
            <tr>
              <td style="padding:28px 32px; color:#111827; font-size:14px; line-height:1.6;">
                ${te}
              </td>
            </tr>
            <tr>
              <td style="padding:20px 32px; border-top:1px solid #e5e7eb; font-size:12px; color:#6b7280;">
                ${z}
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </body>
</html>`},L=async()=>{var I,m,B,H;try{u(!0);const R=(await so.getConfiguracion(r)).configuracion,te=(R.plantilla_email||"").match(/\[\[HEADER:(.*?)\]\]/),F=(R.plantilla_email||"").match(/\[\[FOOTER:(.*?)\]\]/);te&&te[1]&&y(te[1].trim()),F&&F[1]&&b(F[1].trim());const K=(R.plantilla_email||"").replace(/\[\[HEADER:.*?\]\]\s*/s,"").replace(/\[\[FOOTER:.*?\]\]\s*/s,""),D=C(K);D.header&&y(D.header),D.footer&&b(D.footer),f({nombre:R.nombre||"",descripcion:R.descripcion||"",enviar_email:!!R.enviar_email,enviar_whatsapp:!!R.enviar_whatsapp,plantilla_email:D.body||K,plantilla_whatsapp:R.plantilla_whatsapp||""}),w||k(((I=te==null?void 0:te[1])==null?void 0:I.trim())||g),j||p(((m=F==null?void 0:F[1])==null?void 0:m.trim())||z)}catch(E){const R=((H=(B=E.response)==null?void 0:B.data)==null?void 0:H.error)||E.message||"Error al cargar configuracion";s(R)}finally{u(!1)}};c.useEffect(()=>{L()},[r]);const W=async()=>{var I,m;try{const B={...l,plantilla_email:l.plantilla_email};l.plantilla_email&&(B.plantilla_email=`[[HEADER:${g}]]
[[FOOTER:${z}]]
${l.plantilla_email}`),await so.updateConfiguracion(r,B),i("Plantilla actualizada")}catch(B){const H=((m=(I=B.response)==null?void 0:I.data)==null?void 0:m.error)||B.message||"Error al actualizar plantilla";s(H)}};return e.jsxs("div",{style:{padding:"1.5rem 2rem"},children:[e.jsx(Lr,{toasts:o,removeToast:n}),e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.6rem",marginBottom:"0.25rem"},children:"Editar notificacion"}),e.jsx("p",{style:{color:"var(--gray-600)"},children:r})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>t("/notificaciones-nativas"),style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"1px solid #d1d5db",background:"white",cursor:"pointer"},children:"Volver"}),e.jsx("button",{onClick:W,style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"1px solid #4338ca",background:"#4f46e5",color:"white",cursor:"pointer"},children:"Guardar cambios"})]})]}),d?e.jsx("p",{children:"Cargando..."}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("h3",{style:{marginBottom:"1rem"},children:"Contenido"}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Header (titulo superior)"}),e.jsx("input",{value:g,onChange:I=>y(I.target.value),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Footer (pie de pagina)"}),e.jsx("input",{value:z,onChange:I=>b(I.target.value),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Nombre"}),e.jsx("input",{value:l.nombre,onChange:I=>f(m=>({...m,nombre:I.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Descripcion"}),e.jsx("input",{value:l.descripcion,onChange:I=>f(m=>({...m,descripcion:I.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:l.enviar_email,onChange:I=>f(m=>({...m,enviar_email:I.target.checked}))}),"Enviar Email"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:l.enviar_whatsapp,onChange:I=>f(m=>({...m,enviar_whatsapp:I.target.checked}))}),"Enviar WhatsApp"]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Plantilla Email (HTML permitido)"}),e.jsx("textarea",{rows:14,value:l.plantilla_email,onChange:I=>f(m=>({...m,plantilla_email:I.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Plantilla WhatsApp"}),e.jsx("textarea",{rows:6,value:l.plantilla_whatsapp,onChange:I=>f(m=>({...m,plantilla_whatsapp:I.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]})]})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("h3",{style:{marginBottom:"1rem"},children:"Vista previa"}),e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",background:"#f3f4f6",padding:"0.5rem",maxHeight:"720px",overflow:"auto"},dangerouslySetInnerHTML:{__html:S(l.plantilla_email,l.nombre)}})]})]})]})},Pg=({embedded:r=!1})=>{const{toasts:t,removeToast:o,success:n,error:i}=Ar(),[s,a]=c.useState(!0),[d,u]=c.useState({nombre:"WhatsApp Cloud API",access_token:"",phone_number_id:"",business_id:"",api_version:"v18.0",verify_token:"",activo:!1}),l=async()=>{var y,z,b,w,k,j,p;try{a(!0);const S=(await wp.getWhatsApp()).integracion;S&&u({nombre:S.nombre||"WhatsApp Cloud API",access_token:((y=S.configuracion)==null?void 0:y.access_token)||"",phone_number_id:((z=S.configuracion)==null?void 0:z.phone_number_id)||"",business_id:((b=S.configuracion)==null?void 0:b.business_id)||"",api_version:((w=S.configuracion)==null?void 0:w.api_version)||"v18.0",verify_token:((k=S.configuracion)==null?void 0:k.verify_token)||"",activo:!!S.activo})}catch(C){const S=((p=(j=C.response)==null?void 0:j.data)==null?void 0:p.error)||C.message||"Error al cargar configuracion";i(S)}finally{a(!1)}};c.useEffect(()=>{l()},[]);const f=async()=>{var y,z;try{await wp.updateWhatsApp(d),n("Configuracion de WhatsApp actualizada"),await l()}catch(b){const w=((z=(y=b.response)==null?void 0:y.data)==null?void 0:z.error)||b.message||"Error al guardar configuracion";i(w)}},g=async()=>{try{const y=new URLSearchParams({verify_token:d.verify_token||"","hub.mode":"subscribe","hub.challenge":"test"}),z=await fetch(`/api/integraciones/whatsapp/test-webhook?${y.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`}}),b=await z.json();if(!z.ok)throw new Error(b.error||"Error al probar webhook");n("Webhook verificado correctamente")}catch(y){const z=y.message||"Error al probar webhook";i(z)}};return e.jsxs("div",{style:{padding:r?0:"1.5rem 2rem"},children:[e.jsx(Lr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:r?"1.25rem":"1.6rem",marginBottom:"0.25rem"},children:"Integracion WhatsApp"}),e.jsx("p",{style:{color:"var(--gray-600)"},children:"Configura las credenciales de Meta para enviar mensajes via WhatsApp."})]}),s?e.jsx("p",{children:"Cargando..."}):e.jsx("div",{style:{maxWidth:r?"100%":"720px",background:"white",borderRadius:"12px",padding:"1.5rem",border:"1px solid #e5e7eb"},children:e.jsxs("div",{style:{display:"grid",gap:"0.9rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Nombre"}),e.jsx("input",{value:d.nombre,onChange:y=>u(z=>({...z,nombre:y.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Access Token"}),e.jsx("input",{value:d.access_token,onChange:y=>u(z=>({...z,access_token:y.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Phone Number ID"}),e.jsx("input",{value:d.phone_number_id,onChange:y=>u(z=>({...z,phone_number_id:y.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Business ID"}),e.jsx("input",{value:d.business_id,onChange:y=>u(z=>({...z,business_id:y.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"API Version"}),e.jsx("input",{value:d.api_version,onChange:y=>u(z=>({...z,api_version:y.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Verify Token (Webhook)"}),e.jsx("input",{value:d.verify_token,onChange:y=>u(z=>({...z,verify_token:y.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:d.activo,onChange:y=>u(z=>({...z,activo:y.target.checked}))}),"Activar integracion"]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[e.jsx("button",{onClick:f,style:{padding:"0.6rem 1rem",borderRadius:"8px",border:"1px solid #4338ca",background:"#4f46e5",color:"white",cursor:"pointer",width:"fit-content"},children:"Guardar configuracion"}),e.jsx("button",{onClick:g,style:{padding:"0.6rem 1rem",borderRadius:"8px",border:"1px solid #d1d5db",background:"white",color:"#111827",cursor:"pointer",width:"fit-content"},children:"Probar webhook"})]})]})})]})},Hv=()=>{var re;const{toasts:r,removeToast:t,error:o,success:n}=Ar(),i=go(),[s,a]=c.useState([]),[d,u]=c.useState(null),[l,f]=c.useState([]),[g,y]=c.useState(""),[z,b]=c.useState(!0),[w,k]=c.useState(""),j=c.useRef(null),p=c.useRef(null),C=c.useRef(null),[S,L]=c.useState(!0),[W,I]=c.useState(null),[m,B]=c.useState({}),[H,E]=c.useState(!1),[R,te]=c.useState(!1),F={Caras:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Gestos:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Corazones:["","","","","","","","","","","","","","","","","","","","",""],Celebracin:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Naturaleza:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Comida:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Objetos:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Smbolos:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},[K,D]=c.useState("Caras"),Z=c.useRef(null),P=c.useMemo(()=>{if(!w.trim())return s;const x=w.toLowerCase();return s.filter(h=>String(h.nombre_cliente||"").toLowerCase().includes(x)||String(h.telefono||"").toLowerCase().includes(x))},[w,s]),$=async(x=!1)=>{var h,J;try{x||b(!0);const ge=(await Eo.getConversations()).conversaciones||[],Re=(s||[]).map(Ie=>`${Ie.id}-${Ie.ultimo_mensaje}-${Ie.ultima_fecha}-${Ie.bot_activo}-${Ie.requiere_reengagement}`).join("|"),me=ge.map(Ie=>`${Ie.id}-${Ie.ultimo_mensaje}-${Ie.ultima_fecha}-${Ie.bot_activo}-${Ie.requiere_reengagement}`).join("|");Re!==me&&a(ge)}catch(fe){const ge=((J=(h=fe.response)==null?void 0:h.data)==null?void 0:J.error)||"Error al cargar conversaciones";o(ge)}finally{x||b(!1)}},N=async x=>{var h,J,fe,ge;try{const me=(await Eo.getMessages(x)).mensajes||[],Ie=(h=l[l.length-1])==null?void 0:h.id,Q=(J=me[me.length-1])==null?void 0:J.id;(Ie!==Q||l.length!==me.length)&&f(me)}catch(Re){const me=((ge=(fe=Re.response)==null?void 0:fe.data)==null?void 0:ge.error)||"Error al cargar mensajes";o(me)}};c.useEffect(()=>{$()},[]),c.useEffect(()=>{d!=null&&d.id?N(d.id):f([])},[d]),c.useEffect(()=>{if(!(d!=null&&d.id))return;const x=s.find(h=>h.id===d.id);x&&(x.requiere_reengagement!==d.requiere_reengagement||x.ultimo_mensaje!==d.ultimo_mensaje||x.ultima_fecha!==d.ultima_fecha||x.bot_activo!==d.bot_activo)&&u(x)},[s,d]),c.useEffect(()=>{const h=async()=>{document.visibilityState==="visible"&&(d!=null&&d.id&&await N(d.id),await $(!0))};h();const J=setInterval(h,5e3);return()=>clearInterval(J)},[d==null?void 0:d.id]),c.useEffect(()=>{Z.current&&Z.current.scrollIntoView({behavior:"smooth",block:"end"})},[l,d]),c.useEffect(()=>{const x=l.filter(h=>h.media_id&&!m[h.media_id]);x.length!==0&&x.forEach(async h=>{try{const J=await Eo.getMedia(h.media_id),fe=URL.createObjectURL(J);B(ge=>({...ge,[h.media_id]:fe}))}catch{}})},[l,m]),c.useEffect(()=>{i||L(!0)},[i]);const ee=async x=>{if(u(x),i&&L(!1),x!=null&&x.id&&x.mensajes_no_leidos>0)try{await Eo.marcarLeido(x.id),a(h=>h.map(J=>J.id===x.id?{...J,mensajes_no_leidos:0}:J))}catch{}},Y=async()=>{var h,J;if(!(d!=null&&d.id))return;const x=g.trim();if(!(!x&&!W)){if(W)return X(W.tipo,W.archivo,x);try{await Eo.sendMessage(d.id,x),y(""),await N(d.id),await $(),n("Mensaje enviado")}catch(fe){const ge=((J=(h=fe.response)==null?void 0:h.data)==null?void 0:J.error)||"No se pudo enviar el mensaje";o(ge)}}},X=async(x,h,J="")=>{var fe,ge;if(!(!(d!=null&&d.id)||!h))try{const Re=new FormData;Re.append("archivo",h),Re.append("tipo",x),J&&(x==="image"||x==="document")&&Re.append("caption",J),await Eo.sendMedia(d.id,Re),await N(d.id),await $(),I(null),y(""),n("Archivo enviado")}catch(Re){const me=((ge=(fe=Re.response)==null?void 0:fe.data)==null?void 0:ge.error)||"No se pudo enviar el archivo";o(me)}},se=async()=>{var h,J;if(!(d!=null&&d.id))return;const x=d.bot_activo?"humano":"bot";try{await Eo.setMode(d.id,x),n(x==="bot"?"Bot activado":"Bot desactivado"),await $();const fe=s.find(ge=>ge.id===d.id);u(fe?{...fe,bot_activo:x==="bot"}:ge=>ge&&{...ge,bot_activo:x==="bot"})}catch(fe){const ge=((J=(h=fe.response)==null?void 0:h.data)==null?void 0:J.error)||"No se pudo actualizar el modo";o(ge)}},G=async()=>{var x,h;if(d!=null&&d.id)try{await Eo.resetBot(d.id),n("Estado del bot reiniciado")}catch(J){const fe=((h=(x=J.response)==null?void 0:x.data)==null?void 0:h.error)||"No se pudo reiniciar el bot";o(fe)}},ye=(x,h)=>{if(!h)return;W!=null&&W.previewUrl&&URL.revokeObjectURL(W.previewUrl);const J=x==="image"?URL.createObjectURL(h):null;I({tipo:x,archivo:h,previewUrl:J})};c.useEffect(()=>()=>{W!=null&&W.previewUrl&&URL.revokeObjectURL(W.previewUrl),Object.values(m).forEach(x=>{try{URL.revokeObjectURL(x)}catch{}})},[W,m]);const ie=x=>{if(!x)return"";try{let h;if(typeof x=="string"&&!x.includes("T")&&!x.includes("Z")&&!x.includes("+")){const me=x.split(" ");if(me.length===2){const[Ie,Q]=me;h=new Date(`${Ie}T${Q}`)}else h=new Date(x)}else typeof x=="string"&&x.includes("T")&&!x.includes("Z")&&!x.includes("+")?h=new Date(x):h=new Date(x);if(Number.isNaN(h.getTime()))return"";const J=new Date,fe=h.getFullYear()===J.getFullYear()&&h.getMonth()===J.getMonth()&&h.getDate()===J.getDate(),ge=h.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",hour12:!1});return fe?ge:`${h.toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"})} ${ge}`}catch{return""}},be=x=>{if(!x)return"";try{let h;if(typeof x=="string"&&!x.includes("T")&&!x.includes("Z")&&!x.includes("+")){const ge=x.split(" ");if(ge.length===2){const[Re,me]=ge;h=new Date(`${Re}T${me}`)}else h=new Date(x)}else typeof x=="string"&&x.includes("T")&&!x.includes("Z")&&!x.includes("+")?h=new Date(x):h=new Date(x);if(Number.isNaN(h.getTime()))return"";const J=h.toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}),fe=h.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",hour12:!1});return`${J} ${fe}`}catch{return""}},ce=x=>{if(!x)return"Sin mensajes";const h=String(x).replace(/\s+/g," ").trim();return h.length<=48?h:`${h.slice(0,48)}...`};return e.jsxs("div",{style:{padding:0,margin:i?"-1rem":"-1.5rem",marginBottom:i?"-2rem":"-1.5rem",height:"calc(100vh - 56px)",minHeight:i?"100%":"calc(100vh - 56px)",background:"#111b21",overflow:"hidden"},children:[e.jsx(Lr,{toasts:r,removeToast:t}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:i?"1fr":"380px 1fr",gap:0,height:"100%"},children:[(S||!i)&&e.jsxs("div",{style:{background:"#111b21",borderRadius:0,borderRight:i?"none":"1px solid #222d34",overflow:"hidden",height:"100%",minHeight:i?"calc(100vh - 56px)":"100%",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:i?"0.6rem 0.75rem":"0.75rem 1rem",background:"#202c33",borderBottom:"1px solid #222d34"},children:[e.jsxs("div",{style:{fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem",color:"#e9edef",fontSize:i?"1.1rem":"1.15rem",marginBottom:"0.75rem"},children:[e.jsx(Ap,{size:i?22:20,color:"#00a884"})," Chats"]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Rt,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#8696a0"}}),e.jsx("input",{value:w,onChange:x=>k(x.target.value),placeholder:"Buscar o iniciar chat",style:{width:"100%",padding:i?"0.55rem 0.75rem 0.55rem 2.4rem":"0.5rem 0.75rem 0.5rem 2.4rem",borderRadius:"8px",border:"none",background:"#202c33",fontSize:i?"0.9rem":"0.875rem",color:"#e9edef",outline:"none"}})]})]}),e.jsx("div",{style:{flex:1,overflowY:"auto"},children:z?e.jsx("div",{style:{padding:"1rem",color:"#8696a0"},children:"Cargando..."}):P.length===0?e.jsx("div",{style:{padding:"1rem",color:"#8696a0"},children:"No hay conversaciones."}):P.map(x=>e.jsx("button",{type:"button",onClick:()=>ee(x),style:{width:"100%",textAlign:"left",padding:i?"0.65rem 0.75rem":"0.7rem 1rem",border:"none",borderBottom:"1px solid #222d34",background:(d==null?void 0:d.id)===x.id?"#2a3942":"transparent",cursor:"pointer",transition:"background 0.15s"},onMouseEnter:h=>{(d==null?void 0:d.id)!==x.id&&(h.currentTarget.style.background="#202c33")},onMouseLeave:h=>{(d==null?void 0:d.id)!==x.id&&(h.currentTarget.style.background="transparent")},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:i?"44px":"48px",height:i?"44px":"48px",borderRadius:"50%",background:"#00a884",color:"white",display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:i?"1rem":"1.1rem",flexShrink:0},children:(x.nombre_cliente||x.telefono||"?").trim().charAt(0).toUpperCase()}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.15rem"},children:[e.jsx("span",{style:{fontWeight:"500",color:"#e9edef",fontSize:i?"0.95rem":"1rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:x.nombre_cliente||x.telefono}),e.jsx("span",{style:{fontSize:"0.7rem",color:x.mensajes_no_leidos>0?"#00a884":"#8696a0",flexShrink:0,marginLeft:"0.5rem"},children:ie(x.ultima_fecha)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{fontSize:i?"0.8rem":"0.85rem",color:"#8696a0",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flex:1},children:[x.bot_activo?" ":"",ce(x.ultimo_mensaje)]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",flexShrink:0,marginLeft:"0.5rem"},children:[x.requiere_reengagement&&e.jsx("span",{style:{padding:"0.1rem 0.35rem",borderRadius:"4px",background:"#5c3d3d",color:"#f15c6d",fontSize:"0.6rem",fontWeight:600},children:"24h"}),x.mensajes_no_leidos>0&&e.jsx("div",{style:{minWidth:"18px",height:"18px",borderRadius:"9px",backgroundColor:"#00a884",color:"#111b21",fontSize:"0.7rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:x.mensajes_no_leidos>99?"99+":x.mensajes_no_leidos})]})]})]})]})},x.id))})]}),(!i||!S)&&e.jsxs("div",{style:{background:"#0b141a",borderRadius:0,border:"none",display:"flex",flexDirection:"column",height:"100%",minHeight:i?"calc(100vh - 56px)":"100%",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:i?"0.5rem 0.6rem":"0.6rem 1rem",borderBottom:"1px solid #222d34",display:"flex",flexDirection:i?"column":"row",justifyContent:"space-between",alignItems:i?"stretch":"center",gap:i?"0.5rem":"0",position:"sticky",top:0,background:"#202c33",zIndex:5},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.65rem"},children:[i&&e.jsx("button",{type:"button",onClick:()=>L(!0),style:{background:"transparent",border:"none",color:"#aebac1",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:e.jsx(vi,{size:22})}),e.jsx("div",{style:{width:i?"38px":"42px",height:i?"38px":"42px",borderRadius:"50%",background:"#00a884",color:"#111b21",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:i?"1rem":"1.1rem",flexShrink:0},children:((d==null?void 0:d.nombre_cliente)||(d==null?void 0:d.telefono)||"?").trim().charAt(0).toUpperCase()}),e.jsxs("div",{style:{minWidth:0,flex:1},children:[e.jsxs("div",{style:{fontWeight:"500",color:"#e9edef",fontSize:i?"0.95rem":"1rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"flex",alignItems:"center",gap:"0.4rem"},children:[e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:(d==null?void 0:d.nombre_cliente)||(d==null?void 0:d.telefono)||"Selecciona un chat"}),d!=null&&d.requiere_reengagement&&!i?e.jsx("span",{style:{padding:"0.15rem 0.4rem",borderRadius:"4px",background:"#5c3d3d",color:"#f15c6d",fontSize:"0.65rem",fontWeight:600,flexShrink:0},children:"24h expirado"}):null]}),e.jsx("div",{style:{fontSize:i?"0.75rem":"0.8rem",color:"#8696a0"},children:(d==null?void 0:d.telefono)||""})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.4rem",justifyContent:i?"flex-end":"flex-start"},children:[(d==null?void 0:d.requiere_reengagement)&&i&&e.jsx("span",{style:{padding:"0.2rem 0.4rem",borderRadius:"4px",background:"#5c3d3d",color:"#f15c6d",fontSize:"0.65rem",fontWeight:600,display:"flex",alignItems:"center"},children:"24h"}),e.jsx("button",{type:"button",onClick:se,disabled:!d,style:{padding:i?"0.35rem 0.6rem":"0.4rem 0.75rem",borderRadius:"6px",border:"none",background:d!=null&&d.bot_activo?"#e97c20":"#00a884",color:d!=null&&d.bot_activo?"white":"#111b21",cursor:d?"pointer":"not-allowed",fontSize:i?"0.75rem":"0.8rem",fontWeight:600,whiteSpace:"nowrap",opacity:d?1:.5},children:d!=null&&d.bot_activo?i?" Humano":" Modo humano":i?" Bot":" Activar bot"}),e.jsx("button",{type:"button",onClick:G,disabled:!d,style:{padding:i?"0.35rem 0.6rem":"0.4rem 0.75rem",borderRadius:"6px",border:"1px solid #3b4a54",background:"transparent",color:"#aebac1",cursor:d?"pointer":"not-allowed",fontSize:i?"0.75rem":"0.8rem",fontWeight:500,whiteSpace:"nowrap",opacity:d?1:.5},children:i?"Reset":"Reiniciar"})]})]}),e.jsxs("div",{style:{flex:1,padding:i?"0.5rem 0.5rem":"0.75rem 1.5rem",overflowY:"auto",background:"#0b141a",backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23182229' fill-opacity='0.6'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`,minHeight:0},children:[d?l.map(x=>e.jsx("div",{style:{display:"flex",justifyContent:x.direccion==="out"?"flex-end":"flex-start",marginBottom:"0.25rem"},children:e.jsxs("div",{style:{maxWidth:i?"92%":"75%"},children:[e.jsxs("div",{style:{padding:i?"0.4rem 0.6rem":"0.5rem 0.65rem",borderRadius:x.direccion==="out"?"7.5px 7.5px 0 7.5px":"7.5px 7.5px 7.5px 0",background:x.direccion==="out"?"#005c4b":"#202c33",color:"#e9edef",whiteSpace:"pre-wrap",boxShadow:"0 1px 0.5px rgba(11,20,26,0.13)",fontSize:i?"0.875rem":"0.9rem",lineHeight:1.35},children:[x.media_type==="image"&&x.media_id&&m[x.media_id]&&e.jsx("img",{src:m[x.media_id],alt:"imagen enviada",style:{maxWidth:"100%",borderRadius:"10px",marginBottom:x.mensaje?"0.4rem":0}}),x.media_type==="audio"&&x.media_id&&m[x.media_id]&&e.jsx("audio",{controls:!0,style:{width:"100%"},children:e.jsx("source",{src:m[x.media_id]})}),x.media_type==="document"&&x.media_id&&m[x.media_id]&&e.jsx("a",{href:m[x.media_id],target:"_blank",rel:"noreferrer",style:{display:"inline-block",marginBottom:x.mensaje?"0.4rem":0},children:"Descargar documento"}),x.mensaje]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"0.25rem",fontSize:"0.65rem",color:x.direccion==="out"?"rgba(255,255,255,0.6)":"#8696a0",marginTop:"0.15rem"},children:[e.jsx("span",{children:be(x.fecha_creacion)}),x.direccion==="out"&&e.jsx("span",{style:{color:x.estado==="read"?"#53bdeb":"rgba(255,255,255,0.6)"},children:x.estado==="read"||x.estado==="delivered"?"":x.estado==="sent"?"":""})]})]})},x.id)):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#8696a0",textAlign:"center",padding:"2rem"},children:[e.jsx(Ap,{size:64,color:"#3b4a54",style:{marginBottom:"1rem"}}),e.jsx("div",{style:{fontSize:"1.2rem",color:"#e9edef",marginBottom:"0.5rem"},children:"WhatsApp para Lirios"}),e.jsx("div",{style:{fontSize:"0.875rem"},children:"Selecciona una conversacin para comenzar"})]}),e.jsx("div",{ref:Z})]}),W&&e.jsx("div",{style:{padding:"0.5rem 1rem",borderTop:"1px solid #222d34",background:"#1f2c34"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[W.previewUrl?e.jsx("img",{src:W.previewUrl,alt:"preview",style:{width:"48px",height:"48px",borderRadius:"6px",objectFit:"cover"}}):e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"6px",background:"#3b4a54",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",color:"#8696a0"},children:W.tipo.toUpperCase()}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:500,color:"#e9edef",fontSize:"0.85rem"},children:"Adjunto listo"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#8696a0",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(re=W.archivo)==null?void 0:re.name})]}),e.jsx("button",{type:"button",onClick:()=>I(null),style:{background:"#5c3d3d",border:"none",color:"#f15c6d",padding:"0.3rem 0.6rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.75rem",fontWeight:500},children:"Quitar"})]})}),e.jsxs("div",{style:{padding:i?"0.6rem 0.5rem":"0.6rem 1rem",paddingBottom:i?"0.8rem":"0.6rem",borderTop:"1px solid #222d34",display:"flex",gap:i?"0.4rem":"0.75rem",alignItems:"center",background:"#202c33",position:"sticky",bottom:0,zIndex:5,flexShrink:0},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{type:"button",onClick:()=>E(!H),disabled:!d,style:{width:"40px",height:"40px",borderRadius:"50%",border:"none",background:H?"#00a884":"transparent",color:H?"#111b21":"#8696a0",cursor:d?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",opacity:d?1:.5,transition:"all 0.2s"},children:H?e.jsx(rr,{size:22}):e.jsx(Ur,{size:24})}),H&&e.jsxs("div",{style:{position:"absolute",bottom:"50px",left:"0",background:"#233138",borderRadius:"12px",padding:"0.5rem",display:"flex",flexDirection:"column",gap:"0.25rem",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",minWidth:"160px"},children:[e.jsxs("button",{type:"button",onClick:()=>{var x;(x=j.current)==null||x.click(),E(!1)},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.6rem 0.75rem",background:"transparent",border:"none",borderRadius:"8px",color:"#e9edef",cursor:"pointer",fontSize:"0.875rem",textAlign:"left"},onMouseEnter:x=>x.currentTarget.style.background="#182229",onMouseLeave:x=>x.currentTarget.style.background="transparent",children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:"#bf59cf",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Z5,{size:18,color:"white"})}),"Fotos"]}),e.jsxs("button",{type:"button",onClick:()=>{var x;(x=C.current)==null||x.click(),E(!1)},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.6rem 0.75rem",background:"transparent",border:"none",borderRadius:"8px",color:"#e9edef",cursor:"pointer",fontSize:"0.875rem",textAlign:"left"},onMouseEnter:x=>x.currentTarget.style.background="#182229",onMouseLeave:x=>x.currentTarget.style.background="transparent",children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:"#5157ae",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(jt,{size:18,color:"white"})}),"Documento"]}),e.jsxs("button",{type:"button",onClick:()=>{var x;(x=p.current)==null||x.click(),E(!1)},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.6rem 0.75rem",background:"transparent",border:"none",borderRadius:"8px",color:"#e9edef",cursor:"pointer",fontSize:"0.875rem",textAlign:"left"},onMouseEnter:x=>x.currentTarget.style.background="#182229",onMouseLeave:x=>x.currentTarget.style.background="transparent",children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:"#f5a623",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(iv,{size:18,color:"white"})}),"Audio"]})]})]}),e.jsx("input",{ref:j,type:"file",accept:"image/*",style:{display:"none"},onChange:x=>{var h;ye("image",(h=x.target.files)==null?void 0:h[0]),E(!1)}}),e.jsx("input",{ref:p,type:"file",accept:"audio/*",style:{display:"none"},onChange:x=>{var h;ye("audio",(h=x.target.files)==null?void 0:h[0]),E(!1)}}),e.jsx("input",{ref:C,type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx",style:{display:"none"},onChange:x=>{var h;ye("document",(h=x.target.files)==null?void 0:h[0]),E(!1)}}),e.jsx("input",{value:g,onChange:x=>y(x.target.value),placeholder:"Escribe un mensaje",disabled:!d,style:{flex:1,padding:i?"0.7rem 1rem":"0.75rem 1.25rem",borderRadius:"24px",border:"none",background:"#2a3942",fontSize:i?"0.95rem":"1rem",color:"#e9edef",outline:"none"},onKeyDown:x=>{x.key==="Enter"&&Y()},onFocus:()=>{E(!1),te(!1)}}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{type:"button",onClick:()=>{te(!R),E(!1)},disabled:!d,style:{background:R?"#00a884":"transparent",border:"none",cursor:d?"pointer":"not-allowed",color:R?"#111b21":"#8696a0",padding:"0.35rem",borderRadius:"50%",display:"flex",alignItems:"center",opacity:d?1:.5,transition:"all 0.2s"},children:e.jsx(dv,{size:24})}),R&&e.jsxs("div",{style:{position:"absolute",bottom:"50px",right:i?"-100px":"0",background:"#233138",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.4)",width:i?"calc(100vw - 20px)":"340px",maxWidth:i?"320px":"340px",maxHeight:i?"280px":"320px",overflow:"hidden",display:"flex",flexDirection:"column",zIndex:100},children:[e.jsx("div",{style:{display:"flex",gap:"0.25rem",padding:"0.5rem",borderBottom:"1px solid #3b4a54",overflowX:"auto",flexShrink:0},children:Object.keys(F).map(x=>e.jsx("button",{type:"button",onClick:()=>D(x),style:{padding:"0.35rem 0.6rem",borderRadius:"6px",border:"none",background:K===x?"#00a884":"transparent",color:K===x?"#111b21":"#8696a0",cursor:"pointer",fontSize:"0.7rem",fontWeight:600,whiteSpace:"nowrap"},children:x},x))}),e.jsx("div",{style:{padding:"0.5rem",overflowY:"auto",flex:1},children:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 1fr)",gap:"0.15rem"},children:F[K].map((x,h)=>e.jsx("button",{type:"button",onClick:()=>{y(J=>J+x)},style:{background:"transparent",border:"none",cursor:"pointer",fontSize:i?"1.3rem":"1.5rem",padding:"0.25rem",borderRadius:"6px",transition:"background 0.15s"},onMouseEnter:J=>J.currentTarget.style.background="#3b4a54",onMouseLeave:J=>J.currentTarget.style.background="transparent",children:x},h))})})]})]}),e.jsx("button",{type:"button",onClick:Y,disabled:!d||!g.trim()&&!W,style:{width:"44px",height:"44px",padding:"0",borderRadius:"50%",border:"none",background:g.trim()||W?"#00a884":"transparent",color:g.trim()||W?"#111b21":"#8696a0",cursor:d&&(g.trim()||W)?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:e.jsx(av,{size:22,style:{marginLeft:"2px"}})})]})]})]})]})},Vv=()=>{const{toasts:r,removeToast:t,error:o,success:n}=Ar(),[i,s]=c.useState(null),[a,d]=c.useState({precio_whatsapp:0,precio_email:0,whatsapp_desactivado:!1,maximo_whatsapp:null,maximo_email:null}),[u,l]=c.useState([]),[f,g]=c.useState(""),[y,z]=c.useState(!1),[b,w]=c.useState(""),[k,j]=c.useState(""),p=async(E=b,R=k)=>{var te,F;try{const K={};E&&(K.fecha_desde=E),R&&(K.fecha_hasta=R);const[D,Z]=await Promise.all([$i.getResumen(K),$i.getClientes(K)]);s(D.resumen||{}),d(D.config||{precio_whatsapp:0,precio_email:0,whatsapp_desactivado:!1,maximo_whatsapp:null,maximo_email:null}),l(Z.clientes||[])}catch(K){const D=((F=(te=K.response)==null?void 0:te.data)==null?void 0:F.error)||"Error al cargar mtricas";o(D)}};c.useEffect(()=>{p()},[]);const C=()=>{p(b,k)},S=()=>{w(""),j(""),p("","")},L=E=>{if(E==null)return 0;const R=String(E).replace(",",".").trim(),te=Number(R);return Number.isNaN(te)?0:te},W=async()=>{var E,R;try{z(!0),await $i.updateConfig({precio_whatsapp:L(a.precio_whatsapp),precio_email:L(a.precio_email),whatsapp_desactivado:!!a.whatsapp_desactivado,maximo_whatsapp:a.maximo_whatsapp?parseInt(a.maximo_whatsapp):null,maximo_email:a.maximo_email?parseInt(a.maximo_email):null}),n("Configuracin actualizada"),await p()}catch(te){const F=((R=(E=te.response)==null?void 0:E.data)==null?void 0:R.error)||"No se pudo actualizar";o(F)}finally{z(!1)}},I=async()=>{var R,te;const E=!a.whatsapp_desactivado;try{z(!0),await $i.updateConfig({precio_whatsapp:L(a.precio_whatsapp),precio_email:L(a.precio_email),whatsapp_desactivado:E,maximo_whatsapp:a.maximo_whatsapp?parseInt(a.maximo_whatsapp):null,maximo_email:a.maximo_email?parseInt(a.maximo_email):null}),d(F=>({...F,whatsapp_desactivado:E})),n(E?"WhatsApp desactivado":"WhatsApp activado"),await p()}catch(F){const K=((te=(R=F.response)==null?void 0:R.data)==null?void 0:te.error)||"No se pudo actualizar";o(K)}finally{z(!1)}},m=async(E,R)=>{var te,F;try{await $i.updateControlCliente(E,R),await p()}catch(K){const D=((F=(te=K.response)==null?void 0:te.data)==null?void 0:F.error)||"No se pudo actualizar control";o(D)}},B=c.useMemo(()=>{if(!f.trim())return u;const E=f.toLowerCase();return u.filter(R=>String(R.nombre_cliente||"").toLowerCase().includes(E)||String(R.telefono||"").toLowerCase().includes(E))},[f,u]),H=c.useMemo(()=>{const E=(i==null?void 0:i.whatsapp_out)||0,R=(i==null?void 0:i.whatsapp_in)||0,te=(i==null?void 0:i.email_out)||0,F=(i==null?void 0:i.costo_whatsapp_total)||0,K=(i==null?void 0:i.costo_email_total)||0;return{totalWhatsappOut:E,totalWhatsappIn:R,totalWhatsapp:E+R,totalEmail:te,totalCostoWhatsapp:F,totalCostoEmail:K,totalCosto:F+K}},[i]);return e.jsxs("div",{style:{padding:"1.5rem 2rem"},children:[e.jsx(Lr,{toasts:r,removeToast:t}),e.jsxs("div",{style:{marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.6rem",marginBottom:"0.25rem"},children:"Panel WhatsApp & Email"}),e.jsx("p",{style:{color:"var(--gray-600)"},children:"Control de consumos, costos y bloqueos por cliente."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_t,{size:16,color:"#6b7280"}),e.jsx("input",{type:"date",value:b,onChange:E=>w(E.target.value),style:{padding:"0.5rem 0.75rem",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"0.875rem"},placeholder:"Desde"}),e.jsx("span",{style:{color:"#6b7280"},children:"-"}),e.jsx("input",{type:"date",value:k,onChange:E=>j(E.target.value),style:{padding:"0.5rem 0.75rem",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"0.875rem"},placeholder:"Hasta"})]}),e.jsxs("button",{type:"button",onClick:C,style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"none",background:"#3b82f6",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.35rem",fontSize:"0.875rem"},children:[e.jsx(bu,{size:14}),"Filtrar"]}),(b||k)&&e.jsx("button",{type:"button",onClick:S,style:{padding:"0.5rem 0.75rem",borderRadius:"8px",border:"1px solid #d1d5db",background:"#f3f4f6",color:"#374151",cursor:"pointer",fontSize:"0.875rem"},children:"Limpiar"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.85rem",marginBottom:"0.25rem"},children:"WhatsApp Salientes"}),e.jsx("div",{style:{fontSize:"1.4rem",fontWeight:700,color:"#3b82f6"},children:(i==null?void 0:i.whatsapp_out)||0}),e.jsxs("div",{style:{color:"#9ca3af",fontSize:"0.75rem",marginTop:"0.5rem"},children:[e.jsxs("div",{children:["Chat: ",((i==null?void 0:i.whatsapp_bot)||0)+((i==null?void 0:i.whatsapp_humano)||0)]}),e.jsxs("div",{style:{marginTop:"0.25rem"},children:["Bot: ",(i==null?void 0:i.whatsapp_bot)||0,"  Humano: ",(i==null?void 0:i.whatsapp_humano)||0]}),e.jsxs("div",{style:{marginTop:"0.25rem",color:"#6366f1"},children:["Notificaciones: ",(i==null?void 0:i.whatsapp_notificaciones)||(i==null?void 0:i.whatsapp_sistema)||0]})]})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.85rem",marginBottom:"0.25rem"},children:"WhatsApp Entrantes"}),e.jsx("div",{style:{fontSize:"1.4rem",fontWeight:700,color:"#10b981"},children:(i==null?void 0:i.whatsapp_in)||0}),e.jsx("div",{style:{color:"#9ca3af",fontSize:"0.75rem",marginTop:"0.5rem"},children:"Mensajes recibidos del cliente"})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.85rem",marginBottom:"0.25rem"},children:"Email Enviados"}),e.jsx("div",{style:{fontSize:"1.4rem",fontWeight:700,color:"#8b5cf6"},children:(i==null?void 0:i.email_out)||0}),e.jsx("div",{style:{color:"#9ca3af",fontSize:"0.75rem",marginTop:"0.5rem"},children:"Notificaciones por correo"})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.85rem",marginBottom:"0.5rem"},children:"Resumen Total"}),e.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:600,marginBottom:"0.25rem"},children:["WhatsApp: ",((i==null?void 0:i.whatsapp_out)||0)+((i==null?void 0:i.whatsapp_in)||0)]}),e.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:600,marginBottom:"0.25rem"},children:["Email: ",(i==null?void 0:i.email_out)||0]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280",marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #e5e7eb"},children:[e.jsxs("div",{children:["Costo WhatsApp: $",H.totalCostoWhatsapp.toFixed(2)]}),e.jsxs("div",{style:{marginTop:"0.25rem"},children:["Costo Email: $",H.totalCostoEmail.toFixed(2)]}),e.jsxs("div",{style:{marginTop:"0.5rem",fontWeight:700,color:"#374151"},children:["Total: $",(H.totalCostoWhatsapp+H.totalCostoEmail).toFixed(2)]})]})]})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",border:"1px solid #e5e7eb",marginBottom:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:700,marginBottom:"0.75rem"},children:"Configuracin"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Precio WhatsApp"}),e.jsx("input",{value:a.precio_whatsapp,onChange:E=>d(R=>({...R,precio_whatsapp:E.target.value})),type:"number",step:"0.0001",style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Precio Email"}),e.jsx("input",{value:a.precio_email,onChange:E=>d(R=>({...R,precio_email:E.target.value})),type:"number",step:"0.0001",style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Mximo WhatsApp"}),e.jsx("input",{value:a.maximo_whatsapp||"",onChange:E=>d(R=>({...R,maximo_whatsapp:E.target.value||null})),type:"number",min:"1",placeholder:"Ilimitado",style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Mximo Email"}),e.jsx("input",{value:a.maximo_email||"",onChange:E=>d(R=>({...R,maximo_email:E.target.value||null})),type:"number",min:"1",placeholder:"Ilimitado",style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:I,disabled:y,style:{padding:"0.6rem 1rem",borderRadius:"8px",border:"1px solid #d1d5db",background:a.whatsapp_desactivado?"#ef4444":"#f3f4f6",color:a.whatsapp_desactivado?"white":"#374151",cursor:y?"not-allowed":"pointer"},children:y?"Actualizando...":a.whatsapp_desactivado?"Activar WhatsApp":"Desactivar WhatsApp"}),e.jsx("button",{type:"button",onClick:W,disabled:y,style:{padding:"0.6rem 1rem",borderRadius:"8px",border:"none",background:"#10b981",color:"white",cursor:y?"not-allowed":"pointer"},children:y?"Guardando...":"Guardar"})]})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{padding:"0.9rem",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:700},children:"Clientes"}),e.jsx("input",{value:f,onChange:E=>g(E.target.value),placeholder:"Buscar cliente o telefono",style:{padding:"0.5rem 0.75rem",borderRadius:"999px",border:"1px solid #e5e7eb"}})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Cliente"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"WhatsApp Enviados"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Email"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Costo WhatsApp"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Costo Email"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Bloqueos"})]})}),e.jsxs("tbody",{children:[B.map(E=>{const R=E.whatsapp_out||0,te=E.whatsapp_sistema||0,F=(E.whatsapp_bot||0)+(E.whatsapp_humano||0);return e.jsxs("tr",{style:{borderBottom:"1px solid #f1f5f9"},children:[e.jsxs("td",{style:{padding:"0.75rem"},children:[e.jsx("div",{style:{fontWeight:600},children:E.nombre_cliente}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:E.telefono})]}),e.jsxs("td",{style:{padding:"0.75rem"},children:[e.jsx("div",{style:{fontWeight:600},children:R}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[te>0&&e.jsxs("span",{children:["Sistema: ",te]}),te>0&&F>0&&e.jsx("span",{children:"  "}),F>0&&e.jsxs("span",{children:["Chat: ",F]}),te===0&&F===0&&R>0&&e.jsxs("span",{children:["Otros: ",R]})]})]}),e.jsx("td",{style:{padding:"0.75rem"},children:E.email_out||0}),e.jsxs("td",{style:{padding:"0.75rem"},children:["$",(E.costo_whatsapp||0).toFixed(2)]}),e.jsxs("td",{style:{padding:"0.75rem"},children:["$",(E.costo_email||0).toFixed(2)]}),e.jsx("td",{style:{padding:"0.75rem"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>m(E.cliente_id,{bloquear_whatsapp:!E.bloquear_whatsapp}),style:{padding:"0.35rem 0.7rem",borderRadius:"6px",border:"1px solid #d1d5db",background:E.bloquear_whatsapp?"#ef4444":"#f3f4f6",color:E.bloquear_whatsapp?"white":"#374151",cursor:"pointer"},children:E.bloquear_whatsapp?"Desbloq. WhatsApp":"Bloq. WhatsApp"}),e.jsx("button",{type:"button",onClick:()=>m(E.cliente_id,{bloquear_email:!E.bloquear_email}),style:{padding:"0.35rem 0.7rem",borderRadius:"6px",border:"1px solid #d1d5db",background:E.bloquear_email?"#ef4444":"#f3f4f6",color:E.bloquear_email?"white":"#374151",cursor:"pointer"},children:E.bloquear_email?"Desbloq. Email":"Bloq. Email"})]})})]},E.cliente_id)}),B.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,style:{padding:"1rem",color:"#9ca3af"},children:"No hay clientes para mostrar."})})]})]})})]})]})},qv=()=>{const{toasts:r,removeToast:t,success:o,error:n}=Ar(),[i,s]=c.useState(""),[a,d]=c.useState(!1),[u,l]=c.useState(!1),[f,g]=c.useState({nombre_plataforma:"",login_titulo:"",login_subtitulo:"",login_boton_texto:"",login_left_titulo:"",login_left_texto:"",login_left_items:"",login_left_imagen:"",login_acento_color:"",login_fondo_color:"",whatsapp_reengagement_template_id:"",contacto_nombre:"",contacto_email:"",contacto_telefono:"",contacto_whatsapp:"",establecimiento_direccion:"",establecimiento_horario:""}),[y,z]=c.useState(!0),[b,w]=c.useState([]),{nombrePlataforma:k,setNombrePlataforma:j}=zl();c.useEffect(()=>{(async()=>{var L,W;try{z(!0);const[I,m]=await Promise.all([is.getGeneral(),Gn.getAll()]),B=(I==null?void 0:I.configuracion)||{};w((m==null?void 0:m.templates)||[]),g({nombre_plataforma:B.nombre_plataforma||k||"",login_titulo:B.login_titulo||"",login_subtitulo:B.login_subtitulo||"",login_boton_texto:B.login_boton_texto||"",login_left_titulo:B.login_left_titulo||"",login_left_texto:B.login_left_texto||"",login_left_items:B.login_left_items||"",login_left_imagen:B.login_left_imagen||"",login_acento_color:B.login_acento_color||"",login_fondo_color:B.login_fondo_color||"",whatsapp_reengagement_template_id:B.whatsapp_reengagement_template_id||"",contacto_nombre:B.contacto_nombre||"",contacto_email:B.contacto_email||"",contacto_telefono:B.contacto_telefono||"",contacto_whatsapp:B.contacto_whatsapp||"",establecimiento_direccion:B.establecimiento_direccion||"",establecimiento_horario:B.establecimiento_horario||""})}catch(I){const m=((W=(L=I.response)==null?void 0:L.data)==null?void 0:W.error)||"No se pudo cargar la configuracin general";n(m)}finally{z(!1)}})()},[k,n]);const p=async()=>{var S,L,W;if(i.trim().toUpperCase()!=="ELIMINAR"){n("Escribe ELIMINAR para confirmar.");return}try{d(!0);const I=await is.limpiarDatosPrueba();o("Datos de prueba eliminados"),(S=I==null?void 0:I.errores)!=null&&S.length&&n("Algunas tablas no se pudieron limpiar."),s("")}catch(I){const m=((W=(L=I.response)==null?void 0:L.data)==null?void 0:W.error)||"No se pudo limpiar los datos";n(m)}finally{d(!1)}},C=async()=>{var S,L;if(!f.nombre_plataforma.trim()){n("Ingresa un nombre valido para la plataforma.");return}try{l(!0),await is.updateGeneral({...f,nombre_plataforma:f.nombre_plataforma.trim()}),j(f.nombre_plataforma.trim()),o("Configuracin general actualizada")}catch(W){const I=((L=(S=W.response)==null?void 0:S.data)==null?void 0:L.error)||"No se pudo actualizar la configuracin";n(I)}finally{l(!1)}};return e.jsxs("div",{style:{padding:"1.5rem 2rem"},children:[e.jsx(Lr,{toasts:r,removeToast:t}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.6rem",marginBottom:"0.25rem"},children:"Limpieza de datos de prueba"}),e.jsx("p",{style:{color:"var(--gray-600)"},children:"Elimina eventos, pagos y notificaciones (email/WhatsApp). No borra configuraciones, usuarios ni roles."})]}),e.jsxs("div",{style:{maxWidth:"920px",background:"white",borderRadius:"12px",padding:"1.5rem",border:"1px solid #e5e7eb",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{marginBottom:"0.75rem",fontWeight:700},children:"Configuraciones generales"}),e.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"0.75rem"},children:"Personaliza el contenido y la esttica del login."}),y?e.jsx("div",{style:{color:"#6b7280"},children:"Cargando configuracin..."}):e.jsxs("div",{style:{display:"grid",gap:"0.75rem"},children:[e.jsx("input",{value:f.nombre_plataforma,onChange:S=>g(L=>({...L,nombre_plataforma:S.target.value})),placeholder:"Nombre de la plataforma",style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsx("input",{value:f.login_titulo,onChange:S=>g(L=>({...L,login_titulo:S.target.value})),placeholder:"Titulo del login",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{value:f.login_subtitulo,onChange:S=>g(L=>({...L,login_subtitulo:S.target.value})),placeholder:"Subtitulo del login",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsx("input",{value:f.login_boton_texto,onChange:S=>g(L=>({...L,login_boton_texto:S.target.value})),placeholder:"Texto del boton",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{value:f.login_left_titulo,onChange:S=>g(L=>({...L,login_left_titulo:S.target.value})),placeholder:"Titulo panel izquierdo",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsx("textarea",{value:f.login_left_texto,onChange:S=>g(L=>({...L,login_left_texto:S.target.value})),placeholder:"Texto principal del panel izquierdo",rows:2,style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("textarea",{value:f.login_left_items,onChange:S=>g(L=>({...L,login_left_items:S.target.value})),placeholder:"Items del panel izquierdo (uno por linea)",rows:4,style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{value:f.login_left_imagen,onChange:S=>g(L=>({...L,login_left_imagen:S.target.value})),placeholder:"URL de imagen del login",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsx("input",{value:f.login_acento_color,onChange:S=>g(L=>({...L,login_acento_color:S.target.value})),placeholder:"Color acento (hex)",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{value:f.login_fondo_color,onChange:S=>g(L=>({...L,login_fondo_color:S.target.value})),placeholder:"Color fondo izquierdo (hex)",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("select",{value:f.whatsapp_reengagement_template_id||"",onChange:S=>g(L=>({...L,whatsapp_reengagement_template_id:S.target.value||""})),style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"},children:[e.jsx("option",{value:"",children:"Plantilla de re-apertura 24h (opcional)"}),b.map(S=>e.jsxs("option",{value:S.id,children:[S.nombre," (",S.idioma,")"]},S.id))]}),e.jsx("div",{style:{marginTop:"0.5rem",fontWeight:600},children:"Contacto y establecimiento"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsx("input",{value:f.contacto_nombre,onChange:S=>g(L=>({...L,contacto_nombre:S.target.value})),placeholder:"Nombre de contacto",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{value:f.contacto_email,onChange:S=>g(L=>({...L,contacto_email:S.target.value})),placeholder:"Email de contacto",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsx("input",{value:f.contacto_telefono,onChange:S=>g(L=>({...L,contacto_telefono:S.target.value})),placeholder:"Telfono de contacto",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{value:f.contacto_whatsapp,onChange:S=>g(L=>({...L,contacto_whatsapp:S.target.value})),placeholder:"WhatsApp de contacto",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsx("input",{value:f.establecimiento_direccion,onChange:S=>g(L=>({...L,establecimiento_direccion:S.target.value})),placeholder:"Direccin del establecimiento",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{value:f.establecimiento_horario,onChange:S=>g(L=>({...L,establecimiento_horario:S.target.value})),placeholder:"Horario del establecimiento",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsx("div",{style:{marginTop:"0.9rem",display:"flex",gap:"0.75rem"},children:e.jsx("button",{type:"button",onClick:C,disabled:u,style:{padding:"0.6rem 1.2rem",borderRadius:"8px",border:"none",background:"#111827",color:"white",cursor:u?"not-allowed":"pointer"},children:u?"Guardando...":"Guardar configuracin"})})]}),e.jsx("div",{style:{maxWidth:"920px",background:"white",borderRadius:"12px",padding:"1.5rem",border:"1px solid #e5e7eb",marginBottom:"1.5rem"},children:e.jsx(Pg,{embedded:!0})}),e.jsxs("div",{style:{maxWidth:"720px",background:"white",borderRadius:"12px",padding:"1.5rem",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"10px",padding:"1rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{fontWeight:700,color:"#991b1b",marginBottom:"0.25rem"},children:"Accin irreversible"}),e.jsx("div",{style:{color:"#7f1d1d",fontSize:"0.9rem"},children:"Esta accin elimina datos operativos (eventos, pagos, notificaciones y chats)."})]}),e.jsxs("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:["Escribe ",e.jsx("strong",{children:"ELIMINAR"})," para confirmar"]}),e.jsx("input",{value:i,onChange:S=>s(S.target.value),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("div",{style:{marginTop:"1rem",display:"flex",gap:"0.75rem"},children:e.jsx("button",{type:"button",onClick:p,disabled:a,style:{padding:"0.7rem 1.2rem",borderRadius:"8px",border:"none",background:"#dc2626",color:"white",cursor:a?"not-allowed":"pointer"},children:a?"Eliminando...":"Eliminar datos de prueba"})})]})]})},Pp={nombre:"",idioma:"es",categoria:"",descripcion:"",parametros:0,header_parametros:0,body_parametros:0,ejemplo:"",header_ejemplo:"",body_ejemplo:"",activo:!0},Yv=()=>{const{toasts:r,removeToast:t,success:o,error:n}=Ar(),[i,s]=c.useState([]),[a,d]=c.useState(!0),[u,l]=c.useState(Pp),[f,g]=c.useState(null),[y,z]=c.useState([]),[b,w]=c.useState({template_id:"",cliente_id:"",telefono:"",parametros:[],header_parametros:[],body_parametros:[]}),[k,j]=c.useState(0),[p,C]=c.useState(0),[S,L]=c.useState(0),[W,I]=c.useState(!1),m=async()=>{var D,Z;try{d(!0);const[P,$]=await Promise.all([Gn.getAll(),lo.getAll()]);s(P.templates||[]),z($.clientes||[])}catch(P){const $=((Z=(D=P.response)==null?void 0:D.data)==null?void 0:Z.error)||"No se pudo cargar las plantillas";n($)}finally{d(!1)}};c.useEffect(()=>{m()},[]);const B=()=>{l(Pp),g(null)},H=async()=>{var D,Z;if(!u.nombre.trim()){n("El nombre de la plantilla es requerido");return}try{const P={...u,parametros:Number(u.parametros||0),header_parametros:Number(u.header_parametros||0),body_parametros:Number(u.body_parametros||0)};f?(await Gn.update(f,P),o("Plantilla actualizada")):(await Gn.create(P),o("Plantilla creada")),await m(),B()}catch(P){const $=((Z=(D=P.response)==null?void 0:D.data)==null?void 0:Z.error)||"No se pudo guardar la plantilla";n($)}},E=D=>{g(D.id),l({nombre:D.nombre||"",idioma:D.idioma||"es",categoria:D.categoria||"",descripcion:D.descripcion||"",parametros:D.parametros||0,header_parametros:D.header_parametros||0,body_parametros:D.body_parametros||0,ejemplo:D.ejemplo||"",header_ejemplo:D.header_ejemplo||"",body_ejemplo:D.body_ejemplo||"",activo:!!D.activo})},R=async D=>{var Z,P;try{await Gn.remove(D),o("Plantilla eliminada"),await m()}catch($){const N=((P=(Z=$.response)==null?void 0:Z.data)==null?void 0:P.error)||"No se pudo eliminar la plantilla";n(N)}},te=c.useMemo(()=>i.filter(D=>D.activo),[i]),F=c.useMemo(()=>te.find(D=>String(D.id)===String(b.template_id)),[te,b.template_id]);c.useEffect(()=>{const D=Number((F==null?void 0:F.header_parametros)||0),Z=Number((F==null?void 0:F.body_parametros)||0),P=Number((F==null?void 0:F.parametros)||0)||D+Z;j(P),C(D),L(Z),w(P===0?$=>({...$,parametros:[],header_parametros:[],body_parametros:[]}):$=>({...$,parametros:Array.from({length:P},(N,ee)=>$.parametros[ee]||""),header_parametros:Array.from({length:D},(N,ee)=>$.header_parametros[ee]||""),body_parametros:Array.from({length:Z},(N,ee)=>$.body_parametros[ee]||"")}))},[F]);const K=async()=>{var $,N,ee,Y;if(!b.template_id){n("Selecciona una plantilla");return}if(!b.cliente_id&&!b.telefono.trim()){n("Selecciona un cliente o ingresa un telefono");return}const D=(b.parametros||[]).map(X=>String(X||"").trim()),Z=(b.header_parametros||[]).map(X=>String(X||"").trim()),P=(b.body_parametros||[]).map(X=>String(X||"").trim());if(p&&Z.some(X=>!X)){n("Completa todos los parametros del header.");return}if(S&&P.some(X=>!X)){n("Completa todos los parametros del body.");return}if(p&&Z.length!==p){n(`Debes enviar ${p} parametro(s) en el header.`);return}if(S&&P.length!==S){n(`Debes enviar ${S} parametro(s) en el body.`);return}if(!p&&!S&&k&&D.length!==k){n(`Debes enviar ${k} parametro(s).`);return}try{I(!0),await Gn.send({template_id:Number(b.template_id),cliente_id:b.cliente_id?Number(b.cliente_id):null,telefono:b.telefono.trim(),parametros:D,header_parametros:Z,body_parametros:P}),o("Plantilla enviada"),w({template_id:"",cliente_id:"",telefono:"",parametros:[],header_parametros:[],body_parametros:[]}),await m()}catch(X){const se=((N=($=X.response)==null?void 0:$.data)==null?void 0:N.error)||((Y=(ee=X.response)==null?void 0:ee.data)==null?void 0:Y.detalle)||"No se pudo enviar la plantilla";n(se)}finally{I(!1)}};return e.jsxs("div",{style:{padding:"1.5rem 2rem"},children:[e.jsx(Lr,{toasts:r,removeToast:t}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.6rem",marginBottom:"0.25rem"},children:"Plantillas WhatsApp"}),e.jsx("p",{style:{color:"var(--gray-600)"},children:"Enva plantillas aprobadas para abrir conversaciones fuera de la ventana de 24h."})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.1fr 0.9fr",gap:"1.5rem"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.25rem"},children:[e.jsx("div",{style:{fontWeight:700,marginBottom:"0.75rem"},children:"Plantillas registradas"}),a?e.jsx("div",{style:{color:"#6b7280"},children:"Cargando..."}):i.length===0?e.jsx("div",{style:{color:"#6b7280"},children:"No hay plantillas registradas."}):e.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:i.map(D=>e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"10px",padding:"0.85rem",display:"flex",justifyContent:"space-between",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600},children:[D.nombre," ",e.jsxs("span",{style:{color:"#6b7280",fontSize:"0.85rem"},children:["(",D.idioma,")"]})]}),e.jsx("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:D.descripcion||"Sin descripcion"}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"#9ca3af",marginTop:"0.25rem"},children:["Parametros: ",D.parametros||0,"  ",D.activo?"Activa":"Inactiva"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("button",{type:"button",onClick:()=>E(D),style:{padding:"0.4rem 0.8rem",borderRadius:"8px",border:"1px solid #d1d5db",background:"#f3f4f6",cursor:"pointer"},children:"Editar"}),e.jsx("button",{type:"button",onClick:()=>R(D.id),style:{padding:"0.4rem 0.8rem",borderRadius:"8px",border:"1px solid #fecaca",background:"#fee2e2",color:"#991b1b",cursor:"pointer"},children:"Eliminar"})]})]},D.id))})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.25rem"},children:[e.jsx("div",{style:{fontWeight:700,marginBottom:"0.75rem"},children:f?"Editar plantilla":"Nueva plantilla"}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem"},children:[e.jsx("input",{value:u.nombre,onChange:D=>l(Z=>({...Z,nombre:D.target.value})),placeholder:"Nombre exacto (Meta)",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsx("input",{value:u.idioma,onChange:D=>l(Z=>({...Z,idioma:D.target.value})),placeholder:"Idioma (ej: es)",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{value:u.categoria,onChange:D=>l(Z=>({...Z,categoria:D.target.value})),placeholder:"Categoria",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsx("input",{value:u.descripcion,onChange:D=>l(Z=>({...Z,descripcion:D.target.value})),placeholder:"Descripcion",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsx("input",{type:"number",min:"0",value:u.parametros,onChange:D=>l(Z=>({...Z,parametros:D.target.value})),placeholder:"Cantidad parametros (legacy)",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{type:"number",min:"0",value:u.header_parametros,onChange:D=>l(Z=>({...Z,header_parametros:D.target.value})),placeholder:"Parametros header",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsx("input",{type:"number",min:"0",value:u.body_parametros,onChange:D=>l(Z=>({...Z,body_parametros:D.target.value})),placeholder:"Parametros body",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsxs("select",{value:u.activo?"1":"0",onChange:D=>l(Z=>({...Z,activo:D.target.value==="1"})),style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"},children:[e.jsx("option",{value:"1",children:"Activa"}),e.jsx("option",{value:"0",children:"Inactiva"})]})]}),e.jsx("textarea",{value:u.ejemplo,onChange:D=>l(Z=>({...Z,ejemplo:D.target.value})),placeholder:"Ejemplo legacy (opcional)",rows:2,style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("textarea",{value:u.header_ejemplo,onChange:D=>l(Z=>({...Z,header_ejemplo:D.target.value})),placeholder:"Ejemplo header (opcional)",rows:2,style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("textarea",{value:u.body_ejemplo,onChange:D=>l(Z=>({...Z,body_ejemplo:D.target.value})),placeholder:"Ejemplo body (opcional)",rows:2,style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{style:{marginTop:"0.9rem",display:"flex",gap:"0.75rem"},children:[e.jsx("button",{type:"button",onClick:H,style:{padding:"0.6rem 1.1rem",borderRadius:"8px",border:"none",background:"#111827",color:"white",cursor:"pointer"},children:"Guardar"}),f&&e.jsx("button",{type:"button",onClick:B,style:{padding:"0.6rem 1.1rem",borderRadius:"8px",border:"1px solid #d1d5db",background:"#f3f4f6",cursor:"pointer"},children:"Cancelar"})]})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.25rem"},children:[e.jsx("div",{style:{fontWeight:700,marginBottom:"0.75rem"},children:"Enviar plantilla"}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem"},children:[e.jsxs("select",{value:b.template_id,onChange:D=>w(Z=>({...Z,template_id:D.target.value})),style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"},children:[e.jsx("option",{value:"",children:"Selecciona una plantilla"}),te.map(D=>e.jsxs("option",{value:D.id,children:[D.nombre," (",D.idioma,")"]},D.id))]}),F?e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:["Parametros requeridos: ",k,F.ejemplo?`  Ejemplo: ${F.ejemplo}`:""]}):null,e.jsxs("select",{value:b.cliente_id,onChange:D=>w(Z=>({...Z,cliente_id:D.target.value})),style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"},children:[e.jsx("option",{value:"",children:"Selecciona un cliente (opcional)"}),y.map(D=>e.jsxs("option",{value:D.id,children:[D.nombre_completo," ",D.telefono?` ${D.telefono}`:""]},D.id))]}),e.jsx("input",{value:b.telefono,onChange:D=>w(Z=>({...Z,telefono:D.target.value})),placeholder:"Telefono directo (si no eliges cliente)",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),p>0||S>0?e.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[p>0&&e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Header"}),Array.from({length:p}).map((D,Z)=>{const P=((F==null?void 0:F.header_ejemplo)||"").split(",").map($=>$.trim()).filter(Boolean)[Z];return e.jsx("input",{value:b.header_parametros[Z]||"",onChange:$=>{const N=$.target.value;w(ee=>{const Y=[...ee.header_parametros||[]];return Y[Z]=N,{...ee,header_parametros:Y}})},placeholder:P?`Header ${Z+1} (ej: ${P})`:`Header ${Z+1}`,style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}},`header-param-${Z}`)}),S>0&&e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280",marginTop:"0.5rem"},children:"Body"}),Array.from({length:S}).map((D,Z)=>{const P=((F==null?void 0:F.body_ejemplo)||"").split(",").map($=>$.trim()).filter(Boolean)[Z];return e.jsx("input",{value:b.body_parametros[Z]||"",onChange:$=>{const N=$.target.value;w(ee=>{const Y=[...ee.body_parametros||[]];return Y[Z]=N,{...ee,body_parametros:Y}})},placeholder:P?`Body ${Z+1} (ej: ${P})`:`Body ${Z+1}`,style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}},`body-param-${Z}`)})]}):k>0?e.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:Array.from({length:k}).map((D,Z)=>{const P=((F==null?void 0:F.ejemplo)||"").split(",").map($=>$.trim()).filter(Boolean)[Z];return e.jsx("input",{value:b.parametros[Z]||"",onChange:$=>{const N=$.target.value;w(ee=>{const Y=[...ee.parametros||[]];return Y[Z]=N,{...ee,parametros:Y}})},placeholder:P?`Parametro ${Z+1} (ej: ${P})`:`Parametro ${Z+1}`,style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}},`legacy-param-${Z}`)})}):e.jsx("input",{value:"",disabled:!0,placeholder:"Esta plantilla no requiere parametros",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db",background:"#f3f4f6"}})]}),e.jsx("div",{style:{marginTop:"0.9rem"},children:e.jsx("button",{type:"button",onClick:K,disabled:W,style:{padding:"0.6rem 1.1rem",borderRadius:"8px",border:"none",background:"#16a34a",color:"white",cursor:W?"not-allowed":"pointer"},children:W?"Enviando...":"Enviar plantilla"})})]})]})]})]})},Kv=[{key:"categorias",label:"Categoras",descripcion:"Carga masiva de categoras (crea o actualiza por ID o nombre)."},{key:"productos",label:"Productos",descripcion:"Carga masiva de productos. Si no hay ID, se busca por nombre y categora."},{key:"salones",label:"Salones",descripcion:"Carga masiva de salones (crea o actualiza por ID o nombre)."},{key:"planes",label:"Planes",descripcion:"Carga masiva de planes (crea o actualiza por ID o nombre)."}],Qv=()=>{const{toasts:r,removeToast:t,success:o,error:n}=Ar(),[i,s]=c.useState({}),[a,d]=c.useState({}),[u,l]=c.useState({}),f=(z,b)=>{s(w=>({...w,[z]:b}))},g=async z=>{var b,w;try{const k=await Sp.downloadTemplate(z),j=window.URL.createObjectURL(new Blob([k])),p=document.createElement("a");p.href=j,p.setAttribute("download",`plantilla_${z}.xlsx`),document.body.appendChild(p),p.click(),p.remove(),window.URL.revokeObjectURL(j)}catch(k){const j=((w=(b=k.response)==null?void 0:b.data)==null?void 0:w.error)||"No se pudo descargar la plantilla";n(j)}},y=async z=>{var w,k;const b=i[z];if(!b){n("Selecciona un archivo antes de subir.");return}try{l(p=>({...p,[z]:!0}));const j=await Sp.upload(z,b);d(p=>({...p,[z]:j})),o(`Carga de ${z} completada.`)}catch(j){const p=((k=(w=j.response)==null?void 0:w.data)==null?void 0:k.error)||"No se pudo procesar el archivo";n(p)}finally{l(j=>({...j,[z]:!1}))}};return e.jsxs("div",{children:[e.jsx(Lr,{toasts:r,removeToast:t}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:"700",marginBottom:"0.4rem"},children:"Carga masiva"}),e.jsx("p",{style:{color:"#6b7280"},children:"Descarga la plantilla, llena los datos y sube el archivo para crear o actualizar registros existentes."})]}),e.jsx("div",{style:{display:"grid",gap:"1.5rem"},children:Kv.map(z=>{const b=a[z.key];return e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",border:"1px solid #e5e7eb",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.08)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[e.jsx(jt,{size:20,color:"#6366f1"}),e.jsx("h2",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700"},children:z.label})]}),e.jsx("p",{style:{margin:"0 0 1rem 0",color:"#6b7280"},children:z.descripcion}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem",alignItems:"center"},children:[e.jsxs("button",{type:"button",onClick:()=>g(z.key),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.9rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",backgroundColor:"#f9fafb",cursor:"pointer",fontWeight:"600"},children:[e.jsx(no,{size:16}),"Descargar plantilla"]}),e.jsx("input",{type:"file",accept:".xlsx",onChange:w=>f(z.key,w.target.files[0])}),e.jsxs("button",{type:"button",onClick:()=>y(z.key),disabled:u[z.key],style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",backgroundColor:u[z.key]?"#9ca3af":"#10b981",color:"white",cursor:u[z.key]?"not-allowed":"pointer",fontWeight:"600"},children:[e.jsx(Tg,{size:16}),u[z.key]?"Cargando...":"Subir archivo"]})]}),b&&e.jsxs("div",{style:{marginTop:"1rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",padding:"1rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:b.creados})," creados"]}),e.jsxs("div",{children:[e.jsx("strong",{children:b.actualizados})," actualizados"]}),e.jsxs("div",{children:[e.jsx("strong",{children:b.omitidos})," omitidos"]}),e.jsxs("div",{children:[e.jsx("strong",{children:(b.errores||[]).length})," con error"]})]}),(b.errores||[]).length>0&&e.jsxs("div",{style:{marginTop:"0.75rem",color:"#b91c1c",fontSize:"0.85rem"},children:[b.errores.slice(0,5).map((w,k)=>e.jsxs("div",{children:["Fila ",w.fila,": ",w.error]},`${z.key}-${k}`)),b.errores.length>5&&e.jsx("div",{children:"Hay ms errores, revisa el archivo para corregirlos."})]})]})]},z.key)})})]})},Xv=({children:r})=>{const{isAuthenticated:t,loading:o}=st();return o?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx("div",{children:"Cargando..."})}):t?r:e.jsx(vl,{to:"/login"})},Jv=({children:r})=>{const{isAuthenticated:t,loading:o}=st();return o?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx("div",{children:"Cargando..."})}):t?e.jsx(vl,{to:"/inicio"}):r};function Zv(){return e.jsxs(Vb,{children:[e.jsx(pr,{path:"/",element:e.jsx(Ip,{})}),e.jsx(pr,{path:"/login",element:e.jsx(Jv,{children:e.jsx(xv,{})})}),e.jsxs(pr,{element:e.jsx(Xv,{children:e.jsx(Cv,{})}),children:[e.jsx(pr,{path:"dashboard",element:e.jsx(vl,{to:"/inicio",replace:!0})}),e.jsx(pr,{path:"inicio",element:e.jsx(Cr,{allowedRoles:[T.ADMIN,T.MANAGER,T.COORDINATOR,T.CLIENT],children:e.jsx(Ip,{})})}),e.jsx(pr,{path:"calendario",element:e.jsx(Cr,{moduleKey:Be.CALENDARIO,allowedRoles:[T.ADMIN,T.MANAGER,T.COORDINATOR],children:e.jsx(zv,{})})}),e.jsx(pr,{path:"mi-evento",element:e.jsx(Cr,{moduleKey:Be.PORTAL_CLIENTE,allowedRoles:[T.CLIENT],children:e.jsx(Ev,{})})}),e.jsx(pr,{path:"perfil",element:e.jsx(Cr,{moduleKey:Be.PERFIL,allowedRoles:[T.ADMIN,T.MANAGER,T.COORDINATOR,T.CLIENT],children:e.jsx(Rv,{})})}),e.jsx(pr,{path:"eventos",element:e.jsx(Cr,{moduleKey:Be.EVENTOS,allowedRoles:[T.ADMIN,T.MANAGER,T.COORDINATOR],children:e.jsx(Sv,{})})}),e.jsx(pr,{path:"eventos/nuevo",element:e.jsx(Cr,{moduleKey:Be.EVENTOS,allowedRoles:[T.ADMIN,T.MANAGER,T.COORDINATOR],children:e.jsx(Wp,{})})}),e.jsx(pr,{path:"eventos/editar/:id",element:e.jsx(Cr,{moduleKey:Be.EVENTOS,allowedRoles:[T.ADMIN,T.MANAGER,T.COORDINATOR],children:e.jsx(Wp,{})})}),e.jsx(pr,{path:"eventos/:id",element:e.jsx(Cr,{allowedRoles:[T.ADMIN,T.MANAGER,T.COORDINATOR,T.CLIENT],children:e.jsx(_v,{})})}),e.jsx(pr,{path:"clientes",element:e.jsx(Cr,{moduleKey:Be.CLIENTES,allowedRoles:[T.ADMIN,T.MANAGER,T.COORDINATOR],children:e.jsx(Av,{})})}),e.jsx(pr,{path:"productos",element:e.jsx(Cr,{moduleKey:Be.PRODUCTOS,allowedRoles:[T.ADMIN,T.MANAGER,T.COORDINATOR],children:e.jsx(Wv,{})})}),e.jsx(pr,{path:"categorias",element:e.jsx(Cr,{moduleKey:Be.CATEGORIAS,allowedRoles:[T.ADMIN,T.MANAGER,T.COORDINATOR],children:e.jsx(Tv,{})})}),e.jsx(pr,{path:"planes",element:e.jsx(Cr,{moduleKey:Be.PLANES,allowedRoles:[T.ADMIN,T.MANAGER,T.COORDINATOR],children:e.jsx(Mv,{})})}),e.jsx(pr,{path:"pagos",element:e.jsx(Cr,{moduleKey:Be.PAGOS,allowedRoles:[T.ADMIN,T.MANAGER,T.COORDINATOR],children:e.jsx(Pv,{})})}),e.jsx(pr,{path:"pagos/evento/:id",element:e.jsx(Cr,{moduleKey:Be.PAGOS,allowedRoles:[T.ADMIN,T.MANAGER,T.COORDINATOR],children:e.jsx(Nv,{})})}),e.jsx(pr,{path:"cuentas",element:e.jsx(Cr,{moduleKey:Be.CUENTAS,allowedRoles:[T.ADMIN,T.MANAGER],children:e.jsx(Dv,{})})}),e.jsx(pr,{path:"inventario",element:e.jsx(Cr,{moduleKey:Be.INVENTARIO,allowedRoles:[T.ADMIN,T.MANAGER,T.COORDINATOR],children:e.jsx(Bv,{})})}),e.jsx(pr,{path:"salones",element:e.jsx(Cr,{moduleKey:Be.SALONES,allowedRoles:[T.ADMIN,T.MANAGER,T.COORDINATOR],children:e.jsx(Ov,{})})}),e.jsx(pr,{path:"reportes",element:e.jsx(Cr,{moduleKey:Be.REPORTES,allowedRoles:[T.ADMIN,T.MANAGER,T.COORDINATOR],children:e.jsx(Lv,{})})}),e.jsx(pr,{path:"notificaciones-nativas",element:e.jsx(Cr,{moduleKey:Be.NOTIFICACIONES_NATIVAS,allowedRoles:[T.ADMIN,T.MANAGER],children:e.jsx(Uv,{})})}),e.jsx(pr,{path:"notificaciones-nativas/:tipo",element:e.jsx(Cr,{moduleKey:Be.NOTIFICACIONES_NATIVAS,allowedRoles:[T.ADMIN,T.MANAGER],children:e.jsx(Gv,{})})}),e.jsx(pr,{path:"configuraciones/integraciones-whatsapp",element:e.jsx(Cr,{moduleKey:Be.INTEGRACIONES,allowedRoles:[T.ADMIN,T.MANAGER],children:e.jsx(Pg,{})})}),e.jsx(pr,{path:"configuraciones/whatsapp-chat",element:e.jsx(Cr,{moduleKey:Be.WHATSAPP_CHAT,allowedRoles:[T.ADMIN,T.MANAGER],children:e.jsx(Hv,{})})}),e.jsx(pr,{path:"configuraciones/whatsapp-panel",element:e.jsx(Cr,{moduleKey:Be.WHATSAPP_METRICAS,allowedRoles:[T.ADMIN,T.MANAGER],children:e.jsx(Vv,{})})}),e.jsx(pr,{path:"configuraciones/whatsapp-plantillas",element:e.jsx(Cr,{moduleKey:Be.WHATSAPP_TEMPLATES,allowedRoles:[T.ADMIN,T.MANAGER],children:e.jsx(Yv,{})})}),e.jsx(pr,{path:"configuraciones/carga-masiva",element:e.jsx(Cr,{moduleKey:Be.CARGA_MASIVA,allowedRoles:[T.ADMIN,T.MANAGER],children:e.jsx(Qv,{})})}),e.jsx(pr,{path:"configuraciones/limpieza-datos",element:e.jsx(Cr,{moduleKey:Be.CONFIG_DATOS,allowedRoles:[T.ADMIN,T.MANAGER],children:e.jsx(qv,{})})}),e.jsx(pr,{path:"usuarios",element:e.jsx(Cr,{moduleKey:Be.USUARIOS,allowedRoles:[T.ADMIN,T.MANAGER],children:e.jsx(Fv,{})})}),e.jsx(pr,{path:"permisos",element:e.jsx(Cr,{moduleKey:Be.PERMISOS,allowedRoles:[T.ADMIN],children:e.jsx($v,{})})})]})]})}function ej(){return e.jsx(P5,{children:e.jsx(Zb,{children:e.jsx(Zv,{})})})}pd.createRoot(document.getElementById("root")).render(e.jsx(ka.StrictMode,{children:e.jsx(ej,{})}));
