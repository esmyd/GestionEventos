(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=o(i);fetch(i.href,a)}})();function Sh(r,t){for(var o=0;o<t.length;o++){const n=t[o];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();function Ch(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Bp={exports:{}},os={},Pp={exports:{}},cr={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var _a=Symbol.for("react.element"),kh=Symbol.for("react.portal"),_h=Symbol.for("react.fragment"),zh=Symbol.for("react.strict_mode"),Rh=Symbol.for("react.profiler"),Eh=Symbol.for("react.provider"),Wh=Symbol.for("react.context"),Ah=Symbol.for("react.forward_ref"),Ih=Symbol.for("react.suspense"),Th=Symbol.for("react.memo"),Nh=Symbol.for("react.lazy"),$u=Symbol.iterator;function Bh(r){return r===null||typeof r!="object"?null:(r=$u&&r[$u]||r["@@iterator"],typeof r=="function"?r:null)}var Dp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mp=Object.assign,Op={};function vi(r,t,o){this.props=r,this.context=t,this.refs=Op,this.updater=o||Dp}vi.prototype.isReactComponent={};vi.prototype.setState=function(r,t){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,t,"setState")};vi.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function Lp(){}Lp.prototype=vi.prototype;function hc(r,t,o){this.props=r,this.context=t,this.refs=Op,this.updater=o||Dp}var bc=hc.prototype=new Lp;bc.constructor=hc;Mp(bc,vi.prototype);bc.isPureReactComponent=!0;var Uu=Array.isArray,Fp=Object.prototype.hasOwnProperty,xc={current:null},$p={key:!0,ref:!0,__self:!0,__source:!0};function Up(r,t,o){var n,i={},a=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)Fp.call(t,n)&&!$p.hasOwnProperty(n)&&(i[n]=t[n]);var u=arguments.length-2;if(u===1)i.children=o;else if(1<u){for(var s=Array(u),d=0;d<u;d++)s[d]=arguments[d+2];i.children=s}if(r&&r.defaultProps)for(n in u=r.defaultProps,u)i[n]===void 0&&(i[n]=u[n]);return{$$typeof:_a,type:r,key:a,ref:l,props:i,_owner:xc.current}}function Ph(r,t){return{$$typeof:_a,type:r.type,key:t,ref:r.ref,props:r.props,_owner:r._owner}}function yc(r){return typeof r=="object"&&r!==null&&r.$$typeof===_a}function Dh(r){var t={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(o){return t[o]})}var Gu=/\/+/g;function Bs(r,t){return typeof r=="object"&&r!==null&&r.key!=null?Dh(""+r.key):t.toString(36)}function ul(r,t,o,n,i){var a=typeof r;(a==="undefined"||a==="boolean")&&(r=null);var l=!1;if(r===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(r.$$typeof){case _a:case kh:l=!0}}if(l)return l=r,i=i(l),r=n===""?"."+Bs(l,0):n,Uu(i)?(o="",r!=null&&(o=r.replace(Gu,"$&/")+"/"),ul(i,t,o,"",function(d){return d})):i!=null&&(yc(i)&&(i=Ph(i,o+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Gu,"$&/")+"/")+r)),t.push(i)),1;if(l=0,n=n===""?".":n+":",Uu(r))for(var u=0;u<r.length;u++){a=r[u];var s=n+Bs(a,u);l+=ul(a,t,o,s,i)}else if(s=Bh(r),typeof s=="function")for(r=s.call(r),u=0;!(a=r.next()).done;)a=a.value,s=n+Bs(a,u++),l+=ul(a,t,o,s,i);else if(a==="object")throw t=String(r),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Ua(r,t,o){if(r==null)return r;var n=[],i=0;return ul(r,n,"","",function(a){return t.call(o,a,i++)}),n}function Mh(r){if(r._status===-1){var t=r._result;t=t(),t.then(function(o){(r._status===0||r._status===-1)&&(r._status=1,r._result=o)},function(o){(r._status===0||r._status===-1)&&(r._status=2,r._result=o)}),r._status===-1&&(r._status=0,r._result=t)}if(r._status===1)return r._result.default;throw r._result}var Wt={current:null},ml={transition:null},Oh={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:ml,ReactCurrentOwner:xc};function Gp(){throw Error("act(...) is not supported in production builds of React.")}cr.Children={map:Ua,forEach:function(r,t,o){Ua(r,function(){t.apply(this,arguments)},o)},count:function(r){var t=0;return Ua(r,function(){t++}),t},toArray:function(r){return Ua(r,function(t){return t})||[]},only:function(r){if(!yc(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};cr.Component=vi;cr.Fragment=_h;cr.Profiler=Rh;cr.PureComponent=hc;cr.StrictMode=zh;cr.Suspense=Ih;cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oh;cr.act=Gp;cr.cloneElement=function(r,t,o){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=Mp({},r.props),i=r.key,a=r.ref,l=r._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=xc.current),t.key!==void 0&&(i=""+t.key),r.type&&r.type.defaultProps)var u=r.type.defaultProps;for(s in t)Fp.call(t,s)&&!$p.hasOwnProperty(s)&&(n[s]=t[s]===void 0&&u!==void 0?u[s]:t[s])}var s=arguments.length-2;if(s===1)n.children=o;else if(1<s){u=Array(s);for(var d=0;d<s;d++)u[d]=arguments[d+2];n.children=u}return{$$typeof:_a,type:r.type,key:i,ref:a,props:n,_owner:l}};cr.createContext=function(r){return r={$$typeof:Wh,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:Eh,_context:r},r.Consumer=r};cr.createElement=Up;cr.createFactory=function(r){var t=Up.bind(null,r);return t.type=r,t};cr.createRef=function(){return{current:null}};cr.forwardRef=function(r){return{$$typeof:Ah,render:r}};cr.isValidElement=yc;cr.lazy=function(r){return{$$typeof:Nh,_payload:{_status:-1,_result:r},_init:Mh}};cr.memo=function(r,t){return{$$typeof:Th,type:r,compare:t===void 0?null:t}};cr.startTransition=function(r){var t=ml.transition;ml.transition={};try{r()}finally{ml.transition=t}};cr.unstable_act=Gp;cr.useCallback=function(r,t){return Wt.current.useCallback(r,t)};cr.useContext=function(r){return Wt.current.useContext(r)};cr.useDebugValue=function(){};cr.useDeferredValue=function(r){return Wt.current.useDeferredValue(r)};cr.useEffect=function(r,t){return Wt.current.useEffect(r,t)};cr.useId=function(){return Wt.current.useId()};cr.useImperativeHandle=function(r,t,o){return Wt.current.useImperativeHandle(r,t,o)};cr.useInsertionEffect=function(r,t){return Wt.current.useInsertionEffect(r,t)};cr.useLayoutEffect=function(r,t){return Wt.current.useLayoutEffect(r,t)};cr.useMemo=function(r,t){return Wt.current.useMemo(r,t)};cr.useReducer=function(r,t,o){return Wt.current.useReducer(r,t,o)};cr.useRef=function(r){return Wt.current.useRef(r)};cr.useState=function(r){return Wt.current.useState(r)};cr.useSyncExternalStore=function(r,t,o){return Wt.current.useSyncExternalStore(r,t,o)};cr.useTransition=function(){return Wt.current.useTransition()};cr.version="18.3.1";Pp.exports=cr;var c=Pp.exports;const _l=Ch(c),Lh=Sh({__proto__:null,default:_l},[c]);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Fh=c,$h=Symbol.for("react.element"),Uh=Symbol.for("react.fragment"),Gh=Object.prototype.hasOwnProperty,Hh=Fh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qh={key:!0,ref:!0,__self:!0,__source:!0};function Hp(r,t,o){var n,i={},a=null,l=null;o!==void 0&&(a=""+o),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)Gh.call(t,n)&&!qh.hasOwnProperty(n)&&(i[n]=t[n]);if(r&&r.defaultProps)for(n in t=r.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:$h,type:r,key:a,ref:l,props:i,_owner:Hh.current}}os.Fragment=Uh;os.jsx=Hp;os.jsxs=Hp;Bp.exports=os;var e=Bp.exports,fd={},qp={exports:{}},qt={},Vp={exports:{}},Yp={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(r){function t(W,Y){var D=W.length;W.push(Y);e:for(;0<D;){var oe=D-1>>>1,K=W[oe];if(0<i(K,Y))W[oe]=Y,W[D]=K,D=oe;else break e}}function o(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var Y=W[0],D=W.pop();if(D!==Y){W[0]=D;e:for(var oe=0,K=W.length,V=K>>>1;oe<V;){var F=2*(oe+1)-1,se=W[F],me=F+1,ie=W[me];if(0>i(se,D))me<K&&0>i(ie,se)?(W[oe]=ie,W[me]=D,oe=me):(W[oe]=se,W[F]=D,oe=F);else if(me<K&&0>i(ie,D))W[oe]=ie,W[me]=D,oe=me;else break e}}return Y}function i(W,Y){var D=W.sortIndex-Y.sortIndex;return D!==0?D:W.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();r.unstable_now=function(){return l.now()-u}}var s=[],d=[],f=1,x=null,h=3,S=!1,C=!1,j=!1,P=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(W){for(var Y=o(d);Y!==null;){if(Y.callback===null)n(d);else if(Y.startTime<=W)n(d),Y.sortIndex=Y.expirationTime,t(s,Y);else break;Y=o(d)}}function k(W){if(j=!1,y(W),!C)if(o(s)!==null)C=!0,O(U);else{var Y=o(d);Y!==null&&re(k,Y.startTime-W)}}function U(W,Y){C=!1,j&&(j=!1,v(w),w=-1),S=!0;var D=h;try{for(y(Y),x=o(s);x!==null&&(!(x.expirationTime>Y)||W&&!E());){var oe=x.callback;if(typeof oe=="function"){x.callback=null,h=x.priorityLevel;var K=oe(x.expirationTime<=Y);Y=r.unstable_now(),typeof K=="function"?x.callback=K:x===o(s)&&n(s),y(Y)}else n(s);x=o(s)}if(x!==null)var V=!0;else{var F=o(d);F!==null&&re(k,F.startTime-Y),V=!1}return V}finally{x=null,h=D,S=!1}}var X=!1,R=null,w=-1,B=5,q=-1;function E(){return!(r.unstable_now()-q<B)}function T(){if(R!==null){var W=r.unstable_now();q=W;var Y=!0;try{Y=R(!0,W)}finally{Y?ee():(X=!1,R=null)}}else X=!1}var ee;if(typeof m=="function")ee=function(){m(T)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,G=H.port2;H.port1.onmessage=T,ee=function(){G.postMessage(null)}}else ee=function(){P(T,0)};function O(W){R=W,X||(X=!0,ee())}function re(W,Y){w=P(function(){W(r.unstable_now())},Y)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_continueExecution=function(){C||S||(C=!0,O(U))},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return h},r.unstable_getFirstCallbackNode=function(){return o(s)},r.unstable_next=function(W){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var D=h;h=Y;try{return W()}finally{h=D}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(W,Y){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var D=h;h=W;try{return Y()}finally{h=D}},r.unstable_scheduleCallback=function(W,Y,D){var oe=r.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?oe+D:oe):D=oe,W){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=D+K,W={id:f++,callback:Y,priorityLevel:W,startTime:D,expirationTime:K,sortIndex:-1},D>oe?(W.sortIndex=D,t(d,W),o(s)===null&&W===o(d)&&(j?(v(w),w=-1):j=!0,re(k,D-oe))):(W.sortIndex=K,t(s,W),C||S||(C=!0,O(U))),W},r.unstable_shouldYield=E,r.unstable_wrapCallback=function(W){var Y=h;return function(){var D=h;h=Y;try{return W.apply(this,arguments)}finally{h=D}}}})(Yp);Vp.exports=Yp;var Vh=Vp.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Yh=c,Ht=Vh;function _e(r){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+r,o=1;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+r+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kp=new Set,aa={};function Tn(r,t){ui(r,t),ui(r+"Capture",t)}function ui(r,t){for(aa[r]=t,r=0;r<t.length;r++)Kp.add(t[r])}var Po=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gd=Object.prototype.hasOwnProperty,Kh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hu={},qu={};function Zh(r){return gd.call(qu,r)?!0:gd.call(Hu,r)?!1:Kh.test(r)?qu[r]=!0:(Hu[r]=!0,!1)}function Jh(r,t,o,n){if(o!==null&&o.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:o!==null?!o.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function Qh(r,t,o,n){if(t===null||typeof t>"u"||Jh(r,t,o,n))return!0;if(n)return!1;if(o!==null)switch(o.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function At(r,t,o,n,i,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=o,this.propertyName=r,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){ft[r]=new At(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var t=r[0];ft[t]=new At(t,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){ft[r]=new At(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){ft[r]=new At(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){ft[r]=new At(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){ft[r]=new At(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){ft[r]=new At(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){ft[r]=new At(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){ft[r]=new At(r,5,!1,r.toLowerCase(),null,!1,!1)});var vc=/[\-:]([a-z])/g;function jc(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var t=r.replace(vc,jc);ft[t]=new At(t,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var t=r.replace(vc,jc);ft[t]=new At(t,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var t=r.replace(vc,jc);ft[t]=new At(t,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){ft[r]=new At(r,1,!1,r.toLowerCase(),null,!1,!1)});ft.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){ft[r]=new At(r,1,!1,r.toLowerCase(),null,!0,!0)});function wc(r,t,o,n){var i=ft.hasOwnProperty(t)?ft[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Qh(t,o,i,n)&&(o=null),n||i===null?Zh(t)&&(o===null?r.removeAttribute(t):r.setAttribute(t,""+o)):i.mustUseProperty?r[i.propertyName]=o===null?i.type===3?!1:"":o:(t=i.attributeName,n=i.attributeNamespace,o===null?r.removeAttribute(t):(i=i.type,o=i===3||i===4&&o===!0?"":""+o,n?r.setAttributeNS(n,t,o):r.setAttribute(t,o))))}var Lo=Yh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ga=Symbol.for("react.element"),Gn=Symbol.for("react.portal"),Hn=Symbol.for("react.fragment"),Sc=Symbol.for("react.strict_mode"),hd=Symbol.for("react.profiler"),Zp=Symbol.for("react.provider"),Jp=Symbol.for("react.context"),Cc=Symbol.for("react.forward_ref"),bd=Symbol.for("react.suspense"),xd=Symbol.for("react.suspense_list"),kc=Symbol.for("react.memo"),$o=Symbol.for("react.lazy"),Qp=Symbol.for("react.offscreen"),Vu=Symbol.iterator;function Ti(r){return r===null||typeof r!="object"?null:(r=Vu&&r[Vu]||r["@@iterator"],typeof r=="function"?r:null)}var Fr=Object.assign,Ps;function Gi(r){if(Ps===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);Ps=t&&t[1]||""}return`
`+Ps+r}var Ds=!1;function Ms(r,t){if(!r||Ds)return"";Ds=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(r,[],t)}else{try{t.call()}catch(d){n=d}r.call(t.prototype)}else{try{throw Error()}catch(d){n=d}r()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=n.stack.split(`
`),l=i.length-1,u=a.length-1;1<=l&&0<=u&&i[l]!==a[u];)u--;for(;1<=l&&0<=u;l--,u--)if(i[l]!==a[u]){if(l!==1||u!==1)do if(l--,u--,0>u||i[l]!==a[u]){var s=`
`+i[l].replace(" at new "," at ");return r.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",r.displayName)),s}while(1<=l&&0<=u);break}}}finally{Ds=!1,Error.prepareStackTrace=o}return(r=r?r.displayName||r.name:"")?Gi(r):""}function Xh(r){switch(r.tag){case 5:return Gi(r.type);case 16:return Gi("Lazy");case 13:return Gi("Suspense");case 19:return Gi("SuspenseList");case 0:case 2:case 15:return r=Ms(r.type,!1),r;case 11:return r=Ms(r.type.render,!1),r;case 1:return r=Ms(r.type,!0),r;default:return""}}function yd(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Hn:return"Fragment";case Gn:return"Portal";case hd:return"Profiler";case Sc:return"StrictMode";case bd:return"Suspense";case xd:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Jp:return(r.displayName||"Context")+".Consumer";case Zp:return(r._context.displayName||"Context")+".Provider";case Cc:var t=r.render;return r=r.displayName,r||(r=t.displayName||t.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case kc:return t=r.displayName||null,t!==null?t:yd(r.type)||"Memo";case $o:t=r._payload,r=r._init;try{return yd(r(t))}catch{}}return null}function eb(r){var t=r.type;switch(r.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=t.render,r=r.displayName||r.name||"",t.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yd(t);case 8:return t===Sc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ln(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Xp(r){var t=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rb(r){var t=Xp(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,t),n=""+r[t];if(!r.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var i=o.get,a=o.set;return Object.defineProperty(r,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){n=""+l,a.call(this,l)}}),Object.defineProperty(r,t,{enumerable:o.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){r._valueTracker=null,delete r[t]}}}}function Ha(r){r._valueTracker||(r._valueTracker=rb(r))}function e0(r){if(!r)return!1;var t=r._valueTracker;if(!t)return!0;var o=t.getValue(),n="";return r&&(n=Xp(r)?r.checked?"true":"false":r.value),r=n,r!==o?(t.setValue(r),!0):!1}function zl(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function vd(r,t){var o=t.checked;return Fr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??r._wrapperState.initialChecked})}function Yu(r,t){var o=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;o=ln(t.value!=null?t.value:o),r._wrapperState={initialChecked:n,initialValue:o,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function r0(r,t){t=t.checked,t!=null&&wc(r,"checked",t,!1)}function jd(r,t){r0(r,t);var o=ln(t.value),n=t.type;if(o!=null)n==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+o):r.value!==""+o&&(r.value=""+o);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}t.hasOwnProperty("value")?wd(r,t.type,o):t.hasOwnProperty("defaultValue")&&wd(r,t.type,ln(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(r.defaultChecked=!!t.defaultChecked)}function Ku(r,t,o){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+r._wrapperState.initialValue,o||t===r.value||(r.value=t),r.defaultValue=t}o=r.name,o!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,o!==""&&(r.name=o)}function wd(r,t,o){(t!=="number"||zl(r.ownerDocument)!==r)&&(o==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+o&&(r.defaultValue=""+o))}var Hi=Array.isArray;function oi(r,t,o,n){if(r=r.options,t){t={};for(var i=0;i<o.length;i++)t["$"+o[i]]=!0;for(o=0;o<r.length;o++)i=t.hasOwnProperty("$"+r[o].value),r[o].selected!==i&&(r[o].selected=i),i&&n&&(r[o].defaultSelected=!0)}else{for(o=""+ln(o),t=null,i=0;i<r.length;i++){if(r[i].value===o){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}t!==null||r[i].disabled||(t=r[i])}t!==null&&(t.selected=!0)}}function Sd(r,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_e(91));return Fr({},t,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Zu(r,t){var o=t.value;if(o==null){if(o=t.children,t=t.defaultValue,o!=null){if(t!=null)throw Error(_e(92));if(Hi(o)){if(1<o.length)throw Error(_e(93));o=o[0]}t=o}t==null&&(t=""),o=t}r._wrapperState={initialValue:ln(o)}}function t0(r,t){var o=ln(t.value),n=ln(t.defaultValue);o!=null&&(o=""+o,o!==r.value&&(r.value=o),t.defaultValue==null&&r.defaultValue!==o&&(r.defaultValue=o)),n!=null&&(r.defaultValue=""+n)}function Ju(r){var t=r.textContent;t===r._wrapperState.initialValue&&t!==""&&t!==null&&(r.value=t)}function o0(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cd(r,t){return r==null||r==="http://www.w3.org/1999/xhtml"?o0(t):r==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var qa,n0=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,o,n,i){MSApp.execUnsafeLocalFunction(function(){return r(t,o,n,i)})}:r}(function(r,t){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=t;else{for(qa=qa||document.createElement("div"),qa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qa.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;t.firstChild;)r.appendChild(t.firstChild)}});function la(r,t){if(t){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=t;return}}r.textContent=t}var Zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tb=["Webkit","ms","Moz","O"];Object.keys(Zi).forEach(function(r){tb.forEach(function(t){t=t+r.charAt(0).toUpperCase()+r.substring(1),Zi[t]=Zi[r]})});function i0(r,t,o){return t==null||typeof t=="boolean"||t===""?"":o||typeof t!="number"||t===0||Zi.hasOwnProperty(r)&&Zi[r]?(""+t).trim():t+"px"}function a0(r,t){r=r.style;for(var o in t)if(t.hasOwnProperty(o)){var n=o.indexOf("--")===0,i=i0(o,t[o],n);o==="float"&&(o="cssFloat"),n?r.setProperty(o,i):r[o]=i}}var ob=Fr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kd(r,t){if(t){if(ob[r]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_e(137,r));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_e(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_e(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_e(62))}}function _d(r,t){if(r.indexOf("-")===-1)return typeof t.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zd=null;function _c(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Rd=null,ni=null,ii=null;function Qu(r){if(r=Ea(r)){if(typeof Rd!="function")throw Error(_e(280));var t=r.stateNode;t&&(t=ss(t),Rd(r.stateNode,r.type,t))}}function l0(r){ni?ii?ii.push(r):ii=[r]:ni=r}function s0(){if(ni){var r=ni,t=ii;if(ii=ni=null,Qu(r),t)for(r=0;r<t.length;r++)Qu(t[r])}}function d0(r,t){return r(t)}function c0(){}var Os=!1;function u0(r,t,o){if(Os)return r(t,o);Os=!0;try{return d0(r,t,o)}finally{Os=!1,(ni!==null||ii!==null)&&(c0(),s0())}}function sa(r,t){var o=r.stateNode;if(o===null)return null;var n=ss(o);if(n===null)return null;o=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(_e(231,t,typeof o));return o}var Ed=!1;if(Po)try{var Ni={};Object.defineProperty(Ni,"passive",{get:function(){Ed=!0}}),window.addEventListener("test",Ni,Ni),window.removeEventListener("test",Ni,Ni)}catch{Ed=!1}function nb(r,t,o,n,i,a,l,u,s){var d=Array.prototype.slice.call(arguments,3);try{t.apply(o,d)}catch(f){this.onError(f)}}var Ji=!1,Rl=null,El=!1,Wd=null,ib={onError:function(r){Ji=!0,Rl=r}};function ab(r,t,o,n,i,a,l,u,s){Ji=!1,Rl=null,nb.apply(ib,arguments)}function lb(r,t,o,n,i,a,l,u,s){if(ab.apply(this,arguments),Ji){if(Ji){var d=Rl;Ji=!1,Rl=null}else throw Error(_e(198));El||(El=!0,Wd=d)}}function Nn(r){var t=r,o=r;if(r.alternate)for(;t.return;)t=t.return;else{r=t;do t=r,t.flags&4098&&(o=t.return),r=t.return;while(r)}return t.tag===3?o:null}function m0(r){if(r.tag===13){var t=r.memoizedState;if(t===null&&(r=r.alternate,r!==null&&(t=r.memoizedState)),t!==null)return t.dehydrated}return null}function Xu(r){if(Nn(r)!==r)throw Error(_e(188))}function sb(r){var t=r.alternate;if(!t){if(t=Nn(r),t===null)throw Error(_e(188));return t!==r?null:r}for(var o=r,n=t;;){var i=o.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){o=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===o)return Xu(i),r;if(a===n)return Xu(i),t;a=a.sibling}throw Error(_e(188))}if(o.return!==n.return)o=i,n=a;else{for(var l=!1,u=i.child;u;){if(u===o){l=!0,o=i,n=a;break}if(u===n){l=!0,n=i,o=a;break}u=u.sibling}if(!l){for(u=a.child;u;){if(u===o){l=!0,o=a,n=i;break}if(u===n){l=!0,n=a,o=i;break}u=u.sibling}if(!l)throw Error(_e(189))}}if(o.alternate!==n)throw Error(_e(190))}if(o.tag!==3)throw Error(_e(188));return o.stateNode.current===o?r:t}function p0(r){return r=sb(r),r!==null?f0(r):null}function f0(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var t=f0(r);if(t!==null)return t;r=r.sibling}return null}var g0=Ht.unstable_scheduleCallback,em=Ht.unstable_cancelCallback,db=Ht.unstable_shouldYield,cb=Ht.unstable_requestPaint,Kr=Ht.unstable_now,ub=Ht.unstable_getCurrentPriorityLevel,zc=Ht.unstable_ImmediatePriority,h0=Ht.unstable_UserBlockingPriority,Wl=Ht.unstable_NormalPriority,mb=Ht.unstable_LowPriority,b0=Ht.unstable_IdlePriority,ns=null,So=null;function pb(r){if(So&&typeof So.onCommitFiberRoot=="function")try{So.onCommitFiberRoot(ns,r,void 0,(r.current.flags&128)===128)}catch{}}var co=Math.clz32?Math.clz32:hb,fb=Math.log,gb=Math.LN2;function hb(r){return r>>>=0,r===0?32:31-(fb(r)/gb|0)|0}var Va=64,Ya=4194304;function qi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Al(r,t){var o=r.pendingLanes;if(o===0)return 0;var n=0,i=r.suspendedLanes,a=r.pingedLanes,l=o&268435455;if(l!==0){var u=l&~i;u!==0?n=qi(u):(a&=l,a!==0&&(n=qi(a)))}else l=o&~i,l!==0?n=qi(l):a!==0&&(n=qi(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=o&16),t=r.entangledLanes,t!==0)for(r=r.entanglements,t&=n;0<t;)o=31-co(t),i=1<<o,n|=r[o],t&=~i;return n}function bb(r,t){switch(r){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xb(r,t){for(var o=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,a=r.pendingLanes;0<a;){var l=31-co(a),u=1<<l,s=i[l];s===-1?(!(u&o)||u&n)&&(i[l]=bb(u,t)):s<=t&&(r.expiredLanes|=u),a&=~u}}function Ad(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function x0(){var r=Va;return Va<<=1,!(Va&4194240)&&(Va=64),r}function Ls(r){for(var t=[],o=0;31>o;o++)t.push(r);return t}function za(r,t,o){r.pendingLanes|=t,t!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,t=31-co(t),r[t]=o}function yb(r,t){var o=r.pendingLanes&~t;r.pendingLanes=t,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=t,r.mutableReadLanes&=t,r.entangledLanes&=t,t=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<o;){var i=31-co(o),a=1<<i;t[i]=0,n[i]=-1,r[i]=-1,o&=~a}}function Rc(r,t){var o=r.entangledLanes|=t;for(r=r.entanglements;o;){var n=31-co(o),i=1<<n;i&t|r[n]&t&&(r[n]|=t),o&=~i}}var vr=0;function y0(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var v0,Ec,j0,w0,S0,Id=!1,Ka=[],Zo=null,Jo=null,Qo=null,da=new Map,ca=new Map,Go=[],vb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rm(r,t){switch(r){case"focusin":case"focusout":Zo=null;break;case"dragenter":case"dragleave":Jo=null;break;case"mouseover":case"mouseout":Qo=null;break;case"pointerover":case"pointerout":da.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ca.delete(t.pointerId)}}function Bi(r,t,o,n,i,a){return r===null||r.nativeEvent!==a?(r={blockedOn:t,domEventName:o,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Ea(t),t!==null&&Ec(t)),r):(r.eventSystemFlags|=n,t=r.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),r)}function jb(r,t,o,n,i){switch(t){case"focusin":return Zo=Bi(Zo,r,t,o,n,i),!0;case"dragenter":return Jo=Bi(Jo,r,t,o,n,i),!0;case"mouseover":return Qo=Bi(Qo,r,t,o,n,i),!0;case"pointerover":var a=i.pointerId;return da.set(a,Bi(da.get(a)||null,r,t,o,n,i)),!0;case"gotpointercapture":return a=i.pointerId,ca.set(a,Bi(ca.get(a)||null,r,t,o,n,i)),!0}return!1}function C0(r){var t=hn(r.target);if(t!==null){var o=Nn(t);if(o!==null){if(t=o.tag,t===13){if(t=m0(o),t!==null){r.blockedOn=t,S0(r.priority,function(){j0(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function pl(r){if(r.blockedOn!==null)return!1;for(var t=r.targetContainers;0<t.length;){var o=Td(r.domEventName,r.eventSystemFlags,t[0],r.nativeEvent);if(o===null){o=r.nativeEvent;var n=new o.constructor(o.type,o);zd=n,o.target.dispatchEvent(n),zd=null}else return t=Ea(o),t!==null&&Ec(t),r.blockedOn=o,!1;t.shift()}return!0}function tm(r,t,o){pl(r)&&o.delete(t)}function wb(){Id=!1,Zo!==null&&pl(Zo)&&(Zo=null),Jo!==null&&pl(Jo)&&(Jo=null),Qo!==null&&pl(Qo)&&(Qo=null),da.forEach(tm),ca.forEach(tm)}function Pi(r,t){r.blockedOn===t&&(r.blockedOn=null,Id||(Id=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,wb)))}function ua(r){function t(i){return Pi(i,r)}if(0<Ka.length){Pi(Ka[0],r);for(var o=1;o<Ka.length;o++){var n=Ka[o];n.blockedOn===r&&(n.blockedOn=null)}}for(Zo!==null&&Pi(Zo,r),Jo!==null&&Pi(Jo,r),Qo!==null&&Pi(Qo,r),da.forEach(t),ca.forEach(t),o=0;o<Go.length;o++)n=Go[o],n.blockedOn===r&&(n.blockedOn=null);for(;0<Go.length&&(o=Go[0],o.blockedOn===null);)C0(o),o.blockedOn===null&&Go.shift()}var ai=Lo.ReactCurrentBatchConfig,Il=!0;function Sb(r,t,o,n){var i=vr,a=ai.transition;ai.transition=null;try{vr=1,Wc(r,t,o,n)}finally{vr=i,ai.transition=a}}function Cb(r,t,o,n){var i=vr,a=ai.transition;ai.transition=null;try{vr=4,Wc(r,t,o,n)}finally{vr=i,ai.transition=a}}function Wc(r,t,o,n){if(Il){var i=Td(r,t,o,n);if(i===null)Zs(r,t,n,Tl,o),rm(r,n);else if(jb(i,r,t,o,n))n.stopPropagation();else if(rm(r,n),t&4&&-1<vb.indexOf(r)){for(;i!==null;){var a=Ea(i);if(a!==null&&v0(a),a=Td(r,t,o,n),a===null&&Zs(r,t,n,Tl,o),a===i)break;i=a}i!==null&&n.stopPropagation()}else Zs(r,t,n,null,o)}}var Tl=null;function Td(r,t,o,n){if(Tl=null,r=_c(n),r=hn(r),r!==null)if(t=Nn(r),t===null)r=null;else if(o=t.tag,o===13){if(r=m0(t),r!==null)return r;r=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;r=null}else t!==r&&(r=null);return Tl=r,null}function k0(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ub()){case zc:return 1;case h0:return 4;case Wl:case mb:return 16;case b0:return 536870912;default:return 16}default:return 16}}var Vo=null,Ac=null,fl=null;function _0(){if(fl)return fl;var r,t=Ac,o=t.length,n,i="value"in Vo?Vo.value:Vo.textContent,a=i.length;for(r=0;r<o&&t[r]===i[r];r++);var l=o-r;for(n=1;n<=l&&t[o-n]===i[a-n];n++);return fl=i.slice(r,1<n?1-n:void 0)}function gl(r){var t=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&t===13&&(r=13)):r=t,r===10&&(r=13),32<=r||r===13?r:0}function Za(){return!0}function om(){return!1}function Vt(r){function t(o,n,i,a,l){this._reactName=o,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var u in r)r.hasOwnProperty(u)&&(o=r[u],this[u]=o?o(a):a[u]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Za:om,this.isPropagationStopped=om,this}return Fr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Za)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Za)},persist:function(){},isPersistent:Za}),t}var ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ic=Vt(ji),Ra=Fr({},ji,{view:0,detail:0}),kb=Vt(Ra),Fs,$s,Di,is=Fr({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Di&&(Di&&r.type==="mousemove"?(Fs=r.screenX-Di.screenX,$s=r.screenY-Di.screenY):$s=Fs=0,Di=r),Fs)},movementY:function(r){return"movementY"in r?r.movementY:$s}}),nm=Vt(is),_b=Fr({},is,{dataTransfer:0}),zb=Vt(_b),Rb=Fr({},Ra,{relatedTarget:0}),Us=Vt(Rb),Eb=Fr({},ji,{animationName:0,elapsedTime:0,pseudoElement:0}),Wb=Vt(Eb),Ab=Fr({},ji,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ib=Vt(Ab),Tb=Fr({},ji,{data:0}),im=Vt(Tb),Nb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Db(r){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(r):(r=Pb[r])?!!t[r]:!1}function Tc(){return Db}var Mb=Fr({},Ra,{key:function(r){if(r.key){var t=Nb[r.key]||r.key;if(t!=="Unidentified")return t}return r.type==="keypress"?(r=gl(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Bb[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tc,charCode:function(r){return r.type==="keypress"?gl(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?gl(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ob=Vt(Mb),Lb=Fr({},is,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),am=Vt(Lb),Fb=Fr({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tc}),$b=Vt(Fb),Ub=Fr({},ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gb=Vt(Ub),Hb=Fr({},is,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),qb=Vt(Hb),Vb=[9,13,27,32],Nc=Po&&"CompositionEvent"in window,Qi=null;Po&&"documentMode"in document&&(Qi=document.documentMode);var Yb=Po&&"TextEvent"in window&&!Qi,z0=Po&&(!Nc||Qi&&8<Qi&&11>=Qi),lm=" ",sm=!1;function R0(r,t){switch(r){case"keyup":return Vb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E0(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var qn=!1;function Kb(r,t){switch(r){case"compositionend":return E0(t);case"keypress":return t.which!==32?null:(sm=!0,lm);case"textInput":return r=t.data,r===lm&&sm?null:r;default:return null}}function Zb(r,t){if(qn)return r==="compositionend"||!Nc&&R0(r,t)?(r=_0(),fl=Ac=Vo=null,qn=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return z0&&t.locale!=="ko"?null:t.data;default:return null}}var Jb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dm(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t==="input"?!!Jb[r.type]:t==="textarea"}function W0(r,t,o,n){l0(n),t=Nl(t,"onChange"),0<t.length&&(o=new Ic("onChange","change",null,o,n),r.push({event:o,listeners:t}))}var Xi=null,ma=null;function Qb(r){F0(r,0)}function as(r){var t=Kn(r);if(e0(t))return r}function Xb(r,t){if(r==="change")return t}var A0=!1;if(Po){var Gs;if(Po){var Hs="oninput"in document;if(!Hs){var cm=document.createElement("div");cm.setAttribute("oninput","return;"),Hs=typeof cm.oninput=="function"}Gs=Hs}else Gs=!1;A0=Gs&&(!document.documentMode||9<document.documentMode)}function um(){Xi&&(Xi.detachEvent("onpropertychange",I0),ma=Xi=null)}function I0(r){if(r.propertyName==="value"&&as(ma)){var t=[];W0(t,ma,r,_c(r)),u0(Qb,t)}}function ex(r,t,o){r==="focusin"?(um(),Xi=t,ma=o,Xi.attachEvent("onpropertychange",I0)):r==="focusout"&&um()}function rx(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return as(ma)}function tx(r,t){if(r==="click")return as(t)}function ox(r,t){if(r==="input"||r==="change")return as(t)}function nx(r,t){return r===t&&(r!==0||1/r===1/t)||r!==r&&t!==t}var po=typeof Object.is=="function"?Object.is:nx;function pa(r,t){if(po(r,t))return!0;if(typeof r!="object"||r===null||typeof t!="object"||t===null)return!1;var o=Object.keys(r),n=Object.keys(t);if(o.length!==n.length)return!1;for(n=0;n<o.length;n++){var i=o[n];if(!gd.call(t,i)||!po(r[i],t[i]))return!1}return!0}function mm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function pm(r,t){var o=mm(r);r=0;for(var n;o;){if(o.nodeType===3){if(n=r+o.textContent.length,r<=t&&n>=t)return{node:o,offset:t-r};r=n}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=mm(o)}}function T0(r,t){return r&&t?r===t?!0:r&&r.nodeType===3?!1:t&&t.nodeType===3?T0(r,t.parentNode):"contains"in r?r.contains(t):r.compareDocumentPosition?!!(r.compareDocumentPosition(t)&16):!1:!1}function N0(){for(var r=window,t=zl();t instanceof r.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)r=t.contentWindow;else break;t=zl(r.document)}return t}function Bc(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t&&(t==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||t==="textarea"||r.contentEditable==="true")}function ix(r){var t=N0(),o=r.focusedElem,n=r.selectionRange;if(t!==o&&o&&o.ownerDocument&&T0(o.ownerDocument.documentElement,o)){if(n!==null&&Bc(o)){if(t=n.start,r=n.end,r===void 0&&(r=t),"selectionStart"in o)o.selectionStart=t,o.selectionEnd=Math.min(r,o.value.length);else if(r=(t=o.ownerDocument||document)&&t.defaultView||window,r.getSelection){r=r.getSelection();var i=o.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!r.extend&&a>n&&(i=n,n=a,a=i),i=pm(o,a);var l=pm(o,n);i&&l&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==l.node||r.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),r.removeAllRanges(),a>n?(r.addRange(t),r.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),r.addRange(t)))}}for(t=[],r=o;r=r.parentNode;)r.nodeType===1&&t.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<t.length;o++)r=t[o],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var ax=Po&&"documentMode"in document&&11>=document.documentMode,Vn=null,Nd=null,ea=null,Bd=!1;function fm(r,t,o){var n=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Bd||Vn==null||Vn!==zl(n)||(n=Vn,"selectionStart"in n&&Bc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ea&&pa(ea,n)||(ea=n,n=Nl(Nd,"onSelect"),0<n.length&&(t=new Ic("onSelect","select",null,t,o),r.push({event:t,listeners:n}),t.target=Vn)))}function Ja(r,t){var o={};return o[r.toLowerCase()]=t.toLowerCase(),o["Webkit"+r]="webkit"+t,o["Moz"+r]="moz"+t,o}var Yn={animationend:Ja("Animation","AnimationEnd"),animationiteration:Ja("Animation","AnimationIteration"),animationstart:Ja("Animation","AnimationStart"),transitionend:Ja("Transition","TransitionEnd")},qs={},B0={};Po&&(B0=document.createElement("div").style,"AnimationEvent"in window||(delete Yn.animationend.animation,delete Yn.animationiteration.animation,delete Yn.animationstart.animation),"TransitionEvent"in window||delete Yn.transitionend.transition);function ls(r){if(qs[r])return qs[r];if(!Yn[r])return r;var t=Yn[r],o;for(o in t)if(t.hasOwnProperty(o)&&o in B0)return qs[r]=t[o];return r}var P0=ls("animationend"),D0=ls("animationiteration"),M0=ls("animationstart"),O0=ls("transitionend"),L0=new Map,gm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cn(r,t){L0.set(r,t),Tn(t,[r])}for(var Vs=0;Vs<gm.length;Vs++){var Ys=gm[Vs],lx=Ys.toLowerCase(),sx=Ys[0].toUpperCase()+Ys.slice(1);cn(lx,"on"+sx)}cn(P0,"onAnimationEnd");cn(D0,"onAnimationIteration");cn(M0,"onAnimationStart");cn("dblclick","onDoubleClick");cn("focusin","onFocus");cn("focusout","onBlur");cn(O0,"onTransitionEnd");ui("onMouseEnter",["mouseout","mouseover"]);ui("onMouseLeave",["mouseout","mouseover"]);ui("onPointerEnter",["pointerout","pointerover"]);ui("onPointerLeave",["pointerout","pointerover"]);Tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vi));function hm(r,t,o){var n=r.type||"unknown-event";r.currentTarget=o,lb(n,t,void 0,r),r.currentTarget=null}function F0(r,t){t=(t&4)!==0;for(var o=0;o<r.length;o++){var n=r[o],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var l=n.length-1;0<=l;l--){var u=n[l],s=u.instance,d=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;hm(i,u,d),a=s}else for(l=0;l<n.length;l++){if(u=n[l],s=u.instance,d=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;hm(i,u,d),a=s}}}if(El)throw r=Wd,El=!1,Wd=null,r}function Wr(r,t){var o=t[Ld];o===void 0&&(o=t[Ld]=new Set);var n=r+"__bubble";o.has(n)||($0(t,r,2,!1),o.add(n))}function Ks(r,t,o){var n=0;t&&(n|=4),$0(o,r,n,t)}var Qa="_reactListening"+Math.random().toString(36).slice(2);function fa(r){if(!r[Qa]){r[Qa]=!0,Kp.forEach(function(o){o!=="selectionchange"&&(dx.has(o)||Ks(o,!1,r),Ks(o,!0,r))});var t=r.nodeType===9?r:r.ownerDocument;t===null||t[Qa]||(t[Qa]=!0,Ks("selectionchange",!1,t))}}function $0(r,t,o,n){switch(k0(t)){case 1:var i=Sb;break;case 4:i=Cb;break;default:i=Wc}o=i.bind(null,t,o,r),i=void 0,!Ed||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(t,o,{capture:!0,passive:i}):r.addEventListener(t,o,!0):i!==void 0?r.addEventListener(t,o,{passive:i}):r.addEventListener(t,o,!1)}function Zs(r,t,o,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var u=n.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(l===4)for(l=n.return;l!==null;){var s=l.tag;if((s===3||s===4)&&(s=l.stateNode.containerInfo,s===i||s.nodeType===8&&s.parentNode===i))return;l=l.return}for(;u!==null;){if(l=hn(u),l===null)return;if(s=l.tag,s===5||s===6){n=a=l;continue e}u=u.parentNode}}n=n.return}u0(function(){var d=a,f=_c(o),x=[];e:{var h=L0.get(r);if(h!==void 0){var S=Ic,C=r;switch(r){case"keypress":if(gl(o)===0)break e;case"keydown":case"keyup":S=Ob;break;case"focusin":C="focus",S=Us;break;case"focusout":C="blur",S=Us;break;case"beforeblur":case"afterblur":S=Us;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=nm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=zb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=$b;break;case P0:case D0:case M0:S=Wb;break;case O0:S=Gb;break;case"scroll":S=kb;break;case"wheel":S=qb;break;case"copy":case"cut":case"paste":S=Ib;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=am}var j=(t&4)!==0,P=!j&&r==="scroll",v=j?h!==null?h+"Capture":null:h;j=[];for(var m=d,y;m!==null;){y=m;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,v!==null&&(k=sa(m,v),k!=null&&j.push(ga(m,k,y)))),P)break;m=m.return}0<j.length&&(h=new S(h,C,null,o,f),x.push({event:h,listeners:j}))}}if(!(t&7)){e:{if(h=r==="mouseover"||r==="pointerover",S=r==="mouseout"||r==="pointerout",h&&o!==zd&&(C=o.relatedTarget||o.fromElement)&&(hn(C)||C[Do]))break e;if((S||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,S?(C=o.relatedTarget||o.toElement,S=d,C=C?hn(C):null,C!==null&&(P=Nn(C),C!==P||C.tag!==5&&C.tag!==6)&&(C=null)):(S=null,C=d),S!==C)){if(j=nm,k="onMouseLeave",v="onMouseEnter",m="mouse",(r==="pointerout"||r==="pointerover")&&(j=am,k="onPointerLeave",v="onPointerEnter",m="pointer"),P=S==null?h:Kn(S),y=C==null?h:Kn(C),h=new j(k,m+"leave",S,o,f),h.target=P,h.relatedTarget=y,k=null,hn(f)===d&&(j=new j(v,m+"enter",C,o,f),j.target=y,j.relatedTarget=P,k=j),P=k,S&&C)r:{for(j=S,v=C,m=0,y=j;y;y=$n(y))m++;for(y=0,k=v;k;k=$n(k))y++;for(;0<m-y;)j=$n(j),m--;for(;0<y-m;)v=$n(v),y--;for(;m--;){if(j===v||v!==null&&j===v.alternate)break r;j=$n(j),v=$n(v)}j=null}else j=null;S!==null&&bm(x,h,S,j,!1),C!==null&&P!==null&&bm(x,P,C,j,!0)}}e:{if(h=d?Kn(d):window,S=h.nodeName&&h.nodeName.toLowerCase(),S==="select"||S==="input"&&h.type==="file")var U=Xb;else if(dm(h))if(A0)U=ox;else{U=rx;var X=ex}else(S=h.nodeName)&&S.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(U=tx);if(U&&(U=U(r,d))){W0(x,U,o,f);break e}X&&X(r,h,d),r==="focusout"&&(X=h._wrapperState)&&X.controlled&&h.type==="number"&&wd(h,"number",h.value)}switch(X=d?Kn(d):window,r){case"focusin":(dm(X)||X.contentEditable==="true")&&(Vn=X,Nd=d,ea=null);break;case"focusout":ea=Nd=Vn=null;break;case"mousedown":Bd=!0;break;case"contextmenu":case"mouseup":case"dragend":Bd=!1,fm(x,o,f);break;case"selectionchange":if(ax)break;case"keydown":case"keyup":fm(x,o,f)}var R;if(Nc)e:{switch(r){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else qn?R0(r,o)&&(w="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(w="onCompositionStart");w&&(z0&&o.locale!=="ko"&&(qn||w!=="onCompositionStart"?w==="onCompositionEnd"&&qn&&(R=_0()):(Vo=f,Ac="value"in Vo?Vo.value:Vo.textContent,qn=!0)),X=Nl(d,w),0<X.length&&(w=new im(w,r,null,o,f),x.push({event:w,listeners:X}),R?w.data=R:(R=E0(o),R!==null&&(w.data=R)))),(R=Yb?Kb(r,o):Zb(r,o))&&(d=Nl(d,"onBeforeInput"),0<d.length&&(f=new im("onBeforeInput","beforeinput",null,o,f),x.push({event:f,listeners:d}),f.data=R))}F0(x,t)})}function ga(r,t,o){return{instance:r,listener:t,currentTarget:o}}function Nl(r,t){for(var o=t+"Capture",n=[];r!==null;){var i=r,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=sa(r,o),a!=null&&n.unshift(ga(r,a,i)),a=sa(r,t),a!=null&&n.push(ga(r,a,i))),r=r.return}return n}function $n(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function bm(r,t,o,n,i){for(var a=t._reactName,l=[];o!==null&&o!==n;){var u=o,s=u.alternate,d=u.stateNode;if(s!==null&&s===n)break;u.tag===5&&d!==null&&(u=d,i?(s=sa(o,a),s!=null&&l.unshift(ga(o,s,u))):i||(s=sa(o,a),s!=null&&l.push(ga(o,s,u)))),o=o.return}l.length!==0&&r.push({event:t,listeners:l})}var cx=/\r\n?/g,ux=/\u0000|\uFFFD/g;function xm(r){return(typeof r=="string"?r:""+r).replace(cx,`
`).replace(ux,"")}function Xa(r,t,o){if(t=xm(t),xm(r)!==t&&o)throw Error(_e(425))}function Bl(){}var Pd=null,Dd=null;function Md(r,t){return r==="textarea"||r==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Od=typeof setTimeout=="function"?setTimeout:void 0,mx=typeof clearTimeout=="function"?clearTimeout:void 0,ym=typeof Promise=="function"?Promise:void 0,px=typeof queueMicrotask=="function"?queueMicrotask:typeof ym<"u"?function(r){return ym.resolve(null).then(r).catch(fx)}:Od;function fx(r){setTimeout(function(){throw r})}function Js(r,t){var o=t,n=0;do{var i=o.nextSibling;if(r.removeChild(o),i&&i.nodeType===8)if(o=i.data,o==="/$"){if(n===0){r.removeChild(i),ua(t);return}n--}else o!=="$"&&o!=="$?"&&o!=="$!"||n++;o=i}while(o);ua(t)}function Xo(r){for(;r!=null;r=r.nextSibling){var t=r.nodeType;if(t===1||t===3)break;if(t===8){if(t=r.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return r}function vm(r){r=r.previousSibling;for(var t=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(t===0)return r;t--}else o==="/$"&&t++}r=r.previousSibling}return null}var wi=Math.random().toString(36).slice(2),wo="__reactFiber$"+wi,ha="__reactProps$"+wi,Do="__reactContainer$"+wi,Ld="__reactEvents$"+wi,gx="__reactListeners$"+wi,hx="__reactHandles$"+wi;function hn(r){var t=r[wo];if(t)return t;for(var o=r.parentNode;o;){if(t=o[Do]||o[wo]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(r=vm(r);r!==null;){if(o=r[wo])return o;r=vm(r)}return t}r=o,o=r.parentNode}return null}function Ea(r){return r=r[wo]||r[Do],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Kn(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(_e(33))}function ss(r){return r[ha]||null}var Fd=[],Zn=-1;function un(r){return{current:r}}function Ir(r){0>Zn||(r.current=Fd[Zn],Fd[Zn]=null,Zn--)}function kr(r,t){Zn++,Fd[Zn]=r.current,r.current=t}var sn={},wt=un(sn),Pt=un(!1),kn=sn;function mi(r,t){var o=r.type.contextTypes;if(!o)return sn;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in o)i[a]=t[a];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=i),i}function Dt(r){return r=r.childContextTypes,r!=null}function Pl(){Ir(Pt),Ir(wt)}function jm(r,t,o){if(wt.current!==sn)throw Error(_e(168));kr(wt,t),kr(Pt,o)}function U0(r,t,o){var n=r.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return o;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(_e(108,eb(r)||"Unknown",i));return Fr({},o,n)}function Dl(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||sn,kn=wt.current,kr(wt,r),kr(Pt,Pt.current),!0}function wm(r,t,o){var n=r.stateNode;if(!n)throw Error(_e(169));o?(r=U0(r,t,kn),n.__reactInternalMemoizedMergedChildContext=r,Ir(Pt),Ir(wt),kr(wt,r)):Ir(Pt),kr(Pt,o)}var Ao=null,ds=!1,Qs=!1;function G0(r){Ao===null?Ao=[r]:Ao.push(r)}function bx(r){ds=!0,G0(r)}function mn(){if(!Qs&&Ao!==null){Qs=!0;var r=0,t=vr;try{var o=Ao;for(vr=1;r<o.length;r++){var n=o[r];do n=n(!0);while(n!==null)}Ao=null,ds=!1}catch(i){throw Ao!==null&&(Ao=Ao.slice(r+1)),g0(zc,mn),i}finally{vr=t,Qs=!1}}return null}var Jn=[],Qn=0,Ml=null,Ol=0,Yt=[],Kt=0,_n=null,Io=1,To="";function fn(r,t){Jn[Qn++]=Ol,Jn[Qn++]=Ml,Ml=r,Ol=t}function H0(r,t,o){Yt[Kt++]=Io,Yt[Kt++]=To,Yt[Kt++]=_n,_n=r;var n=Io;r=To;var i=32-co(n)-1;n&=~(1<<i),o+=1;var a=32-co(t)+i;if(30<a){var l=i-i%5;a=(n&(1<<l)-1).toString(32),n>>=l,i-=l,Io=1<<32-co(t)+i|o<<i|n,To=a+r}else Io=1<<a|o<<i|n,To=r}function Pc(r){r.return!==null&&(fn(r,1),H0(r,1,0))}function Dc(r){for(;r===Ml;)Ml=Jn[--Qn],Jn[Qn]=null,Ol=Jn[--Qn],Jn[Qn]=null;for(;r===_n;)_n=Yt[--Kt],Yt[Kt]=null,To=Yt[--Kt],Yt[Kt]=null,Io=Yt[--Kt],Yt[Kt]=null}var Ut=null,$t=null,Tr=!1,lo=null;function q0(r,t){var o=Zt(5,null,null,0);o.elementType="DELETED",o.stateNode=t,o.return=r,t=r.deletions,t===null?(r.deletions=[o],r.flags|=16):t.push(o)}function Sm(r,t){switch(r.tag){case 5:var o=r.type;return t=t.nodeType!==1||o.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(r.stateNode=t,Ut=r,$t=Xo(t.firstChild),!0):!1;case 6:return t=r.pendingProps===""||t.nodeType!==3?null:t,t!==null?(r.stateNode=t,Ut=r,$t=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(o=_n!==null?{id:Io,overflow:To}:null,r.memoizedState={dehydrated:t,treeContext:o,retryLane:1073741824},o=Zt(18,null,null,0),o.stateNode=t,o.return=r,r.child=o,Ut=r,$t=null,!0):!1;default:return!1}}function $d(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Ud(r){if(Tr){var t=$t;if(t){var o=t;if(!Sm(r,t)){if($d(r))throw Error(_e(418));t=Xo(o.nextSibling);var n=Ut;t&&Sm(r,t)?q0(n,o):(r.flags=r.flags&-4097|2,Tr=!1,Ut=r)}}else{if($d(r))throw Error(_e(418));r.flags=r.flags&-4097|2,Tr=!1,Ut=r}}}function Cm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Ut=r}function el(r){if(r!==Ut)return!1;if(!Tr)return Cm(r),Tr=!0,!1;var t;if((t=r.tag!==3)&&!(t=r.tag!==5)&&(t=r.type,t=t!=="head"&&t!=="body"&&!Md(r.type,r.memoizedProps)),t&&(t=$t)){if($d(r))throw V0(),Error(_e(418));for(;t;)q0(r,t),t=Xo(t.nextSibling)}if(Cm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(_e(317));e:{for(r=r.nextSibling,t=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"){if(t===0){$t=Xo(r.nextSibling);break e}t--}else o!=="$"&&o!=="$!"&&o!=="$?"||t++}r=r.nextSibling}$t=null}}else $t=Ut?Xo(r.stateNode.nextSibling):null;return!0}function V0(){for(var r=$t;r;)r=Xo(r.nextSibling)}function pi(){$t=Ut=null,Tr=!1}function Mc(r){lo===null?lo=[r]:lo.push(r)}var xx=Lo.ReactCurrentBatchConfig;function Mi(r,t,o){if(r=o.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(_e(309));var n=o.stateNode}if(!n)throw Error(_e(147,r));var i=n,a=""+r;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var u=i.refs;l===null?delete u[a]:u[a]=l},t._stringRef=a,t)}if(typeof r!="string")throw Error(_e(284));if(!o._owner)throw Error(_e(290,r))}return r}function rl(r,t){throw r=Object.prototype.toString.call(t),Error(_e(31,r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r))}function km(r){var t=r._init;return t(r._payload)}function Y0(r){function t(v,m){if(r){var y=v.deletions;y===null?(v.deletions=[m],v.flags|=16):y.push(m)}}function o(v,m){if(!r)return null;for(;m!==null;)t(v,m),m=m.sibling;return null}function n(v,m){for(v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function i(v,m){return v=on(v,m),v.index=0,v.sibling=null,v}function a(v,m,y){return v.index=y,r?(y=v.alternate,y!==null?(y=y.index,y<m?(v.flags|=2,m):y):(v.flags|=2,m)):(v.flags|=1048576,m)}function l(v){return r&&v.alternate===null&&(v.flags|=2),v}function u(v,m,y,k){return m===null||m.tag!==6?(m=id(y,v.mode,k),m.return=v,m):(m=i(m,y),m.return=v,m)}function s(v,m,y,k){var U=y.type;return U===Hn?f(v,m,y.props.children,k,y.key):m!==null&&(m.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===$o&&km(U)===m.type)?(k=i(m,y.props),k.ref=Mi(v,m,y),k.return=v,k):(k=wl(y.type,y.key,y.props,null,v.mode,k),k.ref=Mi(v,m,y),k.return=v,k)}function d(v,m,y,k){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=ad(y,v.mode,k),m.return=v,m):(m=i(m,y.children||[]),m.return=v,m)}function f(v,m,y,k,U){return m===null||m.tag!==7?(m=Sn(y,v.mode,k,U),m.return=v,m):(m=i(m,y),m.return=v,m)}function x(v,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=id(""+m,v.mode,y),m.return=v,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ga:return y=wl(m.type,m.key,m.props,null,v.mode,y),y.ref=Mi(v,null,m),y.return=v,y;case Gn:return m=ad(m,v.mode,y),m.return=v,m;case $o:var k=m._init;return x(v,k(m._payload),y)}if(Hi(m)||Ti(m))return m=Sn(m,v.mode,y,null),m.return=v,m;rl(v,m)}return null}function h(v,m,y,k){var U=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return U!==null?null:u(v,m,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ga:return y.key===U?s(v,m,y,k):null;case Gn:return y.key===U?d(v,m,y,k):null;case $o:return U=y._init,h(v,m,U(y._payload),k)}if(Hi(y)||Ti(y))return U!==null?null:f(v,m,y,k,null);rl(v,y)}return null}function S(v,m,y,k,U){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(y)||null,u(m,v,""+k,U);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ga:return v=v.get(k.key===null?y:k.key)||null,s(m,v,k,U);case Gn:return v=v.get(k.key===null?y:k.key)||null,d(m,v,k,U);case $o:var X=k._init;return S(v,m,y,X(k._payload),U)}if(Hi(k)||Ti(k))return v=v.get(y)||null,f(m,v,k,U,null);rl(m,k)}return null}function C(v,m,y,k){for(var U=null,X=null,R=m,w=m=0,B=null;R!==null&&w<y.length;w++){R.index>w?(B=R,R=null):B=R.sibling;var q=h(v,R,y[w],k);if(q===null){R===null&&(R=B);break}r&&R&&q.alternate===null&&t(v,R),m=a(q,m,w),X===null?U=q:X.sibling=q,X=q,R=B}if(w===y.length)return o(v,R),Tr&&fn(v,w),U;if(R===null){for(;w<y.length;w++)R=x(v,y[w],k),R!==null&&(m=a(R,m,w),X===null?U=R:X.sibling=R,X=R);return Tr&&fn(v,w),U}for(R=n(v,R);w<y.length;w++)B=S(R,v,w,y[w],k),B!==null&&(r&&B.alternate!==null&&R.delete(B.key===null?w:B.key),m=a(B,m,w),X===null?U=B:X.sibling=B,X=B);return r&&R.forEach(function(E){return t(v,E)}),Tr&&fn(v,w),U}function j(v,m,y,k){var U=Ti(y);if(typeof U!="function")throw Error(_e(150));if(y=U.call(y),y==null)throw Error(_e(151));for(var X=U=null,R=m,w=m=0,B=null,q=y.next();R!==null&&!q.done;w++,q=y.next()){R.index>w?(B=R,R=null):B=R.sibling;var E=h(v,R,q.value,k);if(E===null){R===null&&(R=B);break}r&&R&&E.alternate===null&&t(v,R),m=a(E,m,w),X===null?U=E:X.sibling=E,X=E,R=B}if(q.done)return o(v,R),Tr&&fn(v,w),U;if(R===null){for(;!q.done;w++,q=y.next())q=x(v,q.value,k),q!==null&&(m=a(q,m,w),X===null?U=q:X.sibling=q,X=q);return Tr&&fn(v,w),U}for(R=n(v,R);!q.done;w++,q=y.next())q=S(R,v,w,q.value,k),q!==null&&(r&&q.alternate!==null&&R.delete(q.key===null?w:q.key),m=a(q,m,w),X===null?U=q:X.sibling=q,X=q);return r&&R.forEach(function(T){return t(v,T)}),Tr&&fn(v,w),U}function P(v,m,y,k){if(typeof y=="object"&&y!==null&&y.type===Hn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ga:e:{for(var U=y.key,X=m;X!==null;){if(X.key===U){if(U=y.type,U===Hn){if(X.tag===7){o(v,X.sibling),m=i(X,y.props.children),m.return=v,v=m;break e}}else if(X.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===$o&&km(U)===X.type){o(v,X.sibling),m=i(X,y.props),m.ref=Mi(v,X,y),m.return=v,v=m;break e}o(v,X);break}else t(v,X);X=X.sibling}y.type===Hn?(m=Sn(y.props.children,v.mode,k,y.key),m.return=v,v=m):(k=wl(y.type,y.key,y.props,null,v.mode,k),k.ref=Mi(v,m,y),k.return=v,v=k)}return l(v);case Gn:e:{for(X=y.key;m!==null;){if(m.key===X)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){o(v,m.sibling),m=i(m,y.children||[]),m.return=v,v=m;break e}else{o(v,m);break}else t(v,m);m=m.sibling}m=ad(y,v.mode,k),m.return=v,v=m}return l(v);case $o:return X=y._init,P(v,m,X(y._payload),k)}if(Hi(y))return C(v,m,y,k);if(Ti(y))return j(v,m,y,k);rl(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(o(v,m.sibling),m=i(m,y),m.return=v,v=m):(o(v,m),m=id(y,v.mode,k),m.return=v,v=m),l(v)):o(v,m)}return P}var fi=Y0(!0),K0=Y0(!1),Ll=un(null),Fl=null,Xn=null,Oc=null;function Lc(){Oc=Xn=Fl=null}function Fc(r){var t=Ll.current;Ir(Ll),r._currentValue=t}function Gd(r,t,o){for(;r!==null;){var n=r.alternate;if((r.childLanes&t)!==t?(r.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),r===o)break;r=r.return}}function li(r,t){Fl=r,Oc=Xn=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&t&&(Bt=!0),r.firstContext=null)}function Xt(r){var t=r._currentValue;if(Oc!==r)if(r={context:r,memoizedValue:t,next:null},Xn===null){if(Fl===null)throw Error(_e(308));Xn=r,Fl.dependencies={lanes:0,firstContext:r}}else Xn=Xn.next=r;return t}var bn=null;function $c(r){bn===null?bn=[r]:bn.push(r)}function Z0(r,t,o,n){var i=t.interleaved;return i===null?(o.next=o,$c(t)):(o.next=i.next,i.next=o),t.interleaved=o,Mo(r,n)}function Mo(r,t){r.lanes|=t;var o=r.alternate;for(o!==null&&(o.lanes|=t),o=r,r=r.return;r!==null;)r.childLanes|=t,o=r.alternate,o!==null&&(o.childLanes|=t),o=r,r=r.return;return o.tag===3?o.stateNode:null}var Uo=!1;function Uc(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function J0(r,t){r=r.updateQueue,t.updateQueue===r&&(t.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Bo(r,t){return{eventTime:r,lane:t,tag:0,payload:null,callback:null,next:null}}function en(r,t,o){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,fr&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Mo(r,o)}return i=n.interleaved,i===null?(t.next=t,$c(n)):(t.next=i.next,i.next=t),n.interleaved=t,Mo(r,o)}function hl(r,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194240)!==0)){var n=t.lanes;n&=r.pendingLanes,o|=n,t.lanes=o,Rc(r,o)}}function _m(r,t){var o=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,o===n)){var i=null,a=null;if(o=o.firstBaseUpdate,o!==null){do{var l={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};a===null?i=a=l:a=a.next=l,o=o.next}while(o!==null);a===null?i=a=t:a=a.next=t}else i=a=t;o={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=t:r.next=t,o.lastBaseUpdate=t}function $l(r,t,o,n){var i=r.updateQueue;Uo=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var s=u,d=s.next;s.next=null,l===null?a=d:l.next=d,l=s;var f=r.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==l&&(u===null?f.firstBaseUpdate=d:u.next=d,f.lastBaseUpdate=s))}if(a!==null){var x=i.baseState;l=0,f=d=s=null,u=a;do{var h=u.lane,S=u.eventTime;if((n&h)===h){f!==null&&(f=f.next={eventTime:S,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var C=r,j=u;switch(h=t,S=o,j.tag){case 1:if(C=j.payload,typeof C=="function"){x=C.call(S,x,h);break e}x=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=j.payload,h=typeof C=="function"?C.call(S,x,h):C,h==null)break e;x=Fr({},x,h);break e;case 2:Uo=!0}}u.callback!==null&&u.lane!==0&&(r.flags|=64,h=i.effects,h===null?i.effects=[u]:h.push(u))}else S={eventTime:S,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(d=f=S,s=x):f=f.next=S,l|=h;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;h=u,u=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(s=x),i.baseState=s,i.firstBaseUpdate=d,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Rn|=l,r.lanes=l,r.memoizedState=x}}function zm(r,t,o){if(r=t.effects,t.effects=null,r!==null)for(t=0;t<r.length;t++){var n=r[t],i=n.callback;if(i!==null){if(n.callback=null,n=o,typeof i!="function")throw Error(_e(191,i));i.call(n)}}}var Wa={},Co=un(Wa),ba=un(Wa),xa=un(Wa);function xn(r){if(r===Wa)throw Error(_e(174));return r}function Gc(r,t){switch(kr(xa,t),kr(ba,r),kr(Co,Wa),r=t.nodeType,r){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Cd(null,"");break;default:r=r===8?t.parentNode:t,t=r.namespaceURI||null,r=r.tagName,t=Cd(t,r)}Ir(Co),kr(Co,t)}function gi(){Ir(Co),Ir(ba),Ir(xa)}function Q0(r){xn(xa.current);var t=xn(Co.current),o=Cd(t,r.type);t!==o&&(kr(ba,r),kr(Co,o))}function Hc(r){ba.current===r&&(Ir(Co),Ir(ba))}var Dr=un(0);function Ul(r){for(var t=r;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xs=[];function qc(){for(var r=0;r<Xs.length;r++)Xs[r]._workInProgressVersionPrimary=null;Xs.length=0}var bl=Lo.ReactCurrentDispatcher,ed=Lo.ReactCurrentBatchConfig,zn=0,Lr=null,ot=null,st=null,Gl=!1,ra=!1,ya=0,yx=0;function ht(){throw Error(_e(321))}function Vc(r,t){if(t===null)return!1;for(var o=0;o<t.length&&o<r.length;o++)if(!po(r[o],t[o]))return!1;return!0}function Yc(r,t,o,n,i,a){if(zn=a,Lr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bl.current=r===null||r.memoizedState===null?Sx:Cx,r=o(n,i),ra){a=0;do{if(ra=!1,ya=0,25<=a)throw Error(_e(301));a+=1,st=ot=null,t.updateQueue=null,bl.current=kx,r=o(n,i)}while(ra)}if(bl.current=Hl,t=ot!==null&&ot.next!==null,zn=0,st=ot=Lr=null,Gl=!1,t)throw Error(_e(300));return r}function Kc(){var r=ya!==0;return ya=0,r}function vo(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Lr.memoizedState=st=r:st=st.next=r,st}function eo(){if(ot===null){var r=Lr.alternate;r=r!==null?r.memoizedState:null}else r=ot.next;var t=st===null?Lr.memoizedState:st.next;if(t!==null)st=t,ot=r;else{if(r===null)throw Error(_e(310));ot=r,r={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},st===null?Lr.memoizedState=st=r:st=st.next=r}return st}function va(r,t){return typeof t=="function"?t(r):t}function rd(r){var t=eo(),o=t.queue;if(o===null)throw Error(_e(311));o.lastRenderedReducer=r;var n=ot,i=n.baseQueue,a=o.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}n.baseQueue=i=a,o.pending=null}if(i!==null){a=i.next,n=n.baseState;var u=l=null,s=null,d=a;do{var f=d.lane;if((zn&f)===f)s!==null&&(s=s.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:r(n,d.action);else{var x={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};s===null?(u=s=x,l=n):s=s.next=x,Lr.lanes|=f,Rn|=f}d=d.next}while(d!==null&&d!==a);s===null?l=n:s.next=u,po(n,t.memoizedState)||(Bt=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=s,o.lastRenderedState=n}if(r=o.interleaved,r!==null){i=r;do a=i.lane,Lr.lanes|=a,Rn|=a,i=i.next;while(i!==r)}else i===null&&(o.lanes=0);return[t.memoizedState,o.dispatch]}function td(r){var t=eo(),o=t.queue;if(o===null)throw Error(_e(311));o.lastRenderedReducer=r;var n=o.dispatch,i=o.pending,a=t.memoizedState;if(i!==null){o.pending=null;var l=i=i.next;do a=r(a,l.action),l=l.next;while(l!==i);po(a,t.memoizedState)||(Bt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),o.lastRenderedState=a}return[a,n]}function X0(){}function ef(r,t){var o=Lr,n=eo(),i=t(),a=!po(n.memoizedState,i);if(a&&(n.memoizedState=i,Bt=!0),n=n.queue,Zc(of.bind(null,o,n,r),[r]),n.getSnapshot!==t||a||st!==null&&st.memoizedState.tag&1){if(o.flags|=2048,ja(9,tf.bind(null,o,n,i,t),void 0,null),ct===null)throw Error(_e(349));zn&30||rf(o,t,i)}return i}function rf(r,t,o){r.flags|=16384,r={getSnapshot:t,value:o},t=Lr.updateQueue,t===null?(t={lastEffect:null,stores:null},Lr.updateQueue=t,t.stores=[r]):(o=t.stores,o===null?t.stores=[r]:o.push(r))}function tf(r,t,o,n){t.value=o,t.getSnapshot=n,nf(t)&&af(r)}function of(r,t,o){return o(function(){nf(t)&&af(r)})}function nf(r){var t=r.getSnapshot;r=r.value;try{var o=t();return!po(r,o)}catch{return!0}}function af(r){var t=Mo(r,1);t!==null&&uo(t,r,1,-1)}function Rm(r){var t=vo();return typeof r=="function"&&(r=r()),t.memoizedState=t.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:r},t.queue=r,r=r.dispatch=wx.bind(null,Lr,r),[t.memoizedState,r]}function ja(r,t,o,n){return r={tag:r,create:t,destroy:o,deps:n,next:null},t=Lr.updateQueue,t===null?(t={lastEffect:null,stores:null},Lr.updateQueue=t,t.lastEffect=r.next=r):(o=t.lastEffect,o===null?t.lastEffect=r.next=r:(n=o.next,o.next=r,r.next=n,t.lastEffect=r)),r}function lf(){return eo().memoizedState}function xl(r,t,o,n){var i=vo();Lr.flags|=r,i.memoizedState=ja(1|t,o,void 0,n===void 0?null:n)}function cs(r,t,o,n){var i=eo();n=n===void 0?null:n;var a=void 0;if(ot!==null){var l=ot.memoizedState;if(a=l.destroy,n!==null&&Vc(n,l.deps)){i.memoizedState=ja(t,o,a,n);return}}Lr.flags|=r,i.memoizedState=ja(1|t,o,a,n)}function Em(r,t){return xl(8390656,8,r,t)}function Zc(r,t){return cs(2048,8,r,t)}function sf(r,t){return cs(4,2,r,t)}function df(r,t){return cs(4,4,r,t)}function cf(r,t){if(typeof t=="function")return r=r(),t(r),function(){t(null)};if(t!=null)return r=r(),t.current=r,function(){t.current=null}}function uf(r,t,o){return o=o!=null?o.concat([r]):null,cs(4,4,cf.bind(null,t,r),o)}function Jc(){}function mf(r,t){var o=eo();t=t===void 0?null:t;var n=o.memoizedState;return n!==null&&t!==null&&Vc(t,n[1])?n[0]:(o.memoizedState=[r,t],r)}function pf(r,t){var o=eo();t=t===void 0?null:t;var n=o.memoizedState;return n!==null&&t!==null&&Vc(t,n[1])?n[0]:(r=r(),o.memoizedState=[r,t],r)}function ff(r,t,o){return zn&21?(po(o,t)||(o=x0(),Lr.lanes|=o,Rn|=o,r.baseState=!0),t):(r.baseState&&(r.baseState=!1,Bt=!0),r.memoizedState=o)}function vx(r,t){var o=vr;vr=o!==0&&4>o?o:4,r(!0);var n=ed.transition;ed.transition={};try{r(!1),t()}finally{vr=o,ed.transition=n}}function gf(){return eo().memoizedState}function jx(r,t,o){var n=tn(r);if(o={lane:n,action:o,hasEagerState:!1,eagerState:null,next:null},hf(r))bf(t,o);else if(o=Z0(r,t,o,n),o!==null){var i=Rt();uo(o,r,n,i),xf(o,t,n)}}function wx(r,t,o){var n=tn(r),i={lane:n,action:o,hasEagerState:!1,eagerState:null,next:null};if(hf(r))bf(t,i);else{var a=r.alternate;if(r.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,u=a(l,o);if(i.hasEagerState=!0,i.eagerState=u,po(u,l)){var s=t.interleaved;s===null?(i.next=i,$c(t)):(i.next=s.next,s.next=i),t.interleaved=i;return}}catch{}finally{}o=Z0(r,t,i,n),o!==null&&(i=Rt(),uo(o,r,n,i),xf(o,t,n))}}function hf(r){var t=r.alternate;return r===Lr||t!==null&&t===Lr}function bf(r,t){ra=Gl=!0;var o=r.pending;o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t}function xf(r,t,o){if(o&4194240){var n=t.lanes;n&=r.pendingLanes,o|=n,t.lanes=o,Rc(r,o)}}var Hl={readContext:Xt,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},Sx={readContext:Xt,useCallback:function(r,t){return vo().memoizedState=[r,t===void 0?null:t],r},useContext:Xt,useEffect:Em,useImperativeHandle:function(r,t,o){return o=o!=null?o.concat([r]):null,xl(4194308,4,cf.bind(null,t,r),o)},useLayoutEffect:function(r,t){return xl(4194308,4,r,t)},useInsertionEffect:function(r,t){return xl(4,2,r,t)},useMemo:function(r,t){var o=vo();return t=t===void 0?null:t,r=r(),o.memoizedState=[r,t],r},useReducer:function(r,t,o){var n=vo();return t=o!==void 0?o(t):t,n.memoizedState=n.baseState=t,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:t},n.queue=r,r=r.dispatch=jx.bind(null,Lr,r),[n.memoizedState,r]},useRef:function(r){var t=vo();return r={current:r},t.memoizedState=r},useState:Rm,useDebugValue:Jc,useDeferredValue:function(r){return vo().memoizedState=r},useTransition:function(){var r=Rm(!1),t=r[0];return r=vx.bind(null,r[1]),vo().memoizedState=r,[t,r]},useMutableSource:function(){},useSyncExternalStore:function(r,t,o){var n=Lr,i=vo();if(Tr){if(o===void 0)throw Error(_e(407));o=o()}else{if(o=t(),ct===null)throw Error(_e(349));zn&30||rf(n,t,o)}i.memoizedState=o;var a={value:o,getSnapshot:t};return i.queue=a,Em(of.bind(null,n,a,r),[r]),n.flags|=2048,ja(9,tf.bind(null,n,a,o,t),void 0,null),o},useId:function(){var r=vo(),t=ct.identifierPrefix;if(Tr){var o=To,n=Io;o=(n&~(1<<32-co(n)-1)).toString(32)+o,t=":"+t+"R"+o,o=ya++,0<o&&(t+="H"+o.toString(32)),t+=":"}else o=yx++,t=":"+t+"r"+o.toString(32)+":";return r.memoizedState=t},unstable_isNewReconciler:!1},Cx={readContext:Xt,useCallback:mf,useContext:Xt,useEffect:Zc,useImperativeHandle:uf,useInsertionEffect:sf,useLayoutEffect:df,useMemo:pf,useReducer:rd,useRef:lf,useState:function(){return rd(va)},useDebugValue:Jc,useDeferredValue:function(r){var t=eo();return ff(t,ot.memoizedState,r)},useTransition:function(){var r=rd(va)[0],t=eo().memoizedState;return[r,t]},useMutableSource:X0,useSyncExternalStore:ef,useId:gf,unstable_isNewReconciler:!1},kx={readContext:Xt,useCallback:mf,useContext:Xt,useEffect:Zc,useImperativeHandle:uf,useInsertionEffect:sf,useLayoutEffect:df,useMemo:pf,useReducer:td,useRef:lf,useState:function(){return td(va)},useDebugValue:Jc,useDeferredValue:function(r){var t=eo();return ot===null?t.memoizedState=r:ff(t,ot.memoizedState,r)},useTransition:function(){var r=td(va)[0],t=eo().memoizedState;return[r,t]},useMutableSource:X0,useSyncExternalStore:ef,useId:gf,unstable_isNewReconciler:!1};function oo(r,t){if(r&&r.defaultProps){t=Fr({},t),r=r.defaultProps;for(var o in r)t[o]===void 0&&(t[o]=r[o]);return t}return t}function Hd(r,t,o,n){t=r.memoizedState,o=o(n,t),o=o==null?t:Fr({},t,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var us={isMounted:function(r){return(r=r._reactInternals)?Nn(r)===r:!1},enqueueSetState:function(r,t,o){r=r._reactInternals;var n=Rt(),i=tn(r),a=Bo(n,i);a.payload=t,o!=null&&(a.callback=o),t=en(r,a,i),t!==null&&(uo(t,r,i,n),hl(t,r,i))},enqueueReplaceState:function(r,t,o){r=r._reactInternals;var n=Rt(),i=tn(r),a=Bo(n,i);a.tag=1,a.payload=t,o!=null&&(a.callback=o),t=en(r,a,i),t!==null&&(uo(t,r,i,n),hl(t,r,i))},enqueueForceUpdate:function(r,t){r=r._reactInternals;var o=Rt(),n=tn(r),i=Bo(o,n);i.tag=2,t!=null&&(i.callback=t),t=en(r,i,n),t!==null&&(uo(t,r,n,o),hl(t,r,n))}};function Wm(r,t,o,n,i,a,l){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,a,l):t.prototype&&t.prototype.isPureReactComponent?!pa(o,n)||!pa(i,a):!0}function yf(r,t,o){var n=!1,i=sn,a=t.contextType;return typeof a=="object"&&a!==null?a=Xt(a):(i=Dt(t)?kn:wt.current,n=t.contextTypes,a=(n=n!=null)?mi(r,i):sn),t=new t(o,a),r.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=us,r.stateNode=t,t._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=a),t}function Am(r,t,o,n){r=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,n),t.state!==r&&us.enqueueReplaceState(t,t.state,null)}function qd(r,t,o,n){var i=r.stateNode;i.props=o,i.state=r.memoizedState,i.refs={},Uc(r);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Xt(a):(a=Dt(t)?kn:wt.current,i.context=mi(r,a)),i.state=r.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Hd(r,t,a,o),i.state=r.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&us.enqueueReplaceState(i,i.state,null),$l(r,o,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function hi(r,t){try{var o="",n=t;do o+=Xh(n),n=n.return;while(n);var i=o}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:r,source:t,stack:i,digest:null}}function od(r,t,o){return{value:r,source:null,stack:o??null,digest:t??null}}function Vd(r,t){try{console.error(t.value)}catch(o){setTimeout(function(){throw o})}}var _x=typeof WeakMap=="function"?WeakMap:Map;function vf(r,t,o){o=Bo(-1,o),o.tag=3,o.payload={element:null};var n=t.value;return o.callback=function(){Vl||(Vl=!0,tc=n),Vd(r,t)},o}function jf(r,t,o){o=Bo(-1,o),o.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;o.payload=function(){return n(i)},o.callback=function(){Vd(r,t)}}var a=r.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(o.callback=function(){Vd(r,t),typeof n!="function"&&(rn===null?rn=new Set([this]):rn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),o}function Im(r,t,o){var n=r.pingCache;if(n===null){n=r.pingCache=new _x;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(o)||(i.add(o),r=Lx.bind(null,r,t,o),t.then(r,r))}function Tm(r){do{var t;if((t=r.tag===13)&&(t=r.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return r;r=r.return}while(r!==null);return null}function Nm(r,t,o,n,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===t?r.flags|=65536:(r.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(t=Bo(-1,1),t.tag=2,en(o,t,1))),o.lanes|=1),r)}var zx=Lo.ReactCurrentOwner,Bt=!1;function kt(r,t,o,n){t.child=r===null?K0(t,null,o,n):fi(t,r.child,o,n)}function Bm(r,t,o,n,i){o=o.render;var a=t.ref;return li(t,i),n=Yc(r,t,o,n,a,i),o=Kc(),r!==null&&!Bt?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~i,Oo(r,t,i)):(Tr&&o&&Pc(t),t.flags|=1,kt(r,t,n,i),t.child)}function Pm(r,t,o,n,i){if(r===null){var a=o.type;return typeof a=="function"&&!iu(a)&&a.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(t.tag=15,t.type=a,wf(r,t,a,n,i)):(r=wl(o.type,null,n,t,t.mode,i),r.ref=t.ref,r.return=t,t.child=r)}if(a=r.child,!(r.lanes&i)){var l=a.memoizedProps;if(o=o.compare,o=o!==null?o:pa,o(l,n)&&r.ref===t.ref)return Oo(r,t,i)}return t.flags|=1,r=on(a,n),r.ref=t.ref,r.return=t,t.child=r}function wf(r,t,o,n,i){if(r!==null){var a=r.memoizedProps;if(pa(a,n)&&r.ref===t.ref)if(Bt=!1,t.pendingProps=n=a,(r.lanes&i)!==0)r.flags&131072&&(Bt=!0);else return t.lanes=r.lanes,Oo(r,t,i)}return Yd(r,t,o,n,i)}function Sf(r,t,o){var n=t.pendingProps,i=n.children,a=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},kr(ri,Ft),Ft|=o;else{if(!(o&1073741824))return r=a!==null?a.baseLanes|o:o,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:r,cachePool:null,transitions:null},t.updateQueue=null,kr(ri,Ft),Ft|=r,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:o,kr(ri,Ft),Ft|=n}else a!==null?(n=a.baseLanes|o,t.memoizedState=null):n=o,kr(ri,Ft),Ft|=n;return kt(r,t,i,o),t.child}function Cf(r,t){var o=t.ref;(r===null&&o!==null||r!==null&&r.ref!==o)&&(t.flags|=512,t.flags|=2097152)}function Yd(r,t,o,n,i){var a=Dt(o)?kn:wt.current;return a=mi(t,a),li(t,i),o=Yc(r,t,o,n,a,i),n=Kc(),r!==null&&!Bt?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~i,Oo(r,t,i)):(Tr&&n&&Pc(t),t.flags|=1,kt(r,t,o,i),t.child)}function Dm(r,t,o,n,i){if(Dt(o)){var a=!0;Dl(t)}else a=!1;if(li(t,i),t.stateNode===null)yl(r,t),yf(t,o,n),qd(t,o,n,i),n=!0;else if(r===null){var l=t.stateNode,u=t.memoizedProps;l.props=u;var s=l.context,d=o.contextType;typeof d=="object"&&d!==null?d=Xt(d):(d=Dt(o)?kn:wt.current,d=mi(t,d));var f=o.getDerivedStateFromProps,x=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function";x||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==n||s!==d)&&Am(t,l,n,d),Uo=!1;var h=t.memoizedState;l.state=h,$l(t,n,l,i),s=t.memoizedState,u!==n||h!==s||Pt.current||Uo?(typeof f=="function"&&(Hd(t,o,f,n),s=t.memoizedState),(u=Uo||Wm(t,o,u,n,h,s,d))?(x||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=s),l.props=n,l.state=s,l.context=d,n=u):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,J0(r,t),u=t.memoizedProps,d=t.type===t.elementType?u:oo(t.type,u),l.props=d,x=t.pendingProps,h=l.context,s=o.contextType,typeof s=="object"&&s!==null?s=Xt(s):(s=Dt(o)?kn:wt.current,s=mi(t,s));var S=o.getDerivedStateFromProps;(f=typeof S=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==x||h!==s)&&Am(t,l,n,s),Uo=!1,h=t.memoizedState,l.state=h,$l(t,n,l,i);var C=t.memoizedState;u!==x||h!==C||Pt.current||Uo?(typeof S=="function"&&(Hd(t,o,S,n),C=t.memoizedState),(d=Uo||Wm(t,o,d,n,h,C,s)||!1)?(f||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,C,s),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,C,s)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===r.memoizedProps&&h===r.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===r.memoizedProps&&h===r.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=C),l.props=n,l.state=C,l.context=s,n=d):(typeof l.componentDidUpdate!="function"||u===r.memoizedProps&&h===r.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===r.memoizedProps&&h===r.memoizedState||(t.flags|=1024),n=!1)}return Kd(r,t,o,n,a,i)}function Kd(r,t,o,n,i,a){Cf(r,t);var l=(t.flags&128)!==0;if(!n&&!l)return i&&wm(t,o,!1),Oo(r,t,a);n=t.stateNode,zx.current=t;var u=l&&typeof o.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,r!==null&&l?(t.child=fi(t,r.child,null,a),t.child=fi(t,null,u,a)):kt(r,t,u,a),t.memoizedState=n.state,i&&wm(t,o,!0),t.child}function kf(r){var t=r.stateNode;t.pendingContext?jm(r,t.pendingContext,t.pendingContext!==t.context):t.context&&jm(r,t.context,!1),Gc(r,t.containerInfo)}function Mm(r,t,o,n,i){return pi(),Mc(i),t.flags|=256,kt(r,t,o,n),t.child}var Zd={dehydrated:null,treeContext:null,retryLane:0};function Jd(r){return{baseLanes:r,cachePool:null,transitions:null}}function _f(r,t,o){var n=t.pendingProps,i=Dr.current,a=!1,l=(t.flags&128)!==0,u;if((u=l)||(u=r!==null&&r.memoizedState===null?!1:(i&2)!==0),u?(a=!0,t.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),kr(Dr,i&1),r===null)return Ud(t),r=t.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(t.mode&1?r.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,r=n.fallback,a?(n=t.mode,a=t.child,l={mode:"hidden",children:l},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=fs(l,n,0,null),r=Sn(r,n,o,null),a.return=t,r.return=t,a.sibling=r,t.child=a,t.child.memoizedState=Jd(o),t.memoizedState=Zd,r):Qc(t,l));if(i=r.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return Rx(r,t,l,n,u,i,o);if(a){a=n.fallback,l=t.mode,i=r.child,u=i.sibling;var s={mode:"hidden",children:n.children};return!(l&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=s,t.deletions=null):(n=on(i,s),n.subtreeFlags=i.subtreeFlags&14680064),u!==null?a=on(u,a):(a=Sn(a,l,o,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,l=r.child.memoizedState,l=l===null?Jd(o):{baseLanes:l.baseLanes|o,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=r.childLanes&~o,t.memoizedState=Zd,n}return a=r.child,r=a.sibling,n=on(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=o),n.return=t,n.sibling=null,r!==null&&(o=t.deletions,o===null?(t.deletions=[r],t.flags|=16):o.push(r)),t.child=n,t.memoizedState=null,n}function Qc(r,t){return t=fs({mode:"visible",children:t},r.mode,0,null),t.return=r,r.child=t}function tl(r,t,o,n){return n!==null&&Mc(n),fi(t,r.child,null,o),r=Qc(t,t.pendingProps.children),r.flags|=2,t.memoizedState=null,r}function Rx(r,t,o,n,i,a,l){if(o)return t.flags&256?(t.flags&=-257,n=od(Error(_e(422))),tl(r,t,l,n)):t.memoizedState!==null?(t.child=r.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=fs({mode:"visible",children:n.children},i,0,null),a=Sn(a,i,l,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&fi(t,r.child,null,l),t.child.memoizedState=Jd(l),t.memoizedState=Zd,a);if(!(t.mode&1))return tl(r,t,l,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var u=n.dgst;return n=u,a=Error(_e(419)),n=od(a,n,void 0),tl(r,t,l,n)}if(u=(l&r.childLanes)!==0,Bt||u){if(n=ct,n!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Mo(r,i),uo(n,r,i,-1))}return nu(),n=od(Error(_e(421))),tl(r,t,l,n)}return i.data==="$?"?(t.flags|=128,t.child=r.child,t=Fx.bind(null,r),i._reactRetry=t,null):(r=a.treeContext,$t=Xo(i.nextSibling),Ut=t,Tr=!0,lo=null,r!==null&&(Yt[Kt++]=Io,Yt[Kt++]=To,Yt[Kt++]=_n,Io=r.id,To=r.overflow,_n=t),t=Qc(t,n.children),t.flags|=4096,t)}function Om(r,t,o){r.lanes|=t;var n=r.alternate;n!==null&&(n.lanes|=t),Gd(r.return,t,o)}function nd(r,t,o,n,i){var a=r.memoizedState;a===null?r.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:o,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=o,a.tailMode=i)}function zf(r,t,o){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(kt(r,t,n.children,o),n=Dr.current,n&2)n=n&1|2,t.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=t.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Om(r,o,t);else if(r.tag===19)Om(r,o,t);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(kr(Dr,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(o=t.child,i=null;o!==null;)r=o.alternate,r!==null&&Ul(r)===null&&(i=o),o=o.sibling;o=i,o===null?(i=t.child,t.child=null):(i=o.sibling,o.sibling=null),nd(t,!1,i,o,a);break;case"backwards":for(o=null,i=t.child,t.child=null;i!==null;){if(r=i.alternate,r!==null&&Ul(r)===null){t.child=i;break}r=i.sibling,i.sibling=o,o=i,i=r}nd(t,!0,o,null,a);break;case"together":nd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yl(r,t){!(t.mode&1)&&r!==null&&(r.alternate=null,t.alternate=null,t.flags|=2)}function Oo(r,t,o){if(r!==null&&(t.dependencies=r.dependencies),Rn|=t.lanes,!(o&t.childLanes))return null;if(r!==null&&t.child!==r.child)throw Error(_e(153));if(t.child!==null){for(r=t.child,o=on(r,r.pendingProps),t.child=o,o.return=t;r.sibling!==null;)r=r.sibling,o=o.sibling=on(r,r.pendingProps),o.return=t;o.sibling=null}return t.child}function Ex(r,t,o){switch(t.tag){case 3:kf(t),pi();break;case 5:Q0(t);break;case 1:Dt(t.type)&&Dl(t);break;case 4:Gc(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;kr(Ll,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(kr(Dr,Dr.current&1),t.flags|=128,null):o&t.child.childLanes?_f(r,t,o):(kr(Dr,Dr.current&1),r=Oo(r,t,o),r!==null?r.sibling:null);kr(Dr,Dr.current&1);break;case 19:if(n=(o&t.childLanes)!==0,r.flags&128){if(n)return zf(r,t,o);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),kr(Dr,Dr.current),n)break;return null;case 22:case 23:return t.lanes=0,Sf(r,t,o)}return Oo(r,t,o)}var Rf,Qd,Ef,Wf;Rf=function(r,t){for(var o=t.child;o!==null;){if(o.tag===5||o.tag===6)r.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Qd=function(){};Ef=function(r,t,o,n){var i=r.memoizedProps;if(i!==n){r=t.stateNode,xn(Co.current);var a=null;switch(o){case"input":i=vd(r,i),n=vd(r,n),a=[];break;case"select":i=Fr({},i,{value:void 0}),n=Fr({},n,{value:void 0}),a=[];break;case"textarea":i=Sd(r,i),n=Sd(r,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=Bl)}kd(o,n);var l;o=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var u=i[d];for(l in u)u.hasOwnProperty(l)&&(o||(o={}),o[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(aa.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var s=n[d];if(u=i!=null?i[d]:void 0,n.hasOwnProperty(d)&&s!==u&&(s!=null||u!=null))if(d==="style")if(u){for(l in u)!u.hasOwnProperty(l)||s&&s.hasOwnProperty(l)||(o||(o={}),o[l]="");for(l in s)s.hasOwnProperty(l)&&u[l]!==s[l]&&(o||(o={}),o[l]=s[l])}else o||(a||(a=[]),a.push(d,o)),o=s;else d==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,u=u?u.__html:void 0,s!=null&&u!==s&&(a=a||[]).push(d,s)):d==="children"?typeof s!="string"&&typeof s!="number"||(a=a||[]).push(d,""+s):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(aa.hasOwnProperty(d)?(s!=null&&d==="onScroll"&&Wr("scroll",r),a||u===s||(a=[])):(a=a||[]).push(d,s))}o&&(a=a||[]).push("style",o);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};Wf=function(r,t,o,n){o!==n&&(t.flags|=4)};function Oi(r,t){if(!Tr)switch(r.tailMode){case"hidden":t=r.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var n=null;o!==null;)o.alternate!==null&&(n=o),o=o.sibling;n===null?t||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function bt(r){var t=r.alternate!==null&&r.alternate.child===r.child,o=0,n=0;if(t)for(var i=r.child;i!==null;)o|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)o|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=o,t}function Wx(r,t,o){var n=t.pendingProps;switch(Dc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(t),null;case 1:return Dt(t.type)&&Pl(),bt(t),null;case 3:return n=t.stateNode,gi(),Ir(Pt),Ir(wt),qc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(el(t)?t.flags|=4:r===null||r.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,lo!==null&&(ic(lo),lo=null))),Qd(r,t),bt(t),null;case 5:Hc(t);var i=xn(xa.current);if(o=t.type,r!==null&&t.stateNode!=null)Ef(r,t,o,n,i),r.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(_e(166));return bt(t),null}if(r=xn(Co.current),el(t)){n=t.stateNode,o=t.type;var a=t.memoizedProps;switch(n[wo]=t,n[ha]=a,r=(t.mode&1)!==0,o){case"dialog":Wr("cancel",n),Wr("close",n);break;case"iframe":case"object":case"embed":Wr("load",n);break;case"video":case"audio":for(i=0;i<Vi.length;i++)Wr(Vi[i],n);break;case"source":Wr("error",n);break;case"img":case"image":case"link":Wr("error",n),Wr("load",n);break;case"details":Wr("toggle",n);break;case"input":Yu(n,a),Wr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Wr("invalid",n);break;case"textarea":Zu(n,a),Wr("invalid",n)}kd(o,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var u=a[l];l==="children"?typeof u=="string"?n.textContent!==u&&(a.suppressHydrationWarning!==!0&&Xa(n.textContent,u,r),i=["children",u]):typeof u=="number"&&n.textContent!==""+u&&(a.suppressHydrationWarning!==!0&&Xa(n.textContent,u,r),i=["children",""+u]):aa.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&Wr("scroll",n)}switch(o){case"input":Ha(n),Ku(n,a,!0);break;case"textarea":Ha(n),Ju(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Bl)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=o0(o)),r==="http://www.w3.org/1999/xhtml"?o==="script"?(r=l.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=l.createElement(o,{is:n.is}):(r=l.createElement(o),o==="select"&&(l=r,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):r=l.createElementNS(r,o),r[wo]=t,r[ha]=n,Rf(r,t,!1,!1),t.stateNode=r;e:{switch(l=_d(o,n),o){case"dialog":Wr("cancel",r),Wr("close",r),i=n;break;case"iframe":case"object":case"embed":Wr("load",r),i=n;break;case"video":case"audio":for(i=0;i<Vi.length;i++)Wr(Vi[i],r);i=n;break;case"source":Wr("error",r),i=n;break;case"img":case"image":case"link":Wr("error",r),Wr("load",r),i=n;break;case"details":Wr("toggle",r),i=n;break;case"input":Yu(r,n),i=vd(r,n),Wr("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=Fr({},n,{value:void 0}),Wr("invalid",r);break;case"textarea":Zu(r,n),i=Sd(r,n),Wr("invalid",r);break;default:i=n}kd(o,i),u=i;for(a in u)if(u.hasOwnProperty(a)){var s=u[a];a==="style"?a0(r,s):a==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,s!=null&&n0(r,s)):a==="children"?typeof s=="string"?(o!=="textarea"||s!=="")&&la(r,s):typeof s=="number"&&la(r,""+s):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(aa.hasOwnProperty(a)?s!=null&&a==="onScroll"&&Wr("scroll",r):s!=null&&wc(r,a,s,l))}switch(o){case"input":Ha(r),Ku(r,n,!1);break;case"textarea":Ha(r),Ju(r);break;case"option":n.value!=null&&r.setAttribute("value",""+ln(n.value));break;case"select":r.multiple=!!n.multiple,a=n.value,a!=null?oi(r,!!n.multiple,a,!1):n.defaultValue!=null&&oi(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=Bl)}switch(o){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return bt(t),null;case 6:if(r&&t.stateNode!=null)Wf(r,t,r.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(_e(166));if(o=xn(xa.current),xn(Co.current),el(t)){if(n=t.stateNode,o=t.memoizedProps,n[wo]=t,(a=n.nodeValue!==o)&&(r=Ut,r!==null))switch(r.tag){case 3:Xa(n.nodeValue,o,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Xa(n.nodeValue,o,(r.mode&1)!==0)}a&&(t.flags|=4)}else n=(o.nodeType===9?o:o.ownerDocument).createTextNode(n),n[wo]=t,t.stateNode=n}return bt(t),null;case 13:if(Ir(Dr),n=t.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Tr&&$t!==null&&t.mode&1&&!(t.flags&128))V0(),pi(),t.flags|=98560,a=!1;else if(a=el(t),n!==null&&n.dehydrated!==null){if(r===null){if(!a)throw Error(_e(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(_e(317));a[wo]=t}else pi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;bt(t),a=!1}else lo!==null&&(ic(lo),lo=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=o,t):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(r===null||Dr.current&1?nt===0&&(nt=3):nu())),t.updateQueue!==null&&(t.flags|=4),bt(t),null);case 4:return gi(),Qd(r,t),r===null&&fa(t.stateNode.containerInfo),bt(t),null;case 10:return Fc(t.type._context),bt(t),null;case 17:return Dt(t.type)&&Pl(),bt(t),null;case 19:if(Ir(Dr),a=t.memoizedState,a===null)return bt(t),null;if(n=(t.flags&128)!==0,l=a.rendering,l===null)if(n)Oi(a,!1);else{if(nt!==0||r!==null&&r.flags&128)for(r=t.child;r!==null;){if(l=Ul(r),l!==null){for(t.flags|=128,Oi(a,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=o,o=t.child;o!==null;)a=o,r=n,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=r,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,r=l.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),o=o.sibling;return kr(Dr,Dr.current&1|2),t.child}r=r.sibling}a.tail!==null&&Kr()>bi&&(t.flags|=128,n=!0,Oi(a,!1),t.lanes=4194304)}else{if(!n)if(r=Ul(l),r!==null){if(t.flags|=128,n=!0,o=r.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),Oi(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!Tr)return bt(t),null}else 2*Kr()-a.renderingStartTime>bi&&o!==1073741824&&(t.flags|=128,n=!0,Oi(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(o=a.last,o!==null?o.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Kr(),t.sibling=null,o=Dr.current,kr(Dr,n?o&1|2:o&1),t):(bt(t),null);case 22:case 23:return ou(),n=t.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ft&1073741824&&(bt(t),t.subtreeFlags&6&&(t.flags|=8192)):bt(t),null;case 24:return null;case 25:return null}throw Error(_e(156,t.tag))}function Ax(r,t){switch(Dc(t),t.tag){case 1:return Dt(t.type)&&Pl(),r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 3:return gi(),Ir(Pt),Ir(wt),qc(),r=t.flags,r&65536&&!(r&128)?(t.flags=r&-65537|128,t):null;case 5:return Hc(t),null;case 13:if(Ir(Dr),r=t.memoizedState,r!==null&&r.dehydrated!==null){if(t.alternate===null)throw Error(_e(340));pi()}return r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 19:return Ir(Dr),null;case 4:return gi(),null;case 10:return Fc(t.type._context),null;case 22:case 23:return ou(),null;case 24:return null;default:return null}}var ol=!1,yt=!1,Ix=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function ei(r,t){var o=r.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(n){Hr(r,t,n)}else o.current=null}function Af(r,t,o){try{o()}catch(n){Hr(r,t,n)}}var Lm=!1;function Tx(r,t){if(Pd=Il,r=N0(),Bc(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var n=o.getSelection&&o.getSelection();if(n&&n.rangeCount!==0){o=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{o.nodeType,a.nodeType}catch{o=null;break e}var l=0,u=-1,s=-1,d=0,f=0,x=r,h=null;r:for(;;){for(var S;x!==o||i!==0&&x.nodeType!==3||(u=l+i),x!==a||n!==0&&x.nodeType!==3||(s=l+n),x.nodeType===3&&(l+=x.nodeValue.length),(S=x.firstChild)!==null;)h=x,x=S;for(;;){if(x===r)break r;if(h===o&&++d===i&&(u=l),h===a&&++f===n&&(s=l),(S=x.nextSibling)!==null)break;x=h,h=x.parentNode}x=S}o=u===-1||s===-1?null:{start:u,end:s}}else o=null}o=o||{start:0,end:0}}else o=null;for(Dd={focusedElem:r,selectionRange:o},Il=!1,Fe=t;Fe!==null;)if(t=Fe,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,Fe=r;else for(;Fe!==null;){t=Fe;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var j=C.memoizedProps,P=C.memoizedState,v=t.stateNode,m=v.getSnapshotBeforeUpdate(t.elementType===t.type?j:oo(t.type,j),P);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_e(163))}}catch(k){Hr(t,t.return,k)}if(r=t.sibling,r!==null){r.return=t.return,Fe=r;break}Fe=t.return}return C=Lm,Lm=!1,C}function ta(r,t,o){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var a=i.destroy;i.destroy=void 0,a!==void 0&&Af(t,o,a)}i=i.next}while(i!==n)}}function ms(r,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var o=t=t.next;do{if((o.tag&r)===r){var n=o.create;o.destroy=n()}o=o.next}while(o!==t)}}function Xd(r){var t=r.ref;if(t!==null){var o=r.stateNode;switch(r.tag){case 5:r=o;break;default:r=o}typeof t=="function"?t(r):t.current=r}}function If(r){var t=r.alternate;t!==null&&(r.alternate=null,If(t)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(t=r.stateNode,t!==null&&(delete t[wo],delete t[ha],delete t[Ld],delete t[gx],delete t[hx])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Tf(r){return r.tag===5||r.tag===3||r.tag===4}function Fm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Tf(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ec(r,t,o){var n=r.tag;if(n===5||n===6)r=r.stateNode,t?o.nodeType===8?o.parentNode.insertBefore(r,t):o.insertBefore(r,t):(o.nodeType===8?(t=o.parentNode,t.insertBefore(r,o)):(t=o,t.appendChild(r)),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=Bl));else if(n!==4&&(r=r.child,r!==null))for(ec(r,t,o),r=r.sibling;r!==null;)ec(r,t,o),r=r.sibling}function rc(r,t,o){var n=r.tag;if(n===5||n===6)r=r.stateNode,t?o.insertBefore(r,t):o.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(rc(r,t,o),r=r.sibling;r!==null;)rc(r,t,o),r=r.sibling}var mt=null,io=!1;function Fo(r,t,o){for(o=o.child;o!==null;)Nf(r,t,o),o=o.sibling}function Nf(r,t,o){if(So&&typeof So.onCommitFiberUnmount=="function")try{So.onCommitFiberUnmount(ns,o)}catch{}switch(o.tag){case 5:yt||ei(o,t);case 6:var n=mt,i=io;mt=null,Fo(r,t,o),mt=n,io=i,mt!==null&&(io?(r=mt,o=o.stateNode,r.nodeType===8?r.parentNode.removeChild(o):r.removeChild(o)):mt.removeChild(o.stateNode));break;case 18:mt!==null&&(io?(r=mt,o=o.stateNode,r.nodeType===8?Js(r.parentNode,o):r.nodeType===1&&Js(r,o),ua(r)):Js(mt,o.stateNode));break;case 4:n=mt,i=io,mt=o.stateNode.containerInfo,io=!0,Fo(r,t,o),mt=n,io=i;break;case 0:case 11:case 14:case 15:if(!yt&&(n=o.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&Af(o,t,l),i=i.next}while(i!==n)}Fo(r,t,o);break;case 1:if(!yt&&(ei(o,t),n=o.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=o.memoizedProps,n.state=o.memoizedState,n.componentWillUnmount()}catch(u){Hr(o,t,u)}Fo(r,t,o);break;case 21:Fo(r,t,o);break;case 22:o.mode&1?(yt=(n=yt)||o.memoizedState!==null,Fo(r,t,o),yt=n):Fo(r,t,o);break;default:Fo(r,t,o)}}function $m(r){var t=r.updateQueue;if(t!==null){r.updateQueue=null;var o=r.stateNode;o===null&&(o=r.stateNode=new Ix),t.forEach(function(n){var i=$x.bind(null,r,n);o.has(n)||(o.add(n),n.then(i,i))})}}function to(r,t){var o=t.deletions;if(o!==null)for(var n=0;n<o.length;n++){var i=o[n];try{var a=r,l=t,u=l;e:for(;u!==null;){switch(u.tag){case 5:mt=u.stateNode,io=!1;break e;case 3:mt=u.stateNode.containerInfo,io=!0;break e;case 4:mt=u.stateNode.containerInfo,io=!0;break e}u=u.return}if(mt===null)throw Error(_e(160));Nf(a,l,i),mt=null,io=!1;var s=i.alternate;s!==null&&(s.return=null),i.return=null}catch(d){Hr(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Bf(t,r),t=t.sibling}function Bf(r,t){var o=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(to(t,r),xo(r),n&4){try{ta(3,r,r.return),ms(3,r)}catch(j){Hr(r,r.return,j)}try{ta(5,r,r.return)}catch(j){Hr(r,r.return,j)}}break;case 1:to(t,r),xo(r),n&512&&o!==null&&ei(o,o.return);break;case 5:if(to(t,r),xo(r),n&512&&o!==null&&ei(o,o.return),r.flags&32){var i=r.stateNode;try{la(i,"")}catch(j){Hr(r,r.return,j)}}if(n&4&&(i=r.stateNode,i!=null)){var a=r.memoizedProps,l=o!==null?o.memoizedProps:a,u=r.type,s=r.updateQueue;if(r.updateQueue=null,s!==null)try{u==="input"&&a.type==="radio"&&a.name!=null&&r0(i,a),_d(u,l);var d=_d(u,a);for(l=0;l<s.length;l+=2){var f=s[l],x=s[l+1];f==="style"?a0(i,x):f==="dangerouslySetInnerHTML"?n0(i,x):f==="children"?la(i,x):wc(i,f,x,d)}switch(u){case"input":jd(i,a);break;case"textarea":t0(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var S=a.value;S!=null?oi(i,!!a.multiple,S,!1):h!==!!a.multiple&&(a.defaultValue!=null?oi(i,!!a.multiple,a.defaultValue,!0):oi(i,!!a.multiple,a.multiple?[]:"",!1))}i[ha]=a}catch(j){Hr(r,r.return,j)}}break;case 6:if(to(t,r),xo(r),n&4){if(r.stateNode===null)throw Error(_e(162));i=r.stateNode,a=r.memoizedProps;try{i.nodeValue=a}catch(j){Hr(r,r.return,j)}}break;case 3:if(to(t,r),xo(r),n&4&&o!==null&&o.memoizedState.isDehydrated)try{ua(t.containerInfo)}catch(j){Hr(r,r.return,j)}break;case 4:to(t,r),xo(r);break;case 13:to(t,r),xo(r),i=r.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(ru=Kr())),n&4&&$m(r);break;case 22:if(f=o!==null&&o.memoizedState!==null,r.mode&1?(yt=(d=yt)||f,to(t,r),yt=d):to(t,r),xo(r),n&8192){if(d=r.memoizedState!==null,(r.stateNode.isHidden=d)&&!f&&r.mode&1)for(Fe=r,f=r.child;f!==null;){for(x=Fe=f;Fe!==null;){switch(h=Fe,S=h.child,h.tag){case 0:case 11:case 14:case 15:ta(4,h,h.return);break;case 1:ei(h,h.return);var C=h.stateNode;if(typeof C.componentWillUnmount=="function"){n=h,o=h.return;try{t=n,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(j){Hr(n,o,j)}}break;case 5:ei(h,h.return);break;case 22:if(h.memoizedState!==null){Gm(x);continue}}S!==null?(S.return=h,Fe=S):Gm(x)}f=f.sibling}e:for(f=null,x=r;;){if(x.tag===5){if(f===null){f=x;try{i=x.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(u=x.stateNode,s=x.memoizedProps.style,l=s!=null&&s.hasOwnProperty("display")?s.display:null,u.style.display=i0("display",l))}catch(j){Hr(r,r.return,j)}}}else if(x.tag===6){if(f===null)try{x.stateNode.nodeValue=d?"":x.memoizedProps}catch(j){Hr(r,r.return,j)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===r)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===r)break e;for(;x.sibling===null;){if(x.return===null||x.return===r)break e;f===x&&(f=null),x=x.return}f===x&&(f=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:to(t,r),xo(r),n&4&&$m(r);break;case 21:break;default:to(t,r),xo(r)}}function xo(r){var t=r.flags;if(t&2){try{e:{for(var o=r.return;o!==null;){if(Tf(o)){var n=o;break e}o=o.return}throw Error(_e(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(la(i,""),n.flags&=-33);var a=Fm(r);rc(r,a,i);break;case 3:case 4:var l=n.stateNode.containerInfo,u=Fm(r);ec(r,u,l);break;default:throw Error(_e(161))}}catch(s){Hr(r,r.return,s)}r.flags&=-3}t&4096&&(r.flags&=-4097)}function Nx(r,t,o){Fe=r,Pf(r)}function Pf(r,t,o){for(var n=(r.mode&1)!==0;Fe!==null;){var i=Fe,a=i.child;if(i.tag===22&&n){var l=i.memoizedState!==null||ol;if(!l){var u=i.alternate,s=u!==null&&u.memoizedState!==null||yt;u=ol;var d=yt;if(ol=l,(yt=s)&&!d)for(Fe=i;Fe!==null;)l=Fe,s=l.child,l.tag===22&&l.memoizedState!==null?Hm(i):s!==null?(s.return=l,Fe=s):Hm(i);for(;a!==null;)Fe=a,Pf(a),a=a.sibling;Fe=i,ol=u,yt=d}Um(r)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Fe=a):Um(r)}}function Um(r){for(;Fe!==null;){var t=Fe;if(t.flags&8772){var o=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yt||ms(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!yt)if(o===null)n.componentDidMount();else{var i=t.elementType===t.type?o.memoizedProps:oo(t.type,o.memoizedProps);n.componentDidUpdate(i,o.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&zm(t,a,n);break;case 3:var l=t.updateQueue;if(l!==null){if(o=null,t.child!==null)switch(t.child.tag){case 5:o=t.child.stateNode;break;case 1:o=t.child.stateNode}zm(t,l,o)}break;case 5:var u=t.stateNode;if(o===null&&t.flags&4){o=u;var s=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&o.focus();break;case"img":s.src&&(o.src=s.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var x=f.dehydrated;x!==null&&ua(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_e(163))}yt||t.flags&512&&Xd(t)}catch(h){Hr(t,t.return,h)}}if(t===r){Fe=null;break}if(o=t.sibling,o!==null){o.return=t.return,Fe=o;break}Fe=t.return}}function Gm(r){for(;Fe!==null;){var t=Fe;if(t===r){Fe=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Fe=o;break}Fe=t.return}}function Hm(r){for(;Fe!==null;){var t=Fe;try{switch(t.tag){case 0:case 11:case 15:var o=t.return;try{ms(4,t)}catch(s){Hr(t,o,s)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(s){Hr(t,i,s)}}var a=t.return;try{Xd(t)}catch(s){Hr(t,a,s)}break;case 5:var l=t.return;try{Xd(t)}catch(s){Hr(t,l,s)}}}catch(s){Hr(t,t.return,s)}if(t===r){Fe=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Fe=u;break}Fe=t.return}}var Bx=Math.ceil,ql=Lo.ReactCurrentDispatcher,Xc=Lo.ReactCurrentOwner,Jt=Lo.ReactCurrentBatchConfig,fr=0,ct=null,rt=null,pt=0,Ft=0,ri=un(0),nt=0,wa=null,Rn=0,ps=0,eu=0,oa=null,Nt=null,ru=0,bi=1/0,Wo=null,Vl=!1,tc=null,rn=null,nl=!1,Yo=null,Yl=0,na=0,oc=null,vl=-1,jl=0;function Rt(){return fr&6?Kr():vl!==-1?vl:vl=Kr()}function tn(r){return r.mode&1?fr&2&&pt!==0?pt&-pt:xx.transition!==null?(jl===0&&(jl=x0()),jl):(r=vr,r!==0||(r=window.event,r=r===void 0?16:k0(r.type)),r):1}function uo(r,t,o,n){if(50<na)throw na=0,oc=null,Error(_e(185));za(r,o,n),(!(fr&2)||r!==ct)&&(r===ct&&(!(fr&2)&&(ps|=o),nt===4&&Ho(r,pt)),Mt(r,n),o===1&&fr===0&&!(t.mode&1)&&(bi=Kr()+500,ds&&mn()))}function Mt(r,t){var o=r.callbackNode;xb(r,t);var n=Al(r,r===ct?pt:0);if(n===0)o!==null&&em(o),r.callbackNode=null,r.callbackPriority=0;else if(t=n&-n,r.callbackPriority!==t){if(o!=null&&em(o),t===1)r.tag===0?bx(qm.bind(null,r)):G0(qm.bind(null,r)),px(function(){!(fr&6)&&mn()}),o=null;else{switch(y0(n)){case 1:o=zc;break;case 4:o=h0;break;case 16:o=Wl;break;case 536870912:o=b0;break;default:o=Wl}o=Gf(o,Df.bind(null,r))}r.callbackPriority=t,r.callbackNode=o}}function Df(r,t){if(vl=-1,jl=0,fr&6)throw Error(_e(327));var o=r.callbackNode;if(si()&&r.callbackNode!==o)return null;var n=Al(r,r===ct?pt:0);if(n===0)return null;if(n&30||n&r.expiredLanes||t)t=Kl(r,n);else{t=n;var i=fr;fr|=2;var a=Of();(ct!==r||pt!==t)&&(Wo=null,bi=Kr()+500,wn(r,t));do try{Mx();break}catch(u){Mf(r,u)}while(!0);Lc(),ql.current=a,fr=i,rt!==null?t=0:(ct=null,pt=0,t=nt)}if(t!==0){if(t===2&&(i=Ad(r),i!==0&&(n=i,t=nc(r,i))),t===1)throw o=wa,wn(r,0),Ho(r,n),Mt(r,Kr()),o;if(t===6)Ho(r,n);else{if(i=r.current.alternate,!(n&30)&&!Px(i)&&(t=Kl(r,n),t===2&&(a=Ad(r),a!==0&&(n=a,t=nc(r,a))),t===1))throw o=wa,wn(r,0),Ho(r,n),Mt(r,Kr()),o;switch(r.finishedWork=i,r.finishedLanes=n,t){case 0:case 1:throw Error(_e(345));case 2:gn(r,Nt,Wo);break;case 3:if(Ho(r,n),(n&130023424)===n&&(t=ru+500-Kr(),10<t)){if(Al(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){Rt(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=Od(gn.bind(null,r,Nt,Wo),t);break}gn(r,Nt,Wo);break;case 4:if(Ho(r,n),(n&4194240)===n)break;for(t=r.eventTimes,i=-1;0<n;){var l=31-co(n);a=1<<l,l=t[l],l>i&&(i=l),n&=~a}if(n=i,n=Kr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Bx(n/1960))-n,10<n){r.timeoutHandle=Od(gn.bind(null,r,Nt,Wo),n);break}gn(r,Nt,Wo);break;case 5:gn(r,Nt,Wo);break;default:throw Error(_e(329))}}}return Mt(r,Kr()),r.callbackNode===o?Df.bind(null,r):null}function nc(r,t){var o=oa;return r.current.memoizedState.isDehydrated&&(wn(r,t).flags|=256),r=Kl(r,t),r!==2&&(t=Nt,Nt=o,t!==null&&ic(t)),r}function ic(r){Nt===null?Nt=r:Nt.push.apply(Nt,r)}function Px(r){for(var t=r;;){if(t.flags&16384){var o=t.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var n=0;n<o.length;n++){var i=o[n],a=i.getSnapshot;i=i.value;try{if(!po(a(),i))return!1}catch{return!1}}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ho(r,t){for(t&=~eu,t&=~ps,r.suspendedLanes|=t,r.pingedLanes&=~t,r=r.expirationTimes;0<t;){var o=31-co(t),n=1<<o;r[o]=-1,t&=~n}}function qm(r){if(fr&6)throw Error(_e(327));si();var t=Al(r,0);if(!(t&1))return Mt(r,Kr()),null;var o=Kl(r,t);if(r.tag!==0&&o===2){var n=Ad(r);n!==0&&(t=n,o=nc(r,n))}if(o===1)throw o=wa,wn(r,0),Ho(r,t),Mt(r,Kr()),o;if(o===6)throw Error(_e(345));return r.finishedWork=r.current.alternate,r.finishedLanes=t,gn(r,Nt,Wo),Mt(r,Kr()),null}function tu(r,t){var o=fr;fr|=1;try{return r(t)}finally{fr=o,fr===0&&(bi=Kr()+500,ds&&mn())}}function En(r){Yo!==null&&Yo.tag===0&&!(fr&6)&&si();var t=fr;fr|=1;var o=Jt.transition,n=vr;try{if(Jt.transition=null,vr=1,r)return r()}finally{vr=n,Jt.transition=o,fr=t,!(fr&6)&&mn()}}function ou(){Ft=ri.current,Ir(ri)}function wn(r,t){r.finishedWork=null,r.finishedLanes=0;var o=r.timeoutHandle;if(o!==-1&&(r.timeoutHandle=-1,mx(o)),rt!==null)for(o=rt.return;o!==null;){var n=o;switch(Dc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Pl();break;case 3:gi(),Ir(Pt),Ir(wt),qc();break;case 5:Hc(n);break;case 4:gi();break;case 13:Ir(Dr);break;case 19:Ir(Dr);break;case 10:Fc(n.type._context);break;case 22:case 23:ou()}o=o.return}if(ct=r,rt=r=on(r.current,null),pt=Ft=t,nt=0,wa=null,eu=ps=Rn=0,Nt=oa=null,bn!==null){for(t=0;t<bn.length;t++)if(o=bn[t],n=o.interleaved,n!==null){o.interleaved=null;var i=n.next,a=o.pending;if(a!==null){var l=a.next;a.next=i,n.next=l}o.pending=n}bn=null}return r}function Mf(r,t){do{var o=rt;try{if(Lc(),bl.current=Hl,Gl){for(var n=Lr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Gl=!1}if(zn=0,st=ot=Lr=null,ra=!1,ya=0,Xc.current=null,o===null||o.return===null){nt=1,wa=t,rt=null;break}e:{var a=r,l=o.return,u=o,s=t;if(t=pt,u.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){var d=s,f=u,x=f.tag;if(!(f.mode&1)&&(x===0||x===11||x===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var S=Tm(l);if(S!==null){S.flags&=-257,Nm(S,l,u,a,t),S.mode&1&&Im(a,d,t),t=S,s=d;var C=t.updateQueue;if(C===null){var j=new Set;j.add(s),t.updateQueue=j}else C.add(s);break e}else{if(!(t&1)){Im(a,d,t),nu();break e}s=Error(_e(426))}}else if(Tr&&u.mode&1){var P=Tm(l);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Nm(P,l,u,a,t),Mc(hi(s,u));break e}}a=s=hi(s,u),nt!==4&&(nt=2),oa===null?oa=[a]:oa.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=vf(a,s,t);_m(a,v);break e;case 1:u=s;var m=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(rn===null||!rn.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t;var k=jf(a,u,t);_m(a,k);break e}}a=a.return}while(a!==null)}Ff(o)}catch(U){t=U,rt===o&&o!==null&&(rt=o=o.return);continue}break}while(!0)}function Of(){var r=ql.current;return ql.current=Hl,r===null?Hl:r}function nu(){(nt===0||nt===3||nt===2)&&(nt=4),ct===null||!(Rn&268435455)&&!(ps&268435455)||Ho(ct,pt)}function Kl(r,t){var o=fr;fr|=2;var n=Of();(ct!==r||pt!==t)&&(Wo=null,wn(r,t));do try{Dx();break}catch(i){Mf(r,i)}while(!0);if(Lc(),fr=o,ql.current=n,rt!==null)throw Error(_e(261));return ct=null,pt=0,nt}function Dx(){for(;rt!==null;)Lf(rt)}function Mx(){for(;rt!==null&&!db();)Lf(rt)}function Lf(r){var t=Uf(r.alternate,r,Ft);r.memoizedProps=r.pendingProps,t===null?Ff(r):rt=t,Xc.current=null}function Ff(r){var t=r;do{var o=t.alternate;if(r=t.return,t.flags&32768){if(o=Ax(o,t),o!==null){o.flags&=32767,rt=o;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{nt=6,rt=null;return}}else if(o=Wx(o,t,Ft),o!==null){rt=o;return}if(t=t.sibling,t!==null){rt=t;return}rt=t=r}while(t!==null);nt===0&&(nt=5)}function gn(r,t,o){var n=vr,i=Jt.transition;try{Jt.transition=null,vr=1,Ox(r,t,o,n)}finally{Jt.transition=i,vr=n}return null}function Ox(r,t,o,n){do si();while(Yo!==null);if(fr&6)throw Error(_e(327));o=r.finishedWork;var i=r.finishedLanes;if(o===null)return null;if(r.finishedWork=null,r.finishedLanes=0,o===r.current)throw Error(_e(177));r.callbackNode=null,r.callbackPriority=0;var a=o.lanes|o.childLanes;if(yb(r,a),r===ct&&(rt=ct=null,pt=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||nl||(nl=!0,Gf(Wl,function(){return si(),null})),a=(o.flags&15990)!==0,o.subtreeFlags&15990||a){a=Jt.transition,Jt.transition=null;var l=vr;vr=1;var u=fr;fr|=4,Xc.current=null,Tx(r,o),Bf(o,r),ix(Dd),Il=!!Pd,Dd=Pd=null,r.current=o,Nx(o),cb(),fr=u,vr=l,Jt.transition=a}else r.current=o;if(nl&&(nl=!1,Yo=r,Yl=i),a=r.pendingLanes,a===0&&(rn=null),pb(o.stateNode),Mt(r,Kr()),t!==null)for(n=r.onRecoverableError,o=0;o<t.length;o++)i=t[o],n(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,r=tc,tc=null,r;return Yl&1&&r.tag!==0&&si(),a=r.pendingLanes,a&1?r===oc?na++:(na=0,oc=r):na=0,mn(),null}function si(){if(Yo!==null){var r=y0(Yl),t=Jt.transition,o=vr;try{if(Jt.transition=null,vr=16>r?16:r,Yo===null)var n=!1;else{if(r=Yo,Yo=null,Yl=0,fr&6)throw Error(_e(331));var i=fr;for(fr|=4,Fe=r.current;Fe!==null;){var a=Fe,l=a.child;if(Fe.flags&16){var u=a.deletions;if(u!==null){for(var s=0;s<u.length;s++){var d=u[s];for(Fe=d;Fe!==null;){var f=Fe;switch(f.tag){case 0:case 11:case 15:ta(8,f,a)}var x=f.child;if(x!==null)x.return=f,Fe=x;else for(;Fe!==null;){f=Fe;var h=f.sibling,S=f.return;if(If(f),f===d){Fe=null;break}if(h!==null){h.return=S,Fe=h;break}Fe=S}}}var C=a.alternate;if(C!==null){var j=C.child;if(j!==null){C.child=null;do{var P=j.sibling;j.sibling=null,j=P}while(j!==null)}}Fe=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,Fe=l;else e:for(;Fe!==null;){if(a=Fe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ta(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,Fe=v;break e}Fe=a.return}}var m=r.current;for(Fe=m;Fe!==null;){l=Fe;var y=l.child;if(l.subtreeFlags&2064&&y!==null)y.return=l,Fe=y;else e:for(l=m;Fe!==null;){if(u=Fe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ms(9,u)}}catch(U){Hr(u,u.return,U)}if(u===l){Fe=null;break e}var k=u.sibling;if(k!==null){k.return=u.return,Fe=k;break e}Fe=u.return}}if(fr=i,mn(),So&&typeof So.onPostCommitFiberRoot=="function")try{So.onPostCommitFiberRoot(ns,r)}catch{}n=!0}return n}finally{vr=o,Jt.transition=t}}return!1}function Vm(r,t,o){t=hi(o,t),t=vf(r,t,1),r=en(r,t,1),t=Rt(),r!==null&&(za(r,1,t),Mt(r,t))}function Hr(r,t,o){if(r.tag===3)Vm(r,r,o);else for(;t!==null;){if(t.tag===3){Vm(t,r,o);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(rn===null||!rn.has(n))){r=hi(o,r),r=jf(t,r,1),t=en(t,r,1),r=Rt(),t!==null&&(za(t,1,r),Mt(t,r));break}}t=t.return}}function Lx(r,t,o){var n=r.pingCache;n!==null&&n.delete(t),t=Rt(),r.pingedLanes|=r.suspendedLanes&o,ct===r&&(pt&o)===o&&(nt===4||nt===3&&(pt&130023424)===pt&&500>Kr()-ru?wn(r,0):eu|=o),Mt(r,t)}function $f(r,t){t===0&&(r.mode&1?(t=Ya,Ya<<=1,!(Ya&130023424)&&(Ya=4194304)):t=1);var o=Rt();r=Mo(r,t),r!==null&&(za(r,t,o),Mt(r,o))}function Fx(r){var t=r.memoizedState,o=0;t!==null&&(o=t.retryLane),$f(r,o)}function $x(r,t){var o=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(o=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(_e(314))}n!==null&&n.delete(t),$f(r,o)}var Uf;Uf=function(r,t,o){if(r!==null)if(r.memoizedProps!==t.pendingProps||Pt.current)Bt=!0;else{if(!(r.lanes&o)&&!(t.flags&128))return Bt=!1,Ex(r,t,o);Bt=!!(r.flags&131072)}else Bt=!1,Tr&&t.flags&1048576&&H0(t,Ol,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;yl(r,t),r=t.pendingProps;var i=mi(t,wt.current);li(t,o),i=Yc(null,t,n,r,i,o);var a=Kc();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dt(n)?(a=!0,Dl(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Uc(t),i.updater=us,t.stateNode=i,i._reactInternals=t,qd(t,n,r,o),t=Kd(null,t,n,!0,a,o)):(t.tag=0,Tr&&a&&Pc(t),kt(null,t,i,o),t=t.child),t;case 16:n=t.elementType;e:{switch(yl(r,t),r=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=Gx(n),r=oo(n,r),i){case 0:t=Yd(null,t,n,r,o);break e;case 1:t=Dm(null,t,n,r,o);break e;case 11:t=Bm(null,t,n,r,o);break e;case 14:t=Pm(null,t,n,oo(n.type,r),o);break e}throw Error(_e(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:oo(n,i),Yd(r,t,n,i,o);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:oo(n,i),Dm(r,t,n,i,o);case 3:e:{if(kf(t),r===null)throw Error(_e(387));n=t.pendingProps,a=t.memoizedState,i=a.element,J0(r,t),$l(t,n,null,o);var l=t.memoizedState;if(n=l.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=hi(Error(_e(423)),t),t=Mm(r,t,n,o,i);break e}else if(n!==i){i=hi(Error(_e(424)),t),t=Mm(r,t,n,o,i);break e}else for($t=Xo(t.stateNode.containerInfo.firstChild),Ut=t,Tr=!0,lo=null,o=K0(t,null,n,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(pi(),n===i){t=Oo(r,t,o);break e}kt(r,t,n,o)}t=t.child}return t;case 5:return Q0(t),r===null&&Ud(t),n=t.type,i=t.pendingProps,a=r!==null?r.memoizedProps:null,l=i.children,Md(n,i)?l=null:a!==null&&Md(n,a)&&(t.flags|=32),Cf(r,t),kt(r,t,l,o),t.child;case 6:return r===null&&Ud(t),null;case 13:return _f(r,t,o);case 4:return Gc(t,t.stateNode.containerInfo),n=t.pendingProps,r===null?t.child=fi(t,null,n,o):kt(r,t,n,o),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:oo(n,i),Bm(r,t,n,i,o);case 7:return kt(r,t,t.pendingProps,o),t.child;case 8:return kt(r,t,t.pendingProps.children,o),t.child;case 12:return kt(r,t,t.pendingProps.children,o),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,l=i.value,kr(Ll,n._currentValue),n._currentValue=l,a!==null)if(po(a.value,l)){if(a.children===i.children&&!Pt.current){t=Oo(r,t,o);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var u=a.dependencies;if(u!==null){l=a.child;for(var s=u.firstContext;s!==null;){if(s.context===n){if(a.tag===1){s=Bo(-1,o&-o),s.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?s.next=s:(s.next=f.next,f.next=s),d.pending=s}}a.lanes|=o,s=a.alternate,s!==null&&(s.lanes|=o),Gd(a.return,o,t),u.lanes|=o;break}s=s.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(_e(341));l.lanes|=o,u=l.alternate,u!==null&&(u.lanes|=o),Gd(l,o,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}kt(r,t,i.children,o),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,li(t,o),i=Xt(i),n=n(i),t.flags|=1,kt(r,t,n,o),t.child;case 14:return n=t.type,i=oo(n,t.pendingProps),i=oo(n.type,i),Pm(r,t,n,i,o);case 15:return wf(r,t,t.type,t.pendingProps,o);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:oo(n,i),yl(r,t),t.tag=1,Dt(n)?(r=!0,Dl(t)):r=!1,li(t,o),yf(t,n,i),qd(t,n,i,o),Kd(null,t,n,!0,r,o);case 19:return zf(r,t,o);case 22:return Sf(r,t,o)}throw Error(_e(156,t.tag))};function Gf(r,t){return g0(r,t)}function Ux(r,t,o,n){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(r,t,o,n){return new Ux(r,t,o,n)}function iu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Gx(r){if(typeof r=="function")return iu(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Cc)return 11;if(r===kc)return 14}return 2}function on(r,t){var o=r.alternate;return o===null?(o=Zt(r.tag,t,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=t,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&14680064,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,t=r.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o}function wl(r,t,o,n,i,a){var l=2;if(n=r,typeof r=="function")iu(r)&&(l=1);else if(typeof r=="string")l=5;else e:switch(r){case Hn:return Sn(o.children,i,a,t);case Sc:l=8,i|=8;break;case hd:return r=Zt(12,o,t,i|2),r.elementType=hd,r.lanes=a,r;case bd:return r=Zt(13,o,t,i),r.elementType=bd,r.lanes=a,r;case xd:return r=Zt(19,o,t,i),r.elementType=xd,r.lanes=a,r;case Qp:return fs(o,i,a,t);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Zp:l=10;break e;case Jp:l=9;break e;case Cc:l=11;break e;case kc:l=14;break e;case $o:l=16,n=null;break e}throw Error(_e(130,r==null?r:typeof r,""))}return t=Zt(l,o,t,i),t.elementType=r,t.type=n,t.lanes=a,t}function Sn(r,t,o,n){return r=Zt(7,r,n,t),r.lanes=o,r}function fs(r,t,o,n){return r=Zt(22,r,n,t),r.elementType=Qp,r.lanes=o,r.stateNode={isHidden:!1},r}function id(r,t,o){return r=Zt(6,r,null,t),r.lanes=o,r}function ad(r,t,o){return t=Zt(4,r.children!==null?r.children:[],r.key,t),t.lanes=o,t.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},t}function Hx(r,t,o,n,i){this.tag=t,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ls(0),this.expirationTimes=Ls(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ls(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function au(r,t,o,n,i,a,l,u,s){return r=new Hx(r,t,o,u,s),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Zt(3,null,null,t),r.current=a,a.stateNode=r,a.memoizedState={element:n,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uc(a),r}function qx(r,t,o){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gn,key:n==null?null:""+n,children:r,containerInfo:t,implementation:o}}function Hf(r){if(!r)return sn;r=r._reactInternals;e:{if(Nn(r)!==r||r.tag!==1)throw Error(_e(170));var t=r;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_e(171))}if(r.tag===1){var o=r.type;if(Dt(o))return U0(r,o,t)}return t}function qf(r,t,o,n,i,a,l,u,s){return r=au(o,n,!0,r,i,a,l,u,s),r.context=Hf(null),o=r.current,n=Rt(),i=tn(o),a=Bo(n,i),a.callback=t??null,en(o,a,i),r.current.lanes=i,za(r,i,n),Mt(r,n),r}function gs(r,t,o,n){var i=t.current,a=Rt(),l=tn(i);return o=Hf(o),t.context===null?t.context=o:t.pendingContext=o,t=Bo(a,l),t.payload={element:r},n=n===void 0?null:n,n!==null&&(t.callback=n),r=en(i,t,l),r!==null&&(uo(r,i,l,a),hl(r,i,l)),l}function Zl(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Ym(r,t){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<t?o:t}}function lu(r,t){Ym(r,t),(r=r.alternate)&&Ym(r,t)}function Vx(){return null}var Vf=typeof reportError=="function"?reportError:function(r){console.error(r)};function su(r){this._internalRoot=r}hs.prototype.render=su.prototype.render=function(r){var t=this._internalRoot;if(t===null)throw Error(_e(409));gs(r,t,null,null)};hs.prototype.unmount=su.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var t=r.containerInfo;En(function(){gs(null,r,null,null)}),t[Do]=null}};function hs(r){this._internalRoot=r}hs.prototype.unstable_scheduleHydration=function(r){if(r){var t=w0();r={blockedOn:null,target:r,priority:t};for(var o=0;o<Go.length&&t!==0&&t<Go[o].priority;o++);Go.splice(o,0,r),o===0&&C0(r)}};function du(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function bs(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Km(){}function Yx(r,t,o,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var d=Zl(l);a.call(d)}}var l=qf(t,n,r,0,null,!1,!1,"",Km);return r._reactRootContainer=l,r[Do]=l.current,fa(r.nodeType===8?r.parentNode:r),En(),l}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var u=n;n=function(){var d=Zl(s);u.call(d)}}var s=au(r,0,!1,null,null,!1,!1,"",Km);return r._reactRootContainer=s,r[Do]=s.current,fa(r.nodeType===8?r.parentNode:r),En(function(){gs(t,s,o,n)}),s}function xs(r,t,o,n,i){var a=o._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var u=i;i=function(){var s=Zl(l);u.call(s)}}gs(t,l,r,i)}else l=Yx(o,t,r,i,n);return Zl(l)}v0=function(r){switch(r.tag){case 3:var t=r.stateNode;if(t.current.memoizedState.isDehydrated){var o=qi(t.pendingLanes);o!==0&&(Rc(t,o|1),Mt(t,Kr()),!(fr&6)&&(bi=Kr()+500,mn()))}break;case 13:En(function(){var n=Mo(r,1);if(n!==null){var i=Rt();uo(n,r,1,i)}}),lu(r,1)}};Ec=function(r){if(r.tag===13){var t=Mo(r,134217728);if(t!==null){var o=Rt();uo(t,r,134217728,o)}lu(r,134217728)}};j0=function(r){if(r.tag===13){var t=tn(r),o=Mo(r,t);if(o!==null){var n=Rt();uo(o,r,t,n)}lu(r,t)}};w0=function(){return vr};S0=function(r,t){var o=vr;try{return vr=r,t()}finally{vr=o}};Rd=function(r,t,o){switch(t){case"input":if(jd(r,o),t=o.name,o.type==="radio"&&t!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<o.length;t++){var n=o[t];if(n!==r&&n.form===r.form){var i=ss(n);if(!i)throw Error(_e(90));e0(n),jd(n,i)}}}break;case"textarea":t0(r,o);break;case"select":t=o.value,t!=null&&oi(r,!!o.multiple,t,!1)}};d0=tu;c0=En;var Kx={usingClientEntryPoint:!1,Events:[Ea,Kn,ss,l0,s0,tu]},Li={findFiberByHostInstance:hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zx={bundleType:Li.bundleType,version:Li.version,rendererPackageName:Li.rendererPackageName,rendererConfig:Li.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lo.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=p0(r),r===null?null:r.stateNode},findFiberByHostInstance:Li.findFiberByHostInstance||Vx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{ns=il.inject(Zx),So=il}catch{}}qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kx;qt.createPortal=function(r,t){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!du(t))throw Error(_e(200));return qx(r,t,null,o)};qt.createRoot=function(r,t){if(!du(r))throw Error(_e(299));var o=!1,n="",i=Vf;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=au(r,1,!1,null,null,o,!1,n,i),r[Do]=t.current,fa(r.nodeType===8?r.parentNode:r),new su(t)};qt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var t=r._reactInternals;if(t===void 0)throw typeof r.render=="function"?Error(_e(188)):(r=Object.keys(r).join(","),Error(_e(268,r)));return r=p0(t),r=r===null?null:r.stateNode,r};qt.flushSync=function(r){return En(r)};qt.hydrate=function(r,t,o){if(!bs(t))throw Error(_e(200));return xs(null,r,t,!0,o)};qt.hydrateRoot=function(r,t,o){if(!du(r))throw Error(_e(405));var n=o!=null&&o.hydratedSources||null,i=!1,a="",l=Vf;if(o!=null&&(o.unstable_strictMode===!0&&(i=!0),o.identifierPrefix!==void 0&&(a=o.identifierPrefix),o.onRecoverableError!==void 0&&(l=o.onRecoverableError)),t=qf(t,null,r,1,o??null,i,!1,a,l),r[Do]=t.current,fa(r),n)for(r=0;r<n.length;r++)o=n[r],i=o._getVersion,i=i(o._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[o,i]:t.mutableSourceEagerHydrationData.push(o,i);return new hs(t)};qt.render=function(r,t,o){if(!bs(t))throw Error(_e(200));return xs(null,r,t,!1,o)};qt.unmountComponentAtNode=function(r){if(!bs(r))throw Error(_e(40));return r._reactRootContainer?(En(function(){xs(null,null,r,!1,function(){r._reactRootContainer=null,r[Do]=null})}),!0):!1};qt.unstable_batchedUpdates=tu;qt.unstable_renderSubtreeIntoContainer=function(r,t,o,n){if(!bs(o))throw Error(_e(200));if(r==null||r._reactInternals===void 0)throw Error(_e(38));return xs(r,t,o,!1,n)};qt.version="18.3.1-next-f1338f8080-20240426";function Yf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yf)}catch(r){console.error(r)}}Yf(),qp.exports=qt;var Jx=qp.exports,Zm=Jx;fd.createRoot=Zm.createRoot,fd.hydrateRoot=Zm.hydrateRoot;/**
* @remix-run/router v1.23.2
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function Sa(){return Sa=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r[n]=o[n])}return r},Sa.apply(this,arguments)}var Ko;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Ko||(Ko={}));const Jm="popstate";function Qx(r){r===void 0&&(r={});function t(n,i){let{pathname:a,search:l,hash:u}=n.location;return ac("",{pathname:a,search:l,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function o(n,i){return typeof i=="string"?i:Jl(i)}return ey(t,o,null,r)}function Zr(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function cu(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Xx(){return Math.random().toString(36).substr(2,8)}function Qm(r,t){return{usr:r.state,key:r.key,idx:t}}function ac(r,t,o,n){return o===void 0&&(o=null),Sa({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof t=="string"?Si(t):t,{state:o,key:t&&t.key||n||Xx()})}function Jl(r){let{pathname:t="/",search:o="",hash:n=""}=r;return o&&o!=="?"&&(t+=o.charAt(0)==="?"?o:"?"+o),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Si(r){let t={};if(r){let o=r.indexOf("#");o>=0&&(t.hash=r.substr(o),r=r.substr(0,o));let n=r.indexOf("?");n>=0&&(t.search=r.substr(n),r=r.substr(0,n)),r&&(t.pathname=r)}return t}function ey(r,t,o,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,l=i.history,u=Ko.Pop,s=null,d=f();d==null&&(d=0,l.replaceState(Sa({},l.state,{idx:d}),""));function f(){return(l.state||{idx:null}).idx}function x(){u=Ko.Pop;let P=f(),v=P==null?null:P-d;d=P,s&&s({action:u,location:j.location,delta:v})}function h(P,v){u=Ko.Push;let m=ac(j.location,P,v);d=f()+1;let y=Qm(m,d),k=j.createHref(m);try{l.pushState(y,"",k)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(k)}a&&s&&s({action:u,location:j.location,delta:1})}function S(P,v){u=Ko.Replace;let m=ac(j.location,P,v);d=f();let y=Qm(m,d),k=j.createHref(m);l.replaceState(y,"",k),a&&s&&s({action:u,location:j.location,delta:0})}function C(P){let v=i.location.origin!=="null"?i.location.origin:i.location.href,m=typeof P=="string"?P:Jl(P);return m=m.replace(/ $/,"%20"),Zr(v,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,v)}let j={get action(){return u},get location(){return r(i,l)},listen(P){if(s)throw new Error("A history only accepts one active listener");return i.addEventListener(Jm,x),s=P,()=>{i.removeEventListener(Jm,x),s=null}},createHref(P){return t(i,P)},createURL:C,encodeLocation(P){let v=C(P);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:S,go(P){return l.go(P)}};return j}var Xm;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Xm||(Xm={}));function ry(r,t,o){return o===void 0&&(o="/"),ty(r,t,o)}function ty(r,t,o,n){let i=typeof t=="string"?Si(t):t,a=uu(i.pathname||"/",o);if(a==null)return null;let l=Kf(r);oy(l);let u=null;for(let s=0;u==null&&s<l.length;++s){let d=gy(a);u=my(l[s],d)}return u}function Kf(r,t,o,n){t===void 0&&(t=[]),o===void 0&&(o=[]),n===void 0&&(n="");let i=(a,l,u)=>{let s={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};s.relativePath.startsWith("/")&&(Zr(s.relativePath.startsWith(n),'Absolute route path "'+s.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),s.relativePath=s.relativePath.slice(n.length));let d=nn([n,s.relativePath]),f=o.concat(s);a.children&&a.children.length>0&&(Zr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Kf(a.children,t,f,d)),!(a.path==null&&!a.index)&&t.push({path:d,score:cy(d,a.index),routesMeta:f})};return r.forEach((a,l)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))i(a,l);else for(let s of Zf(a.path))i(a,l,s)}),t}function Zf(r){let t=r.split("/");if(t.length===0)return[];let[o,...n]=t,i=o.endsWith("?"),a=o.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let l=Zf(n.join("/")),u=[];return u.push(...l.map(s=>s===""?a:[a,s].join("/"))),i&&u.push(...l),u.map(s=>r.startsWith("/")&&s===""?"/":s)}function oy(r){r.sort((t,o)=>t.score!==o.score?o.score-t.score:uy(t.routesMeta.map(n=>n.childrenIndex),o.routesMeta.map(n=>n.childrenIndex)))}const ny=/^:[\w-]+$/,iy=3,ay=2,ly=1,sy=10,dy=-2,ep=r=>r==="*";function cy(r,t){let o=r.split("/"),n=o.length;return o.some(ep)&&(n+=dy),t&&(n+=ay),o.filter(i=>!ep(i)).reduce((i,a)=>i+(ny.test(a)?iy:a===""?ly:sy),n)}function uy(r,t){return r.length===t.length&&r.slice(0,-1).every((o,n)=>o===t[n])?r[r.length-1]-t[t.length-1]:0}function my(r,t,o){let{routesMeta:n}=r,i={},a="/",l=[];for(let u=0;u<n.length;++u){let s=n[u],d=u===n.length-1,f=a==="/"?t:t.slice(a.length)||"/",x=py({path:s.relativePath,caseSensitive:s.caseSensitive,end:d},f),h=s.route;if(!x)return null;Object.assign(i,x.params),l.push({params:i,pathname:nn([a,x.pathname]),pathnameBase:vy(nn([a,x.pathnameBase])),route:h}),x.pathnameBase!=="/"&&(a=nn([a,x.pathnameBase]))}return l}function py(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[o,n]=fy(r.path,r.caseSensitive,r.end),i=t.match(o);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((s,d,f)=>{let{paramName:x,isOptional:h}=d;if(x==="*"){let C=u[f]||"";l=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}const S=u[f];return h&&!S?s[x]=void 0:s[x]=(S||"").replace(/%2F/g,"/"),s},{}),pathname:a,pathnameBase:l,pattern:r}}function fy(r,t,o){t===void 0&&(t=!1),o===void 0&&(o=!0),cu(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function gy(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return cu(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),r}}function uu(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let o=t.endsWith("/")?t.length-1:t.length,n=r.charAt(o);return n&&n!=="/"?null:r.slice(o)||"/"}const hy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,by=r=>hy.test(r);function xy(r,t){t===void 0&&(t="/");let{pathname:o,search:n="",hash:i=""}=typeof r=="string"?Si(r):r,a;if(o)if(by(o))a=o;else{if(o.includes("//")){let l=o;o=o.replace(/\/\/+/g,"/"),cu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+o))}o.startsWith("/")?a=rp(o.substring(1),"/"):a=rp(o,t)}else a=t;return{pathname:a,search:jy(n),hash:wy(i)}}function rp(r,t){let o=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(n=>{n===".."?o.length>1&&o.pop():n!=="."&&o.push(n)}),o.length>1?o.join("/"):"/"}function ld(r,t,o,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yy(r){return r.filter((t,o)=>o===0||t.route.path&&t.route.path.length>0)}function mu(r,t){let o=yy(r);return t?o.map((n,i)=>i===o.length-1?n.pathname:n.pathnameBase):o.map(n=>n.pathnameBase)}function pu(r,t,o,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=Si(r):(i=Sa({},r),Zr(!i.pathname||!i.pathname.includes("?"),ld("?","pathname","search",i)),Zr(!i.pathname||!i.pathname.includes("#"),ld("#","pathname","hash",i)),Zr(!i.search||!i.search.includes("#"),ld("#","search","hash",i)));let a=r===""||i.pathname==="",l=a?"/":i.pathname,u;if(l==null)u=o;else{let x=t.length-1;if(!n&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),x-=1;i.pathname=h.join("/")}u=x>=0?t[x]:"/"}let s=xy(i,u),d=l&&l!=="/"&&l.endsWith("/"),f=(a||l===".")&&o.endsWith("/");return!s.pathname.endsWith("/")&&(d||f)&&(s.pathname+="/"),s}const nn=r=>r.join("/").replace(/\/\/+/g,"/"),vy=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),jy=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,wy=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Sy(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Jf=["post","put","patch","delete"];new Set(Jf);const Cy=["get",...Jf];new Set(Cy);/**
* React Router v6.30.3
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function Ca(){return Ca=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r[n]=o[n])}return r},Ca.apply(this,arguments)}const fu=c.createContext(null),ky=c.createContext(null),pn=c.createContext(null),ys=c.createContext(null),ko=c.createContext({outlet:null,matches:[],isDataRoute:!1}),Qf=c.createContext(null);function _y(r,t){let{relative:o}=t===void 0?{}:t;Ci()||Zr(!1);let{basename:n,navigator:i}=c.useContext(pn),{hash:a,pathname:l,search:u}=eg(r,{relative:o}),s=l;return n!=="/"&&(s=l==="/"?n:nn([n,l])),i.createHref({pathname:s,search:u,hash:a})}function Ci(){return c.useContext(ys)!=null}function Bn(){return Ci()||Zr(!1),c.useContext(ys).location}function Xf(r){c.useContext(pn).static||c.useLayoutEffect(r)}function _o(){let{isDataRoute:r}=c.useContext(ko);return r?Fy():zy()}function zy(){Ci()||Zr(!1);let r=c.useContext(fu),{basename:t,future:o,navigator:n}=c.useContext(pn),{matches:i}=c.useContext(ko),{pathname:a}=Bn(),l=JSON.stringify(mu(i,o.v7_relativeSplatPath)),u=c.useRef(!1);return Xf(()=>{u.current=!0}),c.useCallback(function(s,d){if(d===void 0&&(d={}),!u.current)return;if(typeof s=="number"){n.go(s);return}let f=pu(s,JSON.parse(l),a,d.relative==="path");r==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:nn([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,l,a,r])}const Ry=c.createContext(null);function Ey(r){let t=c.useContext(ko).outlet;return t&&c.createElement(Ry.Provider,{value:r},t)}function vs(){let{matches:r}=c.useContext(ko),t=r[r.length-1];return t?t.params:{}}function eg(r,t){let{relative:o}=t===void 0?{}:t,{future:n}=c.useContext(pn),{matches:i}=c.useContext(ko),{pathname:a}=Bn(),l=JSON.stringify(mu(i,n.v7_relativeSplatPath));return c.useMemo(()=>pu(r,JSON.parse(l),a,o==="path"),[r,l,a,o])}function Wy(r,t){return Ay(r,t)}function Ay(r,t,o,n){Ci()||Zr(!1);let{navigator:i}=c.useContext(pn),{matches:a}=c.useContext(ko),l=a[a.length-1],u=l?l.params:{};l&&l.pathname;let s=l?l.pathnameBase:"/";l&&l.route;let d=Bn(),f;if(t){var x;let P=typeof t=="string"?Si(t):t;s==="/"||(x=P.pathname)!=null&&x.startsWith(s)||Zr(!1),f=P}else f=d;let h=f.pathname||"/",S=h;if(s!=="/"){let P=s.replace(/^\//,"").split("/");S="/"+h.replace(/^\//,"").split("/").slice(P.length).join("/")}let C=ry(r,{pathname:S}),j=Py(C&&C.map(P=>Object.assign({},P,{params:Object.assign({},u,P.params),pathname:nn([s,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?s:nn([s,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),a,o,n);return t&&j?c.createElement(ys.Provider,{value:{location:Ca({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ko.Pop}},j):j}function Iy(){let r=Ly(),t=Sy(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),o=r instanceof Error?r.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},t),o?c.createElement("pre",{style:n},o):null,null)}const Ty=c.createElement(Iy,null);class Ny extends c.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,o){return o.location!==t.location||o.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:o.error,location:o.location,revalidation:t.revalidation||o.revalidation}}componentDidCatch(t,o){console.error("React Router caught the following error during render",t,o)}render(){return this.state.error!==void 0?c.createElement(ko.Provider,{value:this.props.routeContext},c.createElement(Qf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function By(r){let{routeContext:t,match:o,children:n}=r,i=c.useContext(fu);return i&&i.static&&i.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=o.route.id),c.createElement(ko.Provider,{value:t},n)}function Py(r,t,o,n){var i;if(t===void 0&&(t=[]),o===void 0&&(o=null),n===void 0&&(n=null),r==null){var a;if(!o)return null;if(o.errors)r=o.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!o.initialized&&o.matches.length>0)r=o.matches;else return null}let l=r,u=(i=o)==null?void 0:i.errors;if(u!=null){let f=l.findIndex(x=>x.route.id&&(u==null?void 0:u[x.route.id])!==void 0);f>=0||Zr(!1),l=l.slice(0,Math.min(l.length,f+1))}let s=!1,d=-1;if(o&&n&&n.v7_partialHydration)for(let f=0;f<l.length;f++){let x=l[f];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(d=f),x.route.id){let{loaderData:h,errors:S}=o,C=x.route.loader&&h[x.route.id]===void 0&&(!S||S[x.route.id]===void 0);if(x.route.lazy||C){s=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((f,x,h)=>{let S,C=!1,j=null,P=null;o&&(S=u&&x.route.id?u[x.route.id]:void 0,j=x.route.errorElement||Ty,s&&(d<0&&h===0?($y("route-fallback"),C=!0,P=null):d===h&&(C=!0,P=x.route.hydrateFallbackElement||null)));let v=t.concat(l.slice(0,h+1)),m=()=>{let y;return S?y=j:C?y=P:x.route.Component?y=c.createElement(x.route.Component,null):x.route.element?y=x.route.element:y=f,c.createElement(By,{match:x,routeContext:{outlet:f,matches:v,isDataRoute:o!=null},children:y})};return o&&(x.route.ErrorBoundary||x.route.errorElement||h===0)?c.createElement(Ny,{location:o.location,revalidation:o.revalidation,component:j,error:S,children:m(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):m()},null)}var rg=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(rg||{}),tg=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(tg||{});function Dy(r){let t=c.useContext(fu);return t||Zr(!1),t}function My(r){let t=c.useContext(ky);return t||Zr(!1),t}function Oy(r){let t=c.useContext(ko);return t||Zr(!1),t}function og(r){let t=Oy(),o=t.matches[t.matches.length-1];return o.route.id||Zr(!1),o.route.id}function Ly(){var r;let t=c.useContext(Qf),o=My(),n=og();return t!==void 0?t:(r=o.errors)==null?void 0:r[n]}function Fy(){let{router:r}=Dy(rg.UseNavigateStable),t=og(tg.UseNavigateStable),o=c.useRef(!1);return Xf(()=>{o.current=!0}),c.useCallback(function(n,i){i===void 0&&(i={}),o.current&&(typeof n=="number"?r.navigate(n):r.navigate(n,Ca({fromRouteId:t},i)))},[r,t])}const tp={};function $y(r,t,o){tp[r]||(tp[r]=!0)}function Uy(r,t){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function js(r){let{to:t,replace:o,state:n,relative:i}=r;Ci()||Zr(!1);let{future:a,static:l}=c.useContext(pn),{matches:u}=c.useContext(ko),{pathname:s}=Bn(),d=_o(),f=pu(t,mu(u,a.v7_relativeSplatPath),s,i==="path"),x=JSON.stringify(f);return c.useEffect(()=>d(JSON.parse(x),{replace:o,state:n,relative:i}),[d,x,i,o,n]),null}function Gy(r){return Ey(r.context)}function pr(r){Zr(!1)}function Hy(r){let{basename:t="/",children:o=null,location:n,navigationType:i=Ko.Pop,navigator:a,static:l=!1,future:u}=r;Ci()&&Zr(!1);let s=t.replace(/^\/*/,"/"),d=c.useMemo(()=>({basename:s,navigator:a,static:l,future:Ca({v7_relativeSplatPath:!1},u)}),[s,u,a,l]);typeof n=="string"&&(n=Si(n));let{pathname:f="/",search:x="",hash:h="",state:S=null,key:C="default"}=n,j=c.useMemo(()=>{let P=uu(f,s);return P==null?null:{location:{pathname:P,search:x,hash:h,state:S,key:C},navigationType:i}},[s,f,x,h,S,C,i]);return j==null?null:c.createElement(pn.Provider,{value:d},c.createElement(ys.Provider,{children:o,value:j}))}function qy(r){let{children:t,location:o}=r;return Wy(lc(t),o)}new Promise(()=>{});function lc(r,t){t===void 0&&(t=[]);let o=[];return c.Children.forEach(r,(n,i)=>{if(!c.isValidElement(n))return;let a=[...t,i];if(n.type===c.Fragment){o.push.apply(o,lc(n.props.children,a));return}n.type!==pr&&Zr(!1),!n.props.index||!n.props.children||Zr(!1);let l={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=lc(n.props.children,a)),o.push(l)}),o}/**
* React Router DOM v6.30.3
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function sc(){return sc=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r[n]=o[n])}return r},sc.apply(this,arguments)}function Vy(r,t){if(r==null)return{};var o={},n=Object.keys(r),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(o[i]=r[i]);return o}function Yy(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Ky(r,t){return r.button===0&&(!t||t==="_self")&&!Yy(r)}const Zy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Jy="6";try{window.__reactRouterVersion=Jy}catch{}const Qy="startTransition",op=Lh[Qy];function Xy(r){let{basename:t,children:o,future:n,window:i}=r,a=c.useRef();a.current==null&&(a.current=Qx({window:i,v5Compat:!0}));let l=a.current,[u,s]=c.useState({action:l.action,location:l.location}),{v7_startTransition:d}=n||{},f=c.useCallback(x=>{d&&op?op(()=>s(x)):s(x)},[s,d]);return c.useLayoutEffect(()=>l.listen(f),[l,f]),c.useEffect(()=>Uy(n),[n]),c.createElement(Hy,{basename:t,children:o,location:u.location,navigationType:u.action,navigator:l,future:n})}const e1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",r1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Or=c.forwardRef(function(r,t){let{onClick:o,relative:n,reloadDocument:i,replace:a,state:l,target:u,to:s,preventScrollReset:d,viewTransition:f}=r,x=Vy(r,Zy),{basename:h}=c.useContext(pn),S,C=!1;if(typeof s=="string"&&r1.test(s)&&(S=s,e1))try{let m=new URL(window.location.href),y=s.startsWith("//")?new URL(m.protocol+s):new URL(s),k=uu(y.pathname,h);y.origin===m.origin&&k!=null?s=k+y.search+y.hash:C=!0}catch{}let j=_y(s,{relative:n}),P=t1(s,{replace:a,state:l,target:u,preventScrollReset:d,relative:n,viewTransition:f});function v(m){o&&o(m),m.defaultPrevented||P(m)}return c.createElement("a",sc({},x,{href:S||j,onClick:C||i?o:v,ref:t,target:u}))});var np;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(np||(np={}));var ip;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(ip||(ip={}));function t1(r,t){let{target:o,replace:n,state:i,preventScrollReset:a,relative:l,viewTransition:u}=t===void 0?{}:t,s=_o(),d=Bn(),f=eg(r,{relative:l});return c.useCallback(x=>{if(Ky(x,o)){x.preventDefault();let h=n!==void 0?n:Jl(d)===Jl(f);s(r,{replace:h,state:i,preventScrollReset:a,relative:l,viewTransition:u})}},[d,s,f,n,i,o,r,a,l,u])}function ng(r,t){return function(){return r.apply(t,arguments)}}const{toString:o1}=Object.prototype,{getPrototypeOf:gu}=Object,{iterator:ws,toStringTag:ig}=Symbol,Ss=(r=>t=>{const o=o1.call(t);return r[o]||(r[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),fo=r=>(r=r.toLowerCase(),t=>Ss(t)===r),Cs=r=>t=>typeof t===r,{isArray:ki}=Array,xi=Cs("undefined");function Aa(r){return r!==null&&!xi(r)&&r.constructor!==null&&!xi(r.constructor)&&Ot(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const ag=fo("ArrayBuffer");function n1(r){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(r):t=r&&r.buffer&&ag(r.buffer),t}const i1=Cs("string"),Ot=Cs("function"),lg=Cs("number"),Ia=r=>r!==null&&typeof r=="object",a1=r=>r===!0||r===!1,Sl=r=>{if(Ss(r)!=="object")return!1;const t=gu(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(ig in r)&&!(ws in r)},l1=r=>{if(!Ia(r)||Aa(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},s1=fo("Date"),d1=fo("File"),c1=fo("Blob"),u1=fo("FileList"),m1=r=>Ia(r)&&Ot(r.pipe),p1=r=>{let t;return r&&(typeof FormData=="function"&&r instanceof FormData||Ot(r.append)&&((t=Ss(r))==="formdata"||t==="object"&&Ot(r.toString)&&r.toString()==="[object FormData]"))},f1=fo("URLSearchParams"),[g1,h1,b1,x1]=["ReadableStream","Request","Response","Headers"].map(fo),y1=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ta(r,t,{allOwnKeys:o=!1}={}){if(r===null||typeof r>"u")return;let n,i;if(typeof r!="object"&&(r=[r]),ki(r))for(n=0,i=r.length;n<i;n++)t.call(null,r[n],n,r);else{if(Aa(r))return;const a=o?Object.getOwnPropertyNames(r):Object.keys(r),l=a.length;let u;for(n=0;n<l;n++)u=a[n],t.call(null,r[u],u,r)}}function sg(r,t){if(Aa(r))return null;t=t.toLowerCase();const o=Object.keys(r);let n=o.length,i;for(;n-- >0;)if(i=o[n],t===i.toLowerCase())return i;return null}const yn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,dg=r=>!xi(r)&&r!==yn;function dc(){const{caseless:r,skipUndefined:t}=dg(this)&&this||{},o={},n=(i,a)=>{const l=r&&sg(o,a)||a;Sl(o[l])&&Sl(i)?o[l]=dc(o[l],i):Sl(i)?o[l]=dc({},i):ki(i)?o[l]=i.slice():(!t||!xi(i))&&(o[l]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&Ta(arguments[i],n);return o}const v1=(r,t,o,{allOwnKeys:n}={})=>(Ta(t,(i,a)=>{o&&Ot(i)?r[a]=ng(i,o):r[a]=i},{allOwnKeys:n}),r),j1=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),w1=(r,t,o,n)=>{r.prototype=Object.create(t.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:t.prototype}),o&&Object.assign(r.prototype,o)},S1=(r,t,o,n)=>{let i,a,l;const u={};if(t=t||{},r==null)return t;do{for(i=Object.getOwnPropertyNames(r),a=i.length;a-- >0;)l=i[a],(!n||n(l,r,t))&&!u[l]&&(t[l]=r[l],u[l]=!0);r=o!==!1&&gu(r)}while(r&&(!o||o(r,t))&&r!==Object.prototype);return t},C1=(r,t,o)=>{r=String(r),(o===void 0||o>r.length)&&(o=r.length),o-=t.length;const n=r.indexOf(t,o);return n!==-1&&n===o},k1=r=>{if(!r)return null;if(ki(r))return r;let t=r.length;if(!lg(t))return null;const o=new Array(t);for(;t-- >0;)o[t]=r[t];return o},_1=(r=>t=>r&&t instanceof r)(typeof Uint8Array<"u"&&gu(Uint8Array)),z1=(r,t)=>{const o=(r&&r[ws]).call(r);let n;for(;(n=o.next())&&!n.done;){const i=n.value;t.call(r,i[0],i[1])}},R1=(r,t)=>{let o;const n=[];for(;(o=r.exec(t))!==null;)n.push(o);return n},E1=fo("HTMLFormElement"),W1=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,o,n){return o.toUpperCase()+n}),ap=(({hasOwnProperty:r})=>(t,o)=>r.call(t,o))(Object.prototype),A1=fo("RegExp"),cg=(r,t)=>{const o=Object.getOwnPropertyDescriptors(r),n={};Ta(o,(i,a)=>{let l;(l=t(i,a,r))!==!1&&(n[a]=l||i)}),Object.defineProperties(r,n)},I1=r=>{cg(r,(t,o)=>{if(Ot(r)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const n=r[o];if(Ot(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},T1=(r,t)=>{const o={},n=i=>{i.forEach(a=>{o[a]=!0})};return ki(r)?n(r):n(String(r).split(t)),o},N1=()=>{},B1=(r,t)=>r!=null&&Number.isFinite(r=+r)?r:t;function P1(r){return!!(r&&Ot(r.append)&&r[ig]==="FormData"&&r[ws])}const D1=r=>{const t=new Array(10),o=(n,i)=>{if(Ia(n)){if(t.indexOf(n)>=0)return;if(Aa(n))return n;if(!("toJSON"in n)){t[i]=n;const a=ki(n)?[]:{};return Ta(n,(l,u)=>{const s=o(l,i+1);!xi(s)&&(a[u]=s)}),t[i]=void 0,a}}return n};return o(r,0)},M1=fo("AsyncFunction"),O1=r=>r&&(Ia(r)||Ot(r))&&Ot(r.then)&&Ot(r.catch),ug=((r,t)=>r?setImmediate:t?((o,n)=>(yn.addEventListener("message",({source:i,data:a})=>{i===yn&&a===o&&n.length&&n.shift()()},!1),i=>{n.push(i),yn.postMessage(o,"*")}))(`axios@${Math.random()}`,[]):o=>setTimeout(o))(typeof setImmediate=="function",Ot(yn.postMessage)),L1=typeof queueMicrotask<"u"?queueMicrotask.bind(yn):typeof process<"u"&&process.nextTick||ug,F1=r=>r!=null&&Ot(r[ws]),le={isArray:ki,isArrayBuffer:ag,isBuffer:Aa,isFormData:p1,isArrayBufferView:n1,isString:i1,isNumber:lg,isBoolean:a1,isObject:Ia,isPlainObject:Sl,isEmptyObject:l1,isReadableStream:g1,isRequest:h1,isResponse:b1,isHeaders:x1,isUndefined:xi,isDate:s1,isFile:d1,isBlob:c1,isRegExp:A1,isFunction:Ot,isStream:m1,isURLSearchParams:f1,isTypedArray:_1,isFileList:u1,forEach:Ta,merge:dc,extend:v1,trim:y1,stripBOM:j1,inherits:w1,toFlatObject:S1,kindOf:Ss,kindOfTest:fo,endsWith:C1,toArray:k1,forEachEntry:z1,matchAll:R1,isHTMLForm:E1,hasOwnProperty:ap,hasOwnProp:ap,reduceDescriptors:cg,freezeMethods:I1,toObjectSet:T1,toCamelCase:W1,noop:N1,toFiniteNumber:B1,findKey:sg,global:yn,isContextDefined:dg,isSpecCompliantForm:P1,toJSONObject:D1,isAsyncFn:M1,isThenable:O1,setImmediate:ug,asap:L1,isIterable:F1};function rr(r,t,o,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",t&&(this.code=t),o&&(this.config=o),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}le.inherits(rr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:le.toJSONObject(this.config),code:this.code,status:this.status}}});const mg=rr.prototype,pg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{pg[r]={value:r}});Object.defineProperties(rr,pg);Object.defineProperty(mg,"isAxiosError",{value:!0});rr.from=(r,t,o,n,i,a)=>{const l=Object.create(mg);le.toFlatObject(r,l,function(d){return d!==Error.prototype},d=>d!=="isAxiosError");const u=r&&r.message?r.message:"Error",s=t==null&&r?r.code:t;return rr.call(l,u,s,o,n,i),r&&l.cause==null&&Object.defineProperty(l,"cause",{value:r,configurable:!0}),l.name=r&&r.name||"Error",a&&Object.assign(l,a),l};const $1=null;function cc(r){return le.isPlainObject(r)||le.isArray(r)}function fg(r){return le.endsWith(r,"[]")?r.slice(0,-2):r}function lp(r,t,o){return r?r.concat(t).map(function(n,i){return n=fg(n),!o&&i?"["+n+"]":n}).join(o?".":""):t}function U1(r){return le.isArray(r)&&!r.some(cc)}const G1=le.toFlatObject(le,{},null,function(r){return/^is[A-Z]/.test(r)});function ks(r,t,o){if(!le.isObject(r))throw new TypeError("target must be an object");t=t||new FormData,o=le.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,C){return!le.isUndefined(C[S])});const n=o.metaTokens,i=o.visitor||d,a=o.dots,l=o.indexes,u=(o.Blob||typeof Blob<"u"&&Blob)&&le.isSpecCompliantForm(t);if(!le.isFunction(i))throw new TypeError("visitor must be a function");function s(S){if(S===null)return"";if(le.isDate(S))return S.toISOString();if(le.isBoolean(S))return S.toString();if(!u&&le.isBlob(S))throw new rr("Blob is not supported. Use a Buffer instead.");return le.isArrayBuffer(S)||le.isTypedArray(S)?u&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function d(S,C,j){let P=S;if(S&&!j&&typeof S=="object"){if(le.endsWith(C,"{}"))C=n?C:C.slice(0,-2),S=JSON.stringify(S);else if(le.isArray(S)&&U1(S)||(le.isFileList(S)||le.endsWith(C,"[]"))&&(P=le.toArray(S)))return C=fg(C),P.forEach(function(v,m){!(le.isUndefined(v)||v===null)&&t.append(l===!0?lp([C],m,a):l===null?C:C+"[]",s(v))}),!1}return cc(S)?!0:(t.append(lp(j,C,a),s(S)),!1)}const f=[],x=Object.assign(G1,{defaultVisitor:d,convertValue:s,isVisitable:cc});function h(S,C){if(!le.isUndefined(S)){if(f.indexOf(S)!==-1)throw Error("Circular reference detected in "+C.join("."));f.push(S),le.forEach(S,function(j,P){(!(le.isUndefined(j)||j===null)&&i.call(t,j,le.isString(P)?P.trim():P,C,x))===!0&&h(j,C?C.concat(P):[P])}),f.pop()}}if(!le.isObject(r))throw new TypeError("data must be an object");return h(r),t}function sp(r){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function hu(r,t){this._pairs=[],r&&ks(r,this,t)}const gg=hu.prototype;gg.append=function(r,t){this._pairs.push([r,t])};gg.toString=function(r){const t=r?function(o){return r.call(this,o,sp)}:sp;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function H1(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function hg(r,t,o){if(!t)return r;const n=o&&o.encode||H1;le.isFunction(o)&&(o={serialize:o});const i=o&&o.serialize;let a;if(i?a=i(t,o):a=le.isURLSearchParams(t)?t.toString():new hu(t,o).toString(n),a){const l=r.indexOf("#");l!==-1&&(r=r.slice(0,l)),r+=(r.indexOf("?")===-1?"?":"&")+a}return r}class dp{constructor(){this.handlers=[]}use(t,o,n){return this.handlers.push({fulfilled:t,rejected:o,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){le.forEach(this.handlers,function(o){o!==null&&t(o)})}}const bg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},q1=typeof URLSearchParams<"u"?URLSearchParams:hu,V1=typeof FormData<"u"?FormData:null,Y1=typeof Blob<"u"?Blob:null,K1={isBrowser:!0,classes:{URLSearchParams:q1,FormData:V1,Blob:Y1},protocols:["http","https","file","blob","url","data"]},bu=typeof window<"u"&&typeof document<"u",uc=typeof navigator=="object"&&navigator||void 0,Z1=bu&&(!uc||["ReactNative","NativeScript","NS"].indexOf(uc.product)<0),J1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Q1=bu&&window.location.href||"http://localhost",X1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bu,hasStandardBrowserEnv:Z1,hasStandardBrowserWebWorkerEnv:J1,navigator:uc,origin:Q1},Symbol.toStringTag,{value:"Module"})),vt={...X1,...K1};function ev(r,t){return ks(r,new vt.classes.URLSearchParams,{visitor:function(o,n,i,a){return vt.isNode&&le.isBuffer(o)?(this.append(n,o.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function rv(r){return le.matchAll(/\w+|\[(\w*)]/g,r).map(t=>t[0]==="[]"?"":t[1]||t[0])}function tv(r){const t={},o=Object.keys(r);let n;const i=o.length;let a;for(n=0;n<i;n++)a=o[n],t[a]=r[a];return t}function xg(r){function t(o,n,i,a){let l=o[a++];if(l==="__proto__")return!0;const u=Number.isFinite(+l),s=a>=o.length;return l=!l&&le.isArray(i)?i.length:l,s?(le.hasOwnProp(i,l)?i[l]=[i[l],n]:i[l]=n,!u):((!i[l]||!le.isObject(i[l]))&&(i[l]=[]),t(o,n,i[l],a)&&le.isArray(i[l])&&(i[l]=tv(i[l])),!u)}if(le.isFormData(r)&&le.isFunction(r.entries)){const o={};return le.forEachEntry(r,(n,i)=>{t(rv(n),i,o,0)}),o}return null}function ov(r,t,o){if(le.isString(r))try{return(t||JSON.parse)(r),le.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(o||JSON.stringify)(r)}const Na={transitional:bg,adapter:["xhr","http","fetch"],transformRequest:[function(r,t){const o=t.getContentType()||"",n=o.indexOf("application/json")>-1,i=le.isObject(r);if(i&&le.isHTMLForm(r)&&(r=new FormData(r)),le.isFormData(r))return n?JSON.stringify(xg(r)):r;if(le.isArrayBuffer(r)||le.isBuffer(r)||le.isStream(r)||le.isFile(r)||le.isBlob(r)||le.isReadableStream(r))return r;if(le.isArrayBufferView(r))return r.buffer;if(le.isURLSearchParams(r))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let a;if(i){if(o.indexOf("application/x-www-form-urlencoded")>-1)return ev(r,this.formSerializer).toString();if((a=le.isFileList(r))||o.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ks(a?{"files[]":r}:r,l&&new l,this.formSerializer)}}return i||n?(t.setContentType("application/json",!1),ov(r)):r}],transformResponse:[function(r){const t=this.transitional||Na.transitional,o=t&&t.forcedJSONParsing,n=this.responseType==="json";if(le.isResponse(r)||le.isReadableStream(r))return r;if(r&&le.isString(r)&&(o&&!this.responseType||n)){const i=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(r,this.parseReviver)}catch(a){if(i)throw a.name==="SyntaxError"?rr.from(a,rr.ERR_BAD_RESPONSE,this,null,this.response):a}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vt.classes.FormData,Blob:vt.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};le.forEach(["delete","get","head","post","put","patch"],r=>{Na.headers[r]={}});const nv=le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),iv=r=>{const t={};let o,n,i;return r&&r.split(`
`).forEach(function(a){i=a.indexOf(":"),o=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!o||t[o]&&nv[o])&&(o==="set-cookie"?t[o]?t[o].push(n):t[o]=[n]:t[o]=t[o]?t[o]+", "+n:n)}),t},cp=Symbol("internals");function Fi(r){return r&&String(r).trim().toLowerCase()}function Cl(r){return r===!1||r==null?r:le.isArray(r)?r.map(Cl):String(r)}function av(r){const t=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=o.exec(r);)t[n[1]]=n[2];return t}const lv=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function sd(r,t,o,n,i){if(le.isFunction(n))return n.call(this,t,o);if(i&&(t=o),!!le.isString(t)){if(le.isString(n))return t.indexOf(n)!==-1;if(le.isRegExp(n))return n.test(t)}}function sv(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,o,n)=>o.toUpperCase()+n)}function dv(r,t){const o=le.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+o,{value:function(i,a,l){return this[n].call(this,t,i,a,l)},configurable:!0})})}let Lt=class{constructor(r){r&&this.set(r)}set(r,t,o){const n=this;function i(l,u,s){const d=Fi(u);if(!d)throw new Error("header name must be a non-empty string");const f=le.findKey(n,d);(!f||n[f]===void 0||s===!0||s===void 0&&n[f]!==!1)&&(n[f||u]=Cl(l))}const a=(l,u)=>le.forEach(l,(s,d)=>i(s,d,u));if(le.isPlainObject(r)||r instanceof this.constructor)a(r,t);else if(le.isString(r)&&(r=r.trim())&&!lv(r))a(iv(r),t);else if(le.isObject(r)&&le.isIterable(r)){let l={},u,s;for(const d of r){if(!le.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[s=d[0]]=(u=l[s])?le.isArray(u)?[...u,d[1]]:[u,d[1]]:d[1]}a(l,t)}else r!=null&&i(t,r,o);return this}get(r,t){if(r=Fi(r),r){const o=le.findKey(this,r);if(o){const n=this[o];if(!t)return n;if(t===!0)return av(n);if(le.isFunction(t))return t.call(this,n,o);if(le.isRegExp(t))return t.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,t){if(r=Fi(r),r){const o=le.findKey(this,r);return!!(o&&this[o]!==void 0&&(!t||sd(this,this[o],o,t)))}return!1}delete(r,t){const o=this;let n=!1;function i(a){if(a=Fi(a),a){const l=le.findKey(o,a);l&&(!t||sd(o,o[l],l,t))&&(delete o[l],n=!0)}}return le.isArray(r)?r.forEach(i):i(r),n}clear(r){const t=Object.keys(this);let o=t.length,n=!1;for(;o--;){const i=t[o];(!r||sd(this,this[i],i,r,!0))&&(delete this[i],n=!0)}return n}normalize(r){const t=this,o={};return le.forEach(this,(n,i)=>{const a=le.findKey(o,i);if(a){t[a]=Cl(n),delete t[i];return}const l=r?sv(i):String(i).trim();l!==i&&delete t[i],t[l]=Cl(n),o[l]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const t=Object.create(null);return le.forEach(this,(o,n)=>{o!=null&&o!==!1&&(t[n]=r&&le.isArray(o)?o.join(", "):o)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,t])=>r+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...t){const o=new this(r);return t.forEach(n=>o.set(n)),o}static accessor(r){const t=(this[cp]=this[cp]={accessors:{}}).accessors,o=this.prototype;function n(i){const a=Fi(i);t[a]||(dv(o,i),t[a]=!0)}return le.isArray(r)?r.forEach(n):n(r),this}};Lt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);le.reduceDescriptors(Lt.prototype,({value:r},t)=>{let o=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(n){this[o]=n}}});le.freezeMethods(Lt);function dd(r,t){const o=this||Na,n=t||o,i=Lt.from(n.headers);let a=n.data;return le.forEach(r,function(l){a=l.call(o,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function yg(r){return!!(r&&r.__CANCEL__)}function _i(r,t,o){rr.call(this,r??"canceled",rr.ERR_CANCELED,t,o),this.name="CanceledError"}le.inherits(_i,rr,{__CANCEL__:!0});function vg(r,t,o){const n=o.config.validateStatus;!o.status||!n||n(o.status)?r(o):t(new rr("Request failed with status code "+o.status,[rr.ERR_BAD_REQUEST,rr.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}function cv(r){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return t&&t[1]||""}function uv(r,t){r=r||10;const o=new Array(r),n=new Array(r);let i=0,a=0,l;return t=t!==void 0?t:1e3,function(u){const s=Date.now(),d=n[a];l||(l=s),o[i]=u,n[i]=s;let f=a,x=0;for(;f!==i;)x+=o[f++],f=f%r;if(i=(i+1)%r,i===a&&(a=(a+1)%r),s-l<t)return;const h=d&&s-d;return h?Math.round(x*1e3/h):void 0}}function mv(r,t){let o=0,n=1e3/t,i,a;const l=(u,s=Date.now())=>{o=s,i=null,a&&(clearTimeout(a),a=null),r(...u)};return[(...u)=>{const s=Date.now(),d=s-o;d>=n?l(u,s):(i=u,a||(a=setTimeout(()=>{a=null,l(i)},n-d)))},()=>i&&l(i)]}const Ql=(r,t,o=3)=>{let n=0;const i=uv(50,250);return mv(a=>{const l=a.loaded,u=a.lengthComputable?a.total:void 0,s=l-n,d=i(s),f=l<=u;n=l;const x={loaded:l,total:u,progress:u?l/u:void 0,bytes:s,rate:d||void 0,estimated:d&&u&&f?(u-l)/d:void 0,event:a,lengthComputable:u!=null,[t?"download":"upload"]:!0};r(x)},o)},up=(r,t)=>{const o=r!=null;return[n=>t[0]({lengthComputable:o,total:r,loaded:n}),t[1]]},mp=r=>(...t)=>le.asap(()=>r(...t)),pv=vt.hasStandardBrowserEnv?((r,t)=>o=>(o=new URL(o,vt.origin),r.protocol===o.protocol&&r.host===o.host&&(t||r.port===o.port)))(new URL(vt.origin),vt.navigator&&/(msie|trident)/i.test(vt.navigator.userAgent)):()=>!0,fv=vt.hasStandardBrowserEnv?{write(r,t,o,n,i,a,l){if(typeof document>"u")return;const u=[`${r}=${encodeURIComponent(t)}`];le.isNumber(o)&&u.push(`expires=${new Date(o).toUTCString()}`),le.isString(n)&&u.push(`path=${n}`),le.isString(i)&&u.push(`domain=${i}`),a===!0&&u.push("secure"),le.isString(l)&&u.push(`SameSite=${l}`),document.cookie=u.join("; ")},read(r){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function gv(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function hv(r,t){return t?r.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):r}function jg(r,t,o){let n=!gv(t);return r&&(n||o==!1)?hv(r,t):t}const pp=r=>r instanceof Lt?{...r}:r;function Wn(r,t){t=t||{};const o={};function n(d,f,x,h){return le.isPlainObject(d)&&le.isPlainObject(f)?le.merge.call({caseless:h},d,f):le.isPlainObject(f)?le.merge({},f):le.isArray(f)?f.slice():f}function i(d,f,x,h){if(le.isUndefined(f)){if(!le.isUndefined(d))return n(void 0,d,x,h)}else return n(d,f,x,h)}function a(d,f){if(!le.isUndefined(f))return n(void 0,f)}function l(d,f){if(le.isUndefined(f)){if(!le.isUndefined(d))return n(void 0,d)}else return n(void 0,f)}function u(d,f,x){if(x in t)return n(d,f);if(x in r)return n(void 0,d)}const s={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(d,f,x)=>i(pp(d),pp(f),x,!0)};return le.forEach(Object.keys({...r,...t}),function(d){const f=s[d]||i,x=f(r[d],t[d],d);le.isUndefined(x)&&f!==u||(o[d]=x)}),o}const wg=r=>{const t=Wn({},r);let{data:o,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:l,auth:u}=t;if(t.headers=l=Lt.from(l),t.url=hg(jg(t.baseURL,t.url,t.allowAbsoluteUrls),r.params,r.paramsSerializer),u&&l.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),le.isFormData(o)){if(vt.hasStandardBrowserEnv||vt.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(le.isFunction(o.getHeaders)){const s=o.getHeaders(),d=["content-type","content-length"];Object.entries(s).forEach(([f,x])=>{d.includes(f.toLowerCase())&&l.set(f,x)})}}if(vt.hasStandardBrowserEnv&&(n&&le.isFunction(n)&&(n=n(t)),n||n!==!1&&pv(t.url))){const s=i&&a&&fv.read(a);s&&l.set(i,s)}return t},bv=typeof XMLHttpRequest<"u",xv=bv&&function(r){return new Promise(function(t,o){const n=wg(r);let i=n.data;const a=Lt.from(n.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:s}=n,d,f,x,h,S;function C(){h&&h(),S&&S(),n.cancelToken&&n.cancelToken.unsubscribe(d),n.signal&&n.signal.removeEventListener("abort",d)}let j=new XMLHttpRequest;j.open(n.method.toUpperCase(),n.url,!0),j.timeout=n.timeout;function P(){if(!j)return;const m=Lt.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),y={data:!l||l==="text"||l==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:m,config:r,request:j};vg(function(k){t(k),C()},function(k){o(k),C()},y),j=null}"onloadend"in j?j.onloadend=P:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(P)},j.onabort=function(){j&&(o(new rr("Request aborted",rr.ECONNABORTED,r,j)),j=null)},j.onerror=function(m){const y=m&&m.message?m.message:"Network Error",k=new rr(y,rr.ERR_NETWORK,r,j);k.event=m||null,o(k),j=null},j.ontimeout=function(){let m=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const y=n.transitional||bg;n.timeoutErrorMessage&&(m=n.timeoutErrorMessage),o(new rr(m,y.clarifyTimeoutError?rr.ETIMEDOUT:rr.ECONNABORTED,r,j)),j=null},i===void 0&&a.setContentType(null),"setRequestHeader"in j&&le.forEach(a.toJSON(),function(m,y){j.setRequestHeader(y,m)}),le.isUndefined(n.withCredentials)||(j.withCredentials=!!n.withCredentials),l&&l!=="json"&&(j.responseType=n.responseType),s&&([x,S]=Ql(s,!0),j.addEventListener("progress",x)),u&&j.upload&&([f,h]=Ql(u),j.upload.addEventListener("progress",f),j.upload.addEventListener("loadend",h)),(n.cancelToken||n.signal)&&(d=m=>{j&&(o(!m||m.type?new _i(null,r,j):m),j.abort(),j=null)},n.cancelToken&&n.cancelToken.subscribe(d),n.signal&&(n.signal.aborted?d():n.signal.addEventListener("abort",d)));const v=cv(n.url);if(v&&vt.protocols.indexOf(v)===-1){o(new rr("Unsupported protocol "+v+":",rr.ERR_BAD_REQUEST,r));return}j.send(i||null)})},yv=(r,t)=>{const{length:o}=r=r?r.filter(Boolean):[];if(t||o){let n=new AbortController,i;const a=function(d){if(!i){i=!0,u();const f=d instanceof Error?d:this.reason;n.abort(f instanceof rr?f:new _i(f instanceof Error?f.message:f))}};let l=t&&setTimeout(()=>{l=null,a(new rr(`timeout ${t} of ms exceeded`,rr.ETIMEDOUT))},t);const u=()=>{r&&(l&&clearTimeout(l),l=null,r.forEach(d=>{d.unsubscribe?d.unsubscribe(a):d.removeEventListener("abort",a)}),r=null)};r.forEach(d=>d.addEventListener("abort",a));const{signal:s}=n;return s.unsubscribe=()=>le.asap(u),s}},vv=function*(r,t){let o=r.byteLength;if(o<t){yield r;return}let n=0,i;for(;n<o;)i=n+t,yield r.slice(n,i),n=i},jv=async function*(r,t){for await(const o of wv(r))yield*vv(o,t)},wv=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const t=r.getReader();try{for(;;){const{done:o,value:n}=await t.read();if(o)break;yield n}}finally{await t.cancel()}},fp=(r,t,o,n)=>{const i=jv(r,t);let a=0,l,u=s=>{l||(l=!0,n&&n(s))};return new ReadableStream({async pull(s){try{const{done:d,value:f}=await i.next();if(d){u(),s.close();return}let x=f.byteLength;if(o){let h=a+=x;o(h)}s.enqueue(new Uint8Array(f))}catch(d){throw u(d),d}},cancel(s){return u(s),i.return()}},{highWaterMark:2})},gp=64*1024,{isFunction:al}=le,Sv=(({Request:r,Response:t})=>({Request:r,Response:t}))(le.global),{ReadableStream:hp,TextEncoder:bp}=le.global,xp=(r,...t)=>{try{return!!r(...t)}catch{return!1}},Cv=r=>{r=le.merge.call({skipUndefined:!0},Sv,r);const{fetch:t,Request:o,Response:n}=r,i=t?al(t):typeof fetch=="function",a=al(o),l=al(n);if(!i)return!1;const u=i&&al(hp),s=i&&(typeof bp=="function"?(C=>j=>C.encode(j))(new bp):async C=>new Uint8Array(await new o(C).arrayBuffer())),d=a&&u&&xp(()=>{let C=!1;const j=new o(vt.origin,{body:new hp,method:"POST",get duplex(){return C=!0,"half"}}).headers.has("Content-Type");return C&&!j}),f=l&&u&&xp(()=>le.isReadableStream(new n("").body)),x={stream:f&&(C=>C.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(C=>{!x[C]&&(x[C]=(j,P)=>{let v=j&&j[C];if(v)return v.call(j);throw new rr(`Response type '${C}' is not supported`,rr.ERR_NOT_SUPPORT,P)})});const h=async C=>{if(C==null)return 0;if(le.isBlob(C))return C.size;if(le.isSpecCompliantForm(C))return(await new o(vt.origin,{method:"POST",body:C}).arrayBuffer()).byteLength;if(le.isArrayBufferView(C)||le.isArrayBuffer(C))return C.byteLength;if(le.isURLSearchParams(C)&&(C=C+""),le.isString(C))return(await s(C)).byteLength},S=async(C,j)=>le.toFiniteNumber(C.getContentLength())??h(j);return async C=>{let{url:j,method:P,data:v,signal:m,cancelToken:y,timeout:k,onDownloadProgress:U,onUploadProgress:X,responseType:R,headers:w,withCredentials:B="same-origin",fetchOptions:q}=wg(C),E=t||fetch;R=R?(R+"").toLowerCase():"text";let T=yv([m,y&&y.toAbortSignal()],k),ee=null;const H=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let G;try{if(X&&d&&P!=="get"&&P!=="head"&&(G=await S(w,v))!==0){let oe=new o(j,{method:"POST",body:v,duplex:"half"}),K;if(le.isFormData(v)&&(K=oe.headers.get("content-type"))&&w.setContentType(K),oe.body){const[V,F]=up(G,Ql(mp(X)));v=fp(oe.body,gp,V,F)}}le.isString(B)||(B=B?"include":"omit");const O=a&&"credentials"in o.prototype,re={...q,signal:T,method:P.toUpperCase(),headers:w.normalize().toJSON(),body:v,duplex:"half",credentials:O?B:void 0};ee=a&&new o(j,re);let W=await(a?E(ee,q):E(j,re));const Y=f&&(R==="stream"||R==="response");if(f&&(U||Y&&H)){const oe={};["status","statusText","headers"].forEach(se=>{oe[se]=W[se]});const K=le.toFiniteNumber(W.headers.get("content-length")),[V,F]=U&&up(K,Ql(mp(U),!0))||[];W=new n(fp(W.body,gp,V,()=>{F&&F(),H&&H()}),oe)}R=R||"text";let D=await x[le.findKey(x,R)||"text"](W,C);return!Y&&H&&H(),await new Promise((oe,K)=>{vg(oe,K,{data:D,headers:Lt.from(W.headers),status:W.status,statusText:W.statusText,config:C,request:ee})})}catch(O){throw H&&H(),O&&O.name==="TypeError"&&/Load failed|fetch/i.test(O.message)?Object.assign(new rr("Network Error",rr.ERR_NETWORK,C,ee),{cause:O.cause||O}):rr.from(O,O&&O.code,C,ee)}}},kv=new Map,Sg=r=>{let t=r&&r.env||{};const{fetch:o,Request:n,Response:i}=t,a=[n,i,o];let l=a.length,u=l,s,d,f=kv;for(;u--;)s=a[u],d=f.get(s),d===void 0&&f.set(s,d=u?new Map:Cv(t)),f=d;return d};Sg();const xu={http:$1,xhr:xv,fetch:{get:Sg}};le.forEach(xu,(r,t)=>{if(r){try{Object.defineProperty(r,"name",{value:t})}catch{}Object.defineProperty(r,"adapterName",{value:t})}});const yp=r=>`- ${r}`,_v=r=>le.isFunction(r)||r===null||r===!1;function zv(r,t){r=le.isArray(r)?r:[r];const{length:o}=r;let n,i;const a={};for(let l=0;l<o;l++){n=r[l];let u;if(i=n,!_v(n)&&(i=xu[(u=String(n)).toLowerCase()],i===void 0))throw new rr(`Unknown adapter '${u}'`);if(i&&(le.isFunction(i)||(i=i.get(t))))break;a[u||"#"+l]=i}if(!i){const l=Object.entries(a).map(([s,d])=>`adapter ${s} `+(d===!1?"is not supported by the environment":"is not available in the build"));let u=o?l.length>1?`since :
`+l.map(yp).join(`
`):" "+yp(l[0]):"as no adapter specified";throw new rr("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i}const Cg={getAdapter:zv,adapters:xu};function cd(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new _i(null,r)}function vp(r){return cd(r),r.headers=Lt.from(r.headers),r.data=dd.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),Cg.getAdapter(r.adapter||Na.adapter,r)(r).then(function(t){return cd(r),t.data=dd.call(r,r.transformResponse,t),t.headers=Lt.from(t.headers),t},function(t){return yg(t)||(cd(r),t&&t.response&&(t.response.data=dd.call(r,r.transformResponse,t.response),t.response.headers=Lt.from(t.response.headers))),Promise.reject(t)})}const kg="1.13.2",_s={};["object","boolean","number","function","string","symbol"].forEach((r,t)=>{_s[r]=function(o){return typeof o===r||"a"+(t<1?"n ":" ")+r}});const jp={};_s.transitional=function(r,t,o){function n(i,a){return"[Axios v"+kg+"] Transitional option '"+i+"'"+a+(o?". "+o:"")}return(i,a,l)=>{if(r===!1)throw new rr(n(a," has been removed"+(t?" in "+t:"")),rr.ERR_DEPRECATED);return t&&!jp[a]&&(jp[a]=!0,console.warn(n(a," has been deprecated since v"+t+" and will be removed in the near future"))),r?r(i,a,l):!0}};_s.spelling=function(r){return(t,o)=>(console.warn(`${o} is likely a misspelling of ${r}`),!0)};function Rv(r,t,o){if(typeof r!="object")throw new rr("options must be an object",rr.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let i=n.length;for(;i-- >0;){const a=n[i],l=t[a];if(l){const u=r[a],s=u===void 0||l(u,a,r);if(s!==!0)throw new rr("option "+a+" must be "+s,rr.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new rr("Unknown option "+a,rr.ERR_BAD_OPTION)}}const kl={assertOptions:Rv,validators:_s},yo=kl.validators;let Cn=class{constructor(r){this.defaults=r||{},this.interceptors={request:new dp,response:new dp}}async request(r,t){try{return await this._request(r,t)}catch(o){if(o instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{o.stack?i&&!String(o.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+i):o.stack=i}catch{}}throw o}}_request(r,t){typeof r=="string"?(t=t||{},t.url=r):t=r||{},t=Wn(this.defaults,t);const{transitional:o,paramsSerializer:n,headers:i}=t;o!==void 0&&kl.assertOptions(o,{silentJSONParsing:yo.transitional(yo.boolean),forcedJSONParsing:yo.transitional(yo.boolean),clarifyTimeoutError:yo.transitional(yo.boolean)},!1),n!=null&&(le.isFunction(n)?t.paramsSerializer={serialize:n}:kl.assertOptions(n,{encode:yo.function,serialize:yo.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),kl.assertOptions(t,{baseUrl:yo.spelling("baseURL"),withXsrfToken:yo.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=i&&le.merge(i.common,i[t.method]);i&&le.forEach(["delete","get","head","post","put","patch","common"],S=>{delete i[S]}),t.headers=Lt.concat(a,i);const l=[];let u=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(t)===!1||(u=u&&S.synchronous,l.unshift(S.fulfilled,S.rejected))});const s=[];this.interceptors.response.forEach(function(S){s.push(S.fulfilled,S.rejected)});let d,f=0,x;if(!u){const S=[vp.bind(this),void 0];for(S.unshift(...l),S.push(...s),x=S.length,d=Promise.resolve(t);f<x;)d=d.then(S[f++],S[f++]);return d}x=l.length;let h=t;for(;f<x;){const S=l[f++],C=l[f++];try{h=S(h)}catch(j){C.call(this,j);break}}try{d=vp.call(this,h)}catch(S){return Promise.reject(S)}for(f=0,x=s.length;f<x;)d=d.then(s[f++],s[f++]);return d}getUri(r){r=Wn(this.defaults,r);const t=jg(r.baseURL,r.url,r.allowAbsoluteUrls);return hg(t,r.params,r.paramsSerializer)}};le.forEach(["delete","get","head","options"],function(r){Cn.prototype[r]=function(t,o){return this.request(Wn(o||{},{method:r,url:t,data:(o||{}).data}))}});le.forEach(["post","put","patch"],function(r){function t(o){return function(n,i,a){return this.request(Wn(a||{},{method:r,headers:o?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}Cn.prototype[r]=t(),Cn.prototype[r+"Form"]=t(!0)});let Ev=class _g{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(i){o=i});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const l=new Promise(u=>{n.subscribe(u),a=u}).then(i);return l.cancel=function(){n.unsubscribe(a)},l},t(function(i,a,l){n.reason||(n.reason=new _i(i,a,l),o(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const o=this._listeners.indexOf(t);o!==-1&&this._listeners.splice(o,1)}toAbortSignal(){const t=new AbortController,o=n=>{t.abort(n)};return this.subscribe(o),t.signal.unsubscribe=()=>this.unsubscribe(o),t.signal}static source(){let t;return{token:new _g(function(o){t=o}),cancel:t}}};function Wv(r){return function(t){return r.apply(null,t)}}function Av(r){return le.isObject(r)&&r.isAxiosError===!0}const mc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(mc).forEach(([r,t])=>{mc[t]=r});function zg(r){const t=new Cn(r),o=ng(Cn.prototype.request,t);return le.extend(o,Cn.prototype,t,{allOwnKeys:!0}),le.extend(o,t,null,{allOwnKeys:!0}),o.create=function(n){return zg(Wn(r,n))},o}const Jr=zg(Na);Jr.Axios=Cn;Jr.CanceledError=_i;Jr.CancelToken=Ev;Jr.isCancel=yg;Jr.VERSION=kg;Jr.toFormData=ks;Jr.AxiosError=rr;Jr.Cancel=Jr.CanceledError;Jr.all=function(r){return Promise.all(r)};Jr.spread=Wv;Jr.isAxiosError=Av;Jr.mergeConfig=Wn;Jr.AxiosHeaders=Lt;Jr.formToJSON=r=>xg(le.isHTMLForm(r)?new FormData(r):r);Jr.getAdapter=Cg.getAdapter;Jr.HttpStatusCode=mc;Jr.default=Jr;const{Axios:rj,AxiosError:tj,CanceledError:oj,isCancel:nj,CancelToken:ij,VERSION:aj,all:lj,Cancel:sj,isAxiosError:dj,spread:cj,toFormData:uj,AxiosHeaders:mj,HttpStatusCode:pj,formToJSON:fj,getAdapter:gj,mergeConfig:hj}=Jr,Iv="/api",ae=Jr.create({baseURL:Iv,headers:{"Content-Type":"application/json"},timeout:1e4});ae.interceptors.request.use(r=>{const t=localStorage.getItem("token");return t&&(r.headers=r.headers||{},r.headers.Authorization=`Bearer ${t}`),r},r=>Promise.reject(r));ae.interceptors.response.use(r=>r,r=>{var t,o,n,i,a;const l=((o=(t=r.config)==null?void 0:t.url)==null?void 0:o.includes("/auth/login"))||((i=(n=r.config)==null?void 0:n.url)==null?void 0:i.includes("/auth/verificar")),u=window.location.pathname.includes("/login");return((a=r.response)==null?void 0:a.status)===401&&!u&&!l&&(r.isAuthError=!0,localStorage.removeItem("token"),localStorage.removeItem("usuario"),window.location.href="/login"),Promise.reject(r)});const ud={login:async(r,t)=>(await ae.post("/auth/login",{nombre_usuario:r,contrasena:t})).data,logout:async()=>{try{await ae.post("/auth/logout")}catch(r){console.error("Error al cerrar sesin:",r)}finally{localStorage.removeItem("token"),localStorage.removeItem("usuario")}},verificar:async()=>(await ae.get("/auth/verificar")).data},dt={getAll:async(r=null)=>{const t=typeof r=="string"?{rol:r}:r||{};return(await ae.get("/usuarios",{params:t})).data},getById:async r=>(await ae.get(`/usuarios/${r}`)).data,create:async r=>(await ae.post("/usuarios",r)).data,update:async(r,t)=>(await ae.put(`/usuarios/${r}`,t)).data,delete:async r=>(await ae.delete(`/usuarios/${r}`)).data,cambiarContrasena:async(r,t)=>(await ae.post(`/usuarios/${r}/cambiar-contrasena`,{nueva_contrasena:t})).data,getPermisos:async r=>(await ae.get(`/usuarios/${r}/permisos`)).data,updatePermisos:async(r,t)=>(await ae.put(`/usuarios/${r}/permisos`,{permisos:t})).data,deletePermisos:async r=>(await ae.delete(`/usuarios/${r}/permisos`)).data,getRoles:async()=>(await ae.get("/usuarios/roles")).data,getPermisosRol:async r=>(await ae.get(`/usuarios/roles/${r}/permisos`)).data,updatePermisosRol:async(r,t)=>(await ae.put(`/usuarios/roles/${r}/permisos`,{permisos:t})).data,deletePermisosRol:async r=>(await ae.delete(`/usuarios/roles/${r}/permisos`)).data},so={getAll:async()=>(await ae.get("/clientes")).data,getMe:async()=>(await ae.get("/clientes/me")).data,getById:async r=>(await ae.get(`/clientes/${r}`)).data,create:async r=>(await ae.post("/clientes",r)).data,update:async(r,t)=>(await ae.put(`/clientes/${r}`,t)).data,delete:async r=>(await ae.delete(`/clientes/${r}`)).data},Rg={getAll:async(r=!0)=>{const t={solo_activos:r};return(await ae.get("/tipos_evento",{params:t})).data},getById:async r=>(await ae.get(`/tipos_evento/${r}`)).data},No={getAll:async(r=!0,t=null)=>{const o={solo_activos:r};return t&&(o.categoria_id=t),(await ae.get("/productos",{params:o})).data},getById:async r=>(await ae.get(`/productos/${r}`)).data,create:async r=>(await ae.post("/productos",r)).data,update:async(r,t)=>(await ae.put(`/productos/${r}`,t)).data,delete:async r=>(await ae.delete(`/productos/${r}`)).data,updateStock:async(r,t)=>(await ae.put(`/productos/${r}/stock`,{cantidad:t})).data},Yi={getAll:async(r=!0)=>{const t={solo_activas:r};return(await ae.get("/categorias",{params:t})).data},getById:async r=>(await ae.get(`/categorias/${r}`)).data,create:async r=>(await ae.post("/categorias",r)).data,update:async(r,t)=>(await ae.put(`/categorias/${r}`,t)).data,delete:async r=>(await ae.delete(`/categorias/${r}`)).data},ur={getAll:async(r={})=>(await ae.get("/eventos",{params:r})).data,getById:async r=>(await ae.get(`/eventos/${r}`)).data,create:async r=>(await ae.post("/eventos",r)).data,update:async(r,t)=>(await ae.put(`/eventos/${r}`,t)).data,updateEstado:async(r,t)=>(await ae.put(`/eventos/${r}/estado`,{estado:t})).data,asignarCoordinador:async(r,t)=>(await ae.put(`/eventos/${r}/coordinador`,{coordinador_id:t})).data,agregarProducto:async(r,t,o,n)=>(await ae.post(`/eventos/${r}/productos`,{producto_id:t,cantidad:o,precio_unitario:n})).data,eliminarProducto:async(r,t,o="")=>(await ae.delete(`/eventos/${r}/productos/${t}`,{data:{observacion:o}})).data,delete:async r=>(await ae.delete(`/eventos/${r}`)).data,getProductos:async r=>(await ae.get(`/eventos/${r}/productos`)).data,getServicios:async r=>(await ae.get(`/eventos/${r}/servicios`)).data,actualizarServicio:async(r,t,o,n)=>{const i={};return o!=null&&(i.completado=o),n!=null&&(i.descartado=n),(await ae.put(`/eventos/${r}/servicios/${t}`,i)).data},generarServicios:async r=>(await ae.post(`/eventos/${r}/servicios/generar`)).data,crearServicioPersonalizado:async(r,t,o)=>(await ae.post(`/eventos/${r}/servicios`,{nombre:t,orden:o})).data,eliminarServicio:async(r,t)=>(await ae.delete(`/eventos/${r}/servicios/${t}`)).data,calcularTotal:async r=>(await ae.post(`/eventos/${r}/calcular-total`)).data,descargarCotizacionPDF:async r=>await ae.get(`/eventos/${r}/cotizacion-pdf`,{responseType:"blob"}),completarEvento:async(r,t)=>(await ae.post(`/eventos/${r}/completar`,t)).data,obtenerDanos:async r=>(await ae.get(`/eventos/${r}/danos`)).data,registrarPagoDanos:async(r,t,o="efectivo",n="")=>(await ae.post(`/eventos/${r}/pago-danos`,{monto:t,metodo_pago:o,observaciones:n})).data,obtenerDanosPendientes:async()=>(await ae.get("/eventos/danos-pendientes")).data,registrarCalificacionManual:async(r,t)=>(await ae.post(`/eventos/${r}/calificacion`,t)).data,descargarContratoPDF:async r=>await ae.get(`/eventos/${r}/contrato-pdf`,{responseType:"blob"}),getFechasOcupadas:async r=>(await ae.get("/eventos/fechas-ocupadas",{params:{salon_id:r}})).data},xt={getAll:async(r=!0)=>{const t={solo_activos:r};return(await ae.get("/planes",{params:t})).data},getById:async r=>(await ae.get(`/planes/${r}`)).data,create:async r=>(await ae.post("/planes",r)).data,update:async(r,t)=>(await ae.put(`/planes/${r}`,t)).data,delete:async r=>(await ae.delete(`/planes/${r}`)).data,agregarProducto:async(r,t,o)=>(await ae.post(`/planes/${r}/productos`,{producto_id:t,cantidad:o})).data,eliminarProducto:async(r,t)=>(await ae.delete(`/planes/${r}/productos/${t}`)).data,getProductos:async r=>(await ae.get(`/planes/${r}/productos`)).data,getServicios:async r=>(await ae.get(`/planes/${r}/servicios`)).data,actualizarServicios:async(r,t)=>(await ae.put(`/planes/${r}/servicios`,{servicios:t})).data},et={getByEvento:async r=>(await ae.get("/pagos",{params:{evento_id:r}})).data,getById:async r=>(await ae.get(`/pagos/${r}`)).data,create:async r=>(await ae.post("/pagos",r)).data,delete:async r=>(await ae.delete(`/pagos/${r}`)).data,updateEstado:async(r,t)=>(await ae.patch(`/pagos/${r}/estado`,{estado_pago:t})).data,updateCuenta:async(r,t)=>(await ae.put(`/pagos/${r}/cuenta`,{cuenta_id:t})).data,getTotalEvento:async r=>(await ae.get(`/pagos/evento/${r}/total`)).data},wp={downloadTemplate:async r=>(await ae.get(`/carga_masiva/template/${r}`,{responseType:"blob"})).data,upload:async(r,t)=>{const o=new FormData;return o.append("archivo",t),(await ae.post(`/carga_masiva/${r}`,o,{headers:{"Content-Type":"multipart/form-data"}})).data}},Tv={getByEvento:async r=>(await ae.get("/inventario",{params:{evento_id:r}})).data,create:async r=>(await ae.post("/inventario",r)).data,updateEstado:async(r,t,o=null)=>{const n={estado:t};return o!==null&&(n.cantidad_utilizada=o),(await ae.put(`/inventario/${r}/estado`,n)).data},registrarDevolucion:async(r,t)=>(await ae.post(`/inventario/${r}/devolucion`,{fecha_devolucion:t})).data,verificarDisponibilidad:async(r,t,o)=>(await ae.post("/inventario/verificar-disponibilidad",{producto_id:r,cantidad:t,fecha_evento:o})).data},vn={getAll:async(r=!1)=>{const t={solo_activos:r};return(await ae.get("/salones",{params:t})).data},getById:async r=>(await ae.get(`/salones/${r}`)).data,create:async r=>(await ae.post("/salones",r)).data,update:async(r,t)=>(await ae.put(`/salones/${r}`,t)).data,delete:async r=>(await ae.delete(`/salones/${r}`)).data,verificarDisponibilidad:async(r,t)=>(await ae.post(`/salones/${r}/verificar-disponibilidad`,{fecha_evento:t})).data},Tt={getMetricas:async(r={})=>(await ae.get("/reportes/metricas",{params:r})).data,getEventosPorEstado:async()=>(await ae.get("/reportes/eventos-por-estado")).data,getResumenFinanciero:async()=>(await ae.get("/reportes/resumen-financiero")).data,getPagosPorCuenta:async(r={})=>(await ae.get("/reportes/pagos-por-cuenta",{params:r})).data,descargarEventos:async(r={})=>await ae.get("/reportes/descargar/eventos",{params:r,responseType:"blob"}),descargarInventario:async()=>await ae.get("/reportes/descargar/inventario",{responseType:"blob"}),descargarCardex:async(r={})=>await ae.get("/reportes/descargar/cardex",{params:r,responseType:"blob"}),descargarNotificaciones:async(r={})=>await ae.get("/reportes/descargar/notificaciones",{params:r,responseType:"blob"}),descargarClientes:async()=>await ae.get("/reportes/descargar/clientes",{responseType:"blob"}),descargarPagos:async(r={})=>await ae.get("/reportes/descargar/pagos",{params:r,responseType:"blob"}),getResumenDanos:async(r={})=>(await ae.get("/reportes/resumen-danos",{params:r})).data,getResumenCalificaciones:async(r={})=>(await ae.get("/reportes/resumen-calificaciones",{params:r})).data,descargarDanos:async(r={})=>await ae.get("/reportes/descargar/danos",{params:r,responseType:"blob"}),descargarCalificaciones:async(r={})=>await ae.get("/reportes/descargar/calificaciones",{params:r,responseType:"blob"})},ao={getConfiguraciones:async()=>(await ae.get("/notificaciones_nativas/configuraciones")).data,getConfiguracion:async r=>(await ae.get(`/notificaciones_nativas/configuraciones/${r}`)).data,updateEstado:async(r,t)=>(await ae.patch(`/notificaciones_nativas/configuraciones/${r}/status`,{activo:t})).data,updateConfiguracion:async(r,t)=>(await ae.put(`/notificaciones_nativas/configuraciones/${r}`,t)).data,getProximasEvento:async r=>(await ae.get(`/notificaciones_nativas/evento/${r}/proximas`)).data,forzarNotificacion:async(r,t,o=null)=>(await ae.post(`/notificaciones_nativas/evento/${r}/forzar`,{tipo_notificacion:t,canal:o})).data},Sp={getWhatsApp:async()=>(await ae.get("/integraciones/whatsapp")).data,updateWhatsApp:async r=>(await ae.put("/integraciones/whatsapp",r)).data},Eo={getConversations:async()=>(await ae.get("/whatsapp_chat/conversations")).data,getMessages:async r=>(await ae.get(`/whatsapp_chat/conversations/${r}/messages`)).data,sendMessage:async(r,t)=>(await ae.post(`/whatsapp_chat/conversations/${r}/send`,{mensaje:t})).data,setMode:async(r,t)=>(await ae.patch(`/whatsapp_chat/conversations/${r}/modo`,{modo:t})).data,resetBot:async r=>(await ae.post(`/whatsapp_chat/conversations/${r}/reset-bot`)).data,sendMedia:async(r,t)=>(await ae.post(`/whatsapp_chat/conversations/${r}/send-media`,t,{headers:{"Content-Type":"multipart/form-data"}})).data,getMedia:async r=>(await ae.get(`/whatsapp_chat/media/${r}`,{responseType:"blob"})).data,marcarLeido:async r=>(await ae.post(`/whatsapp_chat/conversations/${r}/marcar-leido`)).data,getNoLeidos:async()=>(await ae.get("/whatsapp_chat/no-leidos")).data},$i={getResumen:async(r={})=>(await ae.get("/whatsapp_metricas/resumen",{params:r})).data,getClientes:async(r={})=>(await ae.get("/whatsapp_metricas/clientes",{params:r})).data,updateConfig:async r=>(await ae.put("/whatsapp_metricas/config",r)).data,updateControlCliente:async(r,t)=>(await ae.patch(`/whatsapp_metricas/clientes/${r}/control`,t)).data},ia={limpiarDatosPrueba:async()=>(await ae.post("/configuraciones/limpiar-datos-prueba")).data,getNombrePlataforma:async()=>(await ae.get("/configuraciones/nombre-plataforma")).data,updateNombrePlataforma:async r=>(await ae.put("/configuraciones/nombre-plataforma",r)).data,getGeneral:async()=>(await ae.get("/configuraciones/general")).data,getGeneralPublic:async()=>(await ae.get("/configuraciones/general-public")).data,updateGeneral:async r=>(await ae.put("/configuraciones/general",r)).data},Un={getAll:async()=>(await ae.get("/whatsapp_templates")).data,create:async r=>(await ae.post("/whatsapp_templates",r)).data,update:async(r,t)=>(await ae.put(`/whatsapp_templates/${r}`,t)).data,remove:async r=>(await ae.delete(`/whatsapp_templates/${r}`)).data,send:async r=>(await ae.post("/whatsapp_templates/enviar",r)).data},qo={getAll:async(r=!1)=>{const t={incluir_inactivas:r};return(await ae.get("/cuentas",{params:t})).data},getById:async r=>(await ae.get(`/cuentas/${r}`)).data,create:async r=>(await ae.post("/cuentas",r)).data,update:async(r,t)=>(await ae.put(`/cuentas/${r}`,t)).data,delete:async r=>(await ae.delete(`/cuentas/${r}`)).data,activar:async r=>(await ae.post(`/cuentas/${r}/activar`)).data,getTipos:async()=>(await ae.get("/cuentas/tipos")).data,getEstadisticas:async()=>(await ae.get("/cuentas/estadisticas")).data},jn={getOpcionesProducto:async r=>(await ae.get(`/producto-opciones/productos/${r}/opciones`)).data,crearOpcion:async(r,t)=>(await ae.post(`/producto-opciones/productos/${r}/opciones`,t)).data,getOpcion:async r=>(await ae.get(`/producto-opciones/opciones/${r}`)).data,actualizarOpcion:async(r,t)=>(await ae.put(`/producto-opciones/opciones/${r}`,t)).data,eliminarOpcion:async(r,t=!1)=>(await ae.delete(`/producto-opciones/opciones/${r}?permanente=${t}`)).data,getSeleccionesEvento:async r=>(await ae.get(`/producto-opciones/eventos/${r}/selecciones`)).data,getOpcionesPendientes:async r=>(await ae.get(`/producto-opciones/eventos/${r}/opciones-pendientes`)).data,getResumenConfirmaciones:async r=>(await ae.get(`/producto-opciones/eventos/${r}/resumen-confirmaciones`)).data,guardarSeleccion:async(r,t)=>(await ae.post(`/producto-opciones/eventos/${r}/selecciones`,t)).data,eliminarSeleccion:async r=>(await ae.delete(`/producto-opciones/selecciones/${r}`)).data,getProductosConOpciones:async()=>(await ae.get("/producto-opciones/productos-con-opciones")).data},Nv={checkToken:()=>{const r=localStorage.getItem("token"),t=localStorage.getItem("usuario");if(console.log("=== Debug de Autenticacin ==="),console.log("Token presente:",!!r),console.log("Token length:",(r==null?void 0:r.length)||0),console.log("Usuario presente:",!!t),r)try{const o=r.split(".");if(o.length===3){const n=JSON.parse(atob(o[1]));console.log("Token payload:",n),console.log("Token expira:",new Date(n.exp*1e3)),console.log("Token vlido:",new Date<new Date(n.exp*1e3))}}catch(o){console.error("Error al decodificar token:",o)}if(t)try{const o=JSON.parse(t);console.log("Usuario data:",o)}catch(o){console.error("Error al parsear usuario:",o)}console.log("==============================")},clearAuth:()=>{localStorage.removeItem("token"),localStorage.removeItem("usuario"),console.log("Autenticacin limpiada")}};typeof window<"u"&&(window.debugAuth=Nv);const Eg=c.createContext(null),at=()=>{const r=c.useContext(Eg);if(!r)throw new Error("useAuth debe usarse dentro de AuthProvider");return r},Bv=({children:r})=>{const[t,o]=c.useState(null),[n,i]=c.useState(!0),[a,l]=c.useState(!1);c.useEffect(()=>{const x=localStorage.getItem("token"),h=localStorage.getItem("usuario");if(x&&h)try{const S=JSON.parse(h);o(S),l(!0),u()}catch(S){console.error("Error al cargar usuario:",S),localStorage.removeItem("token"),localStorage.removeItem("usuario")}i(!1)},[]);const u=async()=>{try{const x=await ud.verificar();x.authenticated?(o(x.usuario),l(!0),localStorage.setItem("usuario",JSON.stringify(x.usuario))):d()}catch(x){console.error("Error al verificar token:",x),d()}},s=async(x,h)=>{var S,C,j,P,v;try{const m=await ud.login(x,h);if(m&&m.success&&m.token){localStorage.setItem("token",m.token),localStorage.setItem("usuario",JSON.stringify(m.usuario));const y=localStorage.getItem("token");return!y||y!==m.token?(console.error("Error: Token no se guard correctamente"),{success:!1,error:"Error al guardar la sesin"}):(o(m.usuario),l(!0),{success:!0})}else return m&&m.error?{success:!1,error:m.error}:{success:!1,error:"Error al iniciar sesin. Respuesta inesperada del servidor."}}catch(m){return console.error("Error en login:",m),m.code==="ECONNABORTED"||(S=m.message)!=null&&S.includes("timeout")?{success:!1,error:"El servidor no responde. Verifica que el servidor API est corriendo en http://localhost:5000"}:m.code==="ERR_NETWORK"||(C=m.message)!=null&&C.includes("Network Error")||(j=m.message)!=null&&j.includes("Failed to fetch")?{success:!1,error:"No se puede conectar con el servidor. Asegrate de que el servidor API est corriendo en http://localhost:5000"}:m.response?{success:!1,error:((P=m.response.data)==null?void 0:P.error)||((v=m.response.data)==null?void 0:v.message)||`Error del servidor: ${m.response.status}`}:{success:!1,error:m.message||"Error al conectar con el servidor. Verifica que el servidor API est corriendo."}}},d=async()=>{await ud.logout(),o(null),l(!1)},f={usuario:t,isAuthenticated:a,loading:n,login:s,logout:d,verificarToken:u};return e.jsx(Eg.Provider,{value:f,children:r})},Pv=async()=>{try{const r=await fetch("/api/health",{method:"GET",headers:{"Content-Type":"application/json"}});return r.ok?{available:!0,data:await r.json()}:{available:!1,error:"Servidor respondi con error"}}catch(r){return{available:!1,error:r.message||"No se puede conectar con el servidor",details:r}}};/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var Dv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Mv=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ie=(r,t)=>{const o=c.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:u="",children:s,...d},f)=>c.createElement("svg",{ref:f,...Dv,width:i,height:i,stroke:n,strokeWidth:l?Number(a)*24/Number(i):a,className:["lucide",`lucide-${Mv(r)}`,u].join(" "),...d},[...t.map(([x,h])=>c.createElement(x,h)),...Array.isArray(s)?s:[s]]));return o.displayName=`${r}`,o};/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const pc=Ie("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ut=Ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const di=Ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ov=Ie("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const yi=Ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Lv=Ie("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Fv=Ie("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const $v=Ie("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Uv=Ie("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Gv=Ie("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Wg=Ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Hv=Ie("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Xl=Ie("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Cp=Ie("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const qv=Ie("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const _t=Ie("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const jo=Ie("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const kp=Ie("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ui=Ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ki=Ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const _p=Ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ti=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Vv=Ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Yv=Ie("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const An=Ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ka=Ie("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const zt=Ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const no=Ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const St=Ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Kv=Ie("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Zv=Ie("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const jt=Ie("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const yu=Ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const es=Ie("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Jv=Ie("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const zp=Ie("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Qv=Ie("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Xv=Ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const e5=Ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const r5=Ie("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const an=Ie("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const rs=Ie("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const t5=Ie("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ci=Ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const o5=Ie("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const n5=Ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const zs=Ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const In=Ie("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Rp=Ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const vu=Ie("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ep=Ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const i5=Ie("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const a5=Ie("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Gt=Ie("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Qt=Ie("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ag=Ie("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ig=Ie("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Mr=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ts=Ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const it=Ie("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Et=Ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const l5=Ie("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ll=Ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const s5=Ie("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const d5=Ie("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const md=Ie("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const c5=Ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const u5=Ie("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const m5=Ie("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ar=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const p5=Ie("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ju=Ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Tg=Ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const mo=Ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const dn=Ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const f5=Ie("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const g5=Ie("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const h5=Ie("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ng=Ie("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const er=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),b5=()=>{const[r,t]=c.useState(""),[o,n]=c.useState(""),[i,a]=c.useState(""),[l,u]=c.useState(!1),[s,d]=c.useState(null),[f,x]=c.useState(null),[h,S]=c.useState(!1),{login:C}=at(),j=_o(),[P,v]=c.useState({nombre_plataforma:"Lirios Eventos",login_titulo:"Bienvenido de vuelta",login_subtitulo:"Ingresa con tu usuario y contrasena.",login_boton_texto:"Ingresar",login_left_titulo:"Tu evento, organizado sin estres",login_left_texto:"Reserva tu fecha, gestiona pagos y coordina cada detalle desde un solo lugar.",login_left_items:`Fechas y horarios en un clic
Pagos y recordatorios automatizados
Clientes informados en tiempo real
Reportes claros para tu equipo`,login_left_imagen:"",login_acento_color:"#16a34a",login_fondo_color:"#0f766e"});c.useEffect(()=>{(async()=>{try{const k=await Pv();d(k.available),k.available||a("El servidor API no est disponible. Asegrate de que est corriendo en http://localhost:5000")}catch(k){console.error("Error al verificar API:",k),d(!1)}})()},[]),c.useEffect(()=>{(async()=>{try{const k=await ia.getGeneralPublic(),U=(k==null?void 0:k.configuracion)||{};v(X=>({...X,...U}))}catch{}})()},[]);const m=async k=>{if(k.preventDefault(),a(""),!r||!o){a("Por favor, completa todos los campos");return}u(!0);try{const U=await C(r,o);U.success?j("/dashboard"):a(U.error||"Error al iniciar sesin")}catch(U){console.error("Error en handleSubmit:",U),a("Error inesperado al intentar iniciar sesin")}finally{u(!1)}},y=(P.login_left_items||"").split(`
`).map(k=>k.trim()).filter(Boolean);return e.jsxs("div",{className:"login-layout",style:{minHeight:"100vh",display:"grid",gridTemplateColumns:"1.1fr 0.9fr",background:"#ffffff"},children:[e.jsxs("div",{className:"login-left",style:{color:"white",padding:"3rem 3.5rem",position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"2.5rem",backgroundColor:P.login_fondo_color||"#0f766e",backgroundImage:P.login_left_imagen?`linear-gradient(180deg, rgba(31, 41, 55, 0.55), rgba(31, 41, 55, 0.75)), url("${P.login_left_imagen}")`:"none",backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",fontFamily:'"Inter", "Segoe UI", "Helvetica Neue", Arial, sans-serif'},children:[e.jsxs("div",{style:{maxWidth:"560px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.85rem",fontWeight:600,letterSpacing:"0.12em",opacity:.85,marginBottom:"1.5rem",textTransform:"uppercase"},children:P.nombre_plataforma}),e.jsx("div",{style:{fontSize:"2.35rem",fontWeight:600,marginBottom:"0.9rem",lineHeight:1.25},children:P.login_left_titulo}),e.jsx("div",{style:{color:"rgba(255,255,255,0.85)",lineHeight:1.8,fontSize:"1rem",fontWeight:400},children:P.login_left_texto}),y.length>0&&e.jsx("ul",{style:{marginTop:"1.4rem",paddingLeft:0,listStylePosition:"inside",lineHeight:2,fontSize:"0.95rem",fontWeight:500,textAlign:"center"},children:y.map(k=>e.jsx("li",{children:k},k))})]}),e.jsx("div",{style:{fontSize:"0.8rem",opacity:.7},children:P.login_left_texto})]}),e.jsx("div",{className:"login-right",style:{padding:"3.25rem 3.5rem",background:"white",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontFamily:'"Inter", "Segoe UI", "Helvetica Neue", Arial, sans-serif'},children:e.jsxs("div",{style:{width:"100%",maxWidth:"420px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2.5rem"},children:[e.jsx("div",{style:{fontSize:"1.8rem",fontWeight:700,color:"#111827"},children:P.login_titulo}),e.jsx("div",{style:{color:"#6b7280",marginTop:"0.35rem"},children:P.login_subtitulo})]}),e.jsxs("form",{onSubmit:m,children:[s===!1&&e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#fef3c7",color:"#92400e",borderRadius:"0.75rem",marginBottom:"1.5rem",fontSize:"0.875rem",border:"1px solid #fbbf24",display:"flex",alignItems:"start",gap:"0.75rem",animation:"slideIn 0.3s ease-out"},children:[e.jsx(ut,{size:20,style:{flexShrink:0,marginTop:"0.125rem"}}),e.jsxs("div",{children:[e.jsx("strong",{children:" Servidor API no disponible"}),e.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.8rem"},children:["Por favor, inicia el servidor API ejecutando:"," ",e.jsx("code",{style:{backgroundColor:"#f3f4f6",padding:"0.2rem 0.4rem",borderRadius:"0.25rem",fontFamily:"monospace"},children:"python api_server.py"})]})]})]}),i&&e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.75rem",marginBottom:"1.5rem",fontSize:"0.875rem",display:"flex",alignItems:"start",gap:"0.75rem",animation:"slideIn 0.3s ease-out",border:"1px solid #fca5a5"},children:[e.jsx(ut,{size:20,style:{flexShrink:0,marginTop:"0.125rem"}}),e.jsx("span",{children:i})]}),e.jsxs("div",{style:{marginBottom:"1.35rem"},children:[e.jsx("label",{htmlFor:"usuario",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Usuario"}),e.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{position:"absolute",left:"1rem",zIndex:1,color:f==="usuario"?P.login_acento_color||"#16a34a":"#9ca3af",transition:"color 0.2s"},children:e.jsx(mo,{size:20})}),e.jsx("input",{id:"usuario",type:"text",value:r,onChange:k=>t(k.target.value),onFocus:()=>x("usuario"),onBlur:()=>x(null),required:!0,placeholder:"Ingrese su usuario",style:{width:"100%",padding:"0.875rem 0.875rem 0.875rem 3rem",border:`1px solid ${f==="usuario"?P.login_acento_color||"#16a34a":"#e5e7eb"}`,borderRadius:"0.65rem",fontSize:"1rem",transition:"all 0.2s",outline:"none",backgroundColor:"white"}})]})]}),e.jsxs("div",{style:{marginBottom:"1.75rem"},children:[e.jsx("label",{htmlFor:"contrasena",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Contrasea"}),e.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{position:"absolute",left:"1rem",zIndex:1,color:f==="contrasena"?P.login_acento_color||"#16a34a":"#9ca3af",transition:"color 0.2s"},children:e.jsx(ci,{size:20})}),e.jsx("input",{id:"contrasena",type:h?"text":"password",value:o,onChange:k=>n(k.target.value),onFocus:()=>x("contrasena"),onBlur:()=>x(null),required:!0,placeholder:"Ingrese su contrasea",style:{width:"100%",padding:"0.875rem 3rem 0.875rem 3rem",border:`1px solid ${f==="contrasena"?P.login_acento_color||"#16a34a":"#e5e7eb"}`,borderRadius:"0.65rem",fontSize:"1rem",transition:"all 0.2s",outline:"none",backgroundColor:"white"}}),e.jsx("button",{type:"button",onClick:()=>S(!h),style:{position:"absolute",right:"1rem",background:"none",border:"none",cursor:"pointer",color:"#9ca3af",padding:"0.25rem",display:"flex",alignItems:"center",transition:"color 0.2s"},onMouseEnter:k=>k.currentTarget.style.color=P.login_acento_color||"#16a34a",onMouseLeave:k=>k.currentTarget.style.color="#9ca3af",children:h?e.jsx(ci,{size:18}):e.jsx(ci,{size:18})})]})]}),e.jsx("button",{type:"submit",disabled:l||s===!1,style:{width:"100%",padding:"0.875rem",background:l||s===!1?"#9ca3af":P.login_acento_color||"#16a34a",color:"white",border:"none",borderRadius:"0.65rem",fontSize:"1rem",fontWeight:"600",cursor:l||s===!1?"not-allowed":"pointer",transition:"all 0.3s",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:l||s===!1?"none":"0 12px 20px rgba(15, 23, 42, 0.15)",position:"relative",overflow:"hidden"},onMouseEnter:k=>{!l&&s!==!1&&(k.currentTarget.style.transform="translateY(-2px)",k.currentTarget.style.boxShadow="0 18px 28px rgba(15, 23, 42, 0.2)")},onMouseLeave:k=>{!l&&s!==!1&&(k.currentTarget.style.transform="translateY(0)",k.currentTarget.style.boxShadow="0 12px 20px rgba(15, 23, 42, 0.15)")},children:l?e.jsxs(e.Fragment,{children:[e.jsx(t5,{size:20,style:{animation:"spin 1s linear infinite"}}),e.jsx("span",{children:"Iniciando sesin..."})]}):s===!1?e.jsxs(e.Fragment,{children:[e.jsx(ut,{size:20}),e.jsx("span",{children:"Servidor no disponible"})]}):e.jsxs(e.Fragment,{children:[e.jsx(o5,{size:20}),e.jsx("span",{children:P.login_boton_texto||"Ingresar"})]})})]}),e.jsxs("div",{style:{marginTop:"2rem",padding:"1.25rem",backgroundColor:"#f9fafb",borderRadius:"0.75rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#374151",marginBottom:"0.75rem"},children:" Usuarios de Prueba"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",fontSize:"0.8rem"},children:[{usuario:"admin",contrasena:"admin123",rol:"Administrador",color:"#dc2626"},{usuario:"gerente",contrasena:"gerente123",rol:"Gerente General",color:"#2563eb"},{usuario:"coordinador1",contrasena:"coordinador123",rol:"Coordinador",color:"#16a34a"},{usuario:"coordinador2",contrasena:"coordinador123",rol:"Coordinador",color:"#16a34a"}].map(k=>e.jsxs("button",{type:"button",onClick:()=>{t(k.usuario),n(k.contrasena),a("")},style:{padding:"0.65rem 1rem",backgroundColor:"white",border:`1px solid ${k.color}`,borderRadius:"0.5rem",color:k.color,cursor:"pointer",fontSize:"0.8rem",fontWeight:"500",textAlign:"left",transition:"all 0.2s",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:U=>{U.currentTarget.style.backgroundColor=k.color,U.currentTarget.style.color="white",U.currentTarget.style.transform="translateX(4px)"},onMouseLeave:U=>{U.currentTarget.style.backgroundColor="white",U.currentTarget.style.color=k.color,U.currentTarget.style.transform="translateX(0)"},children:[e.jsxs("span",{children:[e.jsx("strong",{children:k.usuario})," (",k.rol,")"]}),e.jsx("span",{style:{fontSize:"0.75rem",opacity:.7},children:k.contrasena})]},k.usuario))})]}),e.jsx("div",{style:{marginTop:"1.25rem",textAlign:"center"},children:e.jsx(Or,{to:"/",style:{color:P.login_acento_color||"#16a34a",textDecoration:"none",fontWeight:"600",fontSize:"0.9rem"},children:"Volver al inicio"})})]})}),e.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @media (max-width: 960px) {
          .login-layout {
            grid-template-columns: 1fr;
          }
          .login-left {
            padding: 2rem;
            min-height: 45vh;
          }
          .login-right {
            padding: 2rem 1.5rem;
            align-items: flex-start;
          }
        }
        @media (max-width: 600px) {
          .login-left {
            padding: 1.5rem;
            min-height: 40vh;
          }
        }
      `})]})};let x5=0;const _r=()=>{const[r,t]=c.useState([]),o=c.useCallback((s,d="success",f=3e3)=>{const x=++x5,h={id:x,message:s,type:d,duration:f};return t(S=>[...S,h]),x},[]),n=c.useCallback(s=>{t(d=>d.filter(f=>f.id!==s))},[]),i=c.useCallback((s,d)=>o(s,"success",d),[o]),a=c.useCallback((s,d)=>o(s,"error",d),[o]),l=c.useCallback((s,d)=>o(s,"warning",d),[o]),u=c.useCallback((s,d)=>o(s,"info",d),[o]);return{toasts:r,addToast:o,removeToast:n,success:i,error:a,warning:l,info:u}},sl="Lirios Eventos",dl="nombre_plataforma",Rs=()=>{const[r,t]=c.useState(()=>localStorage.getItem(dl)||sl),o=c.useCallback(n=>{const i=(n||"").trim()||sl;localStorage.setItem(dl,i),t(i),window.dispatchEvent(new Event("nombre-plataforma-updated"))},[]);return c.useEffect(()=>{let n=!0;(async()=>{try{const a=await ia.getNombrePlataforma(),l=((a==null?void 0:a.nombre_plataforma)||"").trim()||sl;n&&(t(l),localStorage.setItem(dl,l))}catch{}})();const i=()=>{const a=localStorage.getItem(dl)||sl;t(a)};return window.addEventListener("nombre-plataforma-updated",i),()=>{n=!1,window.removeEventListener("nombre-plataforma-updated",i)}},[]),{nombrePlataforma:r,setNombrePlataforma:o}},y5=({message:r,type:t="success",onClose:o,duration:n=3e3})=>{c.useEffect(()=>{if(n>0){const l=setTimeout(()=>{o()},n);return()=>clearTimeout(l)}},[n,o]);const i=()=>{switch(t){case"success":return e.jsx(jo,{size:20,color:"white"});case"error":return e.jsx(Ng,{size:20,color:"white"});case"warning":return e.jsx(ut,{size:20,color:"white"});case"info":return e.jsx(e5,{size:20,color:"white"});default:return e.jsx(jo,{size:20,color:"white"})}},a=()=>{const l={display:"flex",alignItems:"center",gap:"0.75rem",padding:"1rem 1.25rem",borderRadius:"0.5rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",minWidth:"300px",maxWidth:"500px",animation:"slideIn 0.3s ease-out",position:"relative",zIndex:9999};switch(t){case"success":return{...l,backgroundColor:"#10b981",color:"white"};case"error":return{...l,backgroundColor:"#ef4444",color:"white"};case"warning":return{...l,backgroundColor:"#f59e0b",color:"white"};case"info":return{...l,backgroundColor:"#3b82f6",color:"white"};default:return{...l,backgroundColor:"#10b981",color:"white"}}};return e.jsxs("div",{style:a(),children:[e.jsx("div",{style:{flexShrink:0},children:i()}),e.jsx("div",{style:{flex:1,fontSize:"0.875rem",fontWeight:"500"},children:r}),e.jsx("button",{onClick:o,style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center",justifyContent:"center",color:"white",opacity:.8,transition:"opacity 0.2s"},onMouseEnter:l=>l.currentTarget.style.opacity="1",onMouseLeave:l=>l.currentTarget.style.opacity="0.8",children:e.jsx(er,{size:18})}),e.jsx("style",{children:`
        @keyframes slideIn {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
      `})]})},Nr=({toasts:r,removeToast:t})=>e.jsx("div",{style:{position:"fixed",top:"1rem",right:"1rem",zIndex:1e4,display:"flex",flexDirection:"column",gap:"0.75rem",maxWidth:"500px"},children:r.map(o=>e.jsx(y5,{message:o.message,type:o.type,onClose:()=>t(o.id),duration:o.duration},o.id))}),N={ADMIN:"administrador",MANAGER:"gerente_general",COORDINATOR:"coordinador",CLIENT:"cliente"},Oe={COTIZADOR:"cotizador",DASHBOARD:"dashboard",EVENTOS:"eventos",CALENDARIO:"calendario",PORTAL_CLIENTE:"portal_cliente",PERFIL:"perfil",CLIENTES:"clientes",PRODUCTOS:"productos",CATEGORIAS:"categorias",PLANES:"planes",PAGOS:"pagos",CUENTAS:"cuentas",INVENTARIO:"inventario",SALONES:"salones",REPORTES:"reportes",USUARIOS:"usuarios",PERMISOS:"permisos",NOTIFICACIONES_NATIVAS:"notificaciones_nativas",INTEGRACIONES:"integraciones",WHATSAPP_CHAT:"whatsapp_chat",WHATSAPP_METRICAS:"whatsapp_metricas",WHATSAPP_TEMPLATES:"whatsapp_templates",CONFIG_DATOS:"config_datos",CARGA_MASIVA:"carga_masiva"},Je={EVENTOS_EDITAR_ESTADO:"eventos:editar_estado",EVENTOS_AGREGAR_PRODUCTO:"eventos:agregar_producto",EVENTOS_ELIMINAR_PRODUCTO:"eventos:eliminar_producto",EVENTOS_ELIMINAR:"eventos:eliminar",EVENTOS_ACTUALIZAR_SERVICIOS:"eventos:actualizar_servicios",EVENTOS_GENERAR_SERVICIOS:"eventos:generar_servicios",EVENTOS_DESCARTAR_SERVICIO:"eventos:descartar_servicio",EVENTOS_ASIGNAR_COORDINADOR:"eventos:asignar_coordinador",PAGOS_REGISTRAR:"pagos:registrar",PAGOS_REEMBOLSAR:"pagos:reembolsar",PAGOS_ELIMINAR:"pagos:eliminar",PAGOS_APROBAR:"pagos:aprobar",PAGOS_ANULAR:"pagos:anular",CUENTAS_VER:"cuentas:ver",CUENTAS_CREAR:"cuentas:crear",CUENTAS_EDITAR:"cuentas:editar",CUENTAS_ELIMINAR:"cuentas:eliminar",PLANES_CREAR:"planes:crear",PLANES_EDITAR:"planes:editar",PLANES_ELIMINAR:"planes:eliminar"},pd={admin:N.ADMIN,administrador:N.ADMIN,administrator:N.ADMIN,"gerente general":N.MANAGER,gerente_general:N.MANAGER,manager:N.MANAGER,coordinador:N.COORDINATOR,coordinator:N.COORDINATOR,cliente:N.CLIENT,client:N.CLIENT},v5={[N.ADMIN]:"Administrador",[N.MANAGER]:"Gerente General",[N.COORDINATOR]:"Coordinador",[N.CLIENT]:"Cliente"},fc=r=>{if(!r)return null;const t=String(r).trim().toLowerCase();if(pd[t])return pd[t];const o=t.replace(/\s+/g,"_");return pd[o]||o},Ba=(r,t=[])=>{const o=fc(r);return o?!t||t.length===0?!0:t.some(n=>fc(n)===o):!1},j5=r=>{const t=fc(r);return t?v5[t]||t:""},Cr=(r,t=[])=>Ba(r,t),gc=(r,t,o=[])=>r?Array.isArray(r.permisos)&&r.permisos.length>0?r.permisos.includes(t):Ba(r.rol,o):!1,xr=(r,t,o=[])=>r?Array.isArray(r.permisos)&&r.permisos.length>0?r.permisos.includes(t):Ba(r.rol,o):!1,Wp=()=>{const{toasts:r,removeToast:t,error:o,success:n}=_r(),{usuario:i,isAuthenticated:a,login:l}=at(),{nombrePlataforma:u}=Rs(),s=_o(),d=u.split(" ").filter(Boolean).slice(0,2).map(L=>L[0].toUpperCase()).join(""),f=(i==null?void 0:i.id)||(i==null?void 0:i.user_id)||null,x=()=>{const L=new Date;let ze=(6-L.getDay()+7)%7;ze===0&&(ze=7);const Se=new Date(L);Se.setDate(L.getDate()+ze);const je=Se.getFullYear(),Me=String(Se.getMonth()+1).padStart(2,"0"),$e=String(Se.getDate()).padStart(2,"0");return`${je}-${Me}-${$e}`},[h,S]=c.useState([]),[C,j]=c.useState([]),[P,v]=c.useState([]),[m,y]=c.useState([]),[k,U]=c.useState(!0),[X,R]=c.useState(""),[w,B]=c.useState({tipo_evento:"",fecha_evento:x(),invitados:"50",plan_id:"",salon_id:""}),[q,E]=c.useState([]),[T,ee]=c.useState(""),[H,G]=c.useState("1"),[O,re]=c.useState(!1),[W,Y]=c.useState({nombre_completo:"",nombre_usuario:"",contrasena:"",email:"",telefono:"",documento_identidad:"",direccion:""}),[D,oe]=c.useState(""),[K,V]=c.useState(!1),[F,se]=c.useState(!1),[me,ie]=c.useState(!1),[ge,Te]=c.useState({nombre_completo:"",telefono:"",documento_identidad:""}),[Q,g]=c.useState(""),[p,Z]=c.useState(!1);c.useEffect(()=>{(async()=>{var L,ze;try{U(!0);const[Se,je,Me,$e]=await Promise.all([xt.getAll(!0),vn.getAll(!0),No.getAll(!0),Rg.getAll(!0)]);S(Se.planes||[]),j(je.salones||[]),v(Me.productos||[]),y($e.tipos_evento||$e.tipos||[]),R("")}catch(Se){const je=((ze=(L=Se.response)==null?void 0:L.data)==null?void 0:ze.error)||"No se pudieron cargar los datos del cotizador";R(je),o(je)}finally{U(!1)}})()},[o]),c.useEffect(()=>{const L=sessionStorage.getItem("cotizacion_pendiente");if(L)try{const ze=JSON.parse(L);ze!=null&&ze.formData&&B(ze.formData),Array.isArray(ze==null?void 0:ze.extras)&&E(ze.extras),sessionStorage.removeItem("cotizacion_pendiente"),a&&n("Completa tus datos para descargar la cotizacin.")}catch{sessionStorage.removeItem("cotizacion_pendiente")}},[a,n]);const ce=L=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(L||0),be=L=>{const ze=Number.parseFloat(L);return Number.isFinite(ze)?ze:0},Ce=c.useMemo(()=>h.find(L=>String(L.id)===String(w.plan_id)),[h,w.plan_id]),Ae=c.useMemo(()=>C.find(L=>String(L.id_salon||L.id)===String(w.salon_id)),[C,w.salon_id]),De=c.useMemo(()=>{const L=parseInt(w.invitados||"0",10);if(!L||h.length===0)return null;const ze=h.map(je=>{const Me=parseInt(je.capacidad_minima||"0",10)||0,$e=parseInt(je.capacidad_maxima||"0",10)||0;return{...je,min:Me,max:$e}}),Se=ze.filter(je=>je.max>0?L>=je.min&&L<=je.max:L>=je.min);return(Se.length>0?Se:ze).slice().sort((je,Me)=>{const $e=je.max?Math.abs(je.max-L):Math.abs(je.min-L),Le=Me.max?Math.abs(Me.max-L):Math.abs(Me.min-L);if($e!==Le)return $e-Le;const Ve=be(je.precio_base||je.precio),or=be(Me.precio_base||Me.precio);return Ve-or})[0]||null},[w.invitados,h]),te=c.useMemo(()=>{const L=parseInt(w.invitados||"0",10);if(!L||C.length===0)return null;const ze=C.map(je=>{const Me=parseInt(je.capacidad||"0",10)||0;return{...je,capacidad:Me}}),Se=ze.filter(je=>je.capacidad>=L);return(Se.length>0?Se:ze).slice().sort((je,Me)=>{const $e=Math.abs(je.capacidad-L),Le=Math.abs(Me.capacidad-L);if($e!==Le)return $e-Le;const Ve=be(je.precio_base||je.precio),or=be(Me.precio_base||Me.precio);return Ve-or})[0]||null},[w.invitados,C]),_=c.useMemo(()=>q.map(L=>{const ze=P.find(Se=>String(Se.id_producto||Se.id)===String(L.producto_id));return{...L,producto:ze}}),[q,P]),$=c.useMemo(()=>{const L=be((Ce==null?void 0:Ce.precio_base)||(Ce==null?void 0:Ce.precio)),ze=be((Ae==null?void 0:Ae.precio_base)||(Ae==null?void 0:Ae.precio)),Se=_.reduce((je,Me)=>{var $e,Le;const Ve=be((($e=Me.producto)==null?void 0:$e.precio)||((Le=Me.producto)==null?void 0:Le.precio_base));return je+Ve*be(Me.cantidad)},0);return L+ze+Se},[Ce,Ae,_]),xe=()=>{if(!T)return;const L=parseInt(H,10);!Number.isFinite(L)||L<=0||(E(ze=>[...ze,{producto_id:T,cantidad:L}]),ee(""),G("1"))},Pe=L=>{E(ze=>ze.filter((Se,je)=>je!==L))},I=()=>{if(!Ae)return null;const L=Ae.nombre||null;return L?Ae.capacidad?`${L} (Cap: ${Ae.capacidad})`:L:null},ue=async L=>{var ze,Se;const je={cliente_id:L,nombre_evento:w.tipo_evento?`Cotizacion ${w.tipo_evento}`:"Cotizacion",tipo_evento:w.tipo_evento||null,fecha_evento:w.fecha_evento||null,numero_invitados:w.invitados?parseInt(w.invitados,10):null,estado:"cotizacion",total:$,saldo:$,observaciones:"Cotizacion creada desde la web"};if(w.plan_id&&(je.plan_id=parseInt(w.plan_id,10)),w.salon_id){je.id_salon=parseInt(w.salon_id,10);const Le=I();Le&&(je.salon=Le)}const Me=await ur.create(je),$e=((ze=Me.evento)==null?void 0:ze.id_evento)||((Se=Me.evento)==null?void 0:Se.id);if($e&&q.length>0){for(const Le of q){const Ve=P.find(wr=>String(wr.id_producto||wr.id)===String(Le.producto_id)),or=be((Ve==null?void 0:Ve.precio)||(Ve==null?void 0:Ve.precio_base));await ur.agregarProducto($e,Le.producto_id,Le.cantidad,or)}await ur.calcularTotal($e)}return $e},J=()=>{const L={formData:w,extras:q,totalEstimado:$,timestamp:new Date().toISOString()};sessionStorage.setItem("cotizacion_pendiente",JSON.stringify(L))},Ze=async()=>{var L,ze,Se,je,Me;if(!w.invitados||!w.fecha_evento){o("Completa la fecha del evento y el numero de invitados.");return}if(!w.plan_id&&!w.salon_id){o("Selecciona un plan o un salon para continuar.");return}if(!a){J(),re(!0);return}try{se(!0);const $e=await so.getMe(),Le=((L=$e.cliente)==null?void 0:L.id)||((ze=$e.cliente)==null?void 0:ze.cliente_id);if(!Le){Te(Ve=>({...Ve,nombre_completo:(i==null?void 0:i.nombre_completo)||Ve.nombre_completo,telefono:(i==null?void 0:i.telefono)||Ve.telefono})),ie(!0);return}await ue(Le)?n("Cotizacion creada. Ya puedes descargarla desde tu cuenta."):o("No se pudo crear la cotizacion. Intenta nuevamente.")}catch($e){if(((Se=$e.response)==null?void 0:Se.status)===404){Te(Ve=>({...Ve,nombre_completo:(i==null?void 0:i.nombre_completo)||Ve.nombre_completo,telefono:(i==null?void 0:i.telefono)||Ve.telefono})),ie(!0);return}const Le=((Me=(je=$e.response)==null?void 0:je.data)==null?void 0:Me.error)||"Error al enviar la cotizacion";o(Le)}finally{se(!1)}},jr=()=>{J(),s("/login")},Ge=async L=>{var ze,Se,je,Me;if(L.preventDefault(),oe(""),!W.nombre_completo||!W.nombre_usuario||!W.contrasena){oe("Nombre completo, usuario y contrasea son obligatorios.");return}try{V(!0);const $e=await so.create({nombre_usuario:W.nombre_usuario,contrasena:W.contrasena,nombre_completo:W.nombre_completo,email:W.email||null,telefono:W.telefono||null,documento_identidad:W.documento_identidad||null,direccion:W.direccion||null}),Le=await l(W.nombre_usuario,W.contrasena);if(!Le.success){oe(Le.error||"No se pudo iniciar sesion.");return}const Ve=((ze=$e.cliente)==null?void 0:ze.id)||((Se=$e.cliente)==null?void 0:Se.cliente_id);if(!Ve){oe("No se pudo obtener el cliente creado.");return}se(!0),await ue(Ve)?(re(!1),n("Registro completado y cotizacion enviada.")):oe("No se pudo crear la cotizacion.")}catch($e){const Le=((Me=(je=$e.response)==null?void 0:je.data)==null?void 0:Me.error)||"No se pudo completar el registro.";oe(Le)}finally{V(!1),se(!1)}},tr=async L=>{var ze,Se,je,Me;if(L.preventDefault(),g(""),!ge.nombre_completo||!ge.telefono||!ge.documento_identidad){g("Nombre completo, telefono y cedula son obligatorios.");return}try{if(Z(!0),!f){g("No se pudo identificar el usuario.");return}await dt.update(f,{nombre_completo:ge.nombre_completo,telefono:ge.telefono});const $e=await so.create({usuario_id:f,documento_identidad:ge.documento_identidad}),Le=((ze=$e.cliente)==null?void 0:ze.id)||((Se=$e.cliente)==null?void 0:Se.cliente_id);if(!Le){g("No se pudo crear el cliente.");return}se(!0),await ue(Le)?(ie(!1),n("Cliente creado y cotizacion enviada.")):g("No se pudo crear la cotizacion.")}catch($e){const Le=((Me=(je=$e.response)==null?void 0:je.data)==null?void 0:Me.error)||$e.message||"No se pudo completar el cliente.";g(Le)}finally{Z(!1),se(!1)}},Ke=parseInt(w.invitados||"0",10),gr=parseInt((Ae==null?void 0:Ae.capacidad)||"0",10),zr=parseInt((Ce==null?void 0:Ce.capacidad_minima)||"0",10),mr=parseInt((Ce==null?void 0:Ce.capacidad_maxima)||"0",10),br=[];gr&&Ke>gr&&br.push("El nmero de invitados supera la capacidad del saln seleccionado."),zr&&Ke>0&&Ke<zr&&br.push("El nmero de invitados es menor a la capacidad mnima del plan."),mr&&Ke>mr&&br.push("El nmero de invitados supera la capacidad mxima del plan.");const lr={width:"100%",padding:"0.75rem 0.9rem",border:"1px solid #e2e8f0",borderRadius:"0.65rem",backgroundColor:"white",fontSize:"0.95rem",boxShadow:"inset 0 1px 2px rgba(15, 23, 42, 0.04)"},qe={display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",fontWeight:"600",color:"#0f172a",fontSize:"0.9rem"},ne={backgroundColor:"white",padding:"1.75rem",borderRadius:"1rem",border:"1px solid #e2e8f0",boxShadow:"0 12px 30px -24px rgba(15, 23, 42, 0.3)"},ke={textDecoration:"none",color:"#0f172a",fontWeight:"600",fontSize:"0.95rem"},ye={fontSize:"1.6rem",fontWeight:"700",color:"#0f172a",marginBottom:"0.35rem"},ve={color:"#64748b",fontSize:"0.98rem",marginBottom:"1.5rem"},Ee={backgroundColor:"white",padding:"1.5rem",borderRadius:"0.9rem",border:"1px solid #e2e8f0",boxShadow:"0 12px 30px -24px rgba(15, 23, 42, 0.3)"},Qe=a?"Panel administrativo":"Iniciar sesin",Ne=a?"/dashboard":"/login";return k?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando cotizador..."}):e.jsxs("div",{style:{backgroundColor:"#f8fafc",minHeight:"100vh"},children:[e.jsx(Nr,{toasts:r,removeToast:t}),e.jsx("header",{style:{position:"sticky",top:0,zIndex:20,backgroundColor:"rgba(248, 250, 252, 0.92)",borderBottom:"1px solid #e2e8f0",backdropFilter:"blur(6px)"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"1rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs(Or,{to:"/",style:{display:"flex",alignItems:"center",gap:"0.75rem",textDecoration:"none",color:"#0f172a",fontWeight:"800",fontSize:"1.1rem"},children:[e.jsx("span",{style:{width:"36px",height:"36px",borderRadius:"12px",background:"linear-gradient(135deg, #4338ca, #6366f1)",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.95rem",fontWeight:"700"},children:d||"LE"}),u]}),e.jsxs("nav",{style:{display:"flex",alignItems:"center",gap:"1.25rem",flexWrap:"wrap"},children:[e.jsx("a",{href:"#cotizador",style:ke,children:"Cotizador"}),e.jsx("a",{href:"#servicios",style:ke,children:"Servicios"}),e.jsx("a",{href:"#proceso",style:ke,children:"Proceso"}),e.jsx(Or,{to:Ne,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.65rem 1.3rem",backgroundColor:"#0f172a",color:"white",borderRadius:"999px",textDecoration:"none",fontWeight:"700",boxShadow:"0 12px 26px -18px rgba(15, 23, 42, 0.7)"},children:Qe})]})]})}),e.jsx("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:e.jsxs("div",{style:{padding:"2.5rem 1.5rem 0"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #1e1b4b 0%, #312e81 45%, #6366f1 100%)",borderRadius:"1.5rem",padding:"2.5rem",color:"white",position:"relative",overflow:"hidden",marginBottom:"2rem"},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"radial-gradient(circle at top right, rgba(255,255,255,0.25), transparent 45%)",opacity:.6}}),e.jsxs("div",{style:{position:"relative",zIndex:1,display:"flex",flexWrap:"wrap",gap:"2rem",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{maxWidth:"640px"},children:[e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.4rem",padding:"0.35rem 0.75rem",borderRadius:"999px",backgroundColor:"rgba(255,255,255,0.16)",fontSize:"0.85rem",fontWeight:"600"},children:[e.jsx(Cp,{size:16}),"Cotizador en linea"]}),e.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"700",margin:"0.85rem 0 0.5rem"},children:"Cotiza tu evento en minutos"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.85)",fontSize:"1rem"},children:"Elige plan, salon y servicios adicionales. Te mostramos un estimado claro y rapido antes de solicitar tu cotizacion formal."}),e.jsx("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",marginTop:"1.25rem"},children:["Sin registro","Estimado inmediato","Descarga al registrarte"].map(L=>e.jsx("span",{style:{backgroundColor:"rgba(255,255,255,0.18)",padding:"0.45rem 0.85rem",borderRadius:"999px",fontSize:"0.85rem",fontWeight:"600"},children:L},L))})]}),Ba(i==null?void 0:i.rol,[N.ADMIN,N.MANAGER,N.COORDINATOR])&&e.jsx(Or,{to:"/dashboard",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.85rem 1.6rem",backgroundColor:"white",color:"#1e1b4b",borderRadius:"0.75rem",textDecoration:"none",fontWeight:"700",boxShadow:"0 12px 24px -16px rgba(15,23,42,0.6)"},children:"Ir al Dashboard"})]})]}),e.jsxs("section",{id:"servicios",style:{marginTop:"3rem"},children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:ye,children:"Experiencias que dejan huella"}),e.jsx("p",{style:ve,children:"Diseamos celebraciones nicas con un equipo experto, proveedores seleccionados y una ejecucin impecable."})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.25rem"},children:[{titulo:"Planeacin integral",descripcion:"Acompaamiento en cada fase: concepto, logstica y coordinacin en sitio."},{titulo:"Ambientes memorables",descripcion:"Decoracin, iluminacin y detalles diseados a la medida de tu estilo."},{titulo:"Proveedores premium",descripcion:"Aliados en catering, msica y fotografa para una experiencia perfecta."},{titulo:"Gestin transparente",descripcion:"Cronogramas claros, reportes y seguimiento en tiempo real."}].map(L=>e.jsxs("div",{style:Ee,children:[e.jsx("h3",{style:{margin:0,fontSize:"1.05rem",fontWeight:"700",color:"#0f172a"},children:L.titulo}),e.jsx("p",{style:{margin:"0.6rem 0 0",color:"#64748b",fontSize:"0.95rem"},children:L.descripcion})]},L.titulo))})]}),e.jsxs("section",{id:"proceso",style:{marginTop:"3rem"},children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:ye,children:"Un proceso claro y elegante"}),e.jsx("p",{style:ve,children:"Desde la primera idea hasta el cierre del evento, cada detalle se gestiona con precisin."})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.25rem"},children:[{titulo:"1. Insprate",descripcion:"Define fecha, invitados y estilo. Nosotros te guiamos."},{titulo:"2. Cotiza",descripcion:"Calcula tu inversin con nuestro cotizador en lnea."},{titulo:"3. Planea",descripcion:"Ajustamos la propuesta y cerramos proveedores."},{titulo:"4. Disfruta",descripcion:"Coordinamos en sitio para que vivas tu evento sin estrs."}].map(L=>e.jsxs("div",{style:Ee,children:[e.jsx("div",{style:{fontWeight:"700",fontSize:"1rem",color:"#1e1b4b",marginBottom:"0.35rem"},children:L.titulo}),e.jsx("p",{style:{margin:0,color:"#64748b",fontSize:"0.95rem"},children:L.descripcion})]},L.titulo))})]}),O&&e.jsxs("div",{style:{padding:"1rem 1.25rem",backgroundColor:"#eef2ff",color:"#3730a3",borderRadius:"0.9rem",marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",border:"1px solid #c7d2fe"},children:[e.jsx("div",{children:"Para descargar la cotizacin, necesitamos que te registres o inicies sesin."}),e.jsx("button",{type:"button",onClick:jr,style:{padding:"0.65rem 1.4rem",backgroundColor:"#4f46e5",color:"white",border:"none",borderRadius:"0.55rem",cursor:"pointer",fontWeight:"600"},children:"Iniciar sesin"})]}),O&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15, 23, 42, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50,padding:"1.5rem"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"1rem",padding:"1.75rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 40px -24px rgba(15, 23, 42, 0.6)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700",color:"#0f172a"},children:"Completa tus datos"}),e.jsx("p",{style:{margin:"0.35rem 0 0",color:"#64748b",fontSize:"0.9rem"},children:"Necesitamos estos datos para crear tu cuenta y enviar la cotizacion."})]}),e.jsx("button",{type:"button",onClick:()=>re(!1),style:{border:"none",background:"none",fontSize:"1.25rem",cursor:"pointer",color:"#64748b"},children:""})]}),e.jsxs("form",{onSubmit:Ge,style:{display:"grid",gap:"0.85rem"},children:[e.jsxs("div",{style:{display:"grid",gap:"0.65rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:qe,children:"Nombre completo"}),e.jsx("input",{type:"text",value:W.nombre_completo,onChange:L=>Y({...W,nombre_completo:L.target.value}),style:lr})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:qe,children:"Usuario"}),e.jsx("input",{type:"text",value:W.nombre_usuario,onChange:L=>Y({...W,nombre_usuario:L.target.value}),style:lr})]}),e.jsxs("div",{children:[e.jsx("label",{style:qe,children:"Contrasea"}),e.jsx("input",{type:"password",value:W.contrasena,onChange:L=>Y({...W,contrasena:L.target.value}),style:lr})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:qe,children:"Email (opcional)"}),e.jsx("input",{type:"email",value:W.email,onChange:L=>Y({...W,email:L.target.value}),style:lr})]}),e.jsxs("div",{children:[e.jsx("label",{style:qe,children:"Telfono (opcional)"}),e.jsx("input",{type:"tel",value:W.telefono,onChange:L=>Y({...W,telefono:L.target.value}),style:lr})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:qe,children:"Documento (opcional)"}),e.jsx("input",{type:"text",value:W.documento_identidad,onChange:L=>Y({...W,documento_identidad:L.target.value}),style:lr})]}),e.jsxs("div",{children:[e.jsx("label",{style:qe,children:"Direccin (opcional)"}),e.jsx("input",{type:"text",value:W.direccion,onChange:L=>Y({...W,direccion:L.target.value}),style:lr})]})]})]}),D&&e.jsx("div",{style:{backgroundColor:"#fee2e2",color:"#b91c1c",padding:"0.6rem 0.75rem",borderRadius:"0.5rem",border:"1px solid #fecaca",fontSize:"0.85rem"},children:D}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.75rem",marginTop:"0.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>re(!1),style:{padding:"0.65rem 1.2rem",borderRadius:"0.6rem",border:"1px solid #e2e8f0",backgroundColor:"white",cursor:"pointer",fontWeight:"600",color:"#64748b"},children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:K||F,style:{padding:"0.65rem 1.2rem",borderRadius:"0.6rem",border:"none",backgroundColor:"#4f46e5",color:"white",cursor:K||F?"not-allowed":"pointer",fontWeight:"700"},children:K||F?"Procesando...":"Crear cuenta y enviar"})]})]})]})}),me&&e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15, 23, 42, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50,padding:"1.5rem"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"1rem",padding:"1.75rem",width:"100%",maxWidth:"480px",boxShadow:"0 20px 40px -24px rgba(15, 23, 42, 0.6)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.2rem",fontWeight:"700",color:"#0f172a"},children:"Completar datos del cliente"}),e.jsx("p",{style:{margin:"0.35rem 0 0",color:"#64748b",fontSize:"0.9rem"},children:"Necesitamos estos datos para crear tu perfil."})]}),e.jsx("button",{type:"button",onClick:()=>ie(!1),style:{border:"none",background:"none",fontSize:"1.25rem",cursor:"pointer",color:"#64748b"},children:""})]}),e.jsxs("form",{onSubmit:tr,style:{display:"grid",gap:"0.85rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:qe,children:"Nombres completos"}),e.jsx("input",{type:"text",value:ge.nombre_completo,onChange:L=>Te({...ge,nombre_completo:L.target.value}),style:lr})]}),e.jsxs("div",{children:[e.jsx("label",{style:qe,children:"Telefono"}),e.jsx("input",{type:"tel",value:ge.telefono,onChange:L=>Te({...ge,telefono:L.target.value}),style:lr})]}),e.jsxs("div",{children:[e.jsx("label",{style:qe,children:"Cedula"}),e.jsx("input",{type:"text",value:ge.documento_identidad,onChange:L=>Te({...ge,documento_identidad:L.target.value}),style:lr})]}),Q&&e.jsx("div",{style:{backgroundColor:"#fee2e2",color:"#b91c1c",padding:"0.6rem 0.75rem",borderRadius:"0.5rem",border:"1px solid #fecaca",fontSize:"0.85rem"},children:Q}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.75rem"},children:[e.jsx("button",{type:"button",onClick:()=>ie(!1),style:{padding:"0.6rem 1.15rem",borderRadius:"0.6rem",border:"1px solid #e2e8f0",backgroundColor:"white",cursor:"pointer",fontWeight:"600",color:"#64748b"},children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:p||F,style:{padding:"0.6rem 1.15rem",borderRadius:"0.6rem",border:"none",backgroundColor:"#4f46e5",color:"white",cursor:p||F?"not-allowed":"pointer",fontWeight:"700"},children:p||F?"Guardando...":"Guardar y enviar"})]})]})]})}),X&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.75rem",marginBottom:"1.5rem",border:"1px solid #fecaca"},children:X}),e.jsxs("section",{id:"cotizador",style:{marginTop:"3rem"},children:[e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsx("h2",{style:ye,children:"Cotizador rpido"}),e.jsx("p",{style:ve,children:"Configura tu evento y recibe un estimado inmediato. Luego nuestro equipo ajusta los detalles contigo."})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(280px, 1fr)",gap:"2rem",alignItems:"start"},children:[e.jsxs("div",{style:ne,children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#0f172a",marginBottom:"0.35rem"},children:"Detalles del evento"}),e.jsx("p",{style:{color:"#64748b",fontSize:"0.95rem"},children:"Selecciona los datos clave para estimar tu cotizacin."})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.25rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:qe,children:[e.jsx(_t,{size:16}),"Fecha del evento"]}),e.jsx("input",{type:"date",value:w.fecha_evento,onChange:L=>B({...w,fecha_evento:L.target.value}),min:new Date().toISOString().split("T")[0],style:lr})]}),e.jsxs("div",{children:[e.jsxs("label",{style:qe,children:[e.jsx(dn,{size:16}),"Nmero de invitados"]}),e.jsx("input",{type:"number",min:"1",value:w.invitados,onChange:L=>B({...w,invitados:L.target.value}),style:lr})]}),e.jsxs("div",{children:[e.jsxs("label",{style:qe,children:[e.jsx(jt,{size:16}),"Tipo de evento"]}),e.jsxs("select",{value:w.tipo_evento,onChange:L=>B({...w,tipo_evento:L.target.value}),style:lr,children:[e.jsx("option",{value:"",children:"Selecciona un tipo"}),m.map(L=>e.jsx("option",{value:L.nombre||L.tipo_evento||L.descripcion,children:L.nombre||L.tipo_evento||L.descripcion},L.id||L.id_tipo))]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:qe,children:[e.jsx(jt,{size:16}),"Plan"]}),e.jsxs("select",{value:w.plan_id,onChange:L=>B({...w,plan_id:L.target.value}),style:lr,children:[e.jsx("option",{value:"",children:"Selecciona un plan"}),h.map(L=>e.jsxs("option",{value:L.id,children:[L.nombre," - ",ce(L.precio_base||L.precio)]},L.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:qe,children:[e.jsx(Xl,{size:16}),"Saln"]}),e.jsxs("select",{value:w.salon_id,onChange:L=>B({...w,salon_id:L.target.value}),style:lr,children:[e.jsx("option",{value:"",children:"Selecciona un saln"}),C.map(L=>e.jsxs("option",{value:String(L.id_salon||L.id),children:[L.nombre," (",L.capacidad||"Cap. N/A",") - ",ce(L.precio_base||L.precio)]},L.id_salon||L.id))]})]})]}),(De||te)&&e.jsxs("div",{style:{marginTop:"1.75rem",padding:"1rem 1.25rem",borderRadius:"0.9rem",backgroundColor:"#f1f5f9",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontWeight:"700",color:"#0f172a",marginBottom:"0.5rem"},children:"Recomendacin segn invitados"}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem"},children:[De&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600"},children:"Plan sugerido"}),e.jsxs("div",{style:{color:"#64748b",fontSize:"0.9rem"},children:[De.nombre,"  Capacidad ",De.capacidad_minima||0,De.capacidad_maxima?`-${De.capacidad_maxima}`:"+"]})]}),e.jsx("button",{type:"button",onClick:()=>B(L=>({...L,plan_id:String(De.id)})),style:{padding:"0.45rem 0.9rem",borderRadius:"0.6rem",border:"1px solid #cbd5f5",backgroundColor:"white",color:"#3730a3",cursor:"pointer",fontWeight:"600"},children:"Usar plan"})]}),te&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600"},children:"Saln sugerido"}),e.jsxs("div",{style:{color:"#64748b",fontSize:"0.9rem"},children:[te.nombre,"  Capacidad ",te.capacidad||"N/A"]})]}),e.jsx("button",{type:"button",onClick:()=>B(L=>({...L,salon_id:String(te.id_salon||te.id)})),style:{padding:"0.45rem 0.9rem",borderRadius:"0.6rem",border:"1px solid #cbd5f5",backgroundColor:"white",color:"#3730a3",cursor:"pointer",fontWeight:"600"},children:"Usar saln"})]})]})]}),e.jsxs("div",{style:{marginTop:"2.25rem"},children:[e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"700",marginBottom:"0.75rem",color:"#0f172a"},children:"Servicios adicionales"}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[e.jsxs("select",{value:T,onChange:L=>ee(L.target.value),style:{flex:1,minWidth:"220px",...lr},children:[e.jsx("option",{value:"",children:"Selecciona un servicio"}),P.map(L=>e.jsxs("option",{value:L.id_producto||L.id,children:[L.nombre," - ",ce(L.precio||L.precio_base)]},L.id_producto||L.id))]}),e.jsx("input",{type:"number",min:"1",value:H,onChange:L=>G(L.target.value),style:{width:"120px",...lr}}),e.jsxs("button",{type:"button",onClick:xe,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.2rem",backgroundColor:"#4f46e5",color:"white",border:"none",borderRadius:"0.65rem",cursor:"pointer",fontWeight:"600",boxShadow:"0 10px 20px -16px rgba(79, 70, 229, 0.8)"},children:[e.jsx(Mr,{size:16}),"Agregar"]})]}),_.length>0&&e.jsx("div",{style:{marginTop:"1.5rem",display:"grid",gap:"0.75rem"},children:_.map((L,ze)=>{var Se,je,Me;return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem 1rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:((Se=L.producto)==null?void 0:Se.nombre)||"Servicio"}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:["Cantidad: ",L.cantidad]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontWeight:"600"},children:ce((((je=L.producto)==null?void 0:je.precio)||((Me=L.producto)==null?void 0:Me.precio_base)||0)*L.cantidad)}),e.jsx("button",{type:"button",onClick:()=>Pe(ze),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer"},children:e.jsx(Ar,{size:16})})]})]},`${L.producto_id}-${ze}`)})})]})]}),e.jsxs("div",{style:{...ne,height:"fit-content"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.25rem"},children:[e.jsx(Cp,{size:20,color:"#4f46e5"}),e.jsx("h3",{style:{fontSize:"1.15rem",fontWeight:"700",color:"#0f172a"},children:"Resumen estimado"})]}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem",marginBottom:"1.5rem",color:"#1f2937"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Plan"}),e.jsx("span",{children:ce((Ce==null?void 0:Ce.precio_base)||(Ce==null?void 0:Ce.precio))})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Saln"}),e.jsx("span",{children:ce((Ae==null?void 0:Ae.precio_base)||(Ae==null?void 0:Ae.precio))})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Servicios adicionales"}),e.jsx("span",{children:ce(_.reduce((L,ze)=>{var Se,je;const Me=((Se=ze.producto)==null?void 0:Se.precio)||((je=ze.producto)==null?void 0:je.precio_base)||0;return L+Me*ze.cantidad},0))})]}),e.jsxs("div",{style:{borderTop:"1px solid #e2e8f0",paddingTop:"0.85rem",display:"flex",justifyContent:"space-between",fontWeight:"700",fontSize:"1.05rem"},children:[e.jsx("span",{children:"Total estimado"}),e.jsx("span",{children:ce($)})]})]}),e.jsx("button",{type:"button",onClick:Ze,disabled:F||K,style:{width:"100%",padding:"0.85rem 1rem",backgroundColor:"#0f172a",color:"white",border:"none",borderRadius:"0.75rem",cursor:F||K?"not-allowed":"pointer",fontWeight:"700",marginBottom:"1rem",boxShadow:"0 12px 26px -18px rgba(15, 23, 42, 0.8)",opacity:F||K?.7:1},children:F||K?"Enviando...":a?"Solicitar descarga de cotizacion":"Enviar cotizacion"}),br.length>0&&e.jsx("div",{style:{backgroundColor:"#fef3c7",color:"#92400e",padding:"0.75rem",borderRadius:"0.5rem",fontSize:"0.85rem",marginBottom:"1rem"},children:br.map((L,ze)=>e.jsxs("div",{children:[" ",L]},ze))}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#64748b"},children:["Este valor es solo una referencia. El equipo de ",u," confirmar la cotizacin final."]})]})]})]}),e.jsxs("footer",{style:{marginTop:"4rem",padding:"2.5rem 1.5rem",borderTop:"1px solid #e2e8f0",backgroundColor:"white",borderRadius:"1.25rem",boxShadow:"0 16px 40px -28px rgba(15, 23, 42, 0.3)"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"800",fontSize:"1.1rem",color:"#0f172a",marginBottom:"0.6rem"},children:u}),e.jsx("p",{style:{margin:0,color:"#64748b",fontSize:"0.95rem"},children:"Diseamos experiencias memorables para bodas, eventos corporativos y celebraciones nicas."})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"700",color:"#0f172a",marginBottom:"0.6rem"},children:"Contacto"}),e.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#64748b",fontSize:"0.95rem"},children:[e.jsx(zs,{size:16}),"ventas@lirioseventos.com"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#64748b",fontSize:"0.95rem"},children:[e.jsx(Ig,{size:16}),"+57 310 000 0000"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#64748b",fontSize:"0.95rem"},children:[e.jsx(In,{size:16}),"Medelln, Colombia"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"700",color:"#0f172a",marginBottom:"0.6rem"},children:"Sguenos"}),e.jsx("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[{label:"Instagram",href:"https://instagram.com",icon:r5},{label:"Facebook",href:"https://facebook.com",icon:Kv},{label:"TikTok",href:"https://tiktok.com",icon:f5},{label:"WhatsApp",href:"https://wa.me/573100000000",icon:vu}].map(L=>e.jsxs("a",{href:L.href,target:"_blank",rel:"noreferrer",style:{padding:"0.5rem 0.9rem",borderRadius:"999px",border:"1px solid #e2e8f0",textDecoration:"none",color:"#0f172a",fontWeight:"600",fontSize:"0.85rem",backgroundColor:"#f8fafc",display:"inline-flex",alignItems:"center",gap:"0.4rem"},children:[e.jsx(L.icon,{size:16}),L.label]},L.label))})]})]}),e.jsxs("div",{style:{marginTop:"2rem",borderTop:"1px solid #e2e8f0",paddingTop:"1rem",color:"#94a3b8",fontSize:"0.85rem"},children:[" ",new Date().getFullYear()," ",u,". Todos los derechos reservados."]})]}),e.jsx("div",{style:{paddingBottom:"3rem"}})]})})]})},w5=()=>{var r;const{usuario:t,logout:o}=at(),{nombrePlataforma:n}=Rs(),i=Bn(),[a,l]=c.useState(!0),[u,s]=c.useState(!1),[d,f]=c.useState(!0),[x,h]=c.useState(!0),[S,C]=c.useState(!0),[j,P]=c.useState(!0),[v,m]=c.useState(0),y=n.split(" ").filter(Boolean).slice(0,2).map(F=>F[0].toUpperCase()).join(""),k=t?((F,se)=>{const me=[{path:"/inicio",icon:Qv,label:"Inicio",moduleKey:null,roles:[N.ADMIN,N.MANAGER,N.COORDINATOR,N.CLIENT]},{path:"/mi-evento",icon:_t,label:"Mi evento",moduleKey:Oe.PORTAL_CLIENTE,roles:[N.CLIENT]},{path:"/perfil",icon:Yv,label:"Mi perfil",moduleKey:Oe.PERFIL,roles:[N.ADMIN,N.MANAGER,N.COORDINATOR,N.CLIENT]},{path:"/reportes",icon:Gv,label:"Reportes",moduleKey:Oe.REPORTES,roles:[N.ADMIN,N.MANAGER]},{path:"/eventos",icon:_t,label:"Eventos",moduleKey:Oe.EVENTOS,roles:[N.ADMIN,N.MANAGER,N.COORDINATOR,N.CLIENT]},{path:"/pagos",icon:ka,label:"Pagos",moduleKey:Oe.PAGOS,roles:[N.ADMIN,N.MANAGER]},{path:"/cuentas",icon:an,label:"Cuentas",moduleKey:Oe.CUENTAS,roles:[N.ADMIN,N.MANAGER]},{path:"/salones",icon:Xl,label:"Salones",moduleKey:Oe.SALONES,roles:[N.ADMIN,N.MANAGER,N.COORDINATOR]},{path:"/notificaciones-nativas",icon:Wg,label:"Notificaciones",moduleKey:Oe.NOTIFICACIONES_NATIVAS,roles:[N.ADMIN,N.MANAGER]},{path:"/calendario",icon:qv,label:"Calendario",moduleKey:Oe.CALENDARIO,roles:[N.ADMIN,N.MANAGER,N.COORDINATOR,N.CLIENT]},{path:"/planes",icon:jt,label:"Planes",moduleKey:Oe.PLANES,roles:[N.ADMIN,N.MANAGER,N.COORDINATOR]},{path:"/productos",icon:Gt,label:"Productos",moduleKey:Oe.PRODUCTOS,roles:[N.ADMIN,N.MANAGER,N.COORDINATOR]},{path:"/categorias",icon:es,label:"Categoras",moduleKey:Oe.CATEGORIAS,roles:[N.ADMIN,N.MANAGER]},{path:"/inventario",icon:h5,label:"Inventario",moduleKey:Oe.INVENTARIO,roles:[N.ADMIN,N.MANAGER,N.COORDINATOR]},{path:"/usuarios",icon:ll,label:"Usuarios",moduleKey:Oe.USUARIOS,roles:[N.ADMIN,N.MANAGER]},{path:"/clientes",icon:dn,label:"Clientes",moduleKey:Oe.CLIENTES,roles:[N.ADMIN,N.MANAGER,N.COORDINATOR]},{path:"/permisos",icon:ll,label:"Roles y Permisos",moduleKey:Oe.PERMISOS,roles:[N.ADMIN]},{path:"/configuraciones/whatsapp-chat",icon:vu,label:"WhatsApp",moduleKey:Oe.WHATSAPP_CHAT,roles:[N.ADMIN,N.MANAGER]},{path:"/configuraciones/whatsapp-panel",icon:Jv,label:"Panel WhatsApp",moduleKey:Oe.WHATSAPP_METRICAS,roles:[N.ADMIN,N.MANAGER]},{path:"/configuraciones/whatsapp-plantillas",icon:zs,label:"Plantillas WhatsApp",moduleKey:Oe.WHATSAPP_TEMPLATES,roles:[N.ADMIN,N.MANAGER]},{path:"/configuraciones/carga-masiva",icon:Tg,label:"Carga masiva",moduleKey:Oe.CARGA_MASIVA,roles:[N.ADMIN,N.MANAGER]},{path:"/configuraciones/limpieza-datos",icon:ll,label:"Config. Sistema",moduleKey:Oe.CONFIG_DATOS,roles:[N.ADMIN,N.MANAGER]}];return F?me.filter(ie=>gc(se,ie.moduleKey,ie.roles)):[]})(t.rol,t):[],U=Cr(t==null?void 0:t.rol,[N.CLIENT]),X=["/planes","/productos","/categorias","/inventario","/configuraciones/carga-masiva"],R=["/calendario","/eventos","/pagos","/cuentas","/salones","/configuraciones/whatsapp-chat"],w=["/notificaciones-nativas","/configuraciones/whatsapp-panel","/configuraciones/whatsapp-plantillas","/configuraciones/limpieza-datos"],B=["/usuarios","/clientes","/permisos"],q=U?k.filter(F=>["/inicio","/mi-evento"].includes(F.path)):k,E=q.filter(F=>X.includes(F.path)),T=q.filter(F=>R.includes(F.path)),ee=q.filter(F=>w.includes(F.path)),H=q.filter(F=>B.includes(F.path)),G=["/perfil","/reportes"],O=q.filter(F=>!X.includes(F.path)&&!R.includes(F.path)&&!w.includes(F.path)&&!B.includes(F.path)&&!G.includes(F.path)),re=q.filter(F=>G.includes(F.path)),W=E.some(F=>i.pathname===F.path),Y=T.some(F=>i.pathname===F.path),D=ee.some(F=>i.pathname.startsWith(F.path)),oe=H.some(F=>i.pathname===F.path);c.useEffect(()=>{W&&f(!0)},[W]),c.useEffect(()=>{Y&&h(!0)},[Y]),c.useEffect(()=>{D&&C(!0)},[D]),c.useEffect(()=>{oe&&P(!0)},[oe]),c.useEffect(()=>{const F=()=>{const se=window.innerWidth<768;s(se),se&&l(!1)};return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]);const K=c.useCallback(async()=>{if(!(!t||!gc(t.rol,Oe.WHATSAPP_CHAT)))try{const F=await Eo.getNoLeidos();m(F.total||0)}catch{}},[t]);c.useEffect(()=>{K();const F=setInterval(K,1e4);return()=>clearInterval(F)},[K]),c.useEffect(()=>{i.pathname==="/configuraciones/whatsapp-chat"&&setTimeout(K,500)},[i.pathname,K]);const V=async()=>{await o(),window.location.href="/login"};return e.jsxs("div",{style:{display:"flex",minHeight:"100vh"},children:[u&&a&&e.jsx("div",{onClick:()=>l(!1),style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.4)",zIndex:900}}),e.jsxs("aside",{style:{width:u?"80vw":a?"260px":"80px",backgroundColor:"#1f2937",color:"white",transition:"width 0.3s",display:"flex",flexDirection:"column",position:"fixed",height:"100vh",zIndex:1e3,transform:u?a?"translateX(0)":"translateX(-100%)":"none",boxShadow:u?"0 10px 25px rgba(0, 0, 0, 0.25)":"none"},children:[e.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid #374151",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a&&e.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:e.jsxs(Or,{to:"/",style:{display:"flex",alignItems:"center",gap:"0.75rem",textDecoration:"none",color:"#e6c225",fontWeight:"800",fontSize:"1.1rem"},children:[e.jsx("span",{style:{width:"36px",height:"36px",borderRadius:"12px",background:"linear-gradient(135deg, #4338ca, #6366f1)",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.95rem",fontWeight:"700"},children:y||"LE"}),n]})}),e.jsx("button",{onClick:()=>l(!a),style:{background:"none",border:"none",color:"white",cursor:"pointer",padding:"0.5rem"},children:a?e.jsx(er,{size:20}):e.jsx(Rp,{size:20})})]}),e.jsx("nav",{style:{flex:1,minHeight:0,padding:"1rem 0",overflowY:"auto",paddingBottom:"1.5rem"},children:k.length===0?e.jsx("div",{style:{padding:"1rem",color:"#9ca3af",fontSize:"0.875rem",textAlign:"center"},children:"No hay mdulos disponibles"}):e.jsxs(e.Fragment,{children:[T.length>0&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>h(F=>!F),style:{display:"flex",alignItems:"center",padding:"0.75rem 1.5rem",width:"100%",background:"none",border:"none",color:Y?"white":"#d1d5db",cursor:"pointer",gap:"0.75rem"},children:[e.jsx(_t,{size:20}),a&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{flex:1,textAlign:"left"},children:"Operaciones"}),x?e.jsx(Ki,{size:16}):e.jsx(ti,{size:16})]})]}),x&&e.jsx("div",{style:{paddingLeft:a?"1.5rem":"0.5rem"},children:T.map(F=>{const se=F.icon,me=i.pathname===F.path||F.path==="/"&&i.pathname==="/",ie=F.path==="/configuraciones/whatsapp-chat"&&v>0;return e.jsxs(Or,{to:F.path,style:{display:"flex",alignItems:"center",padding:"0.6rem 1.5rem",color:me?"white":"#d1d5db",backgroundColor:me?"#4f46e5":"transparent",textDecoration:"none",transition:"all 0.2s",gap:"0.75rem",borderLeft:a?"2px solid #374151":"none"},onMouseEnter:ge=>{me||(ge.currentTarget.style.backgroundColor="#374151")},onMouseLeave:ge=>{me||(ge.currentTarget.style.backgroundColor="transparent")},children:[e.jsxs("div",{style:{position:"relative",display:"inline-flex"},children:[e.jsx(se,{size:18}),ie&&!a&&e.jsx("span",{style:{position:"absolute",top:"-6px",right:"-6px",minWidth:"16px",height:"16px",borderRadius:"8px",backgroundColor:"#ef4444",color:"white",fontSize:"0.65rem",fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 4px"},children:v>9?"9+":v})]}),a&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[F.label,ie&&e.jsx("span",{style:{minWidth:"18px",height:"18px",borderRadius:"9px",backgroundColor:"#ef4444",color:"white",fontSize:"0.7rem",fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:v>99?"99+":v})]})]},F.path)})})]}),O.map(F=>{const se=F.icon,me=i.pathname===F.path||F.path==="/"&&i.pathname==="/";return e.jsxs(Or,{to:F.path,style:{display:"flex",alignItems:"center",padding:"0.75rem 1.5rem",color:me?"white":"#d1d5db",backgroundColor:me?"#4f46e5":"transparent",textDecoration:"none",transition:"all 0.2s",gap:"0.75rem"},onMouseEnter:ie=>{me||(ie.currentTarget.style.backgroundColor="#374151")},onMouseLeave:ie=>{me||(ie.currentTarget.style.backgroundColor="transparent")},children:[e.jsx(se,{size:20}),a&&e.jsx("span",{children:F.label})]},F.path)}),E.length>0&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>f(F=>!F),style:{display:"flex",alignItems:"center",padding:"0.75rem 1.5rem",width:"100%",background:"none",border:"none",color:W?"white":"#d1d5db",cursor:"pointer",gap:"0.75rem"},children:[e.jsx(es,{size:20}),a&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{flex:1,textAlign:"left"},children:"Catlogos"}),d?e.jsx(Ki,{size:16}):e.jsx(ti,{size:16})]})]}),d&&e.jsx("div",{style:{paddingLeft:a?"1.5rem":"0.5rem"},children:E.map(F=>{const se=F.icon,me=i.pathname===F.path;return e.jsxs(Or,{to:F.path,style:{display:"flex",alignItems:"center",padding:"0.6rem 1.5rem",color:me?"white":"#d1d5db",backgroundColor:me?"#4f46e5":"transparent",textDecoration:"none",transition:"all 0.2s",gap:"0.75rem",borderLeft:a?"2px solid #374151":"none"},onMouseEnter:ie=>{me||(ie.currentTarget.style.backgroundColor="#374151")},onMouseLeave:ie=>{me||(ie.currentTarget.style.backgroundColor="transparent")},children:[e.jsx(se,{size:18}),a&&e.jsx("span",{children:F.label})]},F.path)})})]}),H.length>0&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>P(F=>!F),style:{display:"flex",alignItems:"center",padding:"0.75rem 1.5rem",width:"100%",background:"none",border:"none",color:oe?"white":"#d1d5db",cursor:"pointer",gap:"0.75rem"},children:[e.jsx(dn,{size:20}),a&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{flex:1,textAlign:"left"},children:"Usuarios"}),j?e.jsx(Ki,{size:16}):e.jsx(ti,{size:16})]})]}),j&&e.jsx("div",{style:{paddingLeft:a?"1.5rem":"0.5rem"},children:H.map(F=>{const se=F.icon,me=i.pathname===F.path;return e.jsxs(Or,{to:F.path,style:{display:"flex",alignItems:"center",padding:"0.6rem 1.5rem",color:me?"white":"#d1d5db",backgroundColor:me?"#4f46e5":"transparent",textDecoration:"none",transition:"all 0.2s",gap:"0.75rem",borderLeft:a?"2px solid #374151":"none"},onMouseEnter:ie=>{me||(ie.currentTarget.style.backgroundColor="#374151")},onMouseLeave:ie=>{me||(ie.currentTarget.style.backgroundColor="transparent")},children:[e.jsx(se,{size:18}),a&&e.jsx("span",{children:F.label})]},F.path)})})]}),ee.length>0&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>C(F=>!F),style:{display:"flex",alignItems:"center",padding:"0.75rem 1.5rem",width:"100%",background:"none",border:"none",color:D?"white":"#d1d5db",cursor:"pointer",gap:"0.75rem"},children:[e.jsx(ll,{size:20}),a&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{flex:1,textAlign:"left"},children:"Configuraciones"}),S?e.jsx(Ki,{size:16}):e.jsx(ti,{size:16})]})]}),S&&e.jsx("div",{style:{paddingLeft:a?"1.5rem":"0.5rem"},children:ee.map(F=>{const se=F.icon,me=i.pathname.startsWith(F.path);return e.jsxs(Or,{to:F.path,style:{display:"flex",alignItems:"center",padding:"0.6rem 1.5rem",color:me?"white":"#d1d5db",backgroundColor:me?"#4f46e5":"transparent",textDecoration:"none",transition:"all 0.2s",gap:"0.75rem",borderLeft:a?"2px solid #374151":"none"},onMouseEnter:ie=>{me||(ie.currentTarget.style.backgroundColor="#374151")},onMouseLeave:ie=>{me||(ie.currentTarget.style.backgroundColor="transparent")},children:[e.jsx(se,{size:18}),a&&e.jsx("span",{children:F.label})]},F.path)})})]})]})}),e.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid #374151"},children:[a&&t&&e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500"},children:t.nombre_completo||t.nombre_usuario}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:j5(t.rol)})]}),re.length>0&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",marginBottom:"0.75rem"},children:re.map(F=>{const se=F.icon,me=i.pathname===F.path;return e.jsxs(Or,{to:F.path,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",color:me?"white":"#d1d5db",backgroundColor:me?"#4f46e5":"transparent",textDecoration:"none",borderRadius:"0.375rem",transition:"all 0.2s",fontSize:"0.875rem"},onMouseEnter:ie=>{me||(ie.currentTarget.style.backgroundColor="#374151")},onMouseLeave:ie=>{me||(ie.currentTarget.style.backgroundColor="transparent")},children:[e.jsx(se,{size:16}),a&&e.jsx("span",{children:F.label})]},F.path)})}),e.jsxs("button",{onClick:V,style:{display:"flex",alignItems:"center",gap:"0.5rem",width:"100%",padding:"0.5rem",background:"none",border:"1px solid #ef4444",color:"#ef4444",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",transition:"all 0.2s"},onMouseEnter:F=>{F.currentTarget.style.backgroundColor="#ef4444",F.currentTarget.style.color="white"},onMouseLeave:F=>{F.currentTarget.style.backgroundColor="transparent",F.currentTarget.style.color="#ef4444"},children:[e.jsx(n5,{size:16}),a&&e.jsx("span",{children:"Cerrar Sesin"})]})]})]}),e.jsxs("main",{style:{marginLeft:u?"0":a?"260px":"80px",flex:1,transition:"margin-left 0.3s",padding:u?"1rem":"2rem",paddingTop:u?"4.5rem":"2rem",backgroundColor:"#f9fafb"},children:[u&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,height:"56px",backgroundColor:"white",borderBottom:"1px solid #e5e7eb",display:"flex",alignItems:"center",padding:"0 1rem",zIndex:800},children:[e.jsx("button",{onClick:()=>l(!0),style:{background:"none",border:"none",color:"#111827",cursor:"pointer",padding:"0.25rem"},children:e.jsx(Rp,{size:22})}),e.jsx("div",{style:{marginLeft:"0.75rem",fontWeight:"600",color:"#111827"},children:((r=k.find(F=>F.path===i.pathname))==null?void 0:r.label)||n})]}),e.jsx(Gy,{})]})]})},Sr=({children:r,allowedRoles:t=[],moduleKey:o=null})=>{const{usuario:n,loading:i}=at();if(i)return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx("div",{children:"Cargando..."})});if(!n)return e.jsx(js,{to:"/login",replace:!0});if(o){if(!gc(n,o,t))return e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",gap:"1rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:"Acceso Denegado"}),e.jsx("p",{style:{color:"#6b7280"},children:"No tienes permisos para acceder a esta seccin."}),e.jsx("button",{onClick:()=>window.history.back(),style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"500"},children:"Volver"})]})}else if(t.length>0&&!Ba(n==null?void 0:n.rol,t))return e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",gap:"1rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ef4444"},children:"Acceso Denegado"}),e.jsx("p",{style:{color:"#6b7280"},children:"No tienes permisos para acceder a esta seccin."}),e.jsx("button",{onClick:()=>window.history.back(),style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"500"},children:"Volver"})]});return r},S5=()=>{var r;const{toasts:t,removeToast:o,success:n,error:i,warning:a}=_r(),{usuario:l}=at(),u=Cr(l==null?void 0:l.rol,[N.COORDINATOR]),s=Cr(l==null?void 0:l.rol,[N.ADMIN,N.MANAGER]),d=xr(l,Je.EVENTOS_EDITAR_ESTADO,[N.ADMIN,N.MANAGER]),f=Cr(l==null?void 0:l.rol,[N.ADMIN,N.MANAGER,N.COORDINATOR]),[x,h]=c.useState(!1),[S,C]=c.useState([]),[j,P]=c.useState(!0),[v,m]=c.useState(""),[y,k]=c.useState(""),[U,X]=c.useState("todos"),[R,w]=c.useState(""),[B,q]=c.useState(""),[E,T]=c.useState(!1),[ee,H]=c.useState(null),[G,O]=c.useState(""),[re,W]=c.useState(!1);c.useEffect(()=>{Y()},[y,U,u,l==null?void 0:l.id]),c.useEffect(()=>{const p=()=>{h(window.innerWidth<768)};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const Y=async()=>{var p,Z;try{P(!0);const ce={};y&&(ce.estado=y),(u&&l!=null&&l.id||s&&U==="mios"&&l!=null&&l.id)&&(ce.coordinador_id=l.id),ce.incluir_porcentaje_avance=!0;const be=await ur.getAll(ce);C(be.eventos||[]),m("")}catch(ce){console.error("Error al cargar eventos:",ce);const be=((Z=(p=ce.response)==null?void 0:p.data)==null?void 0:Z.error)||ce.message||"Error al cargar los eventos";m(`Error: ${be}`)}finally{P(!1)}},D=p=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(p),oe=p=>p?new Date(p).toLocaleDateString("es-EC"):"/",K=p=>{if(!p)return"-";try{if(typeof p=="string"&&p.includes(":")){const Z=p.split(":");return`${Z[0]}:${Z[1]}`}return p}catch{return p}},V=async p=>{var Z;try{const ce=await ur.descargarCotizacionPDF(p),be=new Blob([ce.data],{type:"application/pdf"}),Ce=window.URL.createObjectURL(be),Ae=document.createElement("a");Ae.href=Ce;const De=S.find(_=>(_.id_evento||_.id)===p),te=De?`cotizacion_${((Z=De.nombre_evento)==null?void 0:Z.replace(/[^a-zA-Z0-9]/g,"_"))||"evento"}_${p}.pdf`:`cotizacion_evento_${p}.pdf`;Ae.download=te,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),window.URL.revokeObjectURL(Ce),n("Cotizacin descargada exitosamente")}catch(ce){console.error("Error al descargar cotizacin:",ce),i("Error al descargar la cotizacin. Por favor, intente nuevamente.")}},F=async p=>{var Z;try{const ce=await ur.descargarContratoPDF(p),be=new Blob([ce.data],{type:"application/pdf"}),Ce=window.URL.createObjectURL(be),Ae=document.createElement("a");Ae.href=Ce;const De=S.find($=>($.id_evento||$.id)===p),te=(Z=ce.headers)==null?void 0:Z["content-disposition"];let _="";if(te&&te.includes("filename=")&&(_=te.split("filename=")[1].replace(/"/g,"").trim()),!_){const $=(De==null?void 0:De.documento_identidad_cliente)||(De==null?void 0:De.documento_identidad)||"sin_documento_identidad",xe=(De==null?void 0:De.fecha_evento)||"",Pe=xe?String(xe).replace(/[^0-9]/g,""):"sin_fecha";_=`Contrato_${$}_${p}_${Pe}.pdf`}Ae.download=_,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),window.URL.revokeObjectURL(Ce),n("Contrato descargado exitosamente")}catch(ce){console.error("Error al descargar contrato:",ce),i("Error al descargar el contrato. Por favor, intente nuevamente.")}},se=p=>({cotizacion:"#6b7280",confirmado:"#10b981",en_proceso:"#3b82f6",completado:"#8b5cf6",cancelado:"#ef4444"})[p]||"#6b7280",me=p=>{if(p.estado==="completado"){a("No se puede modificar el estado de un evento que ya est completado.");return}H(p),O(p.estado||"cotizacion"),T(!0)},ie=()=>{T(!1),H(null),O("")},ge=async()=>{var p,Z;if(!(!ee||!G))try{W(!0),await ur.updateEstado(ee.id_evento||ee.id,G),await Y(),ie(),m("")}catch(ce){console.error("Error al actualizar estado:",ce);const be=((Z=(p=ce.response)==null?void 0:p.data)==null?void 0:Z.error)||"Error al actualizar el estado del evento";m(be),i(be)}finally{W(!1)}},Te=p=>{const Z=["cotizacion","confirmado","en_proceso","completado","cancelado"],ce=p.estado;return parseFloat(p.saldo||0)>0?Z.filter(be=>be!=="completado"||be===ce):Z},Q=S.filter(p=>{var Z,ce,be,Ce;if(B){const Ae=B.toLowerCase();if(!((Z=p.nombre_evento)!=null&&Z.toLowerCase().includes(Ae)||(ce=p.documento_identidad_cliente)!=null&&ce.toLowerCase().includes(Ae)||(be=p.nombre_cliente)!=null&&be.toLowerCase().includes(Ae)||(Ce=p.tipo_evento)!=null&&Ce.toLowerCase().includes(Ae)))return!1}if(R==="saldo_pendiente"){if(parseFloat(p.saldo||0)<=0)return!1}else if(R==="pagado_completo"&&parseFloat(p.saldo||0)>0)return!1;return!0}).sort((p,Z)=>{const ce=p.id_evento||p.id||0;return(Z.id_evento||Z.id||0)-ce}),g={total:S.length,cotizacion:S.filter(p=>p.estado==="cotizacion").length,confirmado:S.filter(p=>p.estado==="confirmado").length,en_proceso:S.filter(p=>p.estado==="en_proceso").length,completado:S.filter(p=>p.estado==="completado").length,cancelado:S.filter(p=>p.estado==="cancelado").length,totalIngresos:S.reduce((p,Z)=>p+parseFloat(Z.total||0),0),totalPendiente:S.reduce((p,Z)=>p+parseFloat(Z.saldo||0),0),totalCobrado:S.reduce((p,Z)=>p+(parseFloat(Z.total||0)-parseFloat(Z.saldo||0)),0)};return j?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando eventos..."}):e.jsxs("div",{children:[e.jsx(Nr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Eventos"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de eventos"})]}),e.jsxs(Or,{to:"/eventos/nuevo",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",textDecoration:"none",fontWeight:"500"},children:[e.jsx(Mr,{size:20}),"Nuevo Evento"]})]}),v&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:v}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:x?"1fr":"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1.25rem",borderRadius:"0.5rem",boxShadow:!y&&!R?"0 0 0 2px #6366f1":"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",gap:"1rem",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseEnter:p=>{p.currentTarget.style.transform="translateY(-2px)",p.currentTarget.style.boxShadow=!y&&!R?"0 0 0 2px #6366f1, 0 4px 6px -1px rgba(0, 0, 0, 0.1)":"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:p=>{p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow=!y&&!R?"0 0 0 2px #6366f1":"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},onClick:()=>{k(""),w("")},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"0.5rem",backgroundColor:"#6366f1",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(_t,{size:24,color:"white",strokeWidth:2.5})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"500",marginBottom:"0.25rem"},children:"Total Eventos"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1f2937"},children:g.total})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.25rem",borderRadius:"0.5rem",boxShadow:y==="en_proceso"?"0 0 0 2px #3b82f6":"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",gap:"1rem",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseEnter:p=>{p.currentTarget.style.transform="translateY(-2px)",p.currentTarget.style.boxShadow=y==="en_proceso"?"0 0 0 2px #3b82f6, 0 4px 6px -1px rgba(0, 0, 0, 0.1)":"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:p=>{p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow=y==="en_proceso"?"0 0 0 2px #3b82f6":"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},onClick:()=>{w(""),k(y==="en_proceso"?"":"en_proceso")},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"0.5rem",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(pc,{size:24,color:"white",strokeWidth:2.5})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"500",marginBottom:"0.25rem"},children:"En Proceso"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#3b82f6"},children:g.en_proceso})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.25rem",borderRadius:"0.5rem",boxShadow:y==="confirmado"?"0 0 0 2px #10b981":"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",gap:"1rem",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseEnter:p=>{p.currentTarget.style.transform="translateY(-2px)",p.currentTarget.style.boxShadow=y==="confirmado"?"0 0 0 2px #10b981, 0 4px 6px -1px rgba(0, 0, 0, 0.1)":"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:p=>{p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow=y==="confirmado"?"0 0 0 2px #10b981":"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},onClick:()=>{w(""),k(y==="confirmado"?"":"confirmado")},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"0.5rem",backgroundColor:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(jo,{size:24,color:"white",strokeWidth:2.5})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"500",marginBottom:"0.25rem"},children:"Confirmados"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10b981"},children:g.confirmado})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.25rem",borderRadius:"0.5rem",boxShadow:y==="completado"?"0 0 0 2px #8b5cf6":"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",gap:"1rem",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseEnter:p=>{p.currentTarget.style.transform="translateY(-2px)",p.currentTarget.style.boxShadow=y==="completado"?"0 0 0 2px #8b5cf6, 0 4px 6px -1px rgba(0, 0, 0, 0.1)":"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:p=>{p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow=y==="completado"?"0 0 0 2px #8b5cf6":"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},onClick:()=>{w(""),k(y==="completado"?"":"completado")},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"0.5rem",backgroundColor:"#8b5cf6",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ju,{size:24,color:"white",strokeWidth:2.5})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"500",marginBottom:"0.25rem"},children:"Completados"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#8b5cf6"},children:g.completado})]})]}),!u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1.25rem",borderRadius:"0.5rem",boxShadow:R==="pagado_completo"?"0 0 0 2px #10b981":"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",gap:"1rem",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseEnter:p=>{p.currentTarget.style.transform="translateY(-2px)",p.currentTarget.style.boxShadow=R==="pagado_completo"?"0 0 0 2px #10b981, 0 4px 6px -1px rgba(0, 0, 0, 0.1)":"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:p=>{p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow=R==="pagado_completo"?"0 0 0 2px #10b981":"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},onClick:()=>{k(""),w(R==="pagado_completo"?"":"pagado_completo")},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"0.5rem",backgroundColor:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(zt,{size:24,color:"white",strokeWidth:2.5})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"500",marginBottom:"0.25rem"},children:"Total Cobrado"}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10b981"},children:D(g.totalCobrado)})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.25rem",borderRadius:"0.5rem",boxShadow:R==="saldo_pendiente"?"0 0 0 2px #f59e0b":"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",gap:"1rem",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseEnter:p=>{p.currentTarget.style.transform="translateY(-2px)",p.currentTarget.style.boxShadow=R==="saldo_pendiente"?"0 0 0 2px #f59e0b, 0 4px 6px -1px rgba(0, 0, 0, 0.1)":"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:p=>{p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow=R==="saldo_pendiente"?"0 0 0 2px #f59e0b":"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},onClick:()=>{k(""),w(R==="saldo_pendiente"?"":"saldo_pendiente")},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"0.5rem",backgroundColor:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ut,{size:24,color:"white",strokeWidth:2.5})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"500",marginBottom:"0.25rem"},children:"Saldo Pendiente"}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#f59e0b"},children:D(g.totalPendiente)})]})]})]})]}),(y||R)&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",backgroundColor:"#fef3c7",borderRadius:"0.5rem",marginBottom:"1rem",border:"1px solid #fcd34d"},children:[e.jsx(yu,{size:18,color:"#d97706"}),e.jsxs("span",{style:{color:"#92400e",fontWeight:"500",flex:1},children:["Filtro activo: "," ",e.jsxs("strong",{children:[y==="en_proceso"&&"En Proceso",y==="confirmado"&&"Confirmados",y==="completado"&&"Completados",y==="cotizacion"&&"Cotizacin",y==="cancelado"&&"Cancelados",R==="saldo_pendiente"&&"Con Saldo Pendiente",R==="pagado_completo"&&"Pagado Completo"]})," "," (",Q.length," ",Q.length===1?"resultado":"resultados",")"]}),e.jsxs("button",{onClick:()=>{k(""),w("")},style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#fff",color:"#92400e",border:"1px solid #fcd34d",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"500",fontSize:"0.875rem",transition:"all 0.2s"},onMouseEnter:p=>{p.currentTarget.style.backgroundColor="#fef3c7"},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="#fff"},children:[e.jsx(er,{size:16}),"Quitar filtro"]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",flexWrap:"wrap",flexDirection:x?"column":"row"},children:[e.jsxs("div",{style:{position:"relative",flex:1,minWidth:x?"100%":"250px"},children:[e.jsx(Et,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar eventos...",value:B,onChange:p=>q(p.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("select",{value:y,onChange:p=>k(p.target.value),style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",minWidth:x?"100%":"150px"},children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"cotizacion",children:"Cotizacin"}),e.jsx("option",{value:"confirmado",children:"Confirmado"}),e.jsx("option",{value:"en_proceso",children:"En Proceso"}),e.jsx("option",{value:"completado",children:"Completado"}),e.jsx("option",{value:"cancelado",children:"Cancelado"})]}),s&&e.jsxs("select",{value:U,onChange:p=>X(p.target.value),style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",minWidth:x?"100%":"150px"},children:[e.jsx("option",{value:"todos",children:"Todos los eventos"}),e.jsx("option",{value:"mios",children:"Mis eventos"})]})]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",overflow:"visible",position:"relative"},children:x?e.jsx("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:Q.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:"No hay eventos disponibles"}):Q.map(p=>e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"1rem",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06)",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem",fontWeight:"600"},children:["ID #",p.id_evento||p.id]}),e.jsx(Or,{to:`/eventos/${p.id_evento||p.id}`,style:{fontWeight:"600",color:"#6366f1",textDecoration:"none",display:"block",marginBottom:"0.25rem",transition:"color 0.2s"},onMouseEnter:Z=>{Z.currentTarget.style.color="#4f46e5",Z.currentTarget.style.textDecoration="underline"},onMouseLeave:Z=>{Z.currentTarget.style.color="#6366f1",Z.currentTarget.style.textDecoration="none"},children:p.nombre_evento||"-"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:p.tipo_evento||"-"})]}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"600",backgroundColor:`${se(p.estado)}20`,color:se(p.estado),textTransform:"capitalize"},children:p.estado||"-"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Cliente"}),e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500"},children:p.nombre_cliente||"-"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:p.documento_identidad_cliente||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Fecha"}),e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500"},children:oe(p.fecha_evento)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Hora"}),e.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"500"},children:[K(p.hora_inicio),p.hora_fin?` - ${K(p.hora_fin)}`:""]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Saln"}),e.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500"},children:p.nombre_salon||p.salon||"-"})]})]}),!u&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Total"}),e.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600"},children:D(p.total||0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Saldo"}),e.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600",color:parseFloat(p.saldo||0)>0?"#f59e0b":"#10b981"},children:D(p.saldo||0)})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",justifyContent:"flex-end"},children:[e.jsxs(Or,{to:`/eventos/${p.id_evento||p.id}`,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",textDecoration:"none",fontSize:"0.8rem",fontWeight:"500"},children:[e.jsx(St,{size:16,strokeWidth:2.5}),"Ver"]}),f&&e.jsxs(Or,{to:`/eventos/editar/${p.id_evento||p.id}`,title:"Editar",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"#f59e0b",color:"white",borderRadius:"0.375rem",textDecoration:"none",fontSize:"0.8rem",fontWeight:"500"},children:[e.jsx(Qt,{size:16,strokeWidth:2.5}),"Editar"]}),e.jsxs("details",{style:{position:"relative"},children:[e.jsxs("summary",{style:{listStyle:"none",display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",fontSize:"0.8rem",fontWeight:"500",cursor:"pointer",userSelect:"none"},children:[e.jsx(jt,{size:16,strokeWidth:2.5}),"Archivos"]}),e.jsxs("div",{style:{position:"absolute",top:"110%",right:0,backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.08)",minWidth:"170px",zIndex:20,padding:"0.4rem"},children:[e.jsxs("button",{onClick:()=>V(p.id_evento||p.id),style:{width:"100%",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"transparent",color:"#111827",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem",textAlign:"left"},children:[e.jsx(jt,{size:14,strokeWidth:2}),"Cotizacin"]}),e.jsxs("button",{onClick:()=>F(p.id_evento||p.id),style:{width:"100%",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"transparent",color:"#111827",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem",textAlign:"left"},children:[e.jsx(no,{size:14,strokeWidth:2}),"Contrato"]})]})]}),p.estado!=="completado"&&d&&e.jsxs("button",{onClick:()=>me(p),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"#f59e0b",color:"white",borderRadius:"0.375rem",fontSize:"0.8rem",fontWeight:"500",border:"none",cursor:"pointer"},children:[e.jsx(jo,{size:16,strokeWidth:2.5}),"Estado"]})]})]},p.id_evento||p.id))}):e.jsx("div",{style:{overflowX:"auto",overflowY:"visible",position:"relative",zIndex:1},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",position:"relative"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"2px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"ID"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Evento"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Cliente"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Fecha"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Hora"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Saln"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Plan"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Invitados"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Avance"}),!u&&e.jsxs(e.Fragment,{children:[e.jsx("th",{style:{padding:"1rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Total"}),e.jsx("th",{style:{padding:"1rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap"},children:"Saldo"})]}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"#374151",whiteSpace:"nowrap",minWidth:"200px"},children:"Acciones"})]})}),e.jsx("tbody",{children:Q.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:u?11:13,style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:"No hay eventos disponibles"})}):Q.map(p=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb",transition:"background-color 0.2s"},onMouseEnter:Z=>Z.currentTarget.style.backgroundColor="#f9fafb",onMouseLeave:Z=>Z.currentTarget.style.backgroundColor="white",children:[e.jsxs("td",{style:{padding:"1rem",fontSize:"0.85rem",color:"#6b7280",fontWeight:"600"},children:["#",p.id_evento||p.id]}),e.jsxs("td",{style:{padding:"1rem"},children:[e.jsx(Or,{to:`/eventos/${p.id_evento||p.id}`,style:{fontWeight:"600",color:"#6366f1",marginBottom:"0.25rem",textDecoration:"none",display:"block",transition:"color 0.2s"},onMouseEnter:Z=>{Z.currentTarget.style.color="#4f46e5",Z.currentTarget.style.textDecoration="underline"},onMouseLeave:Z=>{Z.currentTarget.style.color="#6366f1",Z.currentTarget.style.textDecoration="none"},children:p.nombre_evento||"-"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:p.tipo_evento||"-"})]}),e.jsxs("td",{style:{padding:"1rem"},children:[e.jsx("div",{style:{fontWeight:"500",color:"#374151"},children:p.nombre_cliente||"-"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:p.documento_identidad_cliente||"-"})]}),e.jsx("td",{style:{padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_t,{size:16,color:"#6b7280"}),e.jsx("span",{style:{fontSize:"0.875rem"},children:p.fecha_evento})]})}),e.jsx("td",{style:{padding:"1rem"},children:p.hora_inicio?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(An,{size:16,color:"#6b7280"}),e.jsxs("span",{style:{fontSize:"0.875rem"},children:[K(p.hora_inicio),p.hora_fin?` - ${K(p.hora_fin)}`:""]})]}):e.jsx("span",{style:{fontSize:"0.875rem",color:"#9ca3af"},children:"-"})}),e.jsx("td",{style:{padding:"1rem"},children:p.nombre_salon||p.salon?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(In,{size:16,color:"#6b7280"}),e.jsx("span",{style:{fontSize:"0.875rem"},children:p.nombre_salon||p.salon})]}):e.jsx("span",{style:{fontSize:"0.875rem",color:"#9ca3af"},children:"-"})}),e.jsx("td",{style:{padding:"1rem"},children:p.nombre_plan?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Gt,{size:16,color:"#6b7280"}),e.jsx("span",{style:{fontSize:"0.875rem"},children:p.nombre_plan})]}):e.jsx("span",{style:{fontSize:"0.875rem",color:"#9ca3af"},children:"-"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:p.numero_invitados?e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(dn,{size:16,color:"#6b7280"}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500"},children:p.numero_invitados})]}):e.jsx("span",{style:{fontSize:"0.875rem",color:"#9ca3af"},children:"-"})}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.375rem 0.875rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"600",backgroundColor:`${se(p.estado)}20`,color:se(p.estado),textTransform:"capitalize",display:"inline-block"},children:p.estado||"-"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:p.porcentaje_avance_servicios!==void 0&&p.porcentaje_avance_servicios!==null?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem",minWidth:"80px"},children:[e.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#374151"},children:[p.porcentaje_avance_servicios,"%"]}),e.jsx("div",{style:{width:"100%",height:"6px",backgroundColor:"#e5e7eb",borderRadius:"9999px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${p.porcentaje_avance_servicios}%`,height:"100%",backgroundColor:p.porcentaje_avance_servicios>=100?"#10b981":"#6366f1",transition:"width 0.3s"}})})]}):e.jsx("span",{style:{fontSize:"0.875rem",color:"#9ca3af"},children:"-"})}),!u&&e.jsxs(e.Fragment,{children:[e.jsx("td",{style:{padding:"1rem",textAlign:"right"},children:e.jsx("div",{style:{fontWeight:"600",color:"#1f2937"},children:D(p.total||0)})}),e.jsx("td",{style:{padding:"1rem",textAlign:"right"},children:e.jsx("div",{style:{fontWeight:"600",color:parseFloat(p.saldo||0)>0?"#f59e0b":"#10b981"},children:D(p.saldo||0)})})]}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(Or,{to:`/eventos/${p.id_evento||p.id}`,style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",textDecoration:"none",fontSize:"0.875rem",transition:"all 0.2s",border:"none",cursor:"pointer",minWidth:"36px",height:"36px"},onMouseEnter:Z=>{Z.currentTarget.style.backgroundColor="#4f46e5",Z.currentTarget.style.transform="translateY(-1px)",Z.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:Z=>{Z.currentTarget.style.backgroundColor="#6366f1",Z.currentTarget.style.transform="translateY(0)",Z.currentTarget.style.boxShadow="none"},title:"Ver detalles",children:e.jsx(St,{size:18,strokeWidth:2.5})}),f&&e.jsx(Or,{to:`/eventos/editar/${p.id_evento||p.id}`,title:"Editar",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.5rem",backgroundColor:"#f59e0b",color:"white",borderRadius:"0.375rem",textDecoration:"none",fontSize:"0.875rem",transition:"all 0.2s",border:"none",cursor:"pointer",minWidth:"36px",height:"36px"},onMouseEnter:Z=>{Z.currentTarget.style.backgroundColor="#d97706",Z.currentTarget.style.transform="translateY(-1px)",Z.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:Z=>{Z.currentTarget.style.backgroundColor="#f59e0b",Z.currentTarget.style.transform="translateY(0)",Z.currentTarget.style.boxShadow="none"},children:e.jsx(Qt,{size:18,strokeWidth:2.5})}),e.jsxs("details",{style:{position:"relative",display:"inline-block"},children:[e.jsx("summary",{title:"Archivos",style:{listStyle:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s",userSelect:"none",minWidth:"36px",height:"36px"},onMouseEnter:Z=>{Z.currentTarget.style.backgroundColor="#059669",Z.currentTarget.style.transform="translateY(-1px)",Z.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:Z=>{Z.currentTarget.style.backgroundColor="#10b981",Z.currentTarget.style.transform="translateY(0)",Z.currentTarget.style.boxShadow="none"},children:e.jsx(jt,{size:18,strokeWidth:2.5})}),e.jsxs("div",{style:{position:"absolute",top:"110%",right:0,backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.08)",minWidth:"180px",zIndex:20,padding:"0.4rem",marginTop:"0.25rem"},children:[e.jsxs("button",{onClick:()=>V(p.id_evento||p.id),style:{width:"100%",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"transparent",color:"#111827",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem",textAlign:"left"},children:[e.jsx(jt,{size:14,strokeWidth:2}),"Cotizacin"]}),e.jsxs("button",{onClick:()=>F(p.id_evento||p.id),style:{width:"100%",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:"transparent",color:"#111827",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem",textAlign:"left"},children:[e.jsx(no,{size:14,strokeWidth:2}),"Contrato"]})]})]}),p.estado!=="completado"&&d&&e.jsx("button",{onClick:()=>me(p),style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.5rem",backgroundColor:"#f59e0b",color:"white",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:"500",border:"none",cursor:"pointer",transition:"all 0.2s",minWidth:"36px",height:"36px"},onMouseEnter:Z=>{Z.currentTarget.style.backgroundColor="#d97706",Z.currentTarget.style.transform="translateY(-1px)",Z.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:Z=>{Z.currentTarget.style.backgroundColor="#f59e0b",Z.currentTarget.style.transform="translateY(0)",Z.currentTarget.style.boxShadow="none"},title:"Cambiar estado",children:e.jsx(jo,{size:18,strokeWidth:2.5})})]})})]},p.id_evento||p.id))})]})})}),E&&ee&&d&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:ie,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",maxWidth:"500px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(jo,{size:28,color:"#f59e0b",strokeWidth:2.5}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1f2937",margin:0},children:"Cambiar Estado"})]}),e.jsx("button",{onClick:ie,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",color:"#6b7280",borderRadius:"0.25rem",transition:"all 0.2s"},onMouseEnter:p=>{p.currentTarget.style.backgroundColor="#f3f4f6",p.currentTarget.style.color="#374151"},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="transparent",p.currentTarget.style.color="#6b7280"},children:e.jsx(er,{size:24,strokeWidth:2.5})})]}),e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsx(Gt,{size:18,color:"#6366f1",strokeWidth:2}),e.jsxs("p",{style:{margin:0,color:"#374151",fontSize:"0.875rem"},children:[e.jsx("strong",{children:"Evento:"})," ",ee.nombre_evento]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsx(jo,{size:18,color:se(ee.estado),strokeWidth:2}),e.jsxs("p",{style:{margin:0,color:"#374151",fontSize:"0.875rem"},children:[e.jsx("strong",{children:"Estado actual:"})," ",e.jsx("span",{style:{color:se(ee.estado),fontWeight:"600"},children:(r=ee.estado)==null?void 0:r.toUpperCase().replace("_"," ")})]})]}),parseFloat(ee.saldo||0)>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",backgroundColor:"#fef3c7",borderRadius:"0.375rem",border:"1px solid #fde68a"},children:[e.jsx(ut,{size:18,color:"#f59e0b",strokeWidth:2.5}),e.jsxs("p",{style:{margin:0,color:"#92400e",fontSize:"0.875rem",fontWeight:"500"},children:["Saldo pendiente: ",D(parseFloat(ee.saldo||0))]})]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:[e.jsx(Qt,{size:18,color:"#6366f1",strokeWidth:2}),"Nuevo Estado:"]}),e.jsx("select",{value:G,onChange:p=>O(p.target.value),style:{width:"100%",padding:"0.75rem 1rem",border:"2px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem",backgroundColor:"white",fontWeight:"500",color:"#374151",cursor:"pointer",transition:"all 0.2s"},onFocus:p=>{p.target.style.borderColor="#6366f1",p.target.style.boxShadow="0 0 0 3px rgba(99, 102, 241, 0.1)"},onBlur:p=>{p.target.style.borderColor="#d1d5db",p.target.style.boxShadow="none"},children:Te(ee).map(p=>e.jsx("option",{value:p,children:p.charAt(0).toUpperCase()+p.slice(1).replace("_"," ")},p))}),parseFloat(ee.saldo||0)>0&&G==="completado"&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.75rem",padding:"0.75rem",backgroundColor:"#fee2e2",borderRadius:"0.375rem",border:"1px solid #fecaca"},children:[e.jsx(ut,{size:18,color:"#ef4444",strokeWidth:2.5}),e.jsx("p",{style:{margin:0,color:"#dc2626",fontSize:"0.875rem",fontWeight:"500"},children:'No se puede cambiar a "Completado" si hay saldo pendiente.'})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid #e5e7eb"},children:[e.jsxs("button",{onClick:ie,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:p=>{p.currentTarget.style.backgroundColor="#d1d5db",p.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="#e5e7eb",p.currentTarget.style.transform="translateY(0)"},children:[e.jsx(er,{size:18,strokeWidth:2.5}),"Cancelar"]}),e.jsx("button",{onClick:ge,disabled:re||parseFloat(ee.saldo||0)>0&&G==="completado",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:re||parseFloat(ee.saldo||0)>0&&G==="completado"?"#9ca3af":"#10b981",color:"white",borderRadius:"0.375rem",border:"none",fontSize:"0.875rem",fontWeight:"500",cursor:re||parseFloat(ee.saldo||0)>0&&G==="completado"?"not-allowed":"pointer",transition:"all 0.2s"},onMouseEnter:p=>{!re&&!(parseFloat(ee.saldo||0)>0&&G==="completado")&&(p.currentTarget.style.backgroundColor="#059669",p.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:p=>{!re&&!(parseFloat(ee.saldo||0)>0&&G==="completado")&&(p.currentTarget.style.backgroundColor="#10b981",p.currentTarget.style.transform="translateY(0)")},children:re?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid white",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Guardando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(jo,{size:18,strokeWidth:2.5}),"Guardar Cambios"]})})]})]})})]})},C5=768,go=(r=C5)=>{const[t,o]=c.useState(!1);return c.useEffect(()=>{const n=()=>{o(window.innerWidth<r)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[r]),t},k5=({eventoId:r,puedeEditar:t=!1,compacto:o=!1,onConfirmacionCompleta:n})=>{var i,a;const{success:l,error:u}=_r(),[s,d]=c.useState(null),[f,x]=c.useState(!0),[h,S]=c.useState(!o),[C,j]=c.useState(!1),[P,v]=c.useState({});c.useEffect(()=>{r&&m()},[r]);const m=async()=>{var B;try{x(!0);const q=await jn.getResumenConfirmaciones(r);d(q);const E={};(B=q.confirmadas)==null||B.forEach(T=>{E[T.opcion_id]={seleccion:T.seleccion,cantidad:T.cantidad,observaciones:T.observaciones}}),v(E),q.completo&&n&&n(!0)}catch(q){console.error("Error al cargar resumen:",q)}finally{x(!1)}},y=(B,q,E=!1)=>{v(T=>{var ee;const H=((ee=T[B])==null?void 0:ee.seleccion)||"";let G;if(E){const O=H?H.split("|"):[];O.includes(q)?G=O.filter(re=>re!==q).join("|"):G=[...O,q].join("|")}else G=q;return{...T,[B]:{...T[B],seleccion:G}}})},k=(B,q)=>{v(E=>({...E,[B]:{...E[B],cantidad:q?parseInt(q):null}}))},U=(B,q)=>{v(E=>({...E,[B]:{...E[B],observaciones:q}}))},X=async B=>{var q,E;const T=P[B];if(!(T!=null&&T.seleccion)){u("Debe seleccionar al menos una opcin");return}try{j(!0),await jn.guardarSeleccion(r,{opcion_id:B,seleccion:T.seleccion,cantidad:T.cantidad,observaciones:T.observaciones}),l("Confirmacin guardada"),await m()}catch(ee){u(((E=(q=ee.response)==null?void 0:q.data)==null?void 0:E.error)||"Error al guardar")}finally{j(!1)}},R=async B=>{if(window.confirm("Eliminar esta confirmacin?"))try{await jn.eliminarSeleccion(B),l("Confirmacin eliminada"),await m()}catch{u("Error al eliminar")}};if(f)return e.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#6b7280"},children:"Cargando confirmaciones..."});if(!s||s.total_pendientes===0&&s.total_confirmadas===0)return null;const w=s.total_pendientes+s.total_confirmadas;return e.jsxs("div",{style:{border:s.completo?"1px solid #86efac":"1px solid #fcd34d",borderRadius:"0.75rem",backgroundColor:s.completo?"#f0fdf4":"#fffbeb",overflow:"hidden",marginBottom:"1rem"},children:[e.jsxs("div",{onClick:()=>o&&S(!h),style:{padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:o?"pointer":"default",backgroundColor:s.completo?"#dcfce7":"#fef3c7"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[s.completo?e.jsx(jo,{size:24,style:{color:"#16a34a"}}):e.jsx(di,{size:24,style:{color:"#d97706"}}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:"600",color:s.completo?"#166534":"#92400e"},children:s.completo?"Confirmaciones Completas":"Confirmaciones Pendientes"}),e.jsxs("p",{style:{margin:0,fontSize:"0.85rem",color:s.completo?"#15803d":"#a16207"},children:[s.total_confirmadas," de ",w," opciones confirmadas"]})]})]}),o&&e.jsx("button",{style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem"},children:h?e.jsx(Vv,{size:20}):e.jsx(Ki,{size:20})})]}),h&&e.jsxs("div",{style:{padding:"1rem"},children:[((i=s.pendientes)==null?void 0:i.length)>0&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("h5",{style:{margin:"0 0 0.75rem",fontSize:"0.9rem",fontWeight:"600",color:"#92400e"},children:["Por confirmar (",s.pendientes.length,")"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:s.pendientes.map(B=>{var q,E,T,ee,H,G;return e.jsxs("div",{style:{padding:"1rem",backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{marginBottom:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"0.7rem",backgroundColor:"#dbeafe",color:"#1e40af",padding:"0.15rem 0.5rem",borderRadius:"0.25rem",marginBottom:"0.25rem",display:"inline-block"},children:B.producto_nombre}),e.jsxs("h6",{style:{margin:"0.25rem 0 0",fontWeight:"600",color:"#1f2937"},children:[B.nombre_grupo,B.requerido&&e.jsx("span",{style:{color:"#dc2626",marginLeft:"0.25rem"},children:"*"})]})]}),t?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"0.75rem"},children:(q=B.opciones_lista)==null?void 0:q.map((O,re)=>{var W;const Y=(((W=P[B.id])==null?void 0:W.seleccion)||"").split("|").includes(O);return e.jsx("button",{type:"button",onClick:()=>y(B.id,O,B.permite_multiple),style:{padding:"0.5rem 1rem",backgroundColor:Y?"#4f46e5":"#f3f4f6",color:Y?"white":"#374151",border:Y?"2px solid #4f46e5":"2px solid #d1d5db",borderRadius:"0.5rem",cursor:"pointer",fontWeight:Y?"600":"400",fontSize:"0.9rem",transition:"all 0.15s"},children:O},re)})}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-end",flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"0 0 100px"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280",display:"block",marginBottom:"0.25rem"},children:"Cantidad"}),e.jsx("input",{type:"number",min:"1",value:((E=P[B.id])==null?void 0:E.cantidad)||"",onChange:O=>k(B.id,O.target.value),placeholder:"Opc.",style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{style:{flex:1,minWidth:"150px"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280",display:"block",marginBottom:"0.25rem"},children:"Observaciones"}),e.jsx("input",{type:"text",value:((T=P[B.id])==null?void 0:T.observaciones)||"",onChange:O=>U(B.id,O.target.value),placeholder:"Notas adicionales...",style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"}})]}),e.jsxs("button",{onClick:()=>X(B.id),disabled:C||!((ee=P[B.id])!=null&&ee.seleccion),style:{padding:"0.5rem 1rem",backgroundColor:(H=P[B.id])!=null&&H.seleccion?"#10b981":"#d1d5db",color:"white",border:"none",borderRadius:"0.375rem",cursor:(G=P[B.id])!=null&&G.seleccion?"pointer":"not-allowed",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.35rem",fontSize:"0.875rem"},children:[e.jsx(it,{size:16}),"Confirmar"]})]})]}):e.jsx("p",{style:{margin:0,color:"#6b7280",fontSize:"0.875rem",fontStyle:"italic"},children:"Pendiente de confirmacin por el cliente"})]},B.id)})})]}),((a=s.confirmadas)==null?void 0:a.length)>0&&e.jsxs("div",{children:[e.jsxs("h5",{style:{margin:"0 0 0.75rem",fontSize:"0.9rem",fontWeight:"600",color:"#166534"},children:["Confirmadas (",s.confirmadas.length,")"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.confirmadas.map(B=>{var q;return e.jsxs("div",{style:{padding:"0.75rem 1rem",backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #86efac",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.5rem"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[e.jsx(jo,{size:16,style:{color:"#16a34a"}}),e.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:B.producto_nombre}),e.jsx("span",{style:{color:"#d1d5db"},children:""}),e.jsx("span",{style:{fontWeight:"600",color:"#1f2937"},children:B.nombre_grupo})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.35rem",alignItems:"center"},children:[(q=B.seleccion_lista)==null?void 0:q.map((E,T)=>e.jsx("span",{style:{padding:"0.2rem 0.6rem",backgroundColor:"#dcfce7",color:"#166534",borderRadius:"0.25rem",fontSize:"0.8rem",fontWeight:"500"},children:E},T)),B.cantidad&&e.jsxs("span",{style:{fontSize:"0.8rem",color:"#6b7280",marginLeft:"0.5rem"},children:["(Cantidad: ",B.cantidad,")"]}),B.observaciones&&e.jsxs("span",{style:{fontSize:"0.8rem",color:"#6b7280",fontStyle:"italic"},children:["- ",B.observaciones]})]}),B.confirmado_por_nombre&&e.jsxs("div",{style:{fontSize:"0.7rem",color:"#9ca3af",marginTop:"0.25rem"},children:["Confirmado por ",B.confirmado_por_nombre]})]}),t&&e.jsx("button",{onClick:()=>R(B.id),style:{padding:"0.35rem",backgroundColor:"#fef2f2",color:"#dc2626",border:"1px solid #fecaca",borderRadius:"0.25rem",cursor:"pointer"},title:"Eliminar confirmacin",children:e.jsx(er,{size:14})})]},B.id)})})]})]})]})},_5=()=>{const{id:r}=vs(),t=_o(),o=Bn(),{usuario:n}=at(),{toasts:i,removeToast:a,success:l,error:u}=_r(),s=go(),[d,f]=c.useState(null),[x,h]=c.useState([]),[S,C]=c.useState([]),[j,P]=c.useState([]),[v,m]=c.useState(!1),[y,k]=c.useState([]),[U,X]=c.useState(!1),[R,w]=c.useState(null),[B,q]=c.useState(!1),[E,T]=c.useState([]),[ee,H]=c.useState(!1),[G,O]=c.useState(0),[re,W]=c.useState(0),[Y,D]=c.useState(!0),[oe,K]=c.useState(""),[V,F]=c.useState(!1),[se,me]=c.useState(!1),[ie,ge]=c.useState(null),[Te,Q]=c.useState(null),[g,p]=c.useState([]),[Z,ce]=c.useState(""),[be,Ce]=c.useState(!1),[Ae,De]=c.useState(!1),[te,_]=c.useState(!1),[$,xe]=c.useState(""),[Pe,I]=c.useState(!1),[ue,J]=c.useState([]),[Ze,jr]=c.useState([]),[Ge,tr]=c.useState(!1),[Ke,gr]=c.useState(null),[zr,mr]=c.useState(null),[br,lr]=c.useState(!1),[qe,ne]=c.useState({producto_id:"",cantidad:"1"}),[ke,ye]=c.useState(""),[ve,Ee]=c.useState(!1),[Qe,Ne]=c.useState(!1),[L,ze]=c.useState(null),[Se,je]=c.useState(""),[Me,$e]=c.useState(""),[Le,Ve]=c.useState(!1),[or,wr]=c.useState(!1),[$r,Ur]=c.useState({nombre:""}),[he,nr]=c.useState(""),[sr,Rr]=c.useState(!1),[hr,qr]=c.useState(null),[M,Re]=c.useState({monto:"",tipo_pago:"abono",metodo_pago:"efectivo",fecha_pago:new Date().toISOString().split("T")[0],numero_referencia:"",observaciones:""}),[Ue,ir]=c.useState(!1),[Br,gt]=c.useState([]),[ro,zo]=c.useState(!1),[zi,A]=c.useState(!1),[de,He]=c.useState(!1),[Ye,yr]=c.useState(!1),[z,we]=c.useState({observacion_finalizacion:"",tiene_danos:!1,descripcion_danos:"",costo_danos:"",cobrar_danos:!1}),[We,Xe]=c.useState(null),[Pr,It]=c.useState([]),[Ro,Ri]=c.useState(!1),[Pg,wu]=c.useState(!1),[Dg,Su]=c.useState(!1),[Pn,Cu]=c.useState(!1),[Vr,Pa]=c.useState({calificacion:5,observaciones:""}),[Dn,ku]=c.useState(!1),[ho,Ei]=c.useState({monto:"",metodo_pago:"efectivo",observaciones:""}),Mn=(d==null?void 0:d.estado)==="cancelado",Mg=(d==null?void 0:d.estado)==="completado",Yr=Mn||Mg,Wi=parseFloat((d==null?void 0:d.saldo)||0),Ai=xr(n,Je.EVENTOS_AGREGAR_PRODUCTO,[N.ADMIN,N.MANAGER]),Es=xr(n,Je.EVENTOS_ACTUALIZAR_SERVICIOS,[N.ADMIN,N.MANAGER]),_u=xr(n,Je.EVENTOS_DESCARTAR_SERVICIO,[N.ADMIN,N.MANAGER]),Og=xr(n,Je.EVENTOS_GENERAR_SERVICIOS,[N.ADMIN,N.MANAGER]),Ws=xr(n,Je.EVENTOS_GENERAR_SERVICIOS,[N.ADMIN,N.MANAGER]),Lg=xr(n,Je.EVENTOS_ELIMINAR_PRODUCTO,[N.ADMIN,N.MANAGER]),Fg=xr(n,Je.EVENTOS_ELIMINAR,[N.ADMIN,N.MANAGER]),As=xr(n,Je.EVENTOS_ASIGNAR_COORDINADOR,[N.ADMIN,N.MANAGER]),$g=!!(d!=null&&d.email||d!=null&&d.telefono),zu=xr(n,Je.PAGOS_REGISTRAR,[N.ADMIN,N.MANAGER,N.COORDINATOR]),Ru=xr(n,Je.PAGOS_REEMBOLSAR,[N.ADMIN,N.MANAGER]),Is=xr(n,Je.PAGOS_APROBAR,[N.ADMIN,N.MANAGER]),Ts=xr(n,Je.PAGOS_ANULAR,[N.ADMIN,N.MANAGER]),lt=Math.max(0,(parseFloat(G)||0)-(parseFloat(re)||0)),Ug=b=>!b||parseFloat(b)<=0?"abono":parseFloat(b)>=Wi&&Wi>0?"pago_completo":"abono",Gg=b=>{const fe=b.target.value;if(M.tipo_pago!=="reembolso"){const pe=Ug(fe);Re({...M,monto:fe,tipo_pago:pe})}else Re({...M,monto:fe})},Ns=c.useMemo(()=>{if(Mn)return 0;if((d==null?void 0:d.estado)==="completado")return 100;const b=y.filter(Be=>!Be.descartado),fe=b.length;if(!fe)return 0;const pe=b.filter(Be=>Be.completado).length;return Math.round(pe/fe*100)},[y,Mn,d==null?void 0:d.estado]);c.useEffect(()=>{r&&(On(),Da(),Wu(),Qg(),Ln(),Hg())},[r]);const Hg=async()=>{try{const b=await qo.getAll();p(b.cuentas||[])}catch(b){console.error("Error al cargar cuentas:",b)}};c.useEffect(()=>{As&&(async()=>{try{zo(!0);const b=await dt.getAll({rol:"coordinador"});gt(b.usuarios||[])}catch(b){console.error("Error al cargar coordinadores:",b),K("Error al cargar coordinadores")}finally{zo(!1)}})()},[As]),c.useEffect(()=>{d!=null&&d.plan_id?th(d.plan_id):T([])},[d==null?void 0:d.plan_id]),c.useEffect(()=>{new URLSearchParams(o.search).get("tab")==="productos"&&!Mn&&Ai&&(Ce(!0),j.length===0&&Tu())},[o.search,Mn,j.length,Ai]);const On=async()=>{var b;try{D(!0);const fe=await ur.getById(r);f(fe.evento),K(""),((b=fe.evento)==null?void 0:b.estado)==="completado"&&qg()}catch(fe){K("Error al cargar el evento"),console.error(fe)}finally{D(!1)}},qg=async()=>{try{const b=await ur.obtenerDanos(r);Xe(b.info_finalizacion),It(b.danos||[])}catch(b){console.error("Error al cargar info de finalizacin:",b)}},Vg=async()=>{var b,fe;try{Ri(!0),await ao.forzarNotificacion(r,"solicitud_calificacion"),l("Notificacin de evaluacin enviada al cliente")}catch(pe){const Be=((fe=(b=pe.response)==null?void 0:b.data)==null?void 0:fe.error)||"Error al enviar notificacin de evaluacin";u(Be)}finally{Ri(!1)}},Yg=()=>{if(d!=null&&d.nombre_coordinador)return d.nombre_coordinador;const b=d==null?void 0:d.coordinador_id;if(b&&Br.length>0){const fe=Br.find(pe=>pe.id===b);if(fe)return fe.nombre_completo||fe.nombre_usuario||"Coordinador"}return n!=null&&n.id&&b&&b===n.id?"Asignado a m":"-"},Kg=async b=>{var fe,pe;if(d)try{A(!0),K("");const Be=b?parseInt(b):null,ar=await ur.asignarCoordinador(d.id_evento||d.id,Be);f(ar.evento||{...d,coordinador_id:Be})}catch(Be){console.error("Error al asignar coordinador:",Be),K(((pe=(fe=Be.response)==null?void 0:fe.data)==null?void 0:pe.error)||"Error al asignar coordinador")}finally{A(!1)}},Zg=async()=>{var b,fe;if(d){if(lt>0){xe("Debes reembolsar todos los pagos antes de eliminar el evento.");return}try{_(!0),xe(""),await ur.delete(d.id_evento||d.id),t("/eventos")}catch(pe){console.error("Error al eliminar evento:",pe),xe(((fe=(b=pe.response)==null?void 0:b.data)==null?void 0:fe.error)||"No se pudo eliminar el evento.")}finally{_(!1)}}},Da=async()=>{try{const b=await et.getByEvento(r),fe=(b.pagos||[]).sort((pe,Be)=>(Be.id||0)-(pe.id||0));if(h(fe),b.total_pagado!==void 0&&b.total_pagado!==null)O(parseFloat(b.total_pagado)||0);else{const pe=(b.pagos||[]).reduce((Be,ar)=>{const tt=parseFloat(ar.monto)||0;return ar.tipo_pago==="reembolso"?Be-tt:Be+tt},0);O(pe)}try{const pe=await et.getTotalEvento(r);pe.total_pagado!==void 0&&pe.total_pagado!==null&&O(parseFloat(pe.total_pagado)||0),pe.total_reembolsos!==void 0&&pe.total_reembolsos!==null&&W(parseFloat(pe.total_reembolsos)||0)}catch(pe){console.error("Error al cargar totales de pagos:",pe)}}catch(b){console.error("Error al cargar pagos:",b),O(0),W(0)}},Ln=async()=>{try{tr(!0);const b=await ao.getProximasEvento(r);J(b.notificaciones||[]),jr(b.proximas_ejecuciones||[])}catch(b){console.error("Error al cargar notificaciones:",b),J([]),jr([])}finally{tr(!1)}},Eu=(b,fe)=>{let pe=b||"";return Object.entries(fe).forEach(([Be,ar])=>{const tt=new RegExp(`\\{${Be}\\}`,"g");pe=pe.replace(tt,ar??"")}),pe},Jg=b=>{if(!b)return;const fe=d!=null&&d.fecha_evento?new Date(d.fecha_evento):null,pe=fe?Math.max(0,Math.ceil((fe-new Date)/(1e3*60*60*24))):"",Be={nombre_cliente:(d==null?void 0:d.nombre_cliente)||"",nombre_evento:(d==null?void 0:d.nombre_evento)||(d==null?void 0:d.salon)||"",fecha_evento:(d==null?void 0:d.fecha_evento)||"",hora_inicio:(d==null?void 0:d.hora_inicio)||"",dias_restantes:pe,saldo_pendiente:(d==null?void 0:d.saldo)||"",total:(d==null?void 0:d.total)||""};mr({titulo:b.nombre||"Recordatorio del evento",email:Eu(b.plantilla_email,Be),whatsapp:Eu(b.plantilla_whatsapp,Be)}),lr(!0)},Wu=async()=>{try{const b=await ur.getProductos(r);C(b.productos||[])}catch(b){console.error("Error al cargar productos:",b),C([])}},Qg=async()=>{try{X(!0);const b=await ur.getServicios(r);k(b.servicios||[])}catch(b){console.error("Error al cargar servicios del evento:",b),k([])}finally{X(!1)}},Xg=async(b,fe)=>{try{w(b);const pe=await ur.actualizarServicio(d.id_evento||d.id,b,fe);k(pe.servicios||[]),pe.porcentaje_avance!==void 0&&d&&f({...d,porcentaje_avance_servicios:pe.porcentaje_avance})}catch(pe){console.error("Error al actualizar servicio:",pe)}finally{w(null)}},Au=async(b,fe)=>{try{w(b);const pe=await ur.actualizarServicio(d.id_evento||d.id,b,null,fe);k(pe.servicios||[]),pe.porcentaje_avance!==void 0&&d&&f({...d,porcentaje_avance_servicios:pe.porcentaje_avance})}catch(pe){console.error("Error al descartar servicio:",pe)}finally{w(null)}},eh=async()=>{var b,fe;if(!(d!=null&&d.plan_id)){K("El evento no tiene plan asociado.");return}try{q(!0),K("");const pe=(await ur.generarServicios(d.id_evento||d.id)).servicios||[];k(pe),pe.length===0?K("El plan seleccionado no tiene servicios configurados. Por favor, configura los servicios del plan primero."):(K(""),l(`Servicios generados exitosamente: ${pe.length} servicio(s)`))}catch(pe){console.error("Error al generar servicios:",pe);const Be=((fe=(b=pe.response)==null?void 0:b.data)==null?void 0:fe.error)||"Error al generar servicios";K(Be),u(Be)}finally{q(!1)}},Iu=async()=>{var b,fe;if(!$r.nombre||!$r.nombre.trim()){nr("El nombre del servicio es requerido");return}try{Rr(!0),nr("");const pe=await ur.crearServicioPersonalizado(d.id_evento||d.id,$r.nombre.trim());k(pe.servicios||[]),wr(!1),Ur({nombre:""}),l("Servicio personalizado creado exitosamente")}catch(pe){console.error("Error al crear servicio personalizado:",pe);const Be=((fe=(b=pe.response)==null?void 0:b.data)==null?void 0:fe.error)||"Error al crear servicio";nr(Be),u(Be)}finally{Rr(!1)}},rh=async b=>{var fe,pe;if(window.confirm("Est seguro de que desea eliminar este servicio personalizado?"))try{qr(b);const Be=await ur.eliminarServicio(d.id_evento||d.id,b);k(Be.servicios||[]),l("Servicio eliminado exitosamente")}catch(Be){console.error("Error al eliminar servicio:",Be);const ar=((pe=(fe=Be.response)==null?void 0:fe.data)==null?void 0:pe.error)||"Error al eliminar servicio";u(ar)}finally{qr(null)}},Tu=async()=>{try{m(!0);const b=await No.getAll(!0);P(b.productos||[])}catch(b){console.error("Error al cargar productos disponibles:",b),P([])}finally{m(!1)}},th=async b=>{try{H(!0);const fe=await xt.getProductos(b);T(fe.productos||[])}catch(fe){console.error("Error al cargar productos del plan:",fe),T([])}finally{H(!1)}},oh=b=>{ze(b),je(""),$e(""),Ne(!0)},nh=async()=>{if(!qe.producto_id||!qe.cantidad||parseInt(qe.cantidad,10)<=0){ye("Selecciona un producto y una cantidad vlida.");return}const b=j.find(pe=>pe.id===parseInt(qe.producto_id,10));if(!b){ye("Producto no encontrado.");return}const fe=b.id;if(S.some(pe=>(pe.producto_id||pe.id)===fe)){ye("Este producto ya est agregado.");return}try{Ee(!0),await ur.agregarProducto(d.id_evento||d.id,fe,parseInt(qe.cantidad,10),parseFloat(b.precio||0)),await Wu(),ne({producto_id:"",cantidad:"1"}),ye(""),Ce(!1)}catch(pe){console.error("Error al agregar producto:",pe),ye("No se pudo agregar el producto. Intenta nuevamente.")}finally{Ee(!1)}},ih=async()=>{const b=Se.trim();if(!b){$e("Debes agregar una observacin antes de eliminar.");return}if(L)try{Ve(!0);const fe=L.producto_id||L.id,pe=await ur.eliminarProducto(d.id_evento||d.id,fe,b);C(Be=>Be.filter(ar=>(ar.producto_id||ar.id)!==fe)),pe!=null&&pe.evento&&f(pe.evento),Ne(!1),ze(null)}catch(fe){console.error("Error al eliminar producto:",fe),$e("No se pudo eliminar el producto. Intenta nuevamente.")}finally{Ve(!1)}},Nu=b=>{if(!b)return"-";try{if(typeof b=="string"&&b.includes(":")){const fe=b.split(":");return`${fe[0]}:${fe[1]}`}return b}catch{return b}},Er=b=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(b),Bu=b=>{if(!b)return null;if(typeof b=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(b)){const[fe,pe,Be]=b.split("-").map(Number);return new Date(fe,pe-1,Be)}return new Date(b)},Ma=b=>{if(!b)return"-";try{return Bu(b).toLocaleDateString("es-CO")}catch{return b}},ah=b=>{if(!b)return"-";try{const fe=Bu(b),pe=fe.getFullYear(),Be=String(fe.getMonth()+1).padStart(2,"0"),ar=String(fe.getDate()).padStart(2,"0"),tt=String(fe.getHours()).padStart(2,"0"),bo=String(fe.getMinutes()).padStart(2,"0");return`${pe}-${Be}-${ar} ${tt}:${bo}`}catch{return b}},Pu=b=>{switch(b){case"aprobado":return"Aprobado";case"rechazado":return"Rechazado";case"en_revision":default:return"En revisin"}},lh=b=>{switch(b){case"aprobado":return{backgroundColor:"#16a34a20",color:"#16a34a"};case"rechazado":return{backgroundColor:"#ef444420",color:"#ef4444"};default:return{backgroundColor:"#f59e0b20",color:"#d97706"}}},sh=b=>{ge(b),me(!0)},dh=async(b,fe)=>{var pe,Be;if(b)try{await et.updateEstado(b.id,fe),await Da(),await On(),l("Estado del pago actualizado")}catch(ar){const tt=((Be=(pe=ar.response)==null?void 0:pe.data)==null?void 0:Be.error)||"No se pudo actualizar el estado del pago";u(tt)}},Du=(b,fe)=>{b&&(Q({pago:b,nuevoEstado:fe}),ce(b.cuenta_id||""))},ch=async()=>{if(!Te)return;const{pago:b,nuevoEstado:fe}=Te;if(fe==="aprobado"&&Z)try{await et.updateCuenta(b.id,parseInt(Z))}catch(pe){console.error("Error al actualizar cuenta del pago:",pe)}Q(null),ce(""),await dh(b,fe)},uh=()=>d!=null&&d.creado_por_nombre?d.creado_por_nombre:d!=null&&d.nombre_cliente?d.nombre_cliente:"-",Mu=async(b=!1)=>{var fe,pe;if(M.tipo_pago==="reembolso"&&parseFloat(M.monto)>lt){K("El monto del reembolso supera el saldo disponible para reembolsar.");return}if(M.tipo_pago==="reembolso"&&!b){I(!0);return}ir(!0);try{const Be={evento_id:parseInt(r),monto:parseFloat(M.monto),tipo_pago:M.tipo_pago,metodo_pago:M.metodo_pago,fecha_pago:M.fecha_pago,numero_referencia:M.numero_referencia||null,observaciones:M.observaciones||null,origen:"web"};await et.create(Be),await Da(),await On(),F(!1),Re({monto:"",tipo_pago:"abono",metodo_pago:"efectivo",fecha_pago:new Date().toISOString().split("T")[0],numero_referencia:"",observaciones:""}),K(""),l(M.tipo_pago==="reembolso"?"Reembolso registrado exitosamente":"Pago registrado exitosamente")}catch(Be){console.error("Error al registrar pago:",Be),K(((pe=(fe=Be.response)==null?void 0:fe.data)==null?void 0:pe.error)||"Error al registrar el pago")}finally{ir(!1)}},mh=async b=>{b.preventDefault(),await Mu(!1)},Ou=b=>({cotizacion:"#6b7280",confirmado:"#10b981",en_proceso:"#3b82f6",completado:"#8b5cf6",cancelado:"#ef4444"})[b]||"#6b7280",ph=()=>{d&&(Mn||(Ce(!0),j.length===0&&Tu()))},fh=()=>{we({observacion_finalizacion:"",tiene_danos:!1,descripcion_danos:"",costo_danos:"",cobrar_danos:!1}),He(!0)},Oa=()=>{He(!1),we({observacion_finalizacion:"",tiene_danos:!1,descripcion_danos:"",costo_danos:"",cobrar_danos:!1})},gh=async()=>{var b,fe;try{yr(!0);const pe={observacion_finalizacion:z.observacion_finalizacion,tiene_danos:z.tiene_danos,descripcion_danos:z.descripcion_danos,costo_danos:z.tiene_danos&&parseFloat(z.costo_danos)||0,cobrar_danos:z.tiene_danos&&z.cobrar_danos},Be=await ur.completarEvento(r,pe);Be!=null&&Be.evento&&f(Be.evento),Oa(),l("Evento completado exitosamente"),await On(),await Da()}catch(pe){const Be=((fe=(b=pe.response)==null?void 0:b.data)==null?void 0:fe.error)||"Error al finalizar el evento";u(Be)}finally{yr(!1)}},hh=((d==null?void 0:d.estado)==="confirmado"||(d==null?void 0:d.estado)==="en_proceso")&&Wi<=0,bh=()=>{const b=parseFloat((d==null?void 0:d.costo_danos)||0),fe=parseFloat((d==null?void 0:d.monto_pagado_danos)||0),pe=b-fe;Ei({monto:pe>0?pe.toFixed(2):"",metodo_pago:"efectivo",observaciones:""}),wu(!0)},La=()=>{wu(!1),Ei({monto:"",metodo_pago:"efectivo",observaciones:""})},xh=async()=>{var b,fe;try{ku(!0);const pe=parseFloat(ho.monto);if(isNaN(pe)||pe<=0){u("Ingrese un monto vlido");return}await ur.registrarPagoDanos(r,pe,ho.metodo_pago,ho.observaciones),La(),l("Pago de daos registrado exitosamente"),await On()}catch(pe){const Be=((fe=(b=pe.response)==null?void 0:b.data)==null?void 0:fe.error)||"Error al registrar pago de daos";u(Be)}finally{ku(!1)}},yh=()=>{Pa({calificacion:(d==null?void 0:d.calificacion_cliente)||5,observaciones:(d==null?void 0:d.observaciones_calificacion)||""}),Su(!0)},Fa=()=>{Su(!1),Pa({calificacion:5,observaciones:""})},vh=async()=>{var b,fe;try{Cu(!0),await ur.registrarCalificacionManual(r,{calificacion:Vr.calificacion,observaciones:Vr.observaciones}),Fa(),l("Calificacin registrada exitosamente"),await On()}catch(pe){const Be=((fe=(b=pe.response)==null?void 0:b.data)==null?void 0:fe.error)||"Error al registrar calificacin";u(Be)}finally{Cu(!1)}};return Y?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando evento..."}):oe||!d?e.jsxs("div",{children:[e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:oe||"Evento no encontrado"}),e.jsxs("button",{onClick:()=>t("/eventos"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:[e.jsx(yi,{size:20}),"Volver a Eventos"]})]}):e.jsxs("div",{children:[e.jsx(Nr,{toasts:i,removeToast:a}),e.jsxs("div",{style:{marginBottom:s?"1.5rem":"2rem"},children:[e.jsxs("button",{onClick:()=>t("/eventos"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:s?"0.4rem 0.75rem":"0.5rem 1rem",backgroundColor:"transparent",color:"#6366f1",border:"1px solid #6366f1",borderRadius:"0.375rem",cursor:"pointer",marginBottom:"1rem",fontSize:s?"0.875rem":"1rem"},children:[e.jsx(yi,{size:s?14:16}),"Volver"]}),e.jsxs("div",{style:{display:"flex",flexDirection:s?"column":"row",justifyContent:"space-between",alignItems:s?"flex-start":"center",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:s?"1.5rem":"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:d.nombre_evento||"Evento"}),e.jsx("p",{style:{color:"#6b7280",fontSize:s?"0.875rem":"1rem"},children:"Detalle del evento"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",width:s?"100%":"auto"},children:[hh&&e.jsxs("button",{type:"button",onClick:fh,style:{padding:s?"0.4rem 0.75rem":"0.5rem 1rem",backgroundColor:"#8b5cf6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"600",fontSize:s?"0.875rem":"1rem",flex:s?1:"none",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.35rem"},children:[e.jsx(Ui,{size:16}),"Finalizar evento"]}),(d==null?void 0:d.estado)==="completado"&&e.jsx("button",{type:"button",onClick:Vg,disabled:Ro,style:{padding:s?"0.4rem 0.75rem":"0.5rem 1rem",backgroundColor:Ro?"#9ca3af":"#f59e0b",color:"white",borderRadius:"0.375rem",border:"none",cursor:Ro?"not-allowed":"pointer",fontWeight:"600",fontSize:s?"0.875rem":"1rem",flex:s?1:"none",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.35rem"},children:Ro?"Enviando...":" Solicitar Evaluacin"}),d.estado==="completado"&&e.jsx("button",{type:"button",onClick:yh,style:{padding:s?"0.4rem 0.75rem":"0.5rem 1rem",backgroundColor:d.calificacion_cliente?"#10b981":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"600",fontSize:s?"0.875rem":"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.35rem",flex:s?1:"none"},children:d.calificacion_cliente?` Editar (${d.calificacion_cliente})`:" Calificar Manual"}),Fg&&e.jsx("button",{type:"button",onClick:()=>{xe(""),De(!0)},style:{padding:s?"0.4rem 0.75rem":"0.5rem 1rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"600",fontSize:s?"0.875rem":"1rem",flex:s?1:"none"},children:"Eliminar evento"})]})]})]}),oe&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:oe}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"repeat(auto-fit, minmax(320px, 1fr))",gap:s?"1rem":"1.5rem",marginBottom:s?"1.5rem":"2rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:s?"1rem":"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[e.jsxs("h2",{style:{fontSize:s?"1.1rem":"1.25rem",fontWeight:"600",marginBottom:s?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_t,{size:s?18:20,color:"#6366f1"}),"Informacin del Evento"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(mo,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Cliente"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:d.nombre_cliente||"-"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(In,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Tipo de Evento"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:d.tipo_evento||"-"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(_t,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Fecha"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:Ma(d.fecha_evento)})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(_t,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Fecha de creacin"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:Ma(d.fecha_creacion)})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(mo,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Creado por"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:uh()})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Estado"}),e.jsx("span",{style:{padding:"0.375rem 0.875rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"600",backgroundColor:`${Ou(d.estado)}20`,color:Ou(d.estado),textTransform:"capitalize"},children:d.estado||"-"})]})}),e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(dn,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Nmero de Invitados"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:d.numero_invitados||0})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(An,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Hora de Inicio"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:Nu(d.hora_inicio)})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(An,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Hora de Fin"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:Nu(d.hora_fin)})]})]}),d.nombre_salon||d.salon?e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(In,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Saln"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:d.nombre_salon||d.salon||"-"})]})]}):null,e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[e.jsx(mo,{size:18,color:"#6b7280",style:{marginTop:"0.125rem",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Coordinador"}),As?e.jsxs("select",{value:d.coordinador_id||"",onChange:b=>Kg(b.target.value),disabled:ro||zi,style:{padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem",minWidth:"220px"},children:[e.jsx("option",{value:"",children:"Sin asignar"}),Br.map(b=>e.jsx("option",{value:b.id,children:b.nombre_completo||b.nombre_usuario||"Coordinador"},b.id))]}):e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:Yg()})]})]})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:s?"1rem":"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[e.jsxs("h2",{style:{fontSize:s?"1.1rem":"1.25rem",fontWeight:"600",marginBottom:s?"1rem":"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_t,{size:s?18:20,color:"#6366f1"}),"Recordatorios programados"]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginBottom:"1rem",color:"#6b7280",fontSize:"0.85rem"},children:[e.jsxs("div",{children:["Correo: ",e.jsx("span",{style:{color:"#111827"},children:(d==null?void 0:d.email)||"No disponible"})]}),e.jsxs("div",{children:["Telefono: ",e.jsx("span",{style:{color:"#111827"},children:(d==null?void 0:d.telefono)||"No disponible"})]})]}),Ge?e.jsx("p",{style:{color:"#6b7280"},children:"Cargando recordatorios..."}):ue.length===0?e.jsx("p",{style:{color:"#6b7280"},children:"No hay recordatorios activos para este evento."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:(()=>{var b,fe;const pe=ue.filter(dr=>String(dr.tipo_notificacion||"").startsWith("recordatorio")),Be=pe.find(dr=>dr.tipo_notificacion==="recordatorio_evento"),ar=pe.filter(dr=>dr.tipo_notificacion!=="recordatorio_evento"),tt=ue.filter(dr=>!String(dr.tipo_notificacion||"").startsWith("recordatorio")),bo=(Be==null?void 0:Be.total_envios)||0,Ii=(Be==null?void 0:Be.ultimo_envio)||null,Lu=Be||{tipo_notificacion:"recordatorio_evento",enviar_email:((b=ar[0])==null?void 0:b.enviar_email)??!0,enviar_whatsapp:((fe=ar[0])==null?void 0:fe.enviar_whatsapp)??!0},$a=[];pe.length>0&&$a.push(e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",cursor:Be?"pointer":"default"},onClick:()=>Be&&Jg(Be),children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600"},children:"Recordatorio del evento"}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.85rem"},children:["Automatico:"," ",ar.length>0?ar.map(dr=>`${dr.dias_antes} dias antes`).join(" y "):"No configurado"]}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.85rem"},children:["Medio:"," ",ar[0]?[ar[0].enviar_email?"Email":null,ar[0].enviar_whatsapp?"WhatsApp":null].filter(Boolean).join(" + "):"Sin canal"]}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.85rem"},children:[Be!=null&&Be.fecha_evento?`Quedan ${Math.max(0,Math.ceil((new Date(Be.fecha_evento)-new Date)/(1e3*60*60*24)))} dias`:"Recordatorio manual",bo?`  Enviados: ${bo}`:"  Enviados: 0",Ii?`  Ultimo: ${new Date(Ii).toLocaleDateString()}`:""]})]}),pe.length>0?e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:async dr=>{var Ct,Qr;if(dr.stopPropagation(),!(d!=null&&d.email)){u("Este evento no tiene correo. No se puede enviar email.");return}try{gr("email");const Gr=await ao.forzarNotificacion(r,Lu.tipo_notificacion,"email");Gr!=null&&Gr.success?l("Recordatorio enviado por email"):u((Gr==null?void 0:Gr.error)||"No se pudo enviar el recordatorio"),await Ln()}catch(Gr){const Xr=((Qr=(Ct=Gr.response)==null?void 0:Ct.data)==null?void 0:Qr.error)||"No se pudo enviar el recordatorio";u(Xr)}finally{gr(null)}},disabled:Ke==="email"||!(d!=null&&d.email),style:{padding:"0.5rem 0.9rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",background:Ke==="email"||!(d!=null&&d.email)?"#e5e7eb":"#f3f4f6",cursor:Ke==="email"||!(d!=null&&d.email)?"not-allowed":"pointer"},children:Ke==="email"?"Enviando...":"Forzar email"}),e.jsx("button",{onClick:async dr=>{var Ct,Qr;if(dr.stopPropagation(),!(d!=null&&d.telefono)){u("Este evento no tiene telefono. No se puede enviar WhatsApp.");return}try{gr("whatsapp");const Gr=await ao.forzarNotificacion(r,Lu.tipo_notificacion,"whatsapp");Gr!=null&&Gr.success?l("Recordatorio enviado por WhatsApp"):u((Gr==null?void 0:Gr.error)||"No se pudo enviar el recordatorio"),await Ln()}catch(Gr){const Xr=((Qr=(Ct=Gr.response)==null?void 0:Ct.data)==null?void 0:Qr.error)||"No se pudo enviar el recordatorio";u(Xr)}finally{gr(null)}},disabled:Ke==="whatsapp"||!(d!=null&&d.telefono),style:{padding:"0.5rem 0.9rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",background:Ke==="whatsapp"||!(d!=null&&d.telefono)?"#e5e7eb":"#f3f4f6",cursor:Ke==="whatsapp"||!(d!=null&&d.telefono)?"not-allowed":"pointer"},children:Ke==="whatsapp"?"Enviando...":"Forzar WhatsApp"})]}):null]},"recordatorio_evento"));const Fu=parseFloat((d==null?void 0:d.saldo)||(d==null?void 0:d.saldo_pendiente)||0);if(Fu>0){const dr=ue.find(Ct=>Ct.tipo_notificacion==="recordatorio_valores_pendientes")||{total_envios:0,ultimo_envio:null};$a.push(e.jsxs("div",{style:{border:"1px solid #fbbf24",borderRadius:"0.5rem",padding:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",backgroundColor:"#fffbeb"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#92400e"},children:"Recordatorio de valores pendientes"}),e.jsxs("div",{style:{color:"#b45309",fontSize:"0.85rem"},children:["Saldo pendiente: $",Fu.toLocaleString("es-EC",{minimumFractionDigits:2})]}),e.jsx("div",{style:{color:"#b45309",fontSize:"0.85rem"},children:"Medio: Email + WhatsApp"}),e.jsxs("div",{style:{color:"#b45309",fontSize:"0.85rem"},children:["Enviados: ",dr.total_envios||0,dr.ultimo_envio?`  Ultimo: ${new Date(dr.ultimo_envio).toLocaleDateString()}`:""]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:async Ct=>{var Qr,Gr;if(Ct.stopPropagation(),!(d!=null&&d.email)){u("Este evento no tiene correo. No se puede enviar email.");return}try{gr("valores_email");const Xr=await ao.forzarNotificacion(r,"recordatorio_valores_pendientes","email");Xr!=null&&Xr.success?l("Recordatorio de valores pendientes enviado por email"):u((Xr==null?void 0:Xr.error)||"No se pudo enviar el recordatorio"),await Ln()}catch(Xr){const Fn=((Gr=(Qr=Xr.response)==null?void 0:Qr.data)==null?void 0:Gr.error)||"No se pudo enviar el recordatorio";u(Fn)}finally{gr(null)}},disabled:Ke==="valores_email"||!(d!=null&&d.email),style:{padding:"0.5rem 0.9rem",borderRadius:"0.5rem",border:"1px solid #fbbf24",background:Ke==="valores_email"||!(d!=null&&d.email)?"#fef3c7":"#fff",cursor:Ke==="valores_email"||!(d!=null&&d.email)?"not-allowed":"pointer",color:"#92400e",fontWeight:"500"},children:Ke==="valores_email"?"Enviando...":"Forzar email"}),e.jsx("button",{onClick:async Ct=>{var Qr,Gr;if(Ct.stopPropagation(),!(d!=null&&d.telefono)){u("Este evento no tiene telefono. No se puede enviar WhatsApp.");return}try{gr("valores_whatsapp");const Xr=await ao.forzarNotificacion(r,"recordatorio_valores_pendientes","whatsapp");Xr!=null&&Xr.success?l("Recordatorio de valores pendientes enviado por WhatsApp"):u((Xr==null?void 0:Xr.error)||"No se pudo enviar el recordatorio"),await Ln()}catch(Xr){const Fn=((Gr=(Qr=Xr.response)==null?void 0:Qr.data)==null?void 0:Gr.error)||"No se pudo enviar el recordatorio";u(Fn)}finally{gr(null)}},disabled:Ke==="valores_whatsapp"||!(d!=null&&d.telefono),style:{padding:"0.5rem 0.9rem",borderRadius:"0.5rem",border:"1px solid #fbbf24",background:Ke==="valores_whatsapp"||!(d!=null&&d.telefono)?"#fef3c7":"#fff",cursor:Ke==="valores_whatsapp"||!(d!=null&&d.telefono)?"not-allowed":"pointer",color:"#92400e",fontWeight:"500"},children:Ke==="valores_whatsapp"?"Enviando...":"Forzar WhatsApp"})]})]},"recordatorio_valores_pendientes"))}return tt.forEach(dr=>{const Ct=dr.fecha_evento?new Date(dr.fecha_evento):null;let Qr=null;Ct&&(dr.dias_antes===-1?(Qr=new Date(Ct),Qr.setDate(Qr.getDate()+1)):(Qr=new Date(Ct),Qr.setDate(Qr.getDate()-dr.dias_antes)));const Gr=[dr.enviar_email?"Email":null,dr.enviar_whatsapp?"WhatsApp":null].filter(Boolean);$a.push(e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600"},children:dr.nombre}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.85rem"},children:[dr.dias_antes===-1?"Despues del evento":`${dr.dias_antes} dias antes del evento`,Qr?`  ${Qr.toLocaleDateString()}`:""]}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.85rem"},children:["Medio: ",Gr.length>0?Gr.join(" + "):"Sin canal"]}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.85rem"},children:["Enviados: ",dr.total_envios||0,dr.ultimo_envio?`  Ultimo: ${new Date(dr.ultimo_envio).toLocaleDateString()}`:""]})]}),e.jsx("button",{onClick:async()=>{var Xr,Fn;try{gr(dr.tipo_notificacion),await ao.forzarNotificacion(r,dr.tipo_notificacion),l("Recordatorio enviado"),await Ln()}catch(jh){const wh=((Fn=(Xr=jh.response)==null?void 0:Xr.data)==null?void 0:Fn.error)||"No se pudo enviar el recordatorio";u(wh)}finally{gr(null)}},disabled:Ke===dr.tipo_notificacion,style:{padding:"0.5rem 0.9rem",borderRadius:"0.5rem",border:"1px solid #d1d5db",background:Ke===dr.tipo_notificacion?"#e5e7eb":"#f3f4f6",cursor:Ke===dr.tipo_notificacion?"not-allowed":"pointer"},children:Ke===dr.tipo_notificacion?"Enviando...":"Forzar envio"})]},dr.tipo_notificacion))}),$a})()}),Ze.length>0&&e.jsxs("div",{style:{marginTop:"1.5rem",borderTop:"1px solid #e5e7eb",paddingTop:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem",color:"#374151"},children:"Cronograma de Notificaciones Automticas"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Ze.map((b,fe)=>{const pe=bo=>{switch(bo){case"enviado":return{bg:"#dcfce7",color:"#166534",icon:""};case"hoy":return{bg:"#fef3c7",color:"#92400e",icon:""};case"pendiente":return{bg:"#e0e7ff",color:"#3730a3",icon:""};case"pasado":return{bg:"#fee2e2",color:"#991b1b",icon:""};default:return{bg:"#f3f4f6",color:"#374151",icon:""}}},Be=(bo,Ii)=>{switch(bo){case"enviado":return"Enviado";case"hoy":return"Se ejecuta hoy";case"pendiente":return Ii===1?"Maana":`En ${Ii} das`;case"pasado":return"No enviado";default:return""}},ar=pe(b.estado),tt=new Date(b.fecha_ejecucion+"T00:00:00").toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"short"});return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",backgroundColor:ar.bg,borderRadius:"0.5rem",fontSize:"0.875rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"1rem"},children:ar.icon}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500",color:ar.color},children:b.nombre}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.75rem"},children:[b.dias_antes>0?`${b.dias_antes} das antes del evento`:b.dias_antes===-1?"1 da despus del evento":"Da del evento","  ",[b.enviar_email?"Email":null,b.enviar_whatsapp?"WhatsApp":null].filter(Boolean).join(" + ")]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontWeight:"600",color:ar.color},children:tt}),e.jsx("div",{style:{color:"#6b7280",fontSize:"0.75rem"},children:Be(b.estado,b.dias_restantes)})]})]},fe)})})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(zt,{size:20,color:"#10b981"}),"Informacin Financiera"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:[e.jsxs("div",{style:{paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Total del Evento"}),e.jsx("div",{style:{fontWeight:"700",fontSize:"1.5rem",color:"#1f2937"},children:Er(parseFloat(d.total)||0)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Total Pagado"}),e.jsx("div",{style:{fontWeight:"700",fontSize:"1.5rem",color:"#10b981"},children:Er(G)})]}),e.jsxs("div",{style:{paddingTop:"1rem",borderTop:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Saldo Pendiente"}),e.jsx("div",{style:{fontWeight:"700",fontSize:"1.5rem",color:"#f59e0b"},children:Er(Math.max(0,(parseFloat(d.total)||0)-G))})]}),G>0&&e.jsxs("div",{style:{marginTop:"0.5rem"},children:[e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.75rem"},children:["Progreso: ",(G/(parseFloat(d.total)||1)*100).toFixed(1),"%"]}),e.jsx("div",{style:{width:"100%",height:"8px",backgroundColor:"#e5e7eb",borderRadius:"9999px",marginTop:"0.5rem",overflow:"hidden"},children:e.jsx("div",{style:{width:`${Math.min(100,G/(parseFloat(d.total)||1)*100)}%`,height:"100%",backgroundColor:"#10b981",transition:"width 0.3s"}})})]})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[d.nombre_plan||d.plan_id?e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Gt,{size:20,color:"#6366f1"}),"Plan"]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Nombre del Plan"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:d.nombre_plan||"-"})]}),d.precio_plan!==void 0&&d.precio_plan!==null&&e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Precio del Plan"}),e.jsx("div",{style:{fontWeight:"600",fontSize:"1.1rem",color:"#6366f1"},children:Er(parseFloat(d.precio_plan)||0)})]}),d.plan_incluye&&e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Consideraciones del Plan"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem",whiteSpace:"pre-wrap"},children:d.plan_incluye})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Productos y servicios del plan"}),ee?e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Cargando..."}):E.length===0?e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"No hay productos asociados al plan."}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"0.5rem",textAlign:"left",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Producto"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"center",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Cantidad"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Precio Unit."}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Subtotal"})]})}),e.jsx("tbody",{children:E.map((b,fe)=>{const pe=parseFloat(b.cantidad||0),Be=parseFloat(b.precio||0);return e.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[e.jsx("td",{style:{padding:"0.5rem",fontSize:"0.85rem",color:"#374151"},children:b.nombre_producto||"-"}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"center",fontSize:"0.85rem",color:"#374151"},children:pe}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",fontSize:"0.85rem",color:"#374151"},children:Er(Be)}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",fontSize:"0.85rem",fontWeight:"500",color:"#374151"},children:Er(pe*Be)})]},fe)})})]})})]})]})]}):null,e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Gt,{size:20,color:"#6366f1"}),"Servicios del evento"]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[Ws&&!Yr&&e.jsx("button",{type:"button",onClick:()=>wr(!0),disabled:Yr,style:{padding:"0.5rem 0.75rem",backgroundColor:Yr?"#9ca3af":"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:Yr?"not-allowed":"pointer",fontWeight:"500",fontSize:"0.8rem"},children:"+ Agregar servicio"}),Og&&(d==null?void 0:d.plan_id)&&!Yr&&e.jsx("button",{type:"button",onClick:eh,disabled:Yr||B,style:{padding:"0.5rem 0.75rem",backgroundColor:Yr?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:Yr||B?"not-allowed":"pointer",fontWeight:"500",fontSize:"0.8rem"},children:B?"Generando...":"Generar servicios"})]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.35rem"},children:["Avance: ",Ns,"%"]}),e.jsx("div",{style:{width:"100%",height:"8px",backgroundColor:"#e5e7eb",borderRadius:"9999px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${Ns}%`,height:"100%",backgroundColor:Ns>=100?"#10b981":"#6366f1",transition:"width 0.3s"}})})]}),U?e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Cargando servicios..."}):y.length===0?e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"No hay servicios configurados para este evento."}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[y.filter(b=>!b.descartado).map(b=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #e5e7eb",backgroundColor:b.completado?"#ecfdf5":"#f9fafb"},children:[e.jsx("input",{type:"checkbox",checked:!!b.completado,disabled:!Es||Yr||R===b.id,onChange:fe=>Xg(b.id,fe.target.checked),style:{width:"1rem",height:"1rem",cursor:Es&&!Yr?"pointer":"default"}}),e.jsxs("span",{style:{fontSize:"0.9rem",color:b.completado?"#10b981":"#374151",flex:1},children:[b.nombre,b.plan_servicio_id===null&&e.jsx("span",{style:{marginLeft:"0.5rem",fontSize:"0.75rem",color:"#6366f1",fontStyle:"italic"},children:"(Personalizado)"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[b.plan_servicio_id===null&&Ws&&!Yr&&e.jsx("button",{type:"button",onClick:()=>rh(b.id),disabled:hr===b.id,style:{padding:"0.25rem 0.5rem",backgroundColor:hr===b.id?"#9ca3af":"#ef4444",color:"white",borderRadius:"0.25rem",border:"none",cursor:hr===b.id?"not-allowed":"pointer",fontSize:"0.75rem"},title:"Eliminar servicio personalizado",children:hr===b.id?"Eliminando...":"Eliminar"}),b.plan_servicio_id!==null&&_u&&!Yr&&e.jsx("button",{type:"button",onClick:()=>Au(b.id,!0),disabled:R===b.id,style:{padding:"0.25rem 0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.25rem",border:"none",cursor:R===b.id?"not-allowed":"pointer",fontSize:"0.75rem"},title:"Descartar servicio",children:"Descartar"})]})]},b.id)),y.filter(b=>b.descartado).length>0&&e.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.5rem",fontWeight:"500"},children:["Servicios descartados (",y.filter(b=>b.descartado).length,")"]}),y.filter(b=>b.descartado).map(b=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #e5e7eb",backgroundColor:"#fef2f2"},children:[e.jsx("span",{style:{fontSize:"0.85rem",color:"#9ca3af",textDecoration:"line-through"},children:b.nombre}),_u&&!Yr&&e.jsx("button",{type:"button",onClick:()=>Au(b.id,!1),disabled:R===b.id,style:{padding:"0.25rem 0.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.25rem",border:"none",cursor:R===b.id?"not-allowed":"pointer",fontSize:"0.75rem"},title:"Reactivar servicio",children:"Reactivar"})]},b.id))]}),!Es&&e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem"},children:"No tienes permisos para actualizar los servicios."})]})]}),d.observaciones?e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(jt,{size:20,color:"#6366f1"}),"Observaciones"]}),e.jsx("div",{style:{color:"#374151",fontSize:"0.95rem",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:d.observaciones})]}):null]}),(d==null?void 0:d.id_evento)&&e.jsx(k5,{eventoId:d.id_evento,puedeEditar:Ai&&!Yr,compacto:!0}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",marginBottom:"2rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Gt,{size:20,color:"#6366f1"}),"Productos Adicionales"]}),Ai&&!Yr&&e.jsx("button",{type:"button",onClick:ph,disabled:Yr,style:{padding:"0.5rem 1rem",backgroundColor:Yr?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:Yr?"not-allowed":"pointer",fontWeight:"500"},children:"Agregar adicionales"})]}),S.length===0?e.jsx("p",{style:{color:"#6b7280",textAlign:"center",padding:"1.5rem"},children:"No hay productos adicionales registrados"}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Producto"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Cantidad"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Precio Unit."}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Subtotal"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Acciones"})]})}),e.jsx("tbody",{children:S.map((b,fe)=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"0.75rem",fontSize:"0.875rem",color:"#374151"},children:b.nombre_producto||b.nombre||"-"}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",color:"#374151"},children:b.cantidad||0}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",color:"#374151"},children:Er(parseFloat(b.precio_unitario||b.precio||0))}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:Er(parseFloat(b.subtotal||0))}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right"},children:Lg&&!Yr&&e.jsx("button",{type:"button",onClick:()=>oh(b),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",padding:"0.25rem"},title:"Eliminar producto",children:e.jsx(Ar,{size:16})})})]},fe))}),e.jsx("tfoot",{children:e.jsxs("tr",{style:{borderTop:"2px solid #e5e7eb"},children:[e.jsx("td",{colSpan:"4",style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#374151"},children:"Total Productos:"}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#6366f1"},children:Er(S.reduce((b,fe)=>b+parseFloat(fe.subtotal||0),0))})]})})]})})]}),d.estado==="completado"&&e.jsxs("div",{style:{backgroundColor:"white",padding:s?"1rem":"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",marginTop:"1.5rem"},children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem",color:"#8b5cf6",marginBottom:"1.25rem"},children:[e.jsx(Ui,{size:20}),"Informacin de Finalizacin"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"repeat(2, 1fr)",gap:"1.25rem"},children:[e.jsxs("div",{style:{gridColumn:s?"1":"1 / -1"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.35rem"},children:"Observaciones de Finalizacin"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem",backgroundColor:"#f9fafb",padding:"0.75rem",borderRadius:"0.375rem",minHeight:"60px"},children:(We==null?void 0:We.observacion_finalizacion)||d.observacion_finalizacion||"Sin observaciones registradas"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.35rem"},children:"Fecha de Finalizacin"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.95rem"},children:We!=null&&We.fecha_finalizacion||d.fecha_finalizacion?new Date((We==null?void 0:We.fecha_finalizacion)||d.fecha_finalizacion).toLocaleString("es-EC"):"No registrada"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.35rem"},children:"Calificacin del Cliente"}),d.calificacion_cliente?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:"".repeat(d.calificacion_cliente)}),e.jsxs("span",{style:{fontWeight:"600",color:d.calificacion_cliente>=4?"#16a34a":d.calificacion_cliente>=3?"#f59e0b":"#dc2626"},children:[d.calificacion_cliente,"/5"]})]}):e.jsx("div",{style:{color:"#9ca3af",fontStyle:"italic"},children:"Pendiente de calificacin"})]})]}),d.observaciones_calificacion&&e.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:d.calificacion_cliente<5?"#fef3c7":"#ecfdf5",borderRadius:"0.375rem",border:`1px solid ${d.calificacion_cliente<5?"#fcd34d":"#6ee7b7"}`},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem",marginBottom:"0.35rem"},children:" Comentarios del cliente"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.9rem",color:"#374151"},children:d.observaciones_calificacion})]}),((We==null?void 0:We.tiene_danos)||d.tiene_danos)&&(()=>{const b=parseFloat(d.costo_danos||0),fe=parseFloat(d.monto_pagado_danos||0),pe=b-fe,Be=d.cobrar_danos,ar=d.danos_pagados;return e.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",backgroundColor:ar?"#ecfdf5":"#fef2f2",borderRadius:"0.5rem",border:`1px solid ${ar?"#6ee7b7":"#fecaca"}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"0.75rem",marginBottom:"1rem"},children:[e.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"600",color:ar?"#16a34a":"#dc2626",display:"flex",alignItems:"center",gap:"0.5rem"},children:[ar?"":""," Registro de Daos",ar&&e.jsx("span",{style:{fontSize:"0.75rem",backgroundColor:"#16a34a",color:"white",padding:"0.15rem 0.5rem",borderRadius:"9999px"},children:"PAGADO"}),Be&&!ar&&e.jsx("span",{style:{fontSize:"0.75rem",backgroundColor:"#f59e0b",color:"white",padding:"0.15rem 0.5rem",borderRadius:"9999px"},children:"PENDIENTE"})]}),Be&&!ar&&pe>0&&e.jsx("button",{onClick:bh,style:{padding:"0.5rem 1rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"600",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.35rem"},children:" Registrar Pago de Daos"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"repeat(4, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem",marginBottom:"0.25rem"},children:"Costo Total"}),e.jsx("div",{style:{fontWeight:"700",fontSize:"1.25rem",color:"#dc2626"},children:Er(b)})]}),Be&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem",marginBottom:"0.25rem"},children:"Pagado"}),e.jsx("div",{style:{fontWeight:"700",fontSize:"1.25rem",color:"#16a34a"},children:Er(fe)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem",marginBottom:"0.25rem"},children:"Saldo Pendiente"}),e.jsx("div",{style:{fontWeight:"700",fontSize:"1.25rem",color:pe>0?"#f59e0b":"#16a34a"},children:Er(Math.max(0,pe))})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem",marginBottom:"0.25rem"},children:"Se cobra al cliente?"}),e.jsx("div",{style:{fontWeight:"600",fontSize:"0.95rem",color:Be?"#16a34a":"#6b7280"},children:Be?" S, se cobra":" No (asumido por empresa)"})]})]}),ar&&d.fecha_pago_danos&&e.jsxs("div",{style:{backgroundColor:"white",padding:"0.75rem",borderRadius:"0.375rem",marginBottom:"1rem",border:"1px solid #6ee7b7"},children:[e.jsxs("div",{style:{display:"flex",gap:"1.5rem",flexWrap:"wrap",fontSize:"0.875rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280"},children:"Fecha de pago: "}),e.jsx("span",{style:{fontWeight:"500"},children:new Date(d.fecha_pago_danos).toLocaleString("es-EC")})]}),d.metodo_pago_danos&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"#6b7280"},children:"Mtodo: "}),e.jsx("span",{style:{fontWeight:"500",textTransform:"capitalize"},children:d.metodo_pago_danos})]})]}),d.observaciones_pago_danos&&e.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem"},children:[e.jsx("span",{style:{color:"#6b7280"},children:"Observaciones: "}),e.jsx("span",{children:d.observaciones_pago_danos})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem",marginBottom:"0.35rem"},children:"Descripcin de los Daos"}),e.jsx("div",{style:{fontWeight:"500",fontSize:"0.9rem",backgroundColor:"white",padding:"0.75rem",borderRadius:"0.375rem",border:`1px solid ${ar?"#6ee7b7":"#fecaca"}`},children:d.descripcion_danos||"Sin descripcin"})]}),Pr.length>0&&e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem",marginBottom:"0.5rem"},children:"Detalle de Daos Registrados"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Pr.map((tt,bo)=>e.jsxs("div",{style:{backgroundColor:"white",padding:"0.75rem",borderRadius:"0.375rem",border:`1px solid ${ar?"#6ee7b7":"#fecaca"}`,fontSize:"0.875rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"0.5rem"},children:[e.jsx("span",{style:{fontWeight:"500"},children:tt.item_danado||tt.descripcion}),e.jsx("span",{style:{color:"#dc2626",fontWeight:"600"},children:Er(parseFloat(tt.costo_total)||0)})]}),tt.observaciones&&e.jsx("div",{style:{color:"#6b7280",fontSize:"0.8rem",marginTop:"0.25rem"},children:tt.observaciones})]},tt.id||bo))})]})]})})()]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",marginTop:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",gap:"1rem",flexWrap:"wrap"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"Pagos"}),zu&&e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[Wi>0&&!Yr&&e.jsxs("button",{onClick:()=>{Re(b=>({...b,tipo_pago:"abono"})),F(!0)},style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1.25rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:b=>b.target.style.backgroundColor="#059669",onMouseLeave:b=>b.target.style.backgroundColor="#10b981",children:[e.jsx(zt,{size:16}),"Registrar Pago"]}),Ru&&!Yr&&e.jsxs("button",{onClick:()=>{if(lt<=0){K("No hay saldo disponible para reembolsar.");return}Re(b=>({...b,tipo_pago:"reembolso",monto:lt||""})),F(!0)},disabled:lt<=0,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1.25rem",backgroundColor:lt<=0?"#fca5a5":"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:lt<=0?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500",transition:"background-color 0.2s"},children:[e.jsx(zt,{size:16}),"Registrar reembolso"]})]})]}),x.length===0?e.jsx("p",{style:{color:"#6b7280",textAlign:"center",padding:"2rem"},children:"No hay pagos registrados"}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"ID"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Fecha"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Tipo"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Mtodo"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Cuenta"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Referencia"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Observacin"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Monto"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Origen"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:x.map(b=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsxs("td",{style:{padding:"0.75rem",fontSize:"0.85rem",color:"#6b7280",fontWeight:"600"},children:["#",b.id]}),e.jsx("td",{style:{padding:"0.75rem",fontSize:"0.85rem"},children:ah(b.fecha_pago)}),e.jsx("td",{style:{padding:"0.75rem"},children:b.tipo_pago||"-"}),e.jsx("td",{style:{padding:"0.75rem"},children:b.metodo_pago||"-"}),e.jsx("td",{style:{padding:"0.75rem",fontSize:"0.8rem",color:"#4f46e5",fontWeight:"500"},children:b.nombre_cuenta||"-"}),e.jsx("td",{style:{padding:"0.75rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",...lh(b.estado_pago)},children:Pu(b.estado_pago)})}),e.jsx("td",{style:{padding:"0.75rem"},children:b.numero_referencia||"-"}),e.jsx("td",{style:{padding:"0.75rem"},children:b.observaciones||"-"}),e.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:"500",color:b.tipo_pago==="reembolso"?"#ef4444":"#10b981"},children:[b.tipo_pago==="reembolso"?"-":"+",Er(b.monto||0)]}),e.jsx("td",{style:{padding:"0.75rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:b.origen==="web"?"#dbeafe":b.origen==="whatsapp"?"#dcfce7":"#f3f4f6",color:b.origen==="web"?"#1e40af":b.origen==="whatsapp"?"#166534":"#374151"},children:b.origen==="web"?"Web":b.origen==="whatsapp"?"WhatsApp":"Escritorio"})}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>sh(b),style:{padding:"0.35rem 0.5rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer"},title:"Ver detalle",children:e.jsx(St,{size:16})}),Ru&&e.jsx("button",{onClick:()=>{if(!(b.tipo_pago==="reembolso"||b.estado_pago!=="aprobado")){if(lt<=0){K("No hay saldo disponible para reembolsar.");return}Re(fe=>({...fe,tipo_pago:"reembolso",monto:Math.min(parseFloat(b.monto||0),lt),metodo_pago:fe.metodo_pago||"efectivo",fecha_pago:new Date().toISOString().split("T")[0]})),F(!0)}},disabled:b.tipo_pago==="reembolso"||b.estado_pago!=="aprobado"||lt<=0,style:{padding:"0.35rem 0.5rem",backgroundColor:b.tipo_pago==="reembolso"||b.estado_pago!=="aprobado"||lt<=0?"#fca5a5":"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:b.tipo_pago==="reembolso"||b.estado_pago!=="aprobado"||lt<=0?"not-allowed":"pointer"},title:"Registrar reembolso",children:e.jsx(zt,{size:16})}),b.estado_pago==="en_revision"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Du(b,"aprobado"),disabled:!Is,style:{padding:"0.35rem 0.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:Is?"pointer":"not-allowed",opacity:Is?1:.6},title:"Aprobar pago",children:e.jsx(Ui,{size:16})}),e.jsx("button",{onClick:()=>Du(b,"rechazado"),disabled:!Ts,style:{padding:"0.35rem 0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:Ts?"pointer":"not-allowed",opacity:Ts?1:.6},title:"Anular pago",children:e.jsx($v,{size:16})})]})]})})]},b.id))})]})})]}),V&&zu&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:()=>!Ue&&F(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600"},children:M.tipo_pago==="reembolso"?"Registrar Reembolso":"Registrar Pago"}),e.jsx("button",{onClick:()=>F(!1),disabled:Ue,style:{background:"none",border:"none",cursor:Ue?"not-allowed":"pointer",padding:"0.5rem",display:"flex",alignItems:"center",color:"#6b7280"},children:e.jsx(er,{size:20})})]}),e.jsxs("form",{onSubmit:mh,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsx("div",{style:{background:"#f0f9ff",color:"#0369a1",border:"1px solid #bae6fd",borderRadius:"0.5rem",padding:"0.75rem",fontSize:"0.85rem"},children:$g?"Al registrar este pago se enviara una notificacion automatica al cliente.":"Este evento no tiene email/telefono registrado, por lo que no se enviara notificacion."}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Monto *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",required:!0,value:M.monto,onChange:Gg,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:["Tipo de Pago ",e.jsx("span",{style:{color:"#6b7280",fontWeight:"400",fontSize:"0.75rem"},children:"(automtico)"})]}),e.jsxs("div",{style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:M.tipo_pago==="reembolso"?"#fef2f2":M.tipo_pago==="pago_completo"?"#f0fdf4":"#eff6ff",color:M.tipo_pago==="reembolso"?"#dc2626":M.tipo_pago==="pago_completo"?"#16a34a":"#2563eb",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{children:M.tipo_pago==="abono"?"Abono":M.tipo_pago==="pago_completo"?"Pago Completo":"Reembolso"}),M.tipo_pago!=="reembolso"&&e.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"400"},children:["Saldo: $",Wi.toLocaleString("es-EC",{minimumFractionDigits:2})]})]}),M.tipo_pago==="pago_completo"&&e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"#16a34a"},children:"El monto cubre el saldo pendiente del evento."}),M.tipo_pago==="reembolso"&&e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",color:"#ef4444"},children:"Este reembolso se descontar del total pagado y requiere confirmacin."})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Mtodo de Pago *"}),e.jsxs("select",{required:!0,value:M.metodo_pago,onChange:b=>Re({...M,metodo_pago:b.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"efectivo",children:"Efectivo"}),e.jsx("option",{value:"transferencia",children:"Transferencia"}),e.jsx("option",{value:"tarjeta",children:"Tarjeta"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"otro",children:"Otro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Fecha de Pago *"}),e.jsx("input",{type:"date",required:!0,value:M.fecha_pago,onChange:b=>Re({...M,fecha_pago:b.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Nmero de Referencia"}),e.jsx("input",{type:"text",value:M.numero_referencia,onChange:b=>Re({...M,numero_referencia:b.target.value}),placeholder:"Opcional",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Observaciones"}),e.jsx("textarea",{value:M.observaciones,onChange:b=>Re({...M,observaciones:b.target.value}),placeholder:"Opcional",rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>F(!1),disabled:Ue,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:Ue?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:Ue,style:{flex:1,padding:"0.75rem",backgroundColor:Ue?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:Ue?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:Ue?"Guardando...":M.tipo_pago==="reembolso"?"Registrar Reembolso":"Registrar Pago"})]})]})]})}),se&&ie&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100,padding:"1rem"},onClick:()=>me(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",margin:0},children:"Detalle del pago"}),e.jsx("button",{onClick:()=>me(!1),style:{background:"none",border:"none",cursor:"pointer"},children:e.jsx(er,{size:20,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem",fontSize:"0.95rem"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"ID:"})," ",ie.id]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Fecha:"})," ",Ma(ie.fecha_pago)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Tipo:"})," ",ie.tipo_pago||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Mtodo:"})," ",ie.metodo_pago||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Estado:"})," ",Pu(ie.estado_pago)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Referencia:"})," ",ie.numero_referencia||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Observacin:"})," ",ie.observaciones||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Monto:"})," ",Er(ie.monto||0)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Origen:"})," ",ie.origen||"-"]})]})]})}),Te&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1200,padding:"1rem"},onClick:()=>Q(null),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:b=>b.stopPropagation(),children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.75rem"},children:Te.nuevoEstado==="aprobado"?"Aprobar pago":"Anular pago"}),e.jsxs("div",{style:{color:"#374151",marginBottom:"0.5rem"},children:["Vas a ",Te.nuevoEstado==="aprobado"?"aprobar":"anular"," el pago de"," ",Er(Te.pago.monto||0),"."]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:"1rem"},children:["Mtodo: ",Te.pago.metodo_pago||"-","  Fecha: ",Ma(Te.pago.fecha_pago)]}),Te.nuevoEstado==="aprobado"&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",fontWeight:"500",color:"#374151"},children:[e.jsx(an,{size:18,color:"#4f46e5"}),"Cuenta Destino ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:Z,onChange:b=>ce(b.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",backgroundColor:"white"},children:[e.jsx("option",{value:"",children:"Seleccionar cuenta..."}),g.map(b=>e.jsxs("option",{value:b.id,children:[b.nombre," ",b.numero_cuenta?`- ${b.numero_cuenta}`:""]},b.id))]}),!Z&&e.jsx("div",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem"},children:"Seleccione la cuenta donde se registrar este pago"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsx("button",{type:"button",onClick:()=>Q(null),style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:ch,disabled:Te.nuevoEstado==="aprobado"&&!Z,style:{flex:1,padding:"0.75rem",backgroundColor:Te.nuevoEstado==="aprobado"&&!Z?"#9ca3af":Te.nuevoEstado==="aprobado"?"#10b981":"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:Te.nuevoEstado==="aprobado"&&!Z?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Confirmar"})]})]})}),Pe&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100,padding:"1rem"},onClick:()=>!Ue&&I(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:b=>b.stopPropagation(),children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.75rem"},children:"Confirmar reembolso"}),e.jsxs("div",{style:{color:"#374151",marginBottom:"0.5rem"},children:["Ests a punto de registrar un reembolso de ",Er(M.monto||0),"."]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:["Disponible para reembolsar: ",Er(lt)]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>I(!1),disabled:Ue,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:Ue?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:async()=>{I(!1),await Mu(!0)},disabled:Ue,style:{flex:1,padding:"0.75rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:Ue?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Confirmar reembolso"})]})]})}),be&&Ai&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:()=>!ve&&Ce(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"Agregar producto adicional"}),e.jsx("button",{onClick:()=>Ce(!1),disabled:ve,style:{background:"none",border:"none",cursor:ve?"not-allowed":"pointer",padding:"0.5rem",display:"flex",alignItems:"center",color:"#6b7280"},children:e.jsx(er,{size:20})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Producto *"}),e.jsxs("select",{value:qe.producto_id,onChange:b=>ne({...qe,producto_id:b.target.value}),disabled:v||ve,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"",children:v?"Cargando productos...":"Selecciona un producto"}),j.map(b=>e.jsxs("option",{value:b.id,children:[b.nombre," ",b.precio?`- ${Er(b.precio)}`:""]},b.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Cantidad *"}),e.jsx("input",{type:"number",min:"1",step:"1",value:qe.cantidad,onChange:b=>ne({...qe,cantidad:b.target.value}),disabled:ve,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),ke&&e.jsx("div",{style:{color:"#ef4444",fontSize:"0.875rem",marginTop:"0.75rem"},children:ke}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>Ce(!1),disabled:ve,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:ve?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:nh,disabled:ve,style:{flex:1,padding:"0.75rem",backgroundColor:ve?"#93c5fd":"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:ve?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:ve?"Agregando...":"Agregar"})]})]})}),Qe&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:()=>!Le&&Ne(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"Eliminar producto"}),e.jsx("button",{onClick:()=>Ne(!1),disabled:Le,style:{background:"none",border:"none",cursor:Le?"not-allowed":"pointer",padding:"0.5rem",display:"flex",alignItems:"center",color:"#6b7280"},children:e.jsx(er,{size:20})})]}),e.jsx("div",{style:{marginBottom:"1rem",color:"#374151"},children:(L==null?void 0:L.nombre_producto)||(L==null?void 0:L.nombre)||"Producto"}),e.jsx("div",{style:{marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Observacin *"}),e.jsx("textarea",{value:Se,onChange:b=>{je(b.target.value),Me&&$e("")},placeholder:"Describe el motivo de la eliminacin",rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem",resize:"vertical"}}),Me&&e.jsx("div",{style:{color:"#ef4444",fontSize:"0.875rem",marginTop:"0.5rem"},children:Me}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>Ne(!1),disabled:Le,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:Le?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:ih,disabled:Le,style:{flex:1,padding:"0.75rem",backgroundColor:Le?"#fca5a5":"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:Le?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:Le?"Eliminando...":"Eliminar"})]})]})}),Dg&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50,padding:s?"1rem":"0"},onClick:Fa,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:s?"1.25rem":"1.5rem",width:"100%",maxWidth:"450px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#6366f1",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Registrar Calificacin"}),e.jsx("button",{onClick:Fa,disabled:Pn,style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",color:"#6b7280"},children:e.jsx(er,{size:20})})]}),e.jsxs("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.75rem"},children:"Seleccione la calificacin del cliente"}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem"},children:[1,2,3,4,5].map(b=>e.jsx("button",{type:"button",onClick:()=>Pa({...Vr,calificacion:b}),style:{width:"3rem",height:"3rem",borderRadius:"0.5rem",border:Vr.calificacion===b?"3px solid #f59e0b":"1px solid #d1d5db",backgroundColor:Vr.calificacion>=b?"#fef3c7":"white",cursor:"pointer",fontSize:"1.5rem",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:Vr.calificacion>=b?"":""},b))}),e.jsxs("div",{style:{marginTop:"0.5rem",fontWeight:"600",color:"#f59e0b"},children:[Vr.calificacion===5&&"Excelente",Vr.calificacion===4&&"Muy Bueno",Vr.calificacion===3&&"Bueno",Vr.calificacion===2&&"Regular",Vr.calificacion===1&&"Malo"]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem"},children:["Observaciones del cliente ",Vr.calificacion<5&&e.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),e.jsx("textarea",{value:Vr.observaciones,onChange:b=>Pa({...Vr,observaciones:b.target.value}),placeholder:Vr.calificacion<5?"Ingrese los comentarios del cliente...":"Comentarios opcionales...",rows:3,style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",resize:"vertical"}}),Vr.calificacion<5&&!Vr.observaciones&&e.jsx("div",{style:{color:"#dc2626",fontSize:"0.75rem",marginTop:"0.25rem"},children:"Se requieren observaciones para calificaciones menores a 5"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:Fa,disabled:Pn,style:{padding:"0.65rem 1.25rem",backgroundColor:"#f3f4f6",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:vh,disabled:Pn||Vr.calificacion<5&&!Vr.observaciones.trim(),style:{padding:"0.65rem 1.25rem",backgroundColor:Pn?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:Pn||Vr.calificacion<5&&!Vr.observaciones.trim()?"not-allowed":"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.35rem"},children:Pn?"Guardando...":" Guardar Calificacin"})]})]})}),Pg&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50,padding:s?"1rem":"0"},onClick:La,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:s?"1.25rem":"1.5rem",width:"100%",maxWidth:"450px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#10b981",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Registrar Pago de Daos"}),e.jsx("button",{onClick:La,disabled:Dn,style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",color:"#6b7280"},children:e.jsx(er,{size:20})})]}),e.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",backgroundColor:"#fef2f2",borderRadius:"0.5rem",border:"1px solid #fecaca"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem"},children:[e.jsx("span",{style:{color:"#6b7280"},children:"Costo total de daos:"}),e.jsx("span",{style:{fontWeight:"600",color:"#dc2626"},children:Er(parseFloat((d==null?void 0:d.costo_danos)||0))})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem",marginTop:"0.25rem"},children:[e.jsx("span",{style:{color:"#6b7280"},children:"Ya pagado:"}),e.jsx("span",{style:{fontWeight:"600",color:"#16a34a"},children:Er(parseFloat((d==null?void 0:d.monto_pagado_danos)||0))})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem",marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #fecaca"},children:[e.jsx("span",{style:{fontWeight:"500"},children:"Saldo pendiente:"}),e.jsx("span",{style:{fontWeight:"700",color:"#f59e0b"},children:Er(Math.max(0,parseFloat((d==null?void 0:d.costo_danos)||0)-parseFloat((d==null?void 0:d.monto_pagado_danos)||0)))})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem"},children:"Monto a pagar *"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:ho.monto,onChange:b=>Ei({...ho,monto:b.target.value}),placeholder:"0.00",style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem"},children:"Mtodo de pago"}),e.jsxs("select",{value:ho.metodo_pago,onChange:b=>Ei({...ho,metodo_pago:b.target.value}),style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"},children:[e.jsx("option",{value:"efectivo",children:"Efectivo"}),e.jsx("option",{value:"transferencia",children:"Transferencia"}),e.jsx("option",{value:"tarjeta",children:"Tarjeta"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"otro",children:"Otro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem"},children:"Observaciones (opcional)"}),e.jsx("textarea",{value:ho.observaciones,onChange:b=>Ei({...ho,observaciones:b.target.value}),placeholder:"Notas adicionales sobre el pago...",rows:2,style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:La,disabled:Dn,style:{padding:"0.65rem 1.25rem",backgroundColor:"#f3f4f6",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:xh,disabled:Dn||!ho.monto,style:{padding:"0.65rem 1.25rem",backgroundColor:Dn?"#9ca3af":"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:Dn?"not-allowed":"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.35rem"},children:Dn?"Registrando...":" Registrar Pago"})]})]})}),de&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50,padding:s?"1rem":"0"},onClick:Oa,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:s?"1.25rem":"1.5rem",width:"100%",maxWidth:"560px",maxHeight:s?"90vh":"85vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#8b5cf6",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ui,{size:24}),"Finalizar Evento"]}),e.jsx("button",{onClick:Oa,disabled:Ye,style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",color:"#6b7280"},children:e.jsx(er,{size:20})})]}),e.jsx("div",{style:{marginBottom:"1.25rem",padding:"0.75rem",backgroundColor:"#f3f4f6",borderRadius:"0.5rem"},children:e.jsxs("p",{style:{fontSize:"0.875rem",color:"#4b5563"},children:["Al finalizar el evento, se marcar como ",e.jsx("strong",{children:"completado"})," y se enviar una notificacin al cliente solicitando su valoracin."]})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",fontSize:"0.875rem"},children:"Observaciones de finalizacin"}),e.jsx("textarea",{value:z.observacion_finalizacion,onChange:b=>we({...z,observacion_finalizacion:b.target.value}),placeholder:"Ingrese observaciones generales sobre cmo se desarroll el evento...",rows:3,style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",resize:"vertical"}})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:z.tiene_danos?"#fef2f2":"#f9fafb",borderRadius:"0.5rem",border:z.tiene_danos?"1px solid #fecaca":"1px solid #e5e7eb"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:z.tiene_danos,onChange:b=>we({...z,tiene_danos:b.target.checked,descripcion_danos:b.target.checked?z.descripcion_danos:"",costo_danos:b.target.checked?z.costo_danos:"",cobrar_danos:b.target.checked?z.cobrar_danos:!1}),style:{width:"18px",height:"18px",accentColor:"#ef4444"}}),e.jsx("span",{style:{fontWeight:"600",color:z.tiene_danos?"#dc2626":"#374151"},children:"Hubo daos durante el evento"})]}),z.tiene_danos&&e.jsxs("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.35rem",fontWeight:"500",fontSize:"0.8rem",color:"#6b7280"},children:"Descripcin de los daos *"}),e.jsx("textarea",{value:z.descripcion_danos,onChange:b=>we({...z,descripcion_danos:b.target.value}),placeholder:"Describa detalladamente los daos ocasionados (ej: Silla rota, mantel manchado, etc.)",rows:3,style:{width:"100%",padding:"0.6rem",border:"1px solid #fecaca",borderRadius:"0.375rem",fontSize:"0.875rem",resize:"vertical",backgroundColor:"white"}})]}),e.jsx("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:e.jsxs("div",{style:{flex:1,minWidth:"140px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.35rem",fontWeight:"500",fontSize:"0.8rem",color:"#6b7280"},children:"Costo de los daos ($)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:z.costo_danos,onChange:b=>we({...z,costo_danos:b.target.value}),placeholder:"0.00",style:{width:"100%",padding:"0.6rem",border:"1px solid #fecaca",borderRadius:"0.375rem",fontSize:"0.875rem",backgroundColor:"white"}})]})}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",padding:"0.75rem",backgroundColor:z.cobrar_danos?"#dcfce7":"white",borderRadius:"0.375rem",border:z.cobrar_danos?"1px solid #86efac":"1px solid #e5e7eb"},children:[e.jsx("input",{type:"checkbox",checked:z.cobrar_danos,onChange:b=>we({...z,cobrar_danos:b.target.checked}),style:{width:"16px",height:"16px",accentColor:"#16a34a"}}),e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:"500",color:"#374151"},children:"Cobrar al cliente"}),e.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.15rem"},children:"Se agregar un cargo adicional al evento por el monto especificado"})]})]})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:Oa,disabled:Ye,style:{padding:"0.65rem 1.25rem",backgroundColor:"#f3f4f6",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:gh,disabled:Ye||z.tiene_danos&&!z.descripcion_danos.trim(),style:{padding:"0.65rem 1.25rem",backgroundColor:Ye?"#9ca3af":"#8b5cf6",color:"white",borderRadius:"0.375rem",border:"none",cursor:Ye?"not-allowed":"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.35rem"},children:Ye?"Finalizando...":e.jsxs(e.Fragment,{children:[e.jsx(Ui,{size:18}),"Finalizar evento"]})})]})]})}),Ae&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:()=>!te&&De(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"Eliminar evento"}),e.jsx("button",{onClick:()=>De(!1),disabled:te,style:{background:"none",border:"none",cursor:te?"not-allowed":"pointer",padding:"0.5rem",display:"flex",alignItems:"center",color:"#6b7280"},children:e.jsx(er,{size:20})})]}),e.jsx("div",{style:{color:"#374151",marginBottom:"0.75rem"},children:"Est seguro de eliminar este evento? Esta accin no se puede deshacer."}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#6b7280"},children:["Total pagado: ",Er(G),"  Total reembolsos: ",Er(re)]}),lt>0&&e.jsxs("div",{style:{marginTop:"0.5rem",color:"#ef4444",fontSize:"0.85rem"},children:["Debes reembolsar ",Er(lt)," antes de eliminar."]}),$&&e.jsx("div",{style:{marginTop:"0.5rem",color:"#ef4444",fontSize:"0.85rem"},children:$}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>De(!1),disabled:te,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:te?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:Zg,disabled:te||lt>0,style:{flex:1,padding:"0.75rem",backgroundColor:te||lt>0?"#fca5a5":"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:te||lt>0?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:te?"Eliminando...":"Eliminar"})]})]})}),or&&Ws&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:()=>{wr(!1),Ur({nombre:""}),nr("")},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"Agregar servicio personalizado"}),e.jsx("button",{type:"button",onClick:()=>{wr(!1),Ur({nombre:""}),nr("")},style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#6b7280",padding:0,width:"2rem",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#374151"},children:"Nombre del servicio"}),e.jsx("input",{type:"text",value:$r.nombre,onChange:b=>{Ur({nombre:b.target.value}),nr("")},placeholder:"Ej: Confirmar decoracin, Revisar iluminacin, etc.",style:{width:"100%",padding:"0.75rem",borderRadius:"0.375rem",border:"1px solid #d1d5db",fontSize:"0.875rem"},onKeyPress:b=>{b.key==="Enter"&&Iu()}}),he&&e.jsx("div",{style:{color:"#ef4444",fontSize:"0.875rem",marginTop:"0.5rem"},children:he})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>{wr(!1),Ur({nombre:""}),nr("")},style:{padding:"0.75rem 1.5rem",borderRadius:"0.375rem",border:"1px solid #d1d5db",backgroundColor:"white",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:Iu,disabled:sr||!$r.nombre.trim(),style:{padding:"0.75rem 1.5rem",borderRadius:"0.375rem",border:"none",backgroundColor:sr||!$r.nombre.trim()?"#9ca3af":"#10b981",color:"white",cursor:sr||!$r.nombre.trim()?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:sr?"Creando...":"Crear servicio"})]})]})}),br&&zr&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(15, 23, 42, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1200,padding:"1rem"},onClick:()=>lr(!1),children:e.jsxs("div",{style:{background:"white",borderRadius:"0.75rem",padding:"1.5rem",width:"100%",maxWidth:"860px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",marginBottom:"0.25rem"},children:zr.titulo}),e.jsx("p",{style:{color:"#6b7280",fontSize:"0.85rem"},children:"Vista previa del mensaje que se enviara"})]}),e.jsx("button",{onClick:()=>lr(!1),style:{border:"none",background:"transparent",cursor:"pointer",fontSize:"1.2rem"},children:""})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"0.95rem",marginBottom:"0.5rem"},children:"Email"}),e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.75rem",background:"#f9fafb",minHeight:"180px"},dangerouslySetInnerHTML:{__html:zr.email.replace(/\n/g,"<br>")}})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"0.95rem",marginBottom:"0.5rem"},children:"WhatsApp"}),e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"0.75rem",background:"#f9fafb",minHeight:"180px",whiteSpace:"pre-wrap"},children:zr.whatsapp||"Sin plantilla"})]})]})]})})]})},Ap=()=>{const r=_o(),{id:t}=vs(),o=!!t,[n,i]=c.useState(!1),[a,l]=c.useState(""),[u,s]=c.useState(!1),[d,f]=c.useState(!1),[x,h]=c.useState(null),[S,C]=c.useState([]),[j,P]=c.useState([]),[v,m]=c.useState([]),[y,k]=c.useState([]),[U,X]=c.useState([]),[R,w]=c.useState(!0),[B,q]=c.useState([]),[E,T]=c.useState(!1),[ee,H]=c.useState(0),[G,O]=c.useState(null),[re,W]=c.useState(null),[Y,D]=c.useState(null),[oe,K]=c.useState(null),[V,F]=c.useState([]),[se,me]=c.useState(!1),[ie,ge]=c.useState({producto_id:"",cantidad:"1"}),Te=()=>new Date().toISOString().split("T")[0],[Q,g]=c.useState({cliente_id:"",plan_id:"",id_salon:"",nombre_evento:"",tipo_evento:"",fecha_evento:Te(),hora_inicio:"20:00",hora_fin:"02:00",numero_invitados:"50",estado:"cotizacion",total:"",observaciones:""});c.useEffect(()=>{p()},[]),c.useEffect(()=>{!o||R||d||ce()},[o,R,d]);const p=async()=>{var ne;try{if(w(!0),l(""),!localStorage.getItem("token")){l("Sesin expirada. Por favor, inicia sesin nuevamente."),setTimeout(()=>{window.location.href="/login"},2e3);return}const ke=await Promise.allSettled([so.getAll().then(ve=>({tipo:"clientes",data:ve})),xt.getAll(!0).then(ve=>({tipo:"planes",data:ve})),vn.getAll(!0).then(ve=>({tipo:"salones",data:ve})),No.getAll(!0).then(ve=>({tipo:"productos",data:ve})),Rg.getAll(!0).then(ve=>({tipo:"tipos_evento",data:ve}))]);let ye=[];if(ke.forEach((ve,Ee)=>{var Qe;if(ve.status==="fulfilled"){const{tipo:Ne,data:L}=ve.value;Ne==="clientes"?C(L.clientes||[]):Ne==="planes"?P(L.planes||[]):Ne==="salones"?m(L.salones||[]):Ne==="productos"?k(L.productos||[]):Ne==="tipos_evento"&&X(L.tipos_evento||[])}else{const Ne=ve.reason;console.error(`Error al cargar ${["clientes","planes","salones","productos","tipos_evento"][Ee]}:`,Ne),((Qe=Ne.response)==null?void 0:Qe.status)===401?ye.push("Sesin expirada"):ye.push(`Error al cargar ${["clientes","planes","salones","productos","tipos_evento"][Ee]}`)}}),ye.some(ve=>ve==="Sesin expirada"))l("Tu sesin ha expirado. Por favor, inicia sesin nuevamente."),setTimeout(()=>{localStorage.removeItem("token"),localStorage.removeItem("usuario"),window.location.href="/login"},3e3);else if(ye.length>0){const ve=ye.length===5?"Error al cargar los datos. Por favor, verifica tu conexin y recarga la pgina.":`Algunos datos no se pudieron cargar: ${ye.join(", ")}. Puedes continuar creando el evento.`;l(ve)}}catch(ke){console.error("Error inesperado al cargar datos:",ke),((ne=ke.response)==null?void 0:ne.status)===401?(l("Tu sesin ha expirado. Por favor, inicia sesin nuevamente."),setTimeout(()=>{localStorage.removeItem("token"),localStorage.removeItem("usuario"),window.location.href="/login"},3e3)):l("Error al cargar los datos necesarios. Por favor, recarga la pgina.")}finally{w(!1)}},Z=ne=>{if(!ne)return"";if(typeof ne=="string"){const ke=ne.split(":");return ke.length>=2?`${ke[0]}:${ke[1]}`:ne}return ne},ce=async()=>{try{s(!0),l("");const ne=await ur.getById(t),ke=(ne==null?void 0:ne.evento)||ne;if(!ke){l("No se encontr el evento para editar.");return}h(ke),g({cliente_id:ke.id_cliente||ke.cliente_id||"",plan_id:ke.plan_id?String(ke.plan_id):"",id_salon:ke.id_salon?String(ke.id_salon):"",nombre_evento:ke.nombre_evento||"",tipo_evento:ke.tipo_evento||"",fecha_evento:ke.fecha_evento||Te(),hora_inicio:Z(ke.hora_inicio),hora_fin:Z(ke.hora_fin),numero_invitados:ke.numero_invitados?String(ke.numero_invitados):"",estado:ke.estado||"cotizacion",total:ke.total??"",observaciones:ke.observaciones||""});const ye=j.find(Ee=>Ee.id===parseInt(ke.plan_id));ye?(H(parseFloat(ye.precio_base||0)),O(ye.capacidad_minima||null),W(ye.capacidad_maxima||null),D(ye.duracion_horas||null)):(H(0),O(null),W(null),D(null));const ve=v.find(Ee=>(Ee.id_salon||Ee.id)===parseInt(ke.id_salon));K(ve&&ve.capacidad||null);try{const Ee=await ur.getProductos(t),Qe=(Ee==null?void 0:Ee.productos)||[];q(Qe.map(Ne=>({producto_id:Ne.producto_id,nombre:Ne.nombre_producto||Ne.nombre||"Producto",cantidad:parseInt(Ne.cantidad||0,10),precio_unitario:parseFloat(Ne.precio_unitario||0),subtotal:parseFloat(Ne.subtotal||0)})))}catch(Ee){console.error("Error al cargar productos del evento:",Ee)}}catch(ne){console.error("Error al cargar evento para editar:",ne),l("Error al cargar el evento para edicin.")}finally{s(!1),f(!0)}},be=ne=>{const{name:ke,value:ye}=ne.target;if(g(ve=>({...ve,[ke]:ye})),ke==="tipo_evento"&&g(ve=>{const Ee=ve.nombre_evento||"",Qe=ve.tipo_evento||"";if(!Ee)return{...ve,nombre_evento:ye?`${ye} - `:""};if(Qe&&Ee.startsWith(`${Qe} - `)){const Ne=Ee.substring(Qe.length+3);return{...ve,nombre_evento:ye?`${ye} - ${Ne}`:Ne}}return ve}),ke==="plan_id"){const ve=j.find(Ee=>Ee.id===parseInt(ye));ve?(H(parseFloat(ve.precio_base||0)),O(ve.capacidad_minima||null),W(ve.capacidad_maxima||null),D(ve.duracion_horas||null)):(H(0),O(null),W(null),D(null))}if(ke==="numero_invitados"){const ve=parseInt(ye),Ee=j.find(Se=>Se.id===parseInt(Q.plan_id)),Qe=Ee==null?void 0:Ee.capacidad_minima,Ne=Ee==null?void 0:Ee.capacidad_maxima,L=v.find(Se=>(Se.id_salon||Se.id)===parseInt(Q.id_salon)),ze=L==null?void 0:L.capacidad;if(!ye){g(Se=>({...Se,plan_id:"",id_salon:""})),H(0),O(null),W(null),D(null),K(null);return}Ee&&(Qe&&ve<Qe||Ne&&ve>Ne)&&(g(Se=>({...Se,plan_id:""})),H(0),O(null),W(null),D(null)),L&&ze&&ve>ze&&(g(Se=>({...Se,id_salon:""})),K(null))}if(ke==="id_salon"){const ve=v.find(Ee=>(Ee.id_salon||Ee.id)===parseInt(ye));ve?(K(ve.capacidad||null),Ce(parseInt(ye))):(K(null),F([]))}},Ce=async ne=>{if(!ne){F([]);return}try{me(!0);const ke=await ur.getFechasOcupadas(ne);F(ke.fechas_ocupadas||[])}catch(ke){console.error("Error al cargar fechas ocupadas:",ke),F([])}finally{me(!1)}},Ae=()=>{const ne=B.reduce((ke,ye)=>ke+(parseFloat(ye.subtotal)||0),0);return ee+ne},De=()=>{if(!ie.producto_id||!ie.cantidad||parseInt(ie.cantidad)<=0){l("Debes seleccionar un producto y una cantidad vlida");return}const ne=y.find(Ee=>Ee.id===parseInt(ie.producto_id));if(!ne){l("Producto no encontrado");return}const ke=parseInt(ie.cantidad),ye=parseFloat(ne.precio||0),ve=ke*ye;if(B.find(Ee=>Ee.producto_id===ne.id)){l("Este producto ya est agregado. Elimnalo primero si deseas cambiar la cantidad.");return}q(Ee=>[...Ee,{producto_id:ne.id,nombre:ne.nombre,cantidad:ke,precio_unitario:ye,subtotal:ve}]),ge({producto_id:"",cantidad:"1"}),T(!1),l("")},te=ne=>{q(ke=>ke.filter(ye=>ye.producto_id!==ne))},_=ne=>{if(!ne)return!0;const[ke,ye,ve]=ne.split("-").map(Number),Ee=new Date(ke,ye-1,ve),Qe=new Date;return Qe.setHours(0,0,0,0),Ee.setHours(0,0,0,0),Ee>=Qe},$=()=>{if(!Q.hora_inicio||!Q.hora_fin)return{valido:!0};const[ne,ke]=Q.hora_inicio.split(":").map(Number),[ye,ve]=Q.hora_fin.split(":").map(Number);let Ee=ne*60+ke,Qe=ye*60+ve;Qe<=Ee&&(Qe+=24*60);const Ne=(Qe-Ee)/60;return Ne<2?{valido:!1,mensaje:"El evento debe durar al menos 2 horas"}:Y&&Ne>Y?{valido:!1,mensaje:`El evento no puede durar ms de ${Y} horas segn el plan seleccionado`}:{valido:!0}},xe=()=>{if(!Q.numero_invitados)return{valido:!0};const ne=parseInt(Q.numero_invitados);return ne<=0?{valido:!1,mensaje:"El nmero de invitados debe ser mayor a 0"}:re&&ne>re?{valido:!1,mensaje:`El nmero de invitados no puede superar la capacidad mxima del plan (${re})`}:G&&ne<G?{valido:!1,mensaje:`El nmero de invitados no puede ser menor que la capacidad mnima del plan (${G})`}:oe&&ne>oe?{valido:!1,mensaje:`El nmero de invitados no puede superar la capacidad del saln (${oe})`}:{valido:!0}},Pe=ne=>{if(!ne)return null;const ke=ne.split(":");if(ke.length<2)return null;const ye=parseInt(ke[0],10),ve=parseInt(ke[1],10);return Number.isNaN(ye)||Number.isNaN(ve)?null:ye*60+ve},I=(ne,ke)=>{if(ne===null||ke===null)return null;let ye=ne,ve=ke;return(ve<ye||ye>=12*60&&ve<12*60)&&(ve+=24*60),{inicioMin:ye,finMin:ve}},ue=ne=>{const ke=ne.getFullYear(),ye=String(ne.getMonth()+1).padStart(2,"0"),ve=String(ne.getDate()).padStart(2,"0");return`${ke}-${ye}-${ve}`},J=(ne,ke)=>{const ye=new Date(`${ne}T00:00:00`);return ye.setDate(ye.getDate()+ke),ue(ye)},Ze=(ne,ke)=>{const ye=new Date(`${ne}T00:00:00`),ve=new Date(`${ke}T00:00:00`);return Math.round((ye-ve)/(24*60*60*1e3))},jr=async()=>{if(!Q.fecha_evento||!Q.id_salon||!Q.hora_inicio||!Q.hora_fin)return{disponible:!0};const ne=Pe(Q.hora_inicio),ke=Pe(Q.hora_fin),ye=I(ne,ke);if(!ye)return{disponible:!1,mensaje:"La hora de inicio o fin no es vlida"};const ve=parseInt(Q.id_salon);if(!ve||isNaN(ve))return{disponible:!0};const Ee=Q.fecha_evento,Qe=[J(Ee,-1),Ee,J(Ee,1)];try{let Ne=(await Promise.all(Qe.map(L=>ur.getAll({fecha:L})))).flatMap(L=>L.eventos||[]);if(o&&t){const L=parseInt(t,10);Ne=Ne.filter(ze=>{const Se=ze.id_evento!==void 0&&ze.id_evento!==null?parseInt(ze.id_evento):ze.id!==void 0&&ze.id!==null?parseInt(ze.id):null;return!Se||Se!==L})}if(Ne.some(L=>{if((L.estado||"").toLowerCase()==="cancelado")return!1;const ze=L.id_salon!==void 0&&L.id_salon!==null?parseInt(L.id_salon):L.salon_id!==void 0&&L.salon_id!==null?parseInt(L.salon_id):null;if(!ze||isNaN(ze)||ze!==ve)return!1;if(!L.hora_inicio||!L.hora_fin)return L.fecha_evento===Ee;const Se=Pe(L.hora_inicio),je=Pe(L.hora_fin);if(Se===null||je===null)return L.fecha_evento===Ee;const Me=I(Se,je);if(!Me)return L.fecha_evento===Ee;const $e=Ze(L.fecha_evento,Ee)*24*60,Le=Me.inicioMin+$e,Ve=Me.finMin+$e,or=ye.inicioMin,wr=ye.finMin;return or<Ve&&Le<wr})){const L=Ne.find(Se=>{if((Se.estado||"").toLowerCase()==="cancelado")return!1;const je=Se.id_salon!==void 0&&Se.id_salon!==null?parseInt(Se.id_salon):Se.salon_id!==void 0&&Se.salon_id!==null?parseInt(Se.salon_id):null;if(!je||isNaN(je)||je!==ve)return!1;if(!Se.hora_inicio||!Se.hora_fin)return Se.fecha_evento===Ee;const Me=Pe(Se.hora_inicio),$e=Pe(Se.hora_fin);if(Me===null||$e===null)return Se.fecha_evento===Ee;const Le=I(Me,$e);if(!Le)return Se.fecha_evento===Ee;const Ve=Ze(Se.fecha_evento,Ee)*24*60,or=Le.inicioMin+Ve,wr=Le.finMin+Ve,$r=ye.inicioMin,Ur=ye.finMin;return $r<wr&&or<Ur});let ze="Ya existe un evento en ese saln para la fecha y horario seleccionados";if(L){const Se=Ee.split("-").reverse().join("/");L.hora_inicio&&L.hora_fin?ze=`Ya existe un evento en ese saln el ${Se} de ${L.hora_inicio} a ${L.hora_fin}. Tu evento (${Q.hora_inicio} - ${Q.hora_fin}) se solapa con este horario.`:ze=`Ya existe un evento en ese saln el ${Se} sin horario definido. Por favor, elige otra fecha.`}return{disponible:!1,mensaje:ze}}return{disponible:!0}}catch(Ne){return console.error("Error al verificar disponibilidad:",Ne),{disponible:!0,advertencia:"No se pudo verificar la disponibilidad. Por favor, verifica manualmente que no haya conflictos."}}},Ge=async ne=>{var ke,ye,ve;ne.preventDefault(),l(""),i(!0);try{if(!Q.cliente_id){l("Debes seleccionar un cliente"),i(!1);return}if(!_(Q.fecha_evento)){l("La fecha del evento debe ser igual o mayor a la fecha de hoy"),i(!1);return}const Ee=$();if(!Ee.valido){l(Ee.mensaje),i(!1);return}const Qe=xe();if(!Qe.valido){l(Qe.mensaje),i(!1);return}const Ne=await jr();if(!Ne.disponible){l(Ne.mensaje),i(!1);return}const L=Ae(),ze=o&&(x==null?void 0:x.saldo)!==void 0&&(x==null?void 0:x.saldo)!==null?parseFloat(x.saldo):L;let Se=null;if(Q.id_salon){const Ve=v.find(or=>(or.id_salon||or.id)===parseInt(Q.id_salon));Ve&&(Se=Ve.nombre||null,Se&&Ve.capacidad&&(Se=`${Se} (Cap: ${Ve.capacidad})`))}const je=localStorage.getItem("usuario");let Me=o&&(x==null?void 0:x.coordinador_id)||null;if(je)try{const Ve=JSON.parse(je);Cr(Ve==null?void 0:Ve.rol,[N.COORDINATOR])&&!o&&(Me=Ve.id)}catch(Ve){console.error("Error al parsear usuario:",Ve)}const $e={cliente_id:Q.cliente_id?parseInt(Q.cliente_id):x==null?void 0:x.id_cliente,nombre_evento:Q.nombre_evento||null,tipo_evento:Q.tipo_evento||null,fecha_evento:Q.fecha_evento||null,hora_inicio:Q.hora_inicio||null,hora_fin:Q.hora_fin||null,numero_invitados:Q.numero_invitados?parseInt(Q.numero_invitados):null,estado:Q.estado||"cotizacion",total:L,saldo:ze,observaciones:Q.observaciones||null,coordinador_id:Me};Q.plan_id&&($e.plan_id=parseInt(Q.plan_id)),Q.id_salon&&($e.id_salon=parseInt(Q.id_salon),Se&&($e.salon=Se));const Le=o?await ur.update(t,$e):await ur.create($e);if(Le.evento){const Ve=Le.evento.id_evento||Le.evento.id||t;if(B.length>0)try{for(const or of B)await ur.agregarProducto(Ve,or.producto_id,or.cantidad,or.precio_unitario);await ur.calcularTotal(Ve)}catch(or){console.error("Error al agregar productos:",or),l("El evento se actualiz pero hubo un error al agregar algunos productos. Puedes agregarlos manualmente desde el detalle del evento.")}r(`/eventos/${Ve}`)}else l(o?"Error al actualizar el evento. Intenta nuevamente.":"Error al crear el evento. Intenta nuevamente.")}catch(Ee){if(console.error(o?"Error al actualizar evento:":"Error al crear evento:",Ee),((ke=Ee.response)==null?void 0:ke.status)===401||Ee.isAuthError)l("Tu sesin ha expirado. Por favor, inicia sesin nuevamente."),setTimeout(()=>{localStorage.removeItem("token"),localStorage.removeItem("usuario"),window.location.href="/login"},3e3);else{const Qe=((ve=(ye=Ee.response)==null?void 0:ye.data)==null?void 0:ve.error)||Ee.message||(o?"Error al actualizar el evento":"Error al crear el evento");l(Qe)}}finally{i(!1)}},tr=parseInt(Q.numero_invitados),Ke=Number.isFinite(tr)&&tr>0,gr=Ke?j.filter(ne=>{const ke=parseInt(ne.capacidad_minima||"0",10)||0,ye=parseInt(ne.capacidad_maxima||"0",10)||0,ve=tr>=ke,Ee=!ye||tr<=ye;return ve&&Ee}):[],zr=Ke?v.filter(ne=>!ne.capacidad||parseInt(ne.capacidad)>=tr):[],mr=Ke?j.length===0&&R?"Cargando planes...":j.length===0?"No hay planes disponibles":gr.length===0?`No hay planes para ${tr} invitados`:"Seleccione un plan":"Ingresa nmero de invitados",br=!Ke||j.length===0||gr.length===0,lr=Ke?v.length===0&&R?"Cargando salones...":v.length===0?"No hay salones disponibles":zr.length===0?`No hay salones para ${tr} invitados`:"Seleccione un saln":"Ingresa nmero de invitados",qe=!Ke||v.length===0||zr.length===0;return R&&!a?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:e.jsx("div",{children:"Cargando datos..."})}):o&&u&&!a?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:e.jsx("div",{children:"Cargando evento..."})}):a&&(a.includes("Sesin expirada")||a.includes("expirado"))&&S.length===0&&j.length===0&&v.length===0?e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("button",{onClick:()=>r("/eventos"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"transparent",color:"#6366f1",border:"1px solid #6366f1",borderRadius:"0.375rem",cursor:"pointer",marginBottom:"1rem"},children:[e.jsx(yi,{size:16}),"Volver"]}),e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:o?"Editar Evento":"Nuevo Evento"})]}),a&&e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"#fef3c7",color:"#92400e",borderRadius:"0.5rem",marginBottom:"1.5rem",border:"1px solid #fbbf24",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"0.5rem"},children:" Sesin Expirada"}),e.jsxs("div",{style:{marginBottom:"1rem"},children:["Tu sesin ha expirado. Por favor, inicia sesin nuevamente para ",o?"editar":"crear"," eventos."]}),e.jsx("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("usuario"),window.location.href="/login"},style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Ir al Login"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("button",{onClick:()=>r("/eventos"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"transparent",color:"#6366f1",border:"1px solid #6366f1",borderRadius:"0.375rem",cursor:"pointer",marginBottom:"1rem"},children:[e.jsx(yi,{size:16}),"Volver"]}),e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:o?"Editar Evento":"Nuevo Evento"}),e.jsx("p",{style:{color:"#6b7280"},children:o?"Actualizar informacin del evento":"Crear un nuevo evento"})]}),a&&e.jsxs("div",{style:{padding:"1rem",backgroundColor:a.includes("Sesin expirada")||a.includes("expirado")?"#fef3c7":a.includes("Algunos datos")||a.includes("Puedes continuar")?"#dbeafe":"#fee2e2",color:a.includes("Sesin expirada")||a.includes("expirado")?"#92400e":a.includes("Algunos datos")||a.includes("Puedes continuar")?"#1e40af":"#dc2626",borderRadius:"0.375rem",marginBottom:"1.5rem",border:`1px solid ${a.includes("Sesin expirada")||a.includes("expirado")?"#fbbf24":a.includes("Algunos datos")||a.includes("Puedes continuar")?"#60a5fa":"#fca5a5"}`},children:[e.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.includes("Sesin expirada")||a.includes("expirado")?"":a.includes("Algunos datos")||a.includes("Puedes continuar")?"":"",a]}),a.includes("Sesin expirada")||a.includes("expirado")?e.jsx("div",{style:{fontSize:"0.875rem",marginTop:"0.5rem"},children:"Por favor, inicia sesin nuevamente para continuar."}):a.includes("Algunos datos")||a.includes("Puedes continuar")?e.jsxs("div",{style:{fontSize:"0.875rem",marginTop:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:["Puedes continuar creando el evento. Los campos que no se cargaron estarn vacos.",e.jsxs("button",{onClick:p,disabled:R,style:{padding:"0.25rem 0.75rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:R?"not-allowed":"pointer",fontSize:"0.75rem",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(ts,{size:12}),"Recargar"]})]}):a&&!a.includes("Sesin expirada")&&!a.includes("expirado")?e.jsx("div",{style:{fontSize:"0.875rem",marginTop:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:e.jsxs("button",{onClick:p,disabled:R,style:{padding:"0.5rem 1rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:R?"not-allowed":"pointer",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ts,{size:16}),R?"Recargando...":"Recargar Datos"]})}):null]}),e.jsx("form",{onSubmit:Ge,children:e.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Nmero de Invitados"}),e.jsx("input",{type:"number",name:"numero_invitados",value:Q.numero_invitados,onChange:be,min:"1",max:oe||void 0,placeholder:"Ej: 120",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:oe?`Capacidad del saln seleccionado: ${oe} personas`:"Los planes se filtran segn esta cantidad"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Saln"}),e.jsxs("select",{name:"id_salon",value:Q.id_salon,onChange:be,disabled:qe,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:qe?"#f3f4f6":"white"},children:[e.jsx("option",{value:"",children:lr}),zr.map(ne=>e.jsxs("option",{value:ne.id_salon||ne.id,children:[ne.nombre," - Capacidad: ",ne.capacidad||0]},ne.id_salon||ne.id))]}),Q.id_salon&&oe&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:["Capacidad del saln: ",oe," personas"]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Plan disponible"}),e.jsxs("select",{name:"plan_id",value:Q.plan_id,onChange:be,disabled:br,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:br?"#f3f4f6":"white"},children:[e.jsx("option",{value:"",children:mr}),gr.map(ne=>e.jsxs("option",{value:ne.id,children:[ne.nombre,"  Min: ",ne.capacidad_minima||0,ne.capacidad_maxima?` - Max: ${ne.capacidad_maxima}`:" - Max: Sin lmite"," "," ",new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(ne.precio_base||0)]},ne.id))]}),Q.plan_id&&(G||re||Y)&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:[G&&`Capacidad mnima: ${G} personas`,G&&re?"  ":"",re&&`Capacidad mxima: ${re} personas`,(G||re)&&Y?"  ":"",Y&&`Duracin mxima: ${Y} horas`]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Fecha del Evento"}),e.jsx("input",{type:"date",name:"fecha_evento",value:Q.fecha_evento,onChange:ne=>{be(ne),a&&a.includes("fecha")&&l("")},min:Te(),disabled:!Q.id_salon||se,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:!Q.id_salon||se?"#f3f4f6":"white"}}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:Q.id_salon?se?"Cargando fechas ocupadas...":V.length>0?`${V.length} ${V.length===1?"fecha tiene eventos":"fechas tienen eventos"} para este saln. La disponibilidad se verifica segn horario al guardar.`:"La fecha debe ser igual o mayor a hoy y se valida disponibilidad segn saln y horario":"Selecciona un saln primero para ver las fechas disponibles"}),V.includes(Q.fecha_evento)&&e.jsx("div",{style:{fontSize:"0.75rem",color:"#f59e0b",marginTop:"0.25rem",fontWeight:"500"},children:" Esta fecha tiene eventos. Se verificar la disponibilidad por horario al guardar."})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Cliente *"}),e.jsxs("select",{name:"cliente_id",value:Q.cliente_id,onChange:be,required:!0,disabled:S.length===0&&R,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:S.length===0&&R?"#f3f4f6":"white"},children:[e.jsx("option",{value:"",children:S.length===0&&R?"Cargando clientes...":S.length===0?"No hay clientes disponibles":"Seleccione un cliente"}),S.map(ne=>e.jsx("option",{value:ne.id,children:ne.nombre_completo||ne.email||`Cliente #${ne.id}`},ne.id))]}),S.length===0&&!R&&e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:"No se pudieron cargar los clientes. Puedes crear el evento manualmente ingresando el ID del cliente."})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Tipo de Evento"}),e.jsxs("select",{name:"tipo_evento",value:Q.tipo_evento,onChange:be,disabled:U.length===0&&R,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:U.length===0&&R?"#f3f4f6":"white"},children:[e.jsx("option",{value:"",children:U.length===0&&R?"Cargando tipos...":U.length===0?"No hay tipos disponibles":"Seleccione un tipo"}),U.map(ne=>e.jsx("option",{value:ne.nombre,children:ne.nombre},ne.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Nombre del Evento"}),e.jsx("input",{type:"text",name:"nombre_evento",value:Q.nombre_evento,onChange:be,placeholder:"Nombre descriptivo del evento",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Hora de Inicio"}),e.jsx("input",{type:"time",name:"hora_inicio",value:Q.hora_inicio,onChange:be,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}}),Q.hora_inicio&&Q.hora_fin&&e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:(()=>{const ne=Pe(Q.hora_inicio),ke=Pe(Q.hora_fin),ye=I(ne,ke);if(!ye)return"";const ve=(ye.finMin-ye.inicioMin)/60;return ve>0?`Duracin: ${ve.toFixed(1)} horas${Y?` (Mx: ${Y}h)`:""}`:""})()})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Hora de Fin"}),e.jsx("input",{type:"time",name:"hora_fin",value:Q.hora_fin,onChange:be,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:"Mnimo 2 horas de duracin"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Estado"}),e.jsxs("select",{name:"estado",value:Q.estado,onChange:be,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"cotizacion",children:"Cotizacin"}),e.jsx("option",{value:"confirmado",children:"Confirmado"}),e.jsx("option",{value:"en_proceso",children:"En Proceso"}),e.jsx("option",{value:"completado",children:"Completado"}),e.jsx("option",{value:"cancelado",children:"Cancelado"})]})]})]}),e.jsxs("div",{style:{marginTop:"2rem",padding:"1.5rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#374151"},children:"Productos Adicionales"}),e.jsxs("button",{type:"button",onClick:()=>T(!0),disabled:y.length===0,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:y.length===0?"#d1d5db":"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:y.length===0?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[e.jsx(Mr,{size:16}),"Agregar Producto"]})]}),B.length===0?e.jsx("p",{style:{color:"#6b7280",textAlign:"center",padding:"1rem"},children:"No hay productos adicionales agregados"}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"white",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Producto"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Cantidad"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Precio Unit."}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Subtotal"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Accin"})]})}),e.jsx("tbody",{children:B.map(ne=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb",backgroundColor:"white"},children:[e.jsx("td",{style:{padding:"0.75rem"},children:ne.nombre}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:ne.cantidad}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(ne.precio_unitario)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:"500"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(ne.subtotal)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("button",{type:"button",onClick:()=>te(ne.producto_id),style:{padding:"0.25rem 0.5rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.75rem"},children:e.jsx(Ar,{size:14})})})]},ne.producto_id))})]})})]}),e.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",backgroundColor:"#f3f4f6",borderRadius:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Precio Plan:"}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(ee)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"+ Productos:"}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(B.reduce((ne,ke)=>ne+(parseFloat(ke.subtotal)||0),0))})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"0.5rem",borderTop:"2px solid #d1d5db"},children:[e.jsx("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#374151"},children:"= Total:"}),e.jsx("span",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#6366f1"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(Ae())})]})]}),E&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:()=>T(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:ne=>ne.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600"},children:"Agregar Producto"}),e.jsx("button",{onClick:()=>T(!1),style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",color:"#6b7280"},children:e.jsx(er,{size:20})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Producto *"}),e.jsxs("select",{value:ie.producto_id,onChange:ne=>ge({...ie,producto_id:ne.target.value}),disabled:y.length===0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:y.length===0?"#f3f4f6":"white"},children:[e.jsx("option",{value:"",children:y.length===0?"No hay productos disponibles":"Seleccione un producto"}),y.map(ne=>e.jsxs("option",{value:ne.id,children:[ne.nombre," - ",new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(ne.precio||0)]},ne.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Cantidad *"}),e.jsx("input",{type:"number",min:"1",value:ie.cantidad,onChange:ne=>ge({...ie,cantidad:ne.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>T(!1),style:{padding:"0.75rem 1.5rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"button",onClick:De,disabled:!ie.producto_id||!ie.cantidad,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:!ie.producto_id||!ie.cantidad?"#9ca3af":"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:!ie.producto_id||!ie.cantidad?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[e.jsx(Mr,{size:16}),"Agregar"]})]})]})}),e.jsxs("div",{style:{marginTop:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Observaciones"}),e.jsx("textarea",{name:"observaciones",value:Q.observaciones,onChange:be,rows:4,placeholder:"Notas adicionales sobre el evento...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>r("/eventos"),disabled:n,style:{padding:"0.75rem 1.5rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:n?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:n,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:n?"#9ca3af":"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:n?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[e.jsx(it,{size:16}),n?"Guardando...":o?"Actualizar Evento":"Crear Evento"]})]})]})})]})},z5=()=>{const r=_o(),{usuario:t}=at(),o=Cr(t==null?void 0:t.rol,[N.COORDINATOR]),n=Cr(t==null?void 0:t.rol,[N.ADMIN,N.MANAGER]),[i,a]=c.useState([]),[l,u]=c.useState([]),[s,d]=c.useState(""),[f,x]=c.useState("todos"),[h,S]=c.useState(new Date),[C,j]=c.useState("mes"),[P,v]=c.useState(!0),[m,y]=c.useState(null),k=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],U=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"];c.useEffect(()=>{X()},[s,h,o,n,f,t==null?void 0:t.id]);const X=async()=>{var D;try{v(!0);const oe={incluir_porcentaje_avance:!0};(o&&t!=null&&t.id||n&&f==="mios"&&t!=null&&t.id)&&(oe.coordinador_id=t.id);const[K,V]=await Promise.all([ur.getAll(oe),vn.getAll(!0)]);let F=K.eventos||[];if(s){const se=parseInt(s),me=(D=V.salones)==null?void 0:D.find(ie=>(ie.id_salon||ie.id)===se);F=F.filter(ie=>{let ge=null;return ie.id_salon!==void 0&&ie.id_salon!==null&&ie.id_salon!==""?ge=parseInt(ie.id_salon):ie.salon_id!==void 0&&ie.salon_id!==null&&ie.salon_id!==""&&(ge=parseInt(ie.salon_id)),ge!==null&&!isNaN(ge)?ge===se:!!(me&&ie.nombre_salon&&ie.nombre_salon===me.nombre||me&&ie.salon&&ie.salon.includes(me.nombre))})}F=F.filter(se=>se.estado!=="cancelado"),a(F),u(V.salones||[])}catch(oe){console.error("Error al cargar datos:",oe)}finally{v(!1)}},R=D=>({cotizacion:"#6b7280",confirmado:"#10b981",en_proceso:"#3b82f6",completado:"#8b5cf6",cancelado:"#ef4444"})[D]||"#6b7280",w=D=>{const oe=B(D);return i.filter(K=>K.fecha_evento===oe)},B=D=>{if(typeof D=="string")return D;const oe=D.getFullYear(),K=String(D.getMonth()+1).padStart(2,"0"),V=String(D.getDate()).padStart(2,"0");return`${oe}-${K}-${V}`},q=()=>{const D=new Date(h.getFullYear(),h.getMonth(),1),oe=new Date(h.getFullYear(),h.getMonth()+1,0).getDate(),K=D.getDay(),V=[],F=new Date(h.getFullYear(),h.getMonth(),0).getDate();for(let me=K-1;me>=0;me--)V.push(new Date(h.getFullYear(),h.getMonth()-1,F-me));for(let me=1;me<=oe;me++)V.push(new Date(h.getFullYear(),h.getMonth(),me));const se=42-V.length;for(let me=1;me<=se;me++)V.push(new Date(h.getFullYear(),h.getMonth()+1,me));return V},E=D=>{const oe=new Date(h);oe.setMonth(oe.getMonth()+D),S(oe)},T=D=>{const oe=new Date(h);oe.setFullYear(oe.getFullYear()+D),S(oe)},ee=()=>{S(new Date)},H=D=>D.length===0?{backgroundColor:"transparent",color:"#374151"}:D.length===1?{backgroundColor:`${R(D[0].estado)}20`,color:R(D[0].estado)}:{backgroundColor:"#f59e0b30",color:"#f59e0b",fontWeight:"600"},G=D=>{const oe=new Date;return D.toDateString()===oe.toDateString()},O=D=>D.getMonth()===h.getMonth()&&D.getFullYear()===h.getFullYear(),re=()=>{const D=q(),oe={};return D.forEach(K=>{const V=B(K);oe[V]=w(V)}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.5rem"},children:[U.map(K=>e.jsx("div",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"600",fontSize:"0.875rem",color:"#374151",backgroundColor:"#f9fafb"},children:K},K)),D.map((K,V)=>{const F=B(K),se=oe[F]||[],me=H(se),ie=G(K),ge=O(K);return e.jsxs("div",{onClick:()=>{se.length>0&&y({fecha:K,eventos:se})},style:{minHeight:"100px",padding:"0.5rem",border:ie?"2px solid #6366f1":"1px solid #e5e7eb",borderRadius:"0.375rem",backgroundColor:ge?me.backgroundColor:"#f9fafb",color:ge?me.color:"#9ca3af",cursor:se.length>0?"pointer":"default",transition:"all 0.2s",position:"relative",opacity:ge?1:.5},onMouseEnter:Te=>{se.length>0&&(Te.currentTarget.style.transform="scale(1.02)",Te.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)")},onMouseLeave:Te=>{Te.currentTarget.style.transform="scale(1)",Te.currentTarget.style.boxShadow="none"},children:[e.jsx("div",{style:{fontWeight:ie?"700":"500",marginBottom:"0.25rem"},children:K.getDate()}),e.jsx("div",{style:{fontSize:"0.75rem"},children:se.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.125rem"},children:[se.length," ",se.length===1?"evento":"eventos"]}),se.slice(0,2).map((Te,Q)=>e.jsxs("div",{style:{fontSize:"0.7rem",padding:"0.125rem 0.25rem",marginBottom:"0.125rem",backgroundColor:R(Te.estado),color:"white",borderRadius:"0.25rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:`${Te.nombre_evento||"Evento"} (${Te.estado})${Te.porcentaje_avance_servicios!==void 0&&Te.porcentaje_avance_servicios!==null?` - Avance: ${Te.porcentaje_avance_servicios}%`:""}`,children:[Te.nombre_evento||"Evento"," (",Te.estado,")",Te.porcentaje_avance_servicios!==void 0&&Te.porcentaje_avance_servicios!==null&&e.jsxs("span",{style:{marginLeft:"0.25rem",fontSize:"0.65rem",opacity:.9},children:[" ",Te.porcentaje_avance_servicios,"%"]})]},Te.id_evento||Te.id||Q)),se.length>2&&e.jsxs("div",{style:{fontSize:"0.65rem",color:me.color,fontWeight:"600"},children:["+",se.length-2," ms"]})]})})]},V)})]})},W=()=>{const D=[];for(let oe=0;oe<12;oe++)D.push(oe);return e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1.5rem"},children:D.map(oe=>{const K=new Date(h.getFullYear(),oe,1),V=Y(K);return e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"1rem"},children:[e.jsx("h3",{style:{marginBottom:"0.75rem",fontSize:"1rem",fontWeight:"600",color:"#374151"},children:k[oe]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.25rem",fontSize:"0.75rem"},children:[U.map(F=>e.jsx("div",{style:{textAlign:"center",fontWeight:"600",color:"#6b7280",padding:"0.25rem"},children:F[0]},F)),V.map((F,se)=>{const me=B(F),ie=w(me),ge=ie.length>0?H(ie):{backgroundColor:"transparent",color:"#374151"};return e.jsx("div",{style:{aspectRatio:"1",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"0.25rem",backgroundColor:ge.backgroundColor,color:ge.color,fontSize:"0.7rem",fontWeight:ie.length>0?"600":"400",cursor:ie.length>0?"pointer":"default"},onClick:()=>{ie.length>0&&(S(new Date(me)),j("mes"),y({fecha:F,eventos:ie}))},title:ie.length>0?`${ie.length} eventos`:"",children:F.getDate()},se)})]})]},oe)})})},Y=D=>{const oe=new Date(D.getFullYear(),D.getMonth(),1),K=new Date(D.getFullYear(),D.getMonth()+1,0).getDate(),V=oe.getDay(),F=[],se=new Date(D.getFullYear(),D.getMonth(),0).getDate();for(let ie=V-1;ie>=0;ie--)F.push(new Date(D.getFullYear(),D.getMonth()-1,se-ie));for(let ie=1;ie<=K;ie++)F.push(new Date(D.getFullYear(),D.getMonth(),ie));const me=42-F.length;for(let ie=1;ie<=me;ie++)F.push(new Date(D.getFullYear(),D.getMonth()+1,ie));return F};return P?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando calendario..."}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Calendario de Eventos"}),e.jsx("p",{style:{color:"#6b7280"},children:"Visualiza todos los eventos agendados"})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[n&&e.jsxs("select",{value:f,onChange:D=>x(D.target.value),style:{padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"todos",children:"Todos los eventos"}),e.jsx("option",{value:"mios",children:"Mis eventos"})]}),e.jsxs("select",{value:s,onChange:D=>d(D.target.value),style:{padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"",children:"Todos los salones"}),l.map(D=>e.jsx("option",{value:D.id_salon||D.id,children:D.nombre},D.id_salon||D.id))]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>j("mes"),style:{padding:"0.5rem 1rem",backgroundColor:C==="mes"?"#6366f1":"#f3f4f6",color:C==="mes"?"white":"#374151",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Vista Mensual"}),e.jsx("button",{onClick:()=>j("ao"),style:{padding:"0.5rem 1rem",backgroundColor:C==="ao"?"#6366f1":"#f3f4f6",color:C==="ao"?"white":"#374151",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Vista Anual"})]})]}),C==="mes"?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("button",{onClick:()=>E(-1),style:{padding:"0.5rem",backgroundColor:"#f3f4f6",border:"none",borderRadius:"0.375rem",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(_p,{size:20})}),e.jsx("div",{style:{minWidth:"200px",textAlign:"center"},children:e.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#374151"},children:[k[h.getMonth()]," ",h.getFullYear()]})}),e.jsx("button",{onClick:()=>E(1),style:{padding:"0.5rem",backgroundColor:"#f3f4f6",border:"none",borderRadius:"0.375rem",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(ti,{size:20})}),e.jsx("button",{onClick:ee,style:{padding:"0.5rem 1rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Hoy"})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("button",{onClick:()=>T(-1),style:{padding:"0.5rem",backgroundColor:"#f3f4f6",border:"none",borderRadius:"0.375rem",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(_p,{size:20})}),e.jsx("div",{style:{minWidth:"100px",textAlign:"center"},children:e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#374151"},children:h.getFullYear()})}),e.jsx("button",{onClick:()=>T(1),style:{padding:"0.5rem",backgroundColor:"#f3f4f6",border:"none",borderRadius:"0.375rem",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(ti,{size:20})}),e.jsx("button",{onClick:ee,style:{padding:"0.5rem 1rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Hoy"})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",marginBottom:"1.5rem",display:"flex",gap:"1.5rem",flexWrap:"wrap",fontSize:"0.875rem"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#374151"},children:"Leyenda:"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#6b728020",borderRadius:"0.25rem"}}),e.jsx("span",{children:"Cotizacin"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#10b98120",borderRadius:"0.25rem"}}),e.jsx("span",{children:"Confirmado"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#3b82f620",borderRadius:"0.25rem"}}),e.jsx("span",{children:"En Proceso"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#8b5cf620",borderRadius:"0.25rem"}}),e.jsx("span",{children:"Completado"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#f59e0b30",borderRadius:"0.25rem"}}),e.jsx("span",{children:"Mltiples Eventos"})]})]}),e.jsx("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:C==="mes"?re():W()}),m&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>y(null),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflowY:"auto"},onClick:D=>D.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#374151"},children:["Eventos del ",m.fecha.getDate()," de ",k[m.fecha.getMonth()]," ",m.fecha.getFullYear()]}),e.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#6b7280"},children:""})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:m.eventos.map(D=>e.jsxs("div",{onClick:()=>{r(`/eventos/${D.id_evento||D.id}`),y(null)},style:{padding:"1rem",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:"pointer",transition:"all 0.2s",backgroundColor:`${R(D.estado)}10`},onMouseEnter:oe=>{oe.currentTarget.style.borderColor=R(D.estado),oe.currentTarget.style.transform="translateX(4px)"},onMouseLeave:oe=>{oe.currentTarget.style.borderColor="#e5e7eb",oe.currentTarget.style.transform="translateX(0)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"0.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#374151",margin:0},children:D.nombre_evento||"Evento sin nombre"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"600",backgroundColor:R(D.estado),color:"white",textTransform:"capitalize"},children:D.estado})]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280",display:"flex",flexDirection:"column",gap:"0.25rem"},children:[D.nombre_cliente&&e.jsxs("div",{children:["Cliente: ",D.nombre_cliente]}),D.nombre_salon&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(In,{size:14}),D.nombre_salon]}),D.hora_inicio&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(An,{size:14}),D.hora_inicio," ",D.hora_fin?`- ${D.hora_fin}`:""]}),D.numero_invitados&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(dn,{size:14}),D.numero_invitados," invitados"]})]})]},D.id_evento||D.id))})]})})]})},R5=()=>{const{toasts:r,removeToast:t,error:o}=_r(),[n,i]=c.useState(null),[a,l]=c.useState([]),[u,s]=c.useState(!0),[d,f]=c.useState(""),[x,h]=c.useState([]),S=7;c.useEffect(()=>{(async()=>{var E,T;try{s(!0);const ee=(await so.getMe()).cliente;if(i(ee),ee){const H=ee.id||ee.cliente_id,G=await ur.getAll({cliente_id:H,incluir_porcentaje_avance:!0});l(G.eventos||[])}else l([]);f("")}catch(ee){const H=((T=(E=ee.response)==null?void 0:E.data)==null?void 0:T.error)||"No se pudo cargar la informacin del cliente";f(H),o(H)}finally{s(!1)}})()},[o]),c.useEffect(()=>{const E=(n==null?void 0:n.id)||(n==null?void 0:n.cliente_id);if(!E){h([]);return}try{const T=JSON.parse(localStorage.getItem(`alertas_eventos_vistas_${E}`)||"[]");h(Array.isArray(T)?T:[])}catch{h([])}},[n]);const C=E=>{if(!E)return"-";try{return new Date(E).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"numeric"})}catch{return E}},j=E=>{if(!E)return"-";if(typeof E=="string"&&E.includes(":")){const T=E.split(":");return`${T[0]}:${T[1]}`}return E},P=E=>{if(!E)return null;if(typeof E=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(E)){const[T,ee,H]=E.split("-").map(Number);return new Date(T,ee-1,H)}return new Date(E)},v=E=>{const T=P(E);if(!T||Number.isNaN(T.getTime()))return null;const ee=new Date;ee.setHours(0,0,0,0);const H=T.getTime()-ee.getTime();return Math.ceil(H/(1e3*60*60*24))},m=E=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(E||0),y=c.useMemo(()=>[...a].sort((E,T)=>new Date(E.fecha_evento).getTime()-new Date(T.fecha_evento).getTime()),[a]),k=new Date,U=y.filter(E=>E.fecha_evento?new Date(E.fecha_evento)>=k:!1),X=a.reduce((E,T)=>E+(parseFloat(T.saldo||0)||0),0),R=c.useMemo(()=>{const E=new Set(["cancelado","completado"]);return y.filter(T=>T.fecha_evento&&!E.has(T.estado)).map(T=>({...T,diasRestantes:v(T.fecha_evento)})).filter(T=>{if(T.diasRestantes===null)return!1;const ee=T.id_evento||T.id;return T.diasRestantes>=0&&T.diasRestantes<=S&&!x.includes(ee)})},[y,x]),w=E=>{const T=(n==null?void 0:n.id)||(n==null?void 0:n.cliente_id);h(E),T&&localStorage.setItem(`alertas_eventos_vistas_${T}`,JSON.stringify(E))},B=E=>{if(!E)return;const T=Array.from(new Set([...x,E]));w(T)},q=()=>{const E=R.map(ee=>ee.id_evento||ee.id).filter(Boolean);if(E.length===0)return;const T=Array.from(new Set([...x,...E]));w(T)};return u?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando tu portal..."}):e.jsxs("div",{children:[e.jsx(Nr,{toasts:r,removeToast:t}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Mi evento"}),e.jsx("p",{style:{color:"#6b7280"},children:n!=null&&n.nombre_completo?`Hola ${n.nombre_completo}`:"Consulta el estado de tus eventos"})]}),d&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:d}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Eventos registrados"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:a.length})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Prximos eventos"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:U.length})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Saldo pendiente"}),e.jsx("div",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#ef4444"},children:m(X)})]})]}),R.length>0&&e.jsxs("div",{style:{backgroundColor:"#fff7ed",borderRadius:"0.75rem",border:"1px solid #fed7aa",padding:"1rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ut,{size:18,color:"#f97316"}),e.jsx("strong",{style:{color:"#9a3412"},children:"Alertas de eventos prximos"})]}),e.jsx("button",{onClick:q,style:{padding:"0.4rem 0.75rem",borderRadius:"0.375rem",border:"1px solid #fdba74",backgroundColor:"white",color:"#9a3412",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"Marcar todas como revisadas"})]}),e.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:R.map(E=>{const T=E.id_evento||E.id;return e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #fde68a",padding:"0.75rem",display:"flex",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#111827"},children:E.nombre_evento||"Evento"}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[C(E.fecha_evento),"  ",j(E.hora_inicio)]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#9a3412"},children:["Faltan ",E.diasRestantes," da",E.diasRestantes===1?"":"s"]})]}),e.jsx("button",{onClick:()=>B(T),style:{padding:"0.4rem 0.75rem",borderRadius:"0.375rem",border:"1px solid #fdba74",backgroundColor:"#fff7ed",color:"#9a3412",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600",alignSelf:"flex-start"},children:"Revisado"})]},T)})})]}),y.length===0?e.jsx("div",{style:{padding:"2rem",backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",textAlign:"center",color:"#6b7280"},children:"No tienes eventos registrados todava."}):e.jsx("div",{style:{display:"grid",gap:"1rem"},children:y.map(E=>{const T=E.progreso_servicios??E.porcentaje_avance_servicios??0;return e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",border:"1px solid #e5e7eb",padding:"1.5rem",display:"grid",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700"},children:E.nombre_evento||"Evento"}),e.jsx("div",{style:{color:"#6b7280",fontSize:"0.85rem",marginTop:"0.25rem"},children:E.tipo_evento||"Evento social"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ut,{size:16,color:"#6b7280"}),e.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"600",textTransform:"capitalize"},children:E.estado||"-"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_t,{size:16,color:"#6b7280"}),e.jsx("span",{style:{fontSize:"0.85rem"},children:C(E.fecha_evento)})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(An,{size:16,color:"#6b7280"}),e.jsxs("span",{style:{fontSize:"0.85rem"},children:[j(E.hora_inicio),E.hora_fin?` - ${j(E.hora_fin)}`:""]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(In,{size:16,color:"#6b7280"}),e.jsx("span",{style:{fontSize:"0.85rem"},children:E.nombre_salon||E.salon||"-"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Gt,{size:16,color:"#6b7280"}),e.jsx("span",{style:{fontSize:"0.85rem"},children:E.nombre_plan||"Plan no definido"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8rem",color:"#6b7280"},children:[e.jsx("span",{children:"Avance del evento"}),e.jsxs("span",{children:[T,"%"]})]}),e.jsx("div",{style:{width:"100%",height:"8px",backgroundColor:"#e5e7eb",borderRadius:"9999px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${T}%`,height:"100%",backgroundColor:T>=100?"#10b981":"#6366f1",transition:"width 0.3s"}})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{style:{fontSize:"0.9rem",color:"#374151"},children:["Saldo pendiente: ",e.jsx("strong",{children:m(parseFloat(E.saldo||0)||0)})]}),e.jsx(Or,{to:`/eventos/${E.id_evento||E.id}`,style:{padding:"0.5rem 1rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",textDecoration:"none",fontSize:"0.85rem",fontWeight:"600"},children:"Ver detalle"})]})]},E.id_evento||E.id)})})]})},E5=()=>{const{usuario:r}=at(),{toasts:t,removeToast:o,error:n,success:i}=_r(),[a,l]=c.useState(null),[u,s]=c.useState(null),[d,f]=c.useState(!0),[x,h]=c.useState(!1),[S,C]=c.useState(!1),[j,P]=c.useState({nombre_completo:"",email:"",telefono:""}),[v,m]=c.useState({nueva_contrasena:"",confirmar_contrasena:""}),[y,k]=c.useState("");c.useEffect(()=>{(async()=>{var R,w;try{if(f(!0),r!=null&&r.id){const B=(await dt.getById(r.id)).usuario||r;l(B),P({nombre_completo:(B==null?void 0:B.nombre_completo)||"",email:(B==null?void 0:B.email)||"",telefono:(B==null?void 0:B.telefono)||""})}else l(r||null),P({nombre_completo:(r==null?void 0:r.nombre_completo)||"",email:(r==null?void 0:r.email)||"",telefono:(r==null?void 0:r.telefono)||""});try{const B=await so.getMe();s(B.cliente||null)}catch{s(null)}}catch(B){const q=((w=(R=B.response)==null?void 0:R.data)==null?void 0:w.error)||"No se pudo cargar el perfil";n(q)}finally{f(!1)}})()},[r==null?void 0:r.id,r,n]);const U=async R=>{var w,B;if(R.preventDefault(),!!(a!=null&&a.id))try{h(!0);const q={nombre_completo:j.nombre_completo,email:j.email||null,telefono:j.telefono||null,rol:a.rol,activo:a.activo!==void 0?a.activo:!0},E=await dt.update(a.id,q);l(E.usuario||{...a,...q}),i("Perfil actualizado")}catch(q){const E=((B=(w=q.response)==null?void 0:w.data)==null?void 0:B.error)||"No se pudo actualizar el perfil";n(E)}finally{h(!1)}},X=async R=>{var w,B;if(R.preventDefault(),k(""),!!(a!=null&&a.id)){if(!v.nueva_contrasena){k("La nueva contrasea es requerida.");return}if(v.nueva_contrasena!==v.confirmar_contrasena){k("Las contraseas no coinciden.");return}try{C(!0),await dt.cambiarContrasena(a.id,v.nueva_contrasena),m({nueva_contrasena:"",confirmar_contrasena:""}),i("Contrasea actualizada")}catch(q){const E=((B=(w=q.response)==null?void 0:w.data)==null?void 0:B.error)||"No se pudo cambiar la contrasea";n(E)}finally{C(!1)}}};return d?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando perfil..."}):e.jsxs("div",{children:[e.jsx(Nr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Mi perfil"}),e.jsx("p",{style:{color:"#6b7280"},children:"Consulta tu informacin personal y de cuenta."})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid #e5e7eb"},children:[e.jsx("h2",{style:{fontSize:"1.1rem",fontWeight:"700",marginBottom:"1rem"},children:"Cuenta"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(mo,{size:18,color:"#6b7280"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Nombre"}),e.jsx("div",{style:{fontWeight:"600"},children:(a==null?void 0:a.nombre_completo)||"-"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(jt,{size:18,color:"#6b7280"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Usuario"}),e.jsx("div",{style:{fontWeight:"600"},children:(a==null?void 0:a.nombre_usuario)||"-"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(zs,{size:18,color:"#6b7280"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Email"}),e.jsx("div",{style:{fontWeight:"600"},children:(a==null?void 0:a.email)||"-"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(Ig,{size:18,color:"#6b7280"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Telfono"}),e.jsx("div",{style:{fontWeight:"600"},children:(a==null?void 0:a.telefono)||"-"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(s5,{size:18,color:"#6b7280"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Rol"}),e.jsx("div",{style:{fontWeight:"600",textTransform:"capitalize"},children:(a==null?void 0:a.rol)||"-"})]})]})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid #e5e7eb"},children:[e.jsx("h2",{style:{fontSize:"1.1rem",fontWeight:"700",marginBottom:"1rem"},children:"Editar perfil"}),e.jsxs("form",{onSubmit:U,style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["Nombre completo",e.jsx("input",{type:"text",value:j.nombre_completo,onChange:R=>P({...j,nombre_completo:R.target.value}),style:{width:"100%",marginTop:"0.35rem",padding:"0.6rem",borderRadius:"0.375rem",border:"1px solid #d1d5db"}})]}),e.jsxs("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["Email",e.jsx("input",{type:"email",value:j.email,onChange:R=>P({...j,email:R.target.value}),style:{width:"100%",marginTop:"0.35rem",padding:"0.6rem",borderRadius:"0.375rem",border:"1px solid #d1d5db"}})]}),e.jsxs("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["Telfono",e.jsx("input",{type:"text",value:j.telefono,onChange:R=>P({...j,telefono:R.target.value}),style:{width:"100%",marginTop:"0.35rem",padding:"0.6rem",borderRadius:"0.375rem",border:"1px solid #d1d5db"}})]}),e.jsx("button",{type:"submit",disabled:x,style:{marginTop:"0.5rem",padding:"0.65rem 1rem",borderRadius:"0.4rem",border:"none",backgroundColor:"#6366f1",color:"white",fontWeight:"600",cursor:x?"not-allowed":"pointer"},children:x?"Guardando...":"Guardar cambios"})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid #e5e7eb"},children:[e.jsx("h2",{style:{fontSize:"1.1rem",fontWeight:"700",marginBottom:"1rem"},children:"Cambiar contrasea"}),e.jsxs("form",{onSubmit:X,style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["Nueva contrasea",e.jsx("input",{type:"password",value:v.nueva_contrasena,onChange:R=>m({...v,nueva_contrasena:R.target.value}),style:{width:"100%",marginTop:"0.35rem",padding:"0.6rem",borderRadius:"0.375rem",border:"1px solid #d1d5db"}})]}),e.jsxs("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["Confirmar contrasea",e.jsx("input",{type:"password",value:v.confirmar_contrasena,onChange:R=>m({...v,confirmar_contrasena:R.target.value}),style:{width:"100%",marginTop:"0.35rem",padding:"0.6rem",borderRadius:"0.375rem",border:"1px solid #d1d5db"}})]}),y&&e.jsx("div",{style:{color:"#dc2626",fontSize:"0.85rem"},children:y}),e.jsx("button",{type:"submit",disabled:S,style:{marginTop:"0.5rem",padding:"0.65rem 1rem",borderRadius:"0.4rem",border:"none",backgroundColor:"#111827",color:"white",fontWeight:"600",cursor:S?"not-allowed":"pointer"},children:S?"Actualizando...":"Actualizar contrasea"})]})]}),u&&e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid #e5e7eb"},children:[e.jsx("h2",{style:{fontSize:"1.1rem",fontWeight:"700",marginBottom:"1rem"},children:"Datos de cliente"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Documento"}),e.jsx("div",{style:{fontWeight:"600"},children:(u==null?void 0:u.documento_identidad)||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Direccin"}),e.jsx("div",{style:{fontWeight:"600"},children:(u==null?void 0:u.direccion)||"-"})]})]})]})]})]})},W5=()=>{const{usuario:r}=at(),{toasts:t,removeToast:o,success:n,error:i}=_r(),[a,l]=c.useState([]),u=go(),[s,d]=c.useState(!0),[f,x]=c.useState(""),[h,S]=c.useState(""),[C,j]=c.useState(!1),[P,v]=c.useState(!1),[m,y]=c.useState(!1),[k,U]=c.useState(!1),[X,R]=c.useState(null),[w,B]=c.useState({nombre_usuario:"",contrasena:"",nombre_completo:"",email:"",telefono:"",documento_identidad:"",direccion:"",fecha_nacimiento:"",pais:"Ecuador",provincia:"Guayas",ciudad:"Guayaquil"}),[q,E]=c.useState(!1),[T,ee]=c.useState(""),H=Cr(r==null?void 0:r.rol,[N.ADMIN,N.MANAGER,N.COORDINATOR]),G=Cr(r==null?void 0:r.rol,[N.ADMIN,N.MANAGER,N.COORDINATOR]),O=Cr(r==null?void 0:r.rol,[N.ADMIN,N.MANAGER]);c.useEffect(()=>{re()},[]);const re=async()=>{var g,p;try{d(!0);const Z=await so.getAll();l(Z.clientes||[]),x("")}catch(Z){const ce=((p=(g=Z.response)==null?void 0:g.data)==null?void 0:p.error)||Z.message||"Error al cargar los clientes";x(ce),console.error(Z)}finally{d(!1)}},W=a.filter(g=>{var p,Z,ce,be;if(!h)return!0;const Ce=h.toLowerCase();return((p=g.nombre_completo)==null?void 0:p.toLowerCase().includes(Ce))||((Z=g.email)==null?void 0:Z.toLowerCase().includes(Ce))||((ce=g.documento_identidad)==null?void 0:ce.toString().includes(h))||((be=g.telefono)==null?void 0:be.includes(h))}),Y=()=>({nombre_usuario:"",contrasena:"",nombre_completo:"",email:"",telefono:"",documento_identidad:"",direccion:"",fecha_nacimiento:"",pais:"Ecuador",provincia:"Guayas",ciudad:"Guayaquil"}),D=()=>{B(Y()),ee(""),j(!0)},oe=()=>{j(!1),B(Y()),ee("")},K=g=>{R(g),B({nombre_completo:g.nombre_completo||"",email:g.email||"",telefono:g.telefono||"",documento_identidad:g.documento_identidad||"",direccion:g.direccion||"",fecha_nacimiento:g.fecha_nacimiento?g.fecha_nacimiento.split("T")[0]:"",pais:g.pais||"Ecuador",provincia:g.provincia||"Guayas",ciudad:g.ciudad||"Guayaquil"}),ee(""),v(!0)},V=()=>{v(!1),R(null),B(Y()),ee("")},F=g=>{R(g),y(!0)},se=()=>{y(!1),R(null)},me=g=>{R(g),U(!0)},ie=()=>{U(!1),R(null)},ge=async g=>{var p,Z;if(g.preventDefault(),ee(""),!w.nombre_usuario||!w.contrasena||!w.nombre_completo){ee("Los campos nombre de usuario, contrasea y nombre completo son requeridos");return}if(w.contrasena.length<6){ee("La contrasea debe tener al menos 6 caracteres");return}try{E(!0),await so.create(w),await re(),oe(),n("Cliente creado exitosamente")}catch(ce){const be=((Z=(p=ce.response)==null?void 0:p.data)==null?void 0:Z.error)||"Error al crear el cliente";ee(be),console.error(ce)}finally{E(!1)}},Te=async g=>{var p,Z;if(g.preventDefault(),ee(""),!w.nombre_completo){ee("El nombre completo es requerido");return}try{E(!0),await so.update(X.id,w),await re(),V(),n("Cliente actualizado exitosamente")}catch(ce){const be=((Z=(p=ce.response)==null?void 0:p.data)==null?void 0:Z.error)||"Error al actualizar el cliente";ee(be),console.error(ce)}finally{E(!1)}},Q=async()=>{var g,p;try{E(!0),await so.delete(X.id),await re(),ie(),n("Cliente eliminado exitosamente")}catch(Z){const ce=((p=(g=Z.response)==null?void 0:g.data)==null?void 0:p.error)||"Error al eliminar el cliente";i(ce),console.error(Z)}finally{E(!1)}};return s?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando clientes..."}):e.jsxs("div",{children:[e.jsx(Nr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:u?"1.5rem":"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Clientes"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de clientes"})]}),H&&e.jsxs("button",{onClick:D,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:g=>g.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:g=>g.currentTarget.style.backgroundColor="#6366f1",children:[e.jsx(Mr,{size:20}),"Nuevo Cliente"]})]}),f&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:f}),e.jsxs("div",{style:{marginBottom:"1.5rem",position:"relative",maxWidth:u?"100%":"400px"},children:[e.jsx(Et,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar clientes...",value:h,onChange:g=>S(g.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",overflow:"hidden"},children:u?e.jsx("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:W.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:h?"No se encontraron clientes con ese criterio":"No hay clientes disponibles"}):W.map(g=>e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"1rem",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06)",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"50%",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(mo,{size:18,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#111827"},children:g.nombre_completo||"-"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:g.documento_identidad||"-"})]})]}),e.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[e.jsxs("div",{style:{fontSize:"0.85rem"},children:[e.jsx("strong",{children:"Email:"})," ",g.email||"-"]}),e.jsxs("div",{style:{fontSize:"0.85rem"},children:[e.jsx("strong",{children:"Telfono:"})," ",g.telefono||"-"]}),e.jsxs("div",{style:{fontSize:"0.85rem"},children:[e.jsx("strong",{children:"Direccin:"})," ",g.direccion||"-"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>F(g),style:{padding:"0.5rem 0.75rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(St,{size:16,strokeWidth:2.5}),"Ver"]}),G&&e.jsxs("button",{onClick:()=>K(g),style:{padding:"0.5rem 0.75rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(Qt,{size:16,strokeWidth:2.5}),"Editar"]}),O&&e.jsxs("button",{onClick:()=>me(g),style:{padding:"0.5rem 0.75rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(Ar,{size:16,strokeWidth:2.5}),"Eliminar"]})]})]},g.id))}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Cliente"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Documento"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Email"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Telfono"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Direccin"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:W.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:h?"No se encontraron clientes con ese criterio":"No hay clientes disponibles"})}):W.map(g=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"50%",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(mo,{size:20,color:"#6366f1"})}),e.jsx("div",{children:e.jsx("div",{style:{fontWeight:"500"},children:g.nombre_completo||"-"})})]})}),e.jsx("td",{style:{padding:"1rem"},children:g.documento_identidad||"-"}),e.jsx("td",{style:{padding:"1rem"},children:g.email||"-"}),e.jsx("td",{style:{padding:"1rem"},children:g.telefono||"-"}),e.jsx("td",{style:{padding:"1rem",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:g.direccion||"-"}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>F(g),style:{padding:"0.5rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:p=>p.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:p=>p.currentTarget.style.backgroundColor="#3b82f6",title:"Ver Detalle",children:e.jsx(St,{size:18,strokeWidth:2.5})}),G&&e.jsx("button",{onClick:()=>K(g),style:{padding:"0.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:p=>p.currentTarget.style.backgroundColor="#059669",onMouseLeave:p=>p.currentTarget.style.backgroundColor="#10b981",title:"Editar",children:e.jsx(Qt,{size:18,strokeWidth:2.5})}),O&&e.jsx("button",{onClick:()=>me(g),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:p=>p.currentTarget.style.backgroundColor="#dc2626",onMouseLeave:p=>p.currentTarget.style.backgroundColor="#ef4444",title:"Eliminar",children:e.jsx(Ar,{size:18,strokeWidth:2.5})})]})})]},g.id))})]})})}),C&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:oe,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Nuevo Cliente"}),e.jsx("button",{onClick:oe,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),T&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:T}),e.jsxs("form",{onSubmit:ge,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre de Usuario ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:w.nombre_usuario,onChange:g=>B({...w,nombre_usuario:g.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Contrasea ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"password",value:w.contrasena,onChange:g=>B({...w,contrasena:g.target.value}),required:!0,minLength:6,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre Completo ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:w.nombre_completo,onChange:g=>B({...w,nombre_completo:g.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Email"}),e.jsx("input",{type:"email",value:w.email,onChange:g=>B({...w,email:g.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Telfono"}),e.jsx("input",{type:"tel",value:w.telefono,onChange:g=>B({...w,telefono:g.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Documento de Identidad"}),e.jsx("input",{type:"text",value:w.documento_identidad,onChange:g=>B({...w,documento_identidad:g.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Fecha de Nacimiento"}),e.jsx("input",{type:"date",value:w.fecha_nacimiento,onChange:g=>B({...w,fecha_nacimiento:g.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Pas"}),e.jsx("input",{type:"text",value:w.pais,onChange:g=>B({...w,pais:g.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Provincia"}),e.jsx("input",{type:"text",value:w.provincia,onChange:g=>B({...w,provincia:g.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Ciudad"}),e.jsx("input",{type:"text",value:w.ciudad,onChange:g=>B({...w,ciudad:g.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Direccin"}),e.jsx("textarea",{value:w.direccion,onChange:g=>B({...w,direccion:g.target.value}),rows:2,placeholder:"Calle, nmero, sector...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:oe,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:q,style:{padding:"0.75rem 1.5rem",backgroundColor:q?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:q?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),q?"Guardando...":"Guardar"]})]})]})]})}),P&&X&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:V,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Editar Cliente"}),e.jsx("button",{onClick:V,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),T&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:T}),e.jsxs("form",{onSubmit:Te,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre Completo ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:w.nombre_completo,onChange:g=>B({...w,nombre_completo:g.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Email"}),e.jsx("input",{type:"email",value:w.email,onChange:g=>B({...w,email:g.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Telfono"}),e.jsx("input",{type:"tel",value:w.telefono,onChange:g=>B({...w,telefono:g.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Documento de Identidad"}),e.jsx("input",{type:"text",value:w.documento_identidad,onChange:g=>B({...w,documento_identidad:g.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Fecha de Nacimiento"}),e.jsx("input",{type:"date",value:w.fecha_nacimiento,onChange:g=>B({...w,fecha_nacimiento:g.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Pas"}),e.jsx("input",{type:"text",value:w.pais,onChange:g=>B({...w,pais:g.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Provincia"}),e.jsx("input",{type:"text",value:w.provincia,onChange:g=>B({...w,provincia:g.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Ciudad"}),e.jsx("input",{type:"text",value:w.ciudad,onChange:g=>B({...w,ciudad:g.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Direccin"}),e.jsx("textarea",{value:w.direccion,onChange:g=>B({...w,direccion:g.target.value}),rows:2,placeholder:"Calle, nmero, sector...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:V,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:q,style:{padding:"0.75rem 1.5rem",backgroundColor:q?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:q?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),q?"Guardando...":"Guardar Cambios"]})]})]})]})}),m&&X&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:se,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Detalle del Cliente"}),e.jsx("button",{onClick:se,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{width:"4rem",height:"4rem",borderRadius:"50%",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(mo,{size:32,color:"#6366f1"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:X.nombre_completo||"N/A"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:X.edad?`${X.edad} aos`:"Cliente"})]}),X.cantidad_eventos_completados>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"#fef3c7",padding:"0.5rem 1rem",borderRadius:"2rem"},children:[e.jsx(Fv,{size:18,color:"#d97706"}),e.jsxs("span",{style:{fontWeight:"600",color:"#92400e"},children:[X.cantidad_eventos_completados," evento",X.cantidad_eventos_completados>1?"s":""]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Documento de Identidad"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:X.documento_identidad||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Fecha de Nacimiento"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:X.fecha_nacimiento?new Date(X.fecha_nacimiento+"T00:00:00").toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Email"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:X.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Telfono"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:X.telefono||"N/A"})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.5rem",display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[e.jsx(In,{size:20,color:"#6b7280",style:{marginTop:"2px"}}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"500",marginBottom:"0.25rem"},children:[X.ciudad||"Guayaquil",", ",X.provincia||"Guayas"]}),e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:X.pais||"Ecuador"}),X.direccion&&e.jsx("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginTop:"0.5rem"},children:X.direccion})]})]}),(X.cantidad_eventos_completados>0||X.fecha_ultimo_evento)&&e.jsxs("div",{style:{backgroundColor:"#eff6ff",padding:"1rem",borderRadius:"0.5rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.75rem",color:"#3b82f6",marginBottom:"0.25rem",textTransform:"uppercase",fontWeight:"600"},children:"Eventos Completados"}),e.jsx("p",{style:{margin:0,fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:X.cantidad_eventos_completados||0})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.75rem",color:"#3b82f6",marginBottom:"0.25rem",textTransform:"uppercase",fontWeight:"600"},children:"ltimo Evento"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500",color:"#1e40af"},children:X.fecha_ultimo_evento?new Date(X.fecha_ultimo_evento+"T00:00:00").toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"}):"N/A"})]})]})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:e.jsx("button",{onClick:se,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})})]})}),k&&X&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:ie,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"50%",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ut,{size:24,color:"#dc2626"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"Eliminar Cliente"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:"Est seguro de eliminar este cliente?"})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.375rem",marginBottom:"1.5rem"},children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:X.nombre_completo}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:X.email||"Sin email"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:ie,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{onClick:Q,disabled:q,style:{padding:"0.75rem 1.5rem",backgroundColor:q?"#9ca3af":"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:q?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ar,{size:18}),q?"Eliminando...":"Eliminar"]})]})]})})]})},A5=({productoId:r,productoNombre:t,puedeEditar:o=!1,onClose:n})=>{const{success:i,error:a}=_r(),[l,u]=c.useState([]),[s,d]=c.useState(!0),[f,x]=c.useState(!1),[h,S]=c.useState(null),[C,j]=c.useState(!1),[P,v]=c.useState({nombre_grupo:"",opciones:"",permite_multiple:!1,requerido:!0,orden:0});c.useEffect(()=>{r&&m()},[r]);const m=async()=>{try{d(!0);const w=await jn.getOpcionesProducto(r);u(w.opciones||[])}catch(w){a("Error al cargar opciones"),console.error(w)}finally{d(!1)}},y=()=>{v({nombre_grupo:"",opciones:"",permite_multiple:!1,requerido:!0,orden:l.length}),S(null),x(!0)},k=w=>{v({nombre_grupo:w.nombre_grupo,opciones:w.opciones,permite_multiple:w.permite_multiple,requerido:w.requerido,orden:w.orden}),S(w),x(!0)},U=()=>{x(!1),S(null),v({nombre_grupo:"",opciones:"",permite_multiple:!1,requerido:!0,orden:0})},X=async w=>{var B,q;if(w.preventDefault(),!P.nombre_grupo.trim()){a("El nombre del grupo es requerido");return}if(!P.opciones.trim()){a("Las opciones son requeridas");return}try{j(!0),h?(await jn.actualizarOpcion(h.id,P),i("Opcin actualizada exitosamente")):(await jn.crearOpcion(r,P),i("Opcin creada exitosamente")),await m(),U()}catch(E){a(((q=(B=E.response)==null?void 0:B.data)==null?void 0:q.error)||"Error al guardar opcin")}finally{j(!1)}},R=async w=>{var B,q;if(window.confirm(`Eliminar el grupo "${w.nombre_grupo}"?`))try{await jn.eliminarOpcion(w.id,!0),i("Opcin eliminada"),await m()}catch(E){a(((q=(B=E.response)==null?void 0:B.data)==null?void 0:q.error)||"Error al eliminar opcin")}};return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:n,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",width:"100%",maxWidth:"700px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(rs,{size:24,style:{color:"#6366f1"}}),"Opciones del Producto"]}),e.jsx("p",{style:{margin:"0.25rem 0 0",color:"#6b7280",fontSize:"0.875rem"},children:t})]}),e.jsx("button",{onClick:n,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",color:"#6b7280"},children:e.jsx(er,{size:24})})]}),e.jsxs("div",{style:{padding:"1.5rem",overflowY:"auto",flex:1},children:[e.jsxs("div",{style:{backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1.5rem",display:"flex",gap:"0.75rem"},children:[e.jsx(ut,{size:20,style:{color:"#0284c7",flexShrink:0,marginTop:"2px"}}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#0369a1"},children:[e.jsx("strong",{children:"Opciones que el cliente debe confirmar"}),e.jsxs("p",{style:{margin:"0.25rem 0 0"},children:['Define grupos de opciones (ej: "Tipo de Arroz") con sus variantes separadas por ',e.jsx("code",{style:{backgroundColor:"#e0f2fe",padding:"0.1rem 0.3rem",borderRadius:"0.25rem"},children:"|"}),' (ej: "Moro|Blanco|Con choclo").']})]})]}),s?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:"Cargando opciones..."}):e.jsxs(e.Fragment,{children:[l.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"2rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",color:"#6b7280"},children:[e.jsx(rs,{size:48,style:{marginBottom:"1rem",opacity:.5}}),e.jsx("p",{children:"Este producto no tiene opciones configuradas"}),o&&e.jsxs("button",{onClick:y,style:{marginTop:"1rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontWeight:"500"},children:[e.jsx(Mr,{size:18}),"Agregar primera opcin"]})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:l.map(w=>{var B;return e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"1rem",backgroundColor:"#fafafa"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{margin:0,fontWeight:"600",color:"#1f2937"},children:w.nombre_grupo}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.25rem"},children:[w.requerido&&e.jsx("span",{style:{fontSize:"0.7rem",padding:"0.15rem 0.5rem",backgroundColor:"#fef2f2",color:"#dc2626",borderRadius:"9999px"},children:"Requerido"}),w.permite_multiple&&e.jsx("span",{style:{fontSize:"0.7rem",padding:"0.15rem 0.5rem",backgroundColor:"#f0fdf4",color:"#16a34a",borderRadius:"9999px"},children:"Mltiple"})]})]}),o&&e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>k(w),style:{padding:"0.4rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},title:"Editar",children:e.jsx(Ag,{size:14})}),e.jsx("button",{onClick:()=>R(w),style:{padding:"0.4rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},title:"Eliminar",children:e.jsx(Ar,{size:14})})]})]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:(B=w.opciones_lista)==null?void 0:B.map((q,E)=>e.jsx("span",{style:{padding:"0.35rem 0.75rem",backgroundColor:"#e0e7ff",color:"#4338ca",borderRadius:"0.375rem",fontSize:"0.8rem",fontWeight:"500"},children:q},E))})]},w.id)})}),o&&l.length>0&&!f&&e.jsxs("button",{onClick:y,style:{marginTop:"1rem",padding:"0.75rem 1rem",backgroundColor:"#f3f4f6",color:"#374151",border:"2px dashed #d1d5db",borderRadius:"0.5rem",cursor:"pointer",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontWeight:"500"},children:[e.jsx(Mr,{size:18}),"Agregar otro grupo de opciones"]}),f&&e.jsxs("div",{style:{marginTop:"1.5rem",padding:"1.5rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("h4",{style:{margin:"0 0 1rem",fontWeight:"600"},children:h?"Editar grupo de opciones":"Nuevo grupo de opciones"}),e.jsxs("form",{onSubmit:X,children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"Nombre del grupo *"}),e.jsx("input",{type:"text",value:P.nombre_grupo,onChange:w=>v({...P,nombre_grupo:w.target.value}),placeholder:"Ej: Tipo de Arroz, Tipo de Protena",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:["Opciones disponibles * ",e.jsx("span",{style:{fontWeight:"normal",color:"#6b7280"},children:"(separadas por |)"})]}),e.jsx("textarea",{value:P.opciones,onChange:w=>v({...P,opciones:w.target.value}),placeholder:"Ej: Moro|Blanco|Con choclo|Chicloso",rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem",resize:"vertical"}}),P.opciones&&e.jsx("div",{style:{marginTop:"0.5rem",display:"flex",flexWrap:"wrap",gap:"0.35rem"},children:P.opciones.split("|").filter(w=>w.trim()).map((w,B)=>e.jsx("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#dbeafe",color:"#1d4ed8",borderRadius:"0.25rem",fontSize:"0.75rem"},children:w.trim()},B))})]}),e.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:P.requerido,onChange:w=>v({...P,requerido:w.target.checked})}),e.jsx("span",{style:{fontSize:"0.875rem"},children:"Es requerido"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:P.permite_multiple,onChange:w=>v({...P,permite_multiple:w.target.checked})}),e.jsx("span",{style:{fontSize:"0.875rem"},children:"Permite seleccin mltiple"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:U,disabled:C,style:{padding:"0.6rem 1.25rem",backgroundColor:"#e5e7eb",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:C,style:{padding:"0.6rem 1.25rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:C?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem",opacity:C?.7:1},children:[e.jsx(it,{size:16}),C?"Guardando...":"Guardar"]})]})]})]})]})]}),e.jsx("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{onClick:n,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})})]})})},I5=()=>{const{usuario:r}=at(),{toasts:t,removeToast:o,success:n,error:i}=_r(),a=go(),[l,u]=c.useState([]),[s,d]=c.useState([]),[f,x]=c.useState(!0),[h,S]=c.useState(""),[C,j]=c.useState(""),[P,v]=c.useState(""),[m,y]=c.useState(!1),[k,U]=c.useState(!1),[X,R]=c.useState(!1),[w,B]=c.useState(!1),[q,E]=c.useState(!1),[T,ee]=c.useState(null),[H,G]=c.useState({nombre:"",descripcion:"",detalles_adicionales:"",variantes:"",precio:"",precio_minimo:"",precio_maximo:"",duracion_horas:"",id_categoria:"",stock:"",unidad_medida:"unidad",tipo_servicio:"servicio",activo:!0}),[O,re]=c.useState(!1),[W,Y]=c.useState(""),D=Cr(r==null?void 0:r.rol,[N.ADMIN,N.MANAGER,N.COORDINATOR]),oe=Cr(r==null?void 0:r.rol,[N.ADMIN,N.MANAGER,N.COORDINATOR]),K=Cr(r==null?void 0:r.rol,[N.ADMIN,N.MANAGER]);c.useEffect(()=>{V(),F()},[P]);const V=async()=>{var _,$;try{x(!0);const xe=await No.getAll(!1,P||null);u(xe.productos||[]),S("")}catch(xe){const Pe=(($=(_=xe.response)==null?void 0:_.data)==null?void 0:$.error)||xe.message||"Error al cargar los productos";S(Pe),console.error(xe)}finally{x(!1)}},F=async()=>{try{const _=await Yi.getAll(!0);d(_.categorias||[])}catch(_){console.error("Error al cargar categoras:",_)}},se=_=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(_),me=l.filter(_=>{var $,xe;if(!C)return!0;const Pe=C.toLowerCase();return(($=_.nombre)==null?void 0:$.toLowerCase().includes(Pe))||((xe=_.descripcion)==null?void 0:xe.toLowerCase().includes(Pe))}),ie=()=>{G({nombre:"",descripcion:"",detalles_adicionales:"",variantes:"",precio:"",precio_minimo:"",precio_maximo:"",duracion_horas:"",id_categoria:"",stock:"0",unidad_medida:"unidad",tipo_servicio:"servicio",activo:!0}),Y(""),y(!0)},ge=()=>{y(!1),G({nombre:"",descripcion:"",detalles_adicionales:"",variantes:"",precio:"",precio_minimo:"",precio_maximo:"",duracion_horas:"",id_categoria:"",stock:"0",unidad_medida:"unidad",tipo_servicio:"servicio",activo:!0}),Y("")},Te=_=>{ee(_),G({nombre:_.nombre||"",descripcion:_.descripcion||"",detalles_adicionales:_.detalles_adicionales||"",variantes:_.variantes||"",precio:_.precio||"",precio_minimo:_.precio_minimo||"",precio_maximo:_.precio_maximo||"",duracion_horas:_.duracion_horas||"",id_categoria:_.id_categoria||_.categoria_id||"",stock:_.stock||"0",unidad_medida:_.unidad_medida||"unidad",tipo_servicio:_.tipo_servicio||"servicio",activo:_.activo!==!1}),Y(""),U(!0)},Q=()=>{U(!1),ee(null),G({nombre:"",descripcion:"",detalles_adicionales:"",variantes:"",precio:"",precio_minimo:"",precio_maximo:"",duracion_horas:"",id_categoria:"",stock:"0",unidad_medida:"unidad",tipo_servicio:"servicio",activo:!0}),Y("")},g=_=>{ee(_),R(!0)},p=()=>{R(!1),ee(null)},Z=_=>{ee(_),B(!0)},ce=()=>{B(!1),ee(null)},be=_=>{ee(_),E(!0)},Ce=()=>{E(!1),ee(null)},Ae=async _=>{var $,xe;if(_.preventDefault(),Y(""),!H.nombre){Y("El nombre del producto es requerido");return}try{re(!0);const Pe={...H,precio:H.precio?parseFloat(H.precio):null,precio_minimo:H.precio_minimo?parseFloat(H.precio_minimo):null,precio_maximo:H.precio_maximo?parseFloat(H.precio_maximo):null,duracion_horas:H.duracion_horas?parseFloat(H.duracion_horas):null,id_categoria:H.id_categoria||null,stock:parseInt(H.stock)||0,activo:H.activo};await No.create(Pe),await V(),ge(),n("Producto creado exitosamente")}catch(Pe){const I=((xe=($=Pe.response)==null?void 0:$.data)==null?void 0:xe.error)||"Error al crear el producto";Y(I),console.error(Pe)}finally{re(!1)}},De=async _=>{var $,xe;if(_.preventDefault(),Y(""),!H.nombre){Y("El nombre del producto es requerido");return}try{re(!0);const Pe={...H,precio:H.precio?parseFloat(H.precio):null,precio_minimo:H.precio_minimo?parseFloat(H.precio_minimo):null,precio_maximo:H.precio_maximo?parseFloat(H.precio_maximo):null,duracion_horas:H.duracion_horas?parseFloat(H.duracion_horas):null,id_categoria:H.id_categoria||null,stock:parseInt(H.stock)||0,activo:H.activo};await No.update(T.id,Pe),await V(),Q(),n("Producto actualizado exitosamente")}catch(Pe){const I=((xe=($=Pe.response)==null?void 0:$.data)==null?void 0:xe.error)||"Error al actualizar el producto";Y(I),console.error(Pe)}finally{re(!1)}},te=async()=>{var _,$;try{re(!0),await No.delete(T.id),await V(),ce(),n("Producto eliminado exitosamente")}catch(xe){const Pe=(($=(_=xe.response)==null?void 0:_.data)==null?void 0:$.error)||"Error al eliminar el producto";i(Pe),console.error(xe)}finally{re(!1)}};return f?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando productos..."}):e.jsxs("div",{children:[e.jsx(Nr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:a?"1.5rem":"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Productos"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de productos y servicios"})]}),D&&e.jsxs("button",{onClick:ie,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:_=>_.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:_=>_.currentTarget.style.backgroundColor="#6366f1",children:[e.jsx(Mr,{size:20}),"Nuevo Producto"]})]}),h&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:h}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",flexWrap:"wrap",flexDirection:a?"column":"row"},children:[e.jsxs("div",{style:{position:"relative",flex:1,minWidth:a?"100%":"250px"},children:[e.jsx(Et,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar productos...",value:C,onChange:_=>j(_.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("select",{value:P,onChange:_=>v(_.target.value),style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",minWidth:a?"100%":"200px"},children:[e.jsx("option",{value:"",children:"Todas las categoras"}),s.map(_=>e.jsx("option",{value:_.id,children:_.nombre},_.id))]})]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",overflow:"hidden"},children:a?e.jsx("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:me.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:C||P?"No se encontraron productos con ese criterio":"No hay productos disponibles"}):me.map(_=>e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"1rem",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06)",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"0.375rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Gt,{size:18,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#111827"},children:_.nombre||"-"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:_.nombre_categoria||"-"})]})]}),e.jsx("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:_.descripcion||"-"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Precio"}),e.jsx("div",{style:{fontWeight:"600"},children:se(_.precio||0)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Stock"}),e.jsx("div",{style:{fontWeight:"600"},children:_.stock||0})]})]}),e.jsx("div",{children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:_.activo!==!1?"#10b98120":"#ef444420",color:_.activo!==!1?"#10b981":"#ef4444"},children:_.activo!==!1?"Activo":"Inactivo"})}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>g(_),style:{padding:"0.5rem 0.75rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(St,{size:16,strokeWidth:2.5}),"Ver"]}),oe&&e.jsxs("button",{onClick:()=>Te(_),style:{padding:"0.5rem 0.75rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(Qt,{size:16,strokeWidth:2.5}),"Editar"]}),K&&e.jsxs("button",{onClick:()=>Z(_),style:{padding:"0.5rem 0.75rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(Ar,{size:16,strokeWidth:2.5}),"Eliminar"]}),oe&&_.tipo_servicio!=="servicio"&&e.jsxs("button",{onClick:()=>be(_),style:{padding:"0.5rem 0.75rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(rs,{size:16,strokeWidth:2.5}),"Opciones"]})]})]},_.id))}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Producto"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Categora"}),e.jsx("th",{style:{padding:"1rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Precio"}),e.jsx("th",{style:{padding:"1rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Stock"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:me.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:C||P?"No se encontraron productos con ese criterio":"No hay productos disponibles"})}):me.map(_=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"0.375rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Gt,{size:20,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:_.nombre||"-"}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginTop:"0.25rem",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:_.descripcion||"-"})]})]})}),e.jsx("td",{style:{padding:"1rem"},children:_.nombre_categoria||"-"}),e.jsx("td",{style:{padding:"1rem",textAlign:"right",fontWeight:"500"},children:se(_.precio||0)}),e.jsx("td",{style:{padding:"1rem",textAlign:"right"},children:_.stock||0}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:_.activo!==!1?"#10b98120":"#ef444420",color:_.activo!==!1?"#10b981":"#ef4444"},children:_.activo!==!1?"Activo":"Inactivo"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>g(_),style:{padding:"0.5rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:$=>$.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:$=>$.currentTarget.style.backgroundColor="#3b82f6",title:"Ver Detalle",children:e.jsx(St,{size:18,strokeWidth:2.5})}),oe&&e.jsx("button",{onClick:()=>Te(_),style:{padding:"0.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:$=>$.currentTarget.style.backgroundColor="#059669",onMouseLeave:$=>$.currentTarget.style.backgroundColor="#10b981",title:"Editar",children:e.jsx(Qt,{size:18,strokeWidth:2.5})}),K&&e.jsx("button",{onClick:()=>Z(_),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:$=>$.currentTarget.style.backgroundColor="#dc2626",onMouseLeave:$=>$.currentTarget.style.backgroundColor="#ef4444",title:"Eliminar",children:e.jsx(Ar,{size:18,strokeWidth:2.5})}),oe&&_.tipo_servicio!=="servicio"&&e.jsx("button",{onClick:()=>be(_),style:{padding:"0.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:$=>$.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:$=>$.currentTarget.style.backgroundColor="#6366f1",title:"Opciones de confirmacin",children:e.jsx(rs,{size:18,strokeWidth:2.5})})]})})]},_.id))})]})})}),m&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:ge,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"700px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:_=>_.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Nuevo Producto"}),e.jsx("button",{onClick:ge,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),W&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:W}),e.jsxs("form",{onSubmit:Ae,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:H.nombre,onChange:_=>G({...H,nombre:_.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:H.descripcion,onChange:_=>G({...H,descripcion:_.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio"}),e.jsx("input",{type:"number",step:"0.01",value:H.precio,onChange:_=>G({...H,precio:_.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Stock"}),e.jsx("input",{type:"number",min:"0",step:"1",value:H.stock,onChange:_=>G({...H,stock:_.target.value}),onWheel:_=>_.target.blur(),onKeyDown:_=>{(_.key==="ArrowUp"||_.key==="ArrowDown")&&_.preventDefault()},style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio Mnimo"}),e.jsx("input",{type:"number",step:"0.01",value:H.precio_minimo,onChange:_=>G({...H,precio_minimo:_.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio Mximo"}),e.jsx("input",{type:"number",step:"0.01",value:H.precio_maximo,onChange:_=>G({...H,precio_maximo:_.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Categora"}),e.jsxs("select",{value:H.id_categoria,onChange:_=>G({...H,id_categoria:_.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"",children:"Sin categora"}),s.map(_=>e.jsx("option",{value:_.id,children:_.nombre},_.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Duracin (horas)"}),e.jsx("input",{type:"number",step:"0.5",value:H.duracion_horas,onChange:_=>G({...H,duracion_horas:_.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Unidad de Medida"}),e.jsxs("select",{value:H.unidad_medida,onChange:_=>G({...H,unidad_medida:_.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"unidad",children:"Unidad"}),e.jsx("option",{value:"hora",children:"Hora"}),e.jsx("option",{value:"dia",children:"Da"}),e.jsx("option",{value:"servicio",children:"Servicio"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Tipo de Servicio"}),e.jsxs("select",{value:H.tipo_servicio,onChange:_=>G({...H,tipo_servicio:_.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"servicio",children:"Servicio"}),e.jsx("option",{value:"producto",children:"Producto"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Detalles Adicionales"}),e.jsx("textarea",{value:H.detalles_adicionales,onChange:_=>G({...H,detalles_adicionales:_.target.value}),rows:2,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Variantes"}),e.jsx("input",{type:"text",value:H.variantes,onChange:_=>G({...H,variantes:_.target.value}),placeholder:"Ej: Tamao pequeo, mediano, grande",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:H.activo,onChange:_=>G({...H,activo:_.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Producto activo"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:ge,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:O,style:{padding:"0.75rem 1.5rem",backgroundColor:O?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:O?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),O?"Guardando...":"Guardar"]})]})]})]})}),k&&T&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:Q,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"700px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:_=>_.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Editar Producto"}),e.jsx("button",{onClick:Q,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),W&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:W}),e.jsxs("form",{onSubmit:De,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:H.nombre,onChange:_=>G({...H,nombre:_.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:H.descripcion,onChange:_=>G({...H,descripcion:_.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio"}),e.jsx("input",{type:"number",step:"0.01",value:H.precio,onChange:_=>G({...H,precio:_.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Stock"}),e.jsx("input",{type:"number",min:"0",step:"1",value:H.stock,onChange:_=>G({...H,stock:_.target.value}),onWheel:_=>_.target.blur(),onKeyDown:_=>{(_.key==="ArrowUp"||_.key==="ArrowDown")&&_.preventDefault()},style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio Mnimo"}),e.jsx("input",{type:"number",step:"0.01",value:H.precio_minimo,onChange:_=>G({...H,precio_minimo:_.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio Mximo"}),e.jsx("input",{type:"number",step:"0.01",value:H.precio_maximo,onChange:_=>G({...H,precio_maximo:_.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Categora"}),e.jsxs("select",{value:H.id_categoria,onChange:_=>G({...H,id_categoria:_.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"",children:"Sin categora"}),s.map(_=>e.jsx("option",{value:_.id,children:_.nombre},_.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Duracin (horas)"}),e.jsx("input",{type:"number",step:"0.5",value:H.duracion_horas,onChange:_=>G({...H,duracion_horas:_.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Unidad de Medida"}),e.jsxs("select",{value:H.unidad_medida,onChange:_=>G({...H,unidad_medida:_.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"unidad",children:"Unidad"}),e.jsx("option",{value:"hora",children:"Hora"}),e.jsx("option",{value:"dia",children:"Da"}),e.jsx("option",{value:"servicio",children:"Servicio"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Tipo de Servicio"}),e.jsxs("select",{value:H.tipo_servicio,onChange:_=>G({...H,tipo_servicio:_.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"servicio",children:"Servicio"}),e.jsx("option",{value:"producto",children:"Producto"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Detalles Adicionales"}),e.jsx("textarea",{value:H.detalles_adicionales,onChange:_=>G({...H,detalles_adicionales:_.target.value}),rows:2,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Variantes"}),e.jsx("input",{type:"text",value:H.variantes,onChange:_=>G({...H,variantes:_.target.value}),placeholder:"Ej: Tamao pequeo, mediano, grande",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:H.activo,onChange:_=>G({...H,activo:_.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Producto activo"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:Q,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:O,style:{padding:"0.75rem 1.5rem",backgroundColor:O?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:O?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),O?"Guardando...":"Guardar Cambios"]})]})]})]})}),X&&T&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:p,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:_=>_.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Detalle del Producto"}),e.jsx("button",{onClick:p,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{width:"4rem",height:"4rem",borderRadius:"0.5rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Gt,{size:32,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:T.nombre||"N/A"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:T.nombre_categoria||"Sin categora"})]})]}),e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Descripcin"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:T.descripcion||"N/A"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Precio"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:se(T.precio||0)})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Stock"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:T.stock||0})]})]}),T.precio_minimo&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Precio Mnimo"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:se(T.precio_minimo)})]}),T.precio_maximo&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Precio Mximo"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:se(T.precio_maximo)})]})]}),T.duracion_horas&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Duracin"}),e.jsxs("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:[T.duracion_horas," horas"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Unidad de Medida"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:T.unidad_medida||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Tipo"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:T.tipo_servicio||"N/A"})]})]}),T.detalles_adicionales&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Detalles Adicionales"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:T.detalles_adicionales})]}),T.variantes&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Variantes"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:T.variantes})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Estado"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:T.activo!==!1?"#10b98120":"#ef444420",color:T.activo!==!1?"#10b981":"#ef4444"},children:T.activo!==!1?"Activo":"Inactivo"})]})]})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:e.jsx("button",{onClick:p,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})})]})}),w&&T&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:ce,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:_=>_.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"50%",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ut,{size:24,color:"#dc2626"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"Eliminar Producto"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:"Est seguro de eliminar este producto?"})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.375rem",marginBottom:"1.5rem"},children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:T.nombre}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:T.nombre_categoria||"Sin categora"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:ce,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{onClick:te,disabled:O,style:{padding:"0.75rem 1.5rem",backgroundColor:O?"#9ca3af":"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:O?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ar,{size:18}),O?"Eliminando...":"Eliminar"]})]})]})}),q&&T&&e.jsx(A5,{productoId:T.id_producto||T.id,productoNombre:T.nombre,puedeEditar:oe,onClose:Ce})]})},T5=()=>{const{usuario:r}=at(),{toasts:t,removeToast:o,success:n,error:i}=_r(),a=go(),[l,u]=c.useState([]),[s,d]=c.useState(!0),[f,x]=c.useState(""),[h,S]=c.useState(""),[C,j]=c.useState(!1),[P,v]=c.useState(!1),[m,y]=c.useState(!1),[k,U]=c.useState(!1),[X,R]=c.useState(null),[w,B]=c.useState({nombre:"",descripcion:"",activo:!0}),[q,E]=c.useState(!1),[T,ee]=c.useState(""),H=Cr(r==null?void 0:r.rol,[N.ADMIN,N.MANAGER,N.COORDINATOR]),G=Cr(r==null?void 0:r.rol,[N.ADMIN,N.MANAGER,N.COORDINATOR]),O=Cr(r==null?void 0:r.rol,[N.ADMIN,N.MANAGER]);c.useEffect(()=>{re()},[]);const re=async()=>{var Q,g;try{d(!0);const p=await Yi.getAll(!1);u(p.categorias||[]),x("")}catch(p){const Z=((g=(Q=p.response)==null?void 0:Q.data)==null?void 0:g.error)||p.message||"Error al cargar las categoras";x(Z),console.error(p)}finally{d(!1)}},W=l.filter(Q=>{var g,p;if(!h)return!0;const Z=h.toLowerCase();return((g=Q.nombre)==null?void 0:g.toLowerCase().includes(Z))||((p=Q.descripcion)==null?void 0:p.toLowerCase().includes(Z))}),Y=()=>{B({nombre:"",descripcion:"",activo:!0}),ee(""),j(!0)},D=()=>{j(!1),B({nombre:"",descripcion:"",activo:!0}),ee("")},oe=Q=>{R(Q),B({nombre:Q.nombre||"",descripcion:Q.descripcion||"",activo:Q.activo!==!1}),ee(""),v(!0)},K=()=>{v(!1),R(null),B({nombre:"",descripcion:"",activo:!0}),ee("")},V=Q=>{R(Q),y(!0)},F=()=>{y(!1),R(null)},se=Q=>{R(Q),U(!0)},me=()=>{U(!1),R(null)},ie=async Q=>{var g,p;if(Q.preventDefault(),ee(""),!w.nombre){ee("El nombre de la categora es requerido");return}try{E(!0),await Yi.create(w),await re(),D(),n("Categora creada exitosamente")}catch(Z){const ce=((p=(g=Z.response)==null?void 0:g.data)==null?void 0:p.error)||"Error al crear la categora";ee(ce),console.error(Z)}finally{E(!1)}},ge=async Q=>{var g,p;if(Q.preventDefault(),ee(""),!w.nombre){ee("El nombre de la categora es requerido");return}try{E(!0),await Yi.update(X.id,w),await re(),K(),n("Categora actualizada exitosamente")}catch(Z){const ce=((p=(g=Z.response)==null?void 0:g.data)==null?void 0:p.error)||"Error al actualizar la categora";ee(ce),console.error(Z)}finally{E(!1)}},Te=async()=>{var Q,g;try{E(!0),await Yi.delete(X.id),await re(),me(),n("Categora eliminada exitosamente")}catch(p){const Z=((g=(Q=p.response)==null?void 0:Q.data)==null?void 0:g.error)||"Error al eliminar la categora";i(Z),console.error(p)}finally{E(!1)}};return s?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando categoras..."}):e.jsxs("div",{children:[e.jsx(Nr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:a?"1.5rem":"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Categoras"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de categoras de productos"})]}),H&&e.jsxs("button",{onClick:Y,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:Q=>Q.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:Q=>Q.currentTarget.style.backgroundColor="#6366f1",children:[e.jsx(Mr,{size:20}),"Nueva Categora"]})]}),f&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:f}),e.jsxs("div",{style:{marginBottom:"1.5rem",position:"relative",maxWidth:a?"100%":"400px"},children:[e.jsx(Et,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar categoras...",value:h,onChange:Q=>S(Q.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:a?"1fr":"repeat(auto-fill, minmax(300px, 1fr))",gap:"1.5rem"},children:W.length===0?e.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"2rem",color:"#6b7280"},children:h?"No se encontraron categoras con ese criterio":"No hay categoras disponibles"}):W.map(Q=>e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseEnter:g=>{g.currentTarget.style.transform="translateY(-2px)",g.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:g=>{g.currentTarget.style.transform="translateY(0)",g.currentTarget.style.boxShadow="0 1px 3px 0 rgba(0, 0, 0, 0.1)"},onClick:()=>V(Q),children:[e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"1rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"0.5rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(es,{size:24,color:"#6366f1"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.5rem",margin:0},children:Q.nombre}),e.jsx("p",{style:{color:"#6b7280",fontSize:"0.875rem",margin:0},children:Q.descripcion||"Sin descripcin"})]})]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:Q.activo!==!1?"#10b98120":"#ef444420",color:Q.activo!==!1?"#10b981":"#ef4444"},children:Q.activo!==!1?"Activa":"Inactiva"})}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},onClick:g=>g.stopPropagation(),children:[e.jsxs("button",{onClick:()=>V(Q),style:{flex:1,padding:"0.5rem 1rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background-color 0.2s"},onMouseEnter:g=>g.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:g=>g.currentTarget.style.backgroundColor="#3b82f6",children:[e.jsx(St,{size:16}),"Ver"]}),G&&e.jsxs("button",{onClick:()=>oe(Q),style:{flex:1,padding:"0.5rem 1rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background-color 0.2s"},onMouseEnter:g=>g.currentTarget.style.backgroundColor="#059669",onMouseLeave:g=>g.currentTarget.style.backgroundColor="#10b981",children:[e.jsx(Qt,{size:16}),"Editar"]}),O&&e.jsxs("button",{onClick:()=>se(Q),style:{flex:1,padding:"0.5rem 1rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background-color 0.2s"},onMouseEnter:g=>g.currentTarget.style.backgroundColor="#dc2626",onMouseLeave:g=>g.currentTarget.style.backgroundColor="#ef4444",children:[e.jsx(Ar,{size:16}),"Eliminar"]})]})]},Q.id))}),C&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:D,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:Q=>Q.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Nueva Categora"}),e.jsx("button",{onClick:D,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),T&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:T}),e.jsxs("form",{onSubmit:ie,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:w.nombre,onChange:Q=>B({...w,nombre:Q.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:w.descripcion,onChange:Q=>B({...w,descripcion:Q.target.value}),rows:4,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:w.activo,onChange:Q=>B({...w,activo:Q.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Categora activa"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:D,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:q,style:{padding:"0.75rem 1.5rem",backgroundColor:q?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:q?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),q?"Guardando...":"Guardar"]})]})]})]})}),P&&X&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:K,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:Q=>Q.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Editar Categora"}),e.jsx("button",{onClick:K,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),T&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:T}),e.jsxs("form",{onSubmit:ge,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:w.nombre,onChange:Q=>B({...w,nombre:Q.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:w.descripcion,onChange:Q=>B({...w,descripcion:Q.target.value}),rows:4,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:w.activo,onChange:Q=>B({...w,activo:Q.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Categora activa"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:K,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:q,style:{padding:"0.75rem 1.5rem",backgroundColor:q?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:q?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),q?"Guardando...":"Guardar Cambios"]})]})]})]})}),m&&X&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:F,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:Q=>Q.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Detalle de la Categora"}),e.jsx("button",{onClick:F,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{width:"4rem",height:"4rem",borderRadius:"0.5rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(es,{size:32,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:X.nombre||"N/A"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:"Categora"})]})]}),e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Descripcin"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:X.descripcion||"Sin descripcin"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Estado"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:X.activo!==!1?"#10b98120":"#ef444420",color:X.activo!==!1?"#10b981":"#ef4444"},children:X.activo!==!1?"Activa":"Inactiva"})]})]})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:e.jsx("button",{onClick:F,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})})]})}),k&&X&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:me,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:Q=>Q.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"50%",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ut,{size:24,color:"#dc2626"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"Eliminar Categora"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:"Est seguro de eliminar esta categora?"})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.375rem",marginBottom:"1.5rem"},children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:X.nombre}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:X.descripcion||"Sin descripcin"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:me,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{onClick:Te,disabled:q,style:{padding:"0.75rem 1.5rem",backgroundColor:q?"#9ca3af":"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:q?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ar,{size:18}),q?"Eliminando...":"Eliminar"]})]})]})})]})},N5=()=>{const{usuario:r}=at(),{toasts:t,removeToast:o,success:n,error:i}=_r(),a=go(),[l,u]=c.useState([]),[s,d]=c.useState([]),[f,x]=c.useState(!0),[h,S]=c.useState(""),[C,j]=c.useState(""),[P,v]=c.useState("todos"),[m,y]=c.useState(""),[k,U]=c.useState(""),[X,R]=c.useState("fecha_desc"),[w,B]=c.useState(!1),[q,E]=c.useState(!1),[T,ee]=c.useState(!1),[H,G]=c.useState(!1),[O,re]=c.useState(!1),[W,Y]=c.useState(null),[D,oe]=c.useState([]),[K,V]=c.useState({nombre:"",descripcion:"",precio_base:"",capacidad_minima:"",capacidad_maxima:"",duracion_horas:"",incluye:"",activo:!0}),[F,se]=c.useState(!1),[me,ie]=c.useState(""),[ge,Te]=c.useState(""),[Q,g]=c.useState("1"),[p,Z]=c.useState(""),[ce,be]=c.useState("1"),[Ce,Ae]=c.useState(""),[De,te]=c.useState([]),[_,$]=c.useState([]),[xe,Pe]=c.useState(!1),[I,ue]=c.useState([]),[J,Ze]=c.useState([]),[jr,Ge]=c.useState(""),[tr,Ke]=c.useState(""),gr=xr(r,Je.PLANES_CREAR,[N.ADMIN,N.MANAGER]),zr=xr(r,Je.PLANES_EDITAR,[N.ADMIN,N.MANAGER]),mr=xr(r,Je.PLANES_ELIMINAR,[N.ADMIN,N.MANAGER]);c.useEffect(()=>{br(),lr()},[]);const br=async()=>{var A,de;try{x(!0);const He=await xt.getAll(!1);u(He.planes||[]),S("")}catch(He){const Ye=((de=(A=He.response)==null?void 0:A.data)==null?void 0:de.error)||He.message||"Error al cargar los planes";S(Ye),console.error(He)}finally{x(!1)}},lr=async()=>{try{const A=await No.getAll(!0);d(A.productos||[])}catch(A){console.error("Error al cargar productos:",A)}},qe=async A=>{try{const de=await xt.getProductos(A);oe(de.productos||[])}catch(de){console.error("Error al cargar productos del plan:",de),oe([])}},ne=A=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(A),ke=A=>s.find(de=>de.id===A),ye=A=>(A||[]).map(de=>({producto_id:Number(de.producto_id),cantidad:Number(de.cantidad)})),ve=A=>(A||[]).map(de=>({producto_id:Number(de.producto_id),nombre_producto:de.nombre_producto||de.nombre||"N/A",cantidad:Number(de.cantidad)||1,precio_unitario:Number(de.precio_unitario??de.precio??0)})),Ee=De.reduce((A,de)=>{const He=Number(de.precio_unitario??de.precio??0),Ye=Number(de.cantidad)||0;return A+He*Ye},0),Qe=Number.isFinite(parseFloat(K.precio_base))?parseFloat(K.precio_base):0,Ne=Math.max(0,Ee-Qe),L=D.reduce((A,de)=>{const He=Number(de.precio||0),Ye=Number(de.cantidad)||0;return A+He*Ye},0),ze=Math.max(0,L-Number((W==null?void 0:W.precio_base)||0)),Se=m===""?null:parseFloat(m),je=k===""?null:parseFloat(k),Me=l.filter(A=>{var de,He;if(!C)return!0;const Ye=C.toLowerCase();return((de=A.nombre)==null?void 0:de.toLowerCase().includes(Ye))||((He=A.descripcion)==null?void 0:He.toLowerCase().includes(Ye))}).filter(A=>P==="activos"?A.activo!==!1:P==="inactivos"?A.activo===!1:!0).filter(A=>{if(Se===null&&je===null)return!0;const de=Number(A.precio_base||0);return!(Se!==null&&de<Se||je!==null&&de>je)}).sort((A,de)=>{const He=A.fecha_creacion||A.created_at||A.fecha||A.fecha_creado||A.fechaCreacion||A.id,Ye=de.fecha_creacion||de.created_at||de.fecha||de.fecha_creado||de.fechaCreacion||de.id;switch(X){case"nombre_desc":return(de.nombre||"").localeCompare(A.nombre||"");case"fecha_desc":return new Date(Ye).getTime()-new Date(He).getTime();case"fecha_asc":return new Date(He).getTime()-new Date(Ye).getTime();case"precio_asc":return Number(A.precio_base||0)-Number(de.precio_base||0);case"precio_desc":return Number(de.precio_base||0)-Number(A.precio_base||0);case"capacidad_desc":return Number(de.capacidad_maxima||0)-Number(A.capacidad_maxima||0);case"duracion_desc":return Number(de.duracion_horas||0)-Number(A.duracion_horas||0);default:return(A.nombre||"").localeCompare(de.nombre||"")}}),$e=()=>{V({nombre:"",descripcion:"",precio_base:"",capacidad_minima:"",capacidad_maxima:"",duracion_horas:"",incluye:"",activo:!0}),Z(""),be("1"),Ae(""),te([]),$([]),ue([]),Ze([]),Ge(""),Ke(""),ie(""),B(!0)},Le=()=>{B(!1),V({nombre:"",descripcion:"",precio_base:"",capacidad_minima:"",capacidad_maxima:"",duracion_horas:"",incluye:"",activo:!0}),Z(""),be("1"),Ae(""),te([]),$([]),ue([]),Ze([]),Ge(""),Ke(""),ie("")},Ve=async A=>{Y(A),V({nombre:A.nombre||"",descripcion:A.descripcion||"",precio_base:A.precio_base||"",capacidad_minima:A.capacidad_minima||"",capacidad_maxima:A.capacidad_maxima||"",duracion_horas:A.duracion_horas||"",incluye:A.incluye||"",activo:A.activo!==!1}),Z(""),be("1"),Ae(""),Pe(!0),E(!0);try{const de=await xt.getProductos(A.id),He=ve(de.productos||[]);te(He),$(He);const Ye=((await xt.getServicios(A.id)).servicios||[]).map(yr=>({id:yr.id,nombre:yr.nombre,orden:yr.orden}));ue(Ye),Ze(Ye)}catch(de){console.error("Error al cargar productos del plan:",de),te([]),$([]),ue([]),Ze([])}finally{Pe(!1)}ie("")},or=()=>{E(!1),Y(null),V({nombre:"",descripcion:"",precio_base:"",capacidad_minima:"",capacidad_maxima:"",duracion_horas:"",incluye:"",activo:!0}),Z(""),be("1"),Ae(""),te([]),$([]),ue([]),Ze([]),Ge(""),Ke(""),ie("")},wr=async A=>{Y(A),await qe(A.id);try{const de=await xt.getServicios(A.id);ue(de.servicios||[])}catch(de){console.error("Error al cargar servicios del plan:",de),ue([])}ee(!0)},$r=()=>{ee(!1),Y(null),oe([]),ue([])},Ur=A=>{Y(A),G(!0)},he=()=>{G(!1),Y(null)},nr=async A=>{Y(A),await qe(A.id),Te(""),g("1"),re(!0)},sr=()=>{re(!1),Y(null),oe([]),Te(""),g("1")},Rr=()=>{if(!p||!ce||parseInt(ce)<=0){i("Seleccione un producto y una cantidad vlida");return}const A=parseInt(p),de=parseInt(ce),He=ke(A);if(!He){i("Producto no encontrado");return}if(De.some(Ye=>Ye.producto_id===A)){i("Este producto ya est agregado al plan");return}te(Ye=>[...Ye,{producto_id:A,nombre_producto:He.nombre||"N/A",cantidad:de,precio_unitario:Number(He.precio||0)}]),Z(""),be("1")},hr=A=>{te(de=>de.filter(He=>He.producto_id!==A))},qr=(A,de)=>{const He=parseInt(de);!Number.isFinite(He)||He<=0||te(Ye=>Ye.map(yr=>yr.producto_id===A?{...yr,cantidad:He}:yr))},M=()=>{const A=jr.trim();if(!A){Ke("Ingresa un servicio vlido.");return}if(I.some(de=>{var He;return((He=de.nombre)==null?void 0:He.trim().toLowerCase())===A.toLowerCase()})){Ke("Este servicio ya est agregado.");return}ue(de=>[...de,{nombre:A,orden:de.length+1}]),Ge(""),Ke("")},Re=A=>{ue(de=>de.filter((He,Ye)=>Ye!==A))},Ue=async(A,de,He=[])=>{const Ye=new Map(ye(He).map(We=>[We.producto_id,We])),yr=new Map(ye(de).map(We=>[We.producto_id,We])),z=[],we=[];Ye.forEach(We=>{const Xe=yr.get(We.producto_id);if(!Xe){z.push(We.producto_id);return}Xe.cantidad!==We.cantidad&&(z.push(We.producto_id),we.push(Xe))}),yr.forEach(We=>{Ye.has(We.producto_id)||we.push(We)});for(const We of z)await xt.eliminarProducto(A,We);for(const We of we)await xt.agregarProducto(A,We.producto_id,We.cantidad)},ir=async(A,de)=>{const He=(de||[]).map((Ye,yr)=>({nombre:Ye.nombre,orden:yr+1}));await xt.actualizarServicios(A,He)},Br=async A=>{var de,He,Ye;if(A.preventDefault(),ie(""),!K.nombre||!K.precio_base){ie("El nombre y el precio base son requeridos");return}try{se(!0);const yr={...K,precio_base:parseFloat(K.precio_base),capacidad_minima:K.capacidad_minima?parseInt(K.capacidad_minima):null,capacidad_maxima:K.capacidad_maxima?parseInt(K.capacidad_maxima):null,duracion_horas:K.duracion_horas?parseFloat(K.duracion_horas):null,activo:K.activo},z=await xt.create(yr),we=(de=z==null?void 0:z.plan)==null?void 0:de.id;if(we&&De.length>0)try{await Ue(we,De,[])}catch(We){console.error("Error al agregar productos al plan:",We),i("Plan creado, pero ocurri un error al agregar productos")}if(we)try{await ir(we,I)}catch(We){console.error("Error al agregar servicios al plan:",We),i("Plan creado, pero ocurri un error al agregar servicios")}await br(),Le(),n("Plan creado exitosamente")}catch(yr){const z=((Ye=(He=yr.response)==null?void 0:He.data)==null?void 0:Ye.error)||"Error al crear el plan";ie(z),console.error(yr)}finally{se(!1)}},gt=async A=>{var de,He;if(A.preventDefault(),ie(""),!K.nombre||!K.precio_base){ie("El nombre y el precio base son requeridos");return}try{se(!0);const Ye={...K,precio_base:parseFloat(K.precio_base),capacidad_minima:K.capacidad_minima?parseInt(K.capacidad_minima):null,capacidad_maxima:K.capacidad_maxima?parseInt(K.capacidad_maxima):null,duracion_horas:K.duracion_horas?parseFloat(K.duracion_horas):null,activo:K.activo};await xt.update(W.id,Ye),await Ue(W.id,De,_),await ir(W.id,I),await br(),$(De),Ze(I),or(),n("Plan actualizado exitosamente")}catch(Ye){const yr=((He=(de=Ye.response)==null?void 0:de.data)==null?void 0:He.error)||"Error al actualizar el plan";ie(yr),console.error(Ye)}finally{se(!1)}},ro=async()=>{var A,de;try{se(!0),await xt.delete(W.id),await br(),he(),n("Plan eliminado exitosamente")}catch(He){const Ye=((de=(A=He.response)==null?void 0:A.data)==null?void 0:de.error)||"Error al eliminar el plan";i(Ye),console.error(He)}finally{se(!1)}},zo=async()=>{var A,de;if(!ge||!Q||parseInt(Q)<=0){i("Seleccione un producto y una cantidad vlida");return}try{await xt.agregarProducto(W.id,parseInt(ge),parseInt(Q)),await qe(W.id),Te(""),g("1"),n("Producto agregado al plan exitosamente")}catch(He){const Ye=((de=(A=He.response)==null?void 0:A.data)==null?void 0:de.error)||"Error al agregar el producto";i(Ye),console.error(He)}},zi=async A=>{var de,He;try{await xt.eliminarProducto(W.id,A),await qe(W.id),n("Producto eliminado del plan exitosamente")}catch(Ye){const yr=((He=(de=Ye.response)==null?void 0:de.data)==null?void 0:He.error)||"Error al eliminar el producto";i(yr),console.error(Ye)}};return f?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando planes..."}):e.jsxs("div",{children:[e.jsx(Nr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:a?"1.5rem":"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Planes"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de planes de eventos"})]}),gr&&e.jsxs("button",{onClick:$e,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:A=>A.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:A=>A.currentTarget.style.backgroundColor="#6366f1",children:[e.jsx(Mr,{size:20}),"Nuevo Plan"]})]}),h&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:h}),e.jsxs("div",{style:{marginBottom:"1.5rem",display:"grid",gap:"1rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:a?"1fr":"2fr 1fr",gap:"1rem"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Et,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar planes...",value:C,onChange:A=>j(A.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsx("div",{children:e.jsxs("select",{value:X,onChange:A=>R(A.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"fecha_desc",children:"Ordenar: Fecha creacin (Ms recientes)"}),e.jsx("option",{value:"fecha_asc",children:"Ordenar: Fecha creacin (Ms antiguos)"}),e.jsx("option",{value:"nombre_asc",children:"Ordenar: Nombre (A-Z)"}),e.jsx("option",{value:"nombre_desc",children:"Ordenar: Nombre (Z-A)"}),e.jsx("option",{value:"precio_asc",children:"Ordenar: Precio (Menor a mayor)"}),e.jsx("option",{value:"precio_desc",children:"Ordenar: Precio (Mayor a menor)"}),e.jsx("option",{value:"capacidad_desc",children:"Ordenar: Capacidad (Mayor a menor)"}),e.jsx("option",{value:"duracion_desc",children:"Ordenar: Duracin (Mayor a menor)"})]})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:a?"1fr":"1fr 1fr 1fr",gap:"1rem",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Estado"}),e.jsxs("select",{value:P,onChange:A=>v(A.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"todos",children:"Todos"}),e.jsx("option",{value:"activos",children:"Activos"}),e.jsx("option",{value:"inactivos",children:"Inactivos"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio mnimo"}),e.jsx("input",{type:"number",min:"0",value:m,onChange:A=>y(A.target.value),placeholder:"0",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio mximo"}),e.jsx("input",{type:"number",min:"0",value:k,onChange:A=>U(A.target.value),placeholder:"Sin tope",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:a?"1fr":"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:Me.length===0?e.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"2rem",color:"#6b7280"},children:C?"No se encontraron planes con ese criterio":"No hay planes disponibles"}):Me.map(A=>e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:de=>{de.currentTarget.style.transform="translateY(-2px)",de.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:de=>{de.currentTarget.style.transform="translateY(0)",de.currentTarget.style.boxShadow="0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"1rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"0.5rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(jt,{size:24,color:"#6366f1"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.25rem",margin:0},children:A.nombre}),e.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#6366f1",margin:0},children:ne(A.precio_base||0)})]})]}),e.jsx("p",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"1rem"},children:A.descripcion||"Sin descripcin"}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"1rem"},children:[A.capacidad_minima&&e.jsxs("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#f3f4f6",borderRadius:"9999px",fontSize:"0.75rem",color:"#6b7280"},children:["Min: ",A.capacidad_minima," personas"]}),A.capacidad_maxima&&e.jsxs("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#f3f4f6",borderRadius:"9999px",fontSize:"0.75rem",color:"#6b7280"},children:["Max: ",A.capacidad_maxima," personas"]}),A.duracion_horas&&e.jsxs("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#f3f4f6",borderRadius:"9999px",fontSize:"0.75rem",color:"#6b7280"},children:[A.duracion_horas," horas"]}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:A.activo!==!1?"#10b98120":"#ef444420",color:A.activo!==!1?"#10b981":"#ef4444"},children:A.activo!==!1?"Activo":"Inactivo"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>wr(A),style:{flex:1,padding:"0.5rem 1rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background-color 0.2s"},onMouseEnter:de=>de.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:de=>de.currentTarget.style.backgroundColor="#3b82f6",children:[e.jsx(St,{size:16}),"Ver Detalle"]}),zr&&e.jsx("button",{onClick:()=>Ve(A),style:{padding:"0.5rem 1rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:de=>de.currentTarget.style.backgroundColor="#059669",onMouseLeave:de=>de.currentTarget.style.backgroundColor="#10b981",title:"Editar",children:e.jsx(Qt,{size:16})}),mr&&e.jsx("button",{onClick:()=>Ur(A),style:{padding:"0.5rem 1rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:de=>de.currentTarget.style.backgroundColor="#dc2626",onMouseLeave:de=>de.currentTarget.style.backgroundColor="#ef4444",title:"Eliminar",children:e.jsx(Ar,{size:16})})]})]},A.id))}),w&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:Le,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:A=>A.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Nuevo Plan"}),e.jsx("button",{onClick:Le,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),me&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:me}),e.jsxs("form",{onSubmit:Br,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:K.nombre,onChange:A=>V({...K,nombre:A.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:K.descripcion,onChange:A=>V({...K,descripcion:A.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Precio del Plan ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:K.precio_base,onChange:A=>V({...K,precio_base:A.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Duracin (horas)"}),e.jsx("input",{type:"number",step:"0.5",value:K.duracion_horas,onChange:A=>V({...K,duracion_horas:A.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Total Productos"}),e.jsx("input",{type:"text",value:ne(Ee),readOnly:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:"#f9fafb"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descuento (Oferta)"}),e.jsx("input",{type:"text",value:ne(Ne),readOnly:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:"#f9fafb"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Capacidad Mnima"}),e.jsx("input",{type:"number",value:K.capacidad_minima,onChange:A=>V({...K,capacidad_minima:A.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Capacidad Mxima"}),e.jsx("input",{type:"number",value:K.capacidad_maxima,onChange:A=>V({...K,capacidad_maxima:A.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",padding:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem"},children:"Productos del Plan"}),xe&&e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280"},children:"Cargando productos..."}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr auto",gap:"0.75rem",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Producto"}),e.jsx("input",{type:"text",value:Ce,onChange:A=>Ae(A.target.value),placeholder:"Buscar producto...",style:{width:"100%",padding:"0.6rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",marginBottom:"0.5rem"}}),e.jsxs("select",{value:p,onChange:A=>Z(A.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"",children:"Seleccione un producto"}),s.filter(A=>!De.some(de=>de.producto_id===A.id)).filter(A=>{var de;return(de=A.nombre)==null?void 0:de.toLowerCase().includes(Ce.toLowerCase())}).map(A=>e.jsxs("option",{value:A.id,children:[A.nombre," - ",ne(A.precio||0)]},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Cantidad"}),e.jsx("input",{type:"number",min:"1",value:ce,onChange:A=>be(A.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("button",{type:"button",onClick:Rr,style:{padding:"0.75rem 1rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Mr,{size:18}),"Agregar"]})]}),e.jsx("div",{style:{marginTop:"1rem"},children:De.length===0?e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"No hay productos asignados a este plan"}):e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Producto"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Cantidad"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Precio Unit."}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Subtotal"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Accin"})]})}),e.jsx("tbody",{children:De.map(A=>e.jsxs("tr",{style:{borderTop:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"0.75rem"},children:A.nombre_producto||"N/A"}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("input",{type:"number",min:"1",value:A.cantidad,onChange:de=>qr(A.producto_id,de.target.value),style:{width:"5rem",padding:"0.4rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem",textAlign:"center"}})}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right"},children:ne(A.precio_unitario||0)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:"500"},children:ne((A.precio_unitario||0)*(A.cantidad||1))}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("button",{type:"button",onClick:()=>hr(A.producto_id),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Eliminar",children:e.jsx(Ar,{size:16})})})]},A.producto_id))})]})})})]}),e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",padding:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem"},children:"Servicios del Plan"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr auto",gap:"0.75rem",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Servicio"}),e.jsx("input",{type:"text",value:jr,onChange:A=>Ge(A.target.value),placeholder:"Ej: Confirmacin de protenas",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("button",{type:"button",onClick:M,style:{padding:"0.75rem 1rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Mr,{size:18}),"Agregar"]})]}),tr&&e.jsx("div",{style:{marginTop:"0.5rem",color:"#ef4444",fontSize:"0.875rem"},children:tr}),e.jsx("div",{style:{marginTop:"1rem"},children:I.length===0?e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"No hay servicios asignados a este plan"}):e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Servicio"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Accin"})]})}),e.jsx("tbody",{children:I.map((A,de)=>e.jsxs("tr",{style:{borderTop:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"0.75rem"},children:A.nombre}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("button",{type:"button",onClick:()=>Re(de),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Eliminar",children:e.jsx(Ar,{size:16})})})]},`${A.nombre}-${de}`))})]})})})]}),e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",padding:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem"},children:"Servicios del Plan"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr auto",gap:"0.75rem",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Servicio"}),e.jsx("input",{type:"text",value:jr,onChange:A=>Ge(A.target.value),placeholder:"Ej: Confirmacin de protenas",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("button",{type:"button",onClick:M,style:{padding:"0.75rem 1rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Mr,{size:18}),"Agregar"]})]}),tr&&e.jsx("div",{style:{marginTop:"0.5rem",color:"#ef4444",fontSize:"0.875rem"},children:tr}),e.jsx("div",{style:{marginTop:"1rem"},children:I.length===0?e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"No hay servicios asignados a este plan"}):e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Servicio"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Accin"})]})}),e.jsx("tbody",{children:I.map((A,de)=>e.jsxs("tr",{style:{borderTop:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"0.75rem"},children:A.nombre}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("button",{type:"button",onClick:()=>Re(de),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Eliminar",children:e.jsx(Ar,{size:16})})})]},`${A.nombre}-${de}`))})]})})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:K.activo,onChange:A=>V({...K,activo:A.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Plan activo"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Consideraciones"}),e.jsx("textarea",{value:K.incluye,onChange:A=>V({...K,incluye:A.target.value}),rows:3,placeholder:"Notas, restricciones o consideraciones del plan...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:Le,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:F,style:{padding:"0.75rem 1.5rem",backgroundColor:F?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:F?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),F?"Guardando...":"Guardar"]})]})]})]})}),q&&W&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:or,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:A=>A.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Editar Plan"}),e.jsx("button",{onClick:or,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),me&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:me}),e.jsxs("form",{onSubmit:gt,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:K.nombre,onChange:A=>V({...K,nombre:A.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:K.descripcion,onChange:A=>V({...K,descripcion:A.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Precio del Plan ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:K.precio_base,onChange:A=>V({...K,precio_base:A.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Duracin (horas)"}),e.jsx("input",{type:"number",step:"0.5",value:K.duracion_horas,onChange:A=>V({...K,duracion_horas:A.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Total Productos"}),e.jsx("input",{type:"text",value:ne(Ee),readOnly:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:"#f9fafb"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descuento (Oferta)"}),e.jsx("input",{type:"text",value:ne(Ne),readOnly:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:"#f9fafb"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Capacidad Mnima"}),e.jsx("input",{type:"number",value:K.capacidad_minima,onChange:A=>V({...K,capacidad_minima:A.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Capacidad Mxima"}),e.jsx("input",{type:"number",value:K.capacidad_maxima,onChange:A=>V({...K,capacidad_maxima:A.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",padding:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem"},children:"Productos del Plan"}),xe&&e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280"},children:"Cargando productos..."}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr auto",gap:"0.75rem",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Producto"}),e.jsx("input",{type:"text",value:Ce,onChange:A=>Ae(A.target.value),placeholder:"Buscar producto...",style:{width:"100%",padding:"0.6rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",marginBottom:"0.5rem"}}),e.jsxs("select",{value:p,onChange:A=>Z(A.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"",children:"Seleccione un producto"}),s.filter(A=>!De.some(de=>de.producto_id===A.id)).filter(A=>{var de;return(de=A.nombre)==null?void 0:de.toLowerCase().includes(Ce.toLowerCase())}).map(A=>e.jsxs("option",{value:A.id,children:[A.nombre," - ",ne(A.precio||0)]},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Cantidad"}),e.jsx("input",{type:"number",min:"1",value:ce,onChange:A=>be(A.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("button",{type:"button",onClick:Rr,style:{padding:"0.75rem 1rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Mr,{size:18}),"Agregar"]})]}),e.jsx("div",{style:{marginTop:"1rem"},children:De.length===0?e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"No hay productos asignados a este plan"}):e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Producto"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Cantidad"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Precio Unit."}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Subtotal"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Accin"})]})}),e.jsx("tbody",{children:De.map(A=>e.jsxs("tr",{style:{borderTop:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"0.75rem"},children:A.nombre_producto||"N/A"}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("input",{type:"number",min:"1",value:A.cantidad,onChange:de=>qr(A.producto_id,de.target.value),style:{width:"5rem",padding:"0.4rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem",textAlign:"center"}})}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right"},children:ne(A.precio_unitario||0)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:"500"},children:ne((A.precio_unitario||0)*(A.cantidad||1))}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("button",{type:"button",onClick:()=>hr(A.producto_id),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Eliminar",children:e.jsx(Ar,{size:16})})})]},A.producto_id))})]})})})]}),e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",padding:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem"},children:"Servicios del Plan"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr auto",gap:"0.75rem",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Servicio"}),e.jsx("input",{type:"text",value:jr,onChange:A=>Ge(A.target.value),onKeyPress:A=>{A.key==="Enter"&&(A.preventDefault(),M())},placeholder:"Ej: Confirmacin de protenas",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("button",{type:"button",onClick:M,style:{padding:"0.75rem 1rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Mr,{size:18}),"Agregar"]})]}),tr&&e.jsx("div",{style:{marginTop:"0.5rem",color:"#ef4444",fontSize:"0.875rem"},children:tr}),e.jsx("div",{style:{marginTop:"1rem"},children:I.length===0?e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"No hay servicios asignados a este plan"}):e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",width:"3rem"},children:"Orden"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Servicio"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Accin"})]})}),e.jsx("tbody",{children:I.map((A,de)=>e.jsxs("tr",{style:{borderTop:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"0.75rem",textAlign:"center",color:"#6b7280"},children:de+1}),e.jsx("td",{style:{padding:"0.75rem"},children:A.nombre}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("button",{type:"button",onClick:()=>Re(de),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Eliminar",children:e.jsx(Ar,{size:16})})})]},`${A.nombre}-${de}`))})]})})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:K.activo,onChange:A=>V({...K,activo:A.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Plan activo"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Consideraciones"}),e.jsx("textarea",{value:K.incluye,onChange:A=>V({...K,incluye:A.target.value}),rows:3,placeholder:"Notas, restricciones o consideraciones del plan...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:or,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:F,style:{padding:"0.75rem 1.5rem",backgroundColor:F?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:F?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),F?"Guardando...":"Guardar Cambios"]})]})]})]})}),T&&W&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:$r,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"700px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:A=>A.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Detalle del Plan"}),e.jsx("button",{onClick:$r,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{width:"4rem",height:"4rem",borderRadius:"0.5rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(jt,{size:32,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:W.nombre||"N/A"}),e.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#6366f1",margin:"0.25rem 0 0 0"},children:ne(W.precio_base||0)})]})]}),e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Descripcin"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:W.descripcion||"Sin descripcin"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[W.capacidad_minima&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Capacidad Mnima"}),e.jsxs("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:[W.capacidad_minima," personas"]})]}),W.capacidad_maxima&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Capacidad Mxima"}),e.jsxs("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:[W.capacidad_maxima," personas"]})]})]}),W.duracion_horas&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Duracin"}),e.jsxs("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:[W.duracion_horas," horas"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Total Productos"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:ne(L)})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Descuento (Oferta)"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:ne(ze)})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Estado"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:W.activo!==!1?"#10b98120":"#ef444420",color:W.activo!==!1?"#10b981":"#ef4444"},children:W.activo!==!1?"Activo":"Inactivo"})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Productos Incluidos"}),zr&&e.jsxs("button",{onClick:()=>{$r(),nr(W)},style:{padding:"0.5rem 1rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Mr,{size:16}),"Gestionar Productos"]})]}),D.length===0?e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"No hay productos asignados a este plan"}):e.jsx("div",{style:{backgroundColor:"#f9fafb",borderRadius:"0.375rem",padding:"1rem"},children:D.map(A=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0",borderBottom:"1px solid #e5e7eb"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:A.nombre_producto||"N/A"}),e.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:["Cantidad: ",A.cantidad]})]}),e.jsx("p",{style:{margin:0,fontWeight:"500",color:"#6366f1"},children:ne(A.precio||0)})]},A.producto_id))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Servicios del Plan"}),I.length===0?e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},children:"No hay servicios asignados a este plan"}):e.jsx("div",{style:{backgroundColor:"#f9fafb",borderRadius:"0.375rem",padding:"1rem"},children:I.map((A,de)=>e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0",borderBottom:"1px solid #e5e7eb"},children:e.jsx("p",{style:{margin:0,fontWeight:"500"},children:A.nombre})},`${A.nombre}-${de}`))})]}),W.incluye&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Consideraciones"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:W.incluye})]})]})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:e.jsx("button",{onClick:$r,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})})]})}),H&&W&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:he,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:A=>A.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"50%",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ut,{size:24,color:"#dc2626"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"Eliminar Plan"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:"Est seguro de eliminar este plan?"})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.375rem",marginBottom:"1.5rem"},children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:W.nombre}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:ne(W.precio_base||0)})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:he,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{onClick:ro,disabled:F,style:{padding:"0.75rem 1.5rem",backgroundColor:F?"#9ca3af":"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:F?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ar,{size:18}),F?"Eliminando...":"Eliminar"]})]})]})}),O&&W&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:sr,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"700px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:A=>A.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Gestionar Productos del Plan"}),e.jsx("button",{onClick:sr,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),e.jsx("div",{style:{marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"0.375rem"},children:e.jsxs("p",{style:{margin:0,fontWeight:"500"},children:["Plan: ",W.nombre]})}),e.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",border:"1px solid #e5e7eb",borderRadius:"0.375rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem"},children:"Agregar Producto"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr auto",gap:"0.75rem",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Producto"}),e.jsxs("select",{value:ge,onChange:A=>Te(A.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"",children:"Seleccione un producto"}),s.filter(A=>!D.some(de=>de.producto_id===A.id)).map(A=>e.jsxs("option",{value:A.id,children:[A.nombre," - ",ne(A.precio||0)]},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Cantidad"}),e.jsx("input",{type:"number",min:"1",value:Q,onChange:A=>g(A.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("button",{onClick:zo,style:{padding:"0.75rem 1rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Mr,{size:18}),"Agregar"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"1rem"},children:"Productos Incluidos"}),D.length===0?e.jsx("p",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:"No hay productos asignados a este plan"}):e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Producto"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Cantidad"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Precio Unit."}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Subtotal"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Accin"})]})}),e.jsx("tbody",{children:D.map(A=>e.jsxs("tr",{style:{borderTop:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"0.75rem"},children:A.nombre_producto||"N/A"}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:A.cantidad}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right"},children:ne(A.precio||0)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:"500"},children:ne((A.precio||0)*(A.cantidad||1))}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("button",{onClick:()=>zi(A.producto_id),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Eliminar",children:e.jsx(Ar,{size:16})})})]},A.producto_id))})]})})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:e.jsx("button",{onClick:sr,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})})]})})]})},B5=()=>{var r,t;const{usuario:o}=at(),{toasts:n,removeToast:i,success:a,error:l,warning:u}=_r(),s=go(),[d,f]=c.useState([]),[x,h]=c.useState([]),[S,C]=c.useState([]),[j,P]=c.useState(null),[v,m]=c.useState(0),[y,k]=c.useState(0),[U,X]=c.useState(!0),[R,w]=c.useState(""),[B,q]=c.useState(""),[E,T]=c.useState(""),[ee,H]=c.useState("todos"),[G,O]=c.useState(""),[re,W]=c.useState("todos"),[Y,D]=c.useState("todos"),[oe,K]=c.useState(""),[V,F]=c.useState(""),[se,me]=c.useState(""),[ie,ge]=c.useState(""),[Te,Q]=c.useState("id_desc"),[g,p]=c.useState(!1),[Z,ce]=c.useState(!1),[be,Ce]=c.useState(!1),[Ae,De]=c.useState(!1),[te,_]=c.useState(null),[$,xe]=c.useState(null),[Pe,I]=c.useState(""),[ue,J]=c.useState(!1),[Ze,jr]=c.useState(!1),[Ge,tr]=c.useState({evento_id:"",monto:"",metodo_pago:"efectivo",tipo_pago:"abono",fecha_pago:new Date().toISOString().split("T")[0],numero_referencia:"",observaciones:""}),[Ke,gr]=c.useState(!1),[zr,mr]=c.useState(""),br=xr(o,Je.PAGOS_REGISTRAR,[N.ADMIN,N.MANAGER,N.COORDINATOR]),lr=xr(o,Je.PAGOS_REEMBOLSAR,[N.ADMIN,N.MANAGER]),qe=xr(o,Je.EVENTOS_AGREGAR_PRODUCTO,[N.ADMIN,N.MANAGER]);xr(o,Je.PAGOS_ELIMINAR,[N.ADMIN,N.MANAGER]);const ne=xr(o,Je.PAGOS_APROBAR,[N.ADMIN,N.MANAGER]),ke=xr(o,Je.PAGOS_ANULAR,[N.ADMIN,N.MANAGER]);c.useEffect(()=>{ve(),ye()},[o==null?void 0:o.id]);const ye=async()=>{try{const z=await qo.getAll();C(z.cuentas||[])}catch(z){console.error("Error al cargar cuentas:",z)}};c.useEffect(()=>{B?(Ee(),Qe()):(f([]),m(0),P(null))},[B]);const ve=async()=>{try{const z={};Cr(o==null?void 0:o.rol,[N.COORDINATOR])&&o!=null&&o.id&&(z.coordinador_id=o.id);const we=await ur.getAll(z);h(we.eventos||[])}catch(z){console.error("Error al cargar eventos:",z)}},Ee=async()=>{var z,we;try{X(!0);const We=await et.getByEvento(B);f(We.pagos||[]),m(We.total_pagado||0);try{const Xe=await et.getTotalEvento(B);Xe.total_pagado!==void 0&&Xe.total_pagado!==null&&m(parseFloat(Xe.total_pagado)||0),Xe.total_reembolsos!==void 0&&Xe.total_reembolsos!==null&&k(parseFloat(Xe.total_reembolsos)||0)}catch(Xe){console.error("Error al cargar totales de pagos:",Xe)}w("")}catch(We){const Xe=((we=(z=We.response)==null?void 0:z.data)==null?void 0:we.error)||"Error al cargar los pagos";w(Xe),l(Xe),console.error(We)}finally{X(!1)}},Qe=async()=>{try{const z=x.find(we=>we.id_evento===parseInt(B));z&&P(z)}catch(z){console.error("Error al cargar informacin del evento:",z)}},Ne=z=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(z),L=z=>{if(!z)return null;if(typeof z=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(z)){const[we,We,Xe]=z.split("-").map(Number);return new Date(we,We-1,Xe)}return new Date(z)},ze=z=>{if(!z)return"-";try{return L(z).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"numeric"})}catch{return z}},Se=z=>{if(!z)return"-";try{const we=L(z),We=we.getFullYear(),Xe=String(we.getMonth()+1).padStart(2,"0"),Pr=String(we.getDate()).padStart(2,"0"),It=String(we.getHours()).padStart(2,"0"),Ro=String(we.getMinutes()).padStart(2,"0");return`${We}-${Xe}-${Pr} ${It}:${Ro}`}catch{return z}},je=z=>{const we=Number.parseFloat(z);return Number.isFinite(we)?we:0},Me=z=>(z||"").toString().toLowerCase(),$e=Math.max(0,v-y),Le=z=>{switch(z){case"aprobado":return"Aprobado";case"rechazado":return"Rechazado";case"en_revision":default:return"En revisin"}},Ve=z=>{switch(z){case"aprobado":return{backgroundColor:"#16a34a20",color:"#16a34a"};case"rechazado":return{backgroundColor:"#ef444420",color:"#ef4444"};default:return{backgroundColor:"#f59e0b20",color:"#d97706"}}},or=d.filter(z=>{if(!G)return!0;const we=Me(G);return Me(z.numero_referencia).includes(we)||Me(z.observaciones).includes(we)||Me(z.metodo_pago).includes(we)||Me(z.tipo_pago).includes(we)}).filter(z=>re==="todos"?!0:z.tipo_pago===re).filter(z=>Y==="todos"?!0:z.metodo_pago===Y).filter(z=>{if(!oe&&!V)return!0;const we=L(z.fecha_pago);return!(oe&&we<L(oe)||V&&we>new Date(`${V}T23:59:59`))}).filter(z=>{if(!se&&!ie)return!0;const we=je(z.monto||0);return!(se&&we<je(se)||ie&&we>je(ie))}).sort((z,we)=>{let We=0;switch(Te){case"monto_asc":We=je(z.monto||0)-je(we.monto||0);break;case"monto_desc":We=je(we.monto||0)-je(z.monto||0);break;case"fecha_asc":We=L(z.fecha_pago).getTime()-L(we.fecha_pago).getTime();break;case"fecha_desc":We=L(we.fecha_pago).getTime()-L(z.fecha_pago).getTime();break;case"id_desc":default:We=je(we.id||0)-je(z.id||0);break}return We!==0?We:je(we.id||0)-je(z.id||0)}),wr=or.reduce((z,we)=>{const We=je(we.monto||0);return z.totalPagos+=1,we.tipo_pago==="reembolso"?z.totalReembolsos+=We:z.totalIngresos+=We,z},{totalPagos:0,totalIngresos:0,totalReembolsos:0}),$r=wr.totalIngresos-wr.totalReembolsos,Ur=(r=or[0])==null?void 0:r.fecha_pago,he=Math.max(0,v-y),nr=async(z=null,we="abono")=>{const We=z||j,Xe=(We==null?void 0:We.id_evento)||(We==null?void 0:We.id)||B;if(!We||!Xe){u("Por favor seleccione un evento primero");return}if(we!=="reembolso"){const Pr=(We==null?void 0:We.saldo)??gt();if(je(Pr)<=0){u("Este evento no tiene saldo pendiente. Agregue adicionales al evento si desea registrar pagos.");return}}else{let Pr=Math.max(0,v-y);try{const It=await et.getTotalEvento(Xe),Ro=parseFloat(It.total_pagado)||0,Ri=parseFloat(It.total_reembolsos)||0;m(Ro),k(Ri),Pr=Math.max(0,Ro-Ri)}catch(It){console.error("Error al cargar totales para reembolso:",It)}if(Pr<=0){u("No hay saldo disponible para reembolsar.");return}}tr({evento_id:Xe,monto:we==="reembolso"?Math.max(0,v-y):"",metodo_pago:"efectivo",tipo_pago:we,fecha_pago:new Date().toISOString().split("T")[0],numero_referencia:"",observaciones:""}),mr(""),p(!0)},sr=()=>{p(!1),tr({evento_id:"",monto:"",metodo_pago:"efectivo",tipo_pago:"abono",fecha_pago:new Date().toISOString().split("T")[0],numero_referencia:"",observaciones:""}),mr("")},Rr=z=>{_(z),ce(!0)},hr=()=>{ce(!1),_(null)},qr=async(z,we)=>{var We,Xe;if(z)try{J(!0),await et.updateEstado(z.id,we),await Ee();const Pr=await et.getById(z.id);Pr!=null&&Pr.pago&&_(Pr.pago),a("Estado del pago actualizado")}catch(Pr){const It=((Xe=(We=Pr.response)==null?void 0:We.data)==null?void 0:Xe.error)||"No se pudo actualizar el estado";l(It)}finally{J(!1)}},M=z=>{xe(z),I(z.cuenta_id||""),De(!0)},Re=()=>{De(!1),xe(null),I("")},Ue=async()=>{var z,we;if(!$||!Pe){l("Debe seleccionar una cuenta");return}try{jr(!0),await et.updateCuenta($.id,parseInt(Pe)),await Ee(),a("Cuenta del pago actualizada correctamente"),Re()}catch(We){const Xe=((we=(z=We.response)==null?void 0:z.data)==null?void 0:we.error)||"No se pudo actualizar la cuenta";l(Xe)}finally{jr(!1)}},ir=async(z=!1)=>{var we,We;if(mr(""),!Ge.monto||parseFloat(Ge.monto)<=0){mr("El monto debe ser mayor a cero");return}if(!Ge.fecha_pago){mr("La fecha de pago es requerida");return}if(Ge.tipo_pago==="reembolso"&&parseFloat(Ge.monto)>he){mr("El monto del reembolso supera el saldo disponible para reembolsar.");return}if(Ge.tipo_pago==="reembolso"&&!z){Ce(!0);return}try{gr(!0);const Xe={evento_id:parseInt(Ge.evento_id),monto:parseFloat(Ge.monto),metodo_pago:Ge.metodo_pago,tipo_pago:Ge.tipo_pago,fecha_pago:Ge.fecha_pago,numero_referencia:Ge.numero_referencia||null,observaciones:Ge.observaciones||null,origen:"web"};await et.create(Xe),await Ee(),sr(),a(Ge.tipo_pago==="reembolso"?"Reembolso registrado exitosamente":"Pago registrado exitosamente")}catch(Xe){const Pr=((We=(we=Xe.response)==null?void 0:we.data)==null?void 0:We.error)||"Error al registrar el pago";mr(Pr),console.error(Xe)}finally{gr(!1)}},Br=async z=>{z.preventDefault(),await ir(!1)},gt=()=>{if(!j)return 0;const z=parseFloat(j.total||0);return Math.max(0,z-$e)},ro=gt()>0,zo=(j==null?void 0:j.estado)==="cancelado",zi=z=>{if(!z||parseFloat(z)<=0)return"abono";const we=parseFloat(z),We=gt();return we>=We&&We>0?"pago_completo":"abono"},A=z=>{const we=z.target.value;if(Ge.tipo_pago!=="reembolso"){const We=zi(we);tr({...Ge,monto:we,tipo_pago:We})}else tr({...Ge,monto:we})},de=()=>{if(!j)return;if(zo){u("No se pueden agregar adicionales a un evento cancelado.");return}const z=`/eventos/${j.id_evento||j.id}?tab=productos`;window.location.href=z},He=z=>{if(!z)return;const we=z.id_evento||z.id;q(String(we)),P(z);const We=je(z.total||0),Xe=je(z.saldo||0);m(Math.max(0,We-Xe))},Ye=x.filter(z=>{if(!E)return!0;const we=Me(E);return Me(z.nombre_evento).includes(we)||Me(z.nombre_cliente).includes(we)||Me(z.tipo_evento).includes(we)}).filter(z=>ee==="todos"?!0:z.estado===ee).sort((z,we)=>new Date(we.fecha_evento).getTime()-new Date(z.fecha_evento).getTime()),yr=Ye.reduce((z,we)=>{const We=je(we.total||0),Xe=je(we.saldo||0);return z.totalEventos+=1,z.totalFacturado+=We,z.totalSaldo+=Xe,z.totalPagado+=Math.max(0,We-Xe),z},{totalEventos:0,totalFacturado:0,totalPagado:0,totalSaldo:0});return U&&B?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando pagos..."}):e.jsxs("div",{children:[e.jsx(Nr,{toasts:n,removeToast:i}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Pagos"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de pagos y abonos"})]})}),R&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:R}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Eventos"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:yr.totalEventos})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Total facturado"}),e.jsx("div",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#6366f1"},children:Ne(yr.totalFacturado)})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Total pagado"}),e.jsx("div",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#10b981"},children:Ne(yr.totalPagado)})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Saldo pendiente"}),e.jsx("div",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#ef4444"},children:Ne(yr.totalSaldo)})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",marginBottom:"1rem",display:"flex",gap:"1rem",flexWrap:"wrap",flexDirection:s?"column":"row"},children:[e.jsxs("div",{style:{position:"relative",flex:1,minWidth:s?"100%":"260px"},children:[e.jsx(Et,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar por evento, cliente o tipo...",value:E,onChange:z=>T(z.target.value),style:{width:"100%",padding:"0.65rem 0.75rem 0.65rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"}})]}),e.jsxs("select",{value:ee,onChange:z=>H(z.target.value),style:{padding:"0.65rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem",minWidth:s?"100%":"180px"},children:[e.jsx("option",{value:"todos",children:"Todos los estados"}),e.jsx("option",{value:"cotizacion",children:"Cotizacin"}),e.jsx("option",{value:"confirmado",children:"Confirmado"}),e.jsx("option",{value:"en_proceso",children:"En proceso"}),e.jsx("option",{value:"completado",children:"Completado"}),e.jsx("option",{value:"cancelado",children:"Cancelado"})]})]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",overflow:"hidden",marginBottom:"2rem"},children:s?e.jsx("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:Ye.length===0?e.jsx("div",{style:{padding:"1.5rem",textAlign:"center",color:"#6b7280"},children:"No hay eventos con ese filtro."}):Ye.map(z=>{const we=je(z.total||0),We=je(z.saldo||0),Xe=Math.max(0,we-We),Pr=z.id_evento||z.id,It=z.estado==="cancelado";return e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"1rem",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06)",backgroundColor:B&&parseInt(B,10)===Pr?"#eef2ff":"white",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#111827"},children:z.nombre_evento||"Evento"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:z.nombre_cliente||"-"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Fecha"}),e.jsx("div",{style:{fontWeight:"600"},children:ze(z.fecha_evento)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Estado"}),e.jsx("div",{style:{fontWeight:"600",textTransform:"capitalize"},children:z.estado||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Total"}),e.jsx("div",{style:{fontWeight:"600"},children:Ne(we)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Saldo"}),e.jsx("div",{style:{fontWeight:"600",color:"#ef4444"},children:Ne(We)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"Pagado"}),e.jsx("div",{style:{fontWeight:"600",color:"#10b981"},children:Ne(Xe)})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx(Or,{to:`/pagos/evento/${z.id_evento||z.id}`,style:{padding:"0.4rem 0.75rem",borderRadius:"0.375rem",border:"1px solid #e5e7eb",backgroundColor:"#f3f4f6",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600",textDecoration:"none",color:"#374151",display:"inline-block"},children:"Ver pagos"}),br&&We>0&&!It&&e.jsx("button",{type:"button",onClick:()=>{He(z),nr(z,"abono")},style:{padding:"0.4rem 0.75rem",borderRadius:"0.375rem",border:"none",backgroundColor:"#10b981",color:"white",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"Registrar pago"}),lr&&Xe>0&&e.jsx("button",{type:"button",onClick:()=>{He(z),nr(z,"reembolso")},style:{padding:"0.4rem 0.75rem",borderRadius:"0.375rem",border:"none",backgroundColor:"#ef4444",color:"white",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"Registrar reembolso"})]})]},Pr)})}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"0.85rem",textAlign:"left",fontSize:"0.85rem",fontWeight:"600"},children:"Evento"}),e.jsx("th",{style:{padding:"0.85rem",textAlign:"left",fontSize:"0.85rem",fontWeight:"600"},children:"Cliente"}),e.jsx("th",{style:{padding:"0.85rem",textAlign:"left",fontSize:"0.85rem",fontWeight:"600"},children:"Fecha"}),e.jsx("th",{style:{padding:"0.85rem",textAlign:"right",fontSize:"0.85rem",fontWeight:"600"},children:"Total"}),e.jsx("th",{style:{padding:"0.85rem",textAlign:"right",fontSize:"0.85rem",fontWeight:"600"},children:"Pagado"}),e.jsx("th",{style:{padding:"0.85rem",textAlign:"right",fontSize:"0.85rem",fontWeight:"600"},children:"Saldo"}),e.jsx("th",{style:{padding:"0.85rem",textAlign:"left",fontSize:"0.85rem",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"0.85rem",textAlign:"center",fontSize:"0.85rem",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:Ye.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",style:{padding:"1.5rem",textAlign:"center",color:"#6b7280"},children:"No hay eventos con ese filtro."})}):Ye.map(z=>{const we=je(z.total||0),We=je(z.saldo||0),Xe=Math.max(0,we-We),Pr=z.id_evento||z.id,It=z.estado==="cancelado";return e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb",backgroundColor:B&&parseInt(B,10)===Pr?"#eef2ff":"white"},children:[e.jsx("td",{style:{padding:"0.85rem",fontSize:"0.9rem",fontWeight:"600"},children:z.nombre_evento||"Evento"}),e.jsx("td",{style:{padding:"0.85rem",fontSize:"0.85rem"},children:z.nombre_cliente||"-"}),e.jsx("td",{style:{padding:"0.85rem",fontSize:"0.85rem"},children:ze(z.fecha_evento)}),e.jsx("td",{style:{padding:"0.85rem",textAlign:"right",fontSize:"0.85rem"},children:Ne(we)}),e.jsx("td",{style:{padding:"0.85rem",textAlign:"right",fontSize:"0.85rem",color:"#10b981"},children:Ne(Xe)}),e.jsx("td",{style:{padding:"0.85rem",textAlign:"right",fontSize:"0.85rem",color:"#ef4444"},children:Ne(We)}),e.jsx("td",{style:{padding:"0.85rem",fontSize:"0.8rem",textTransform:"capitalize"},children:z.estado||"-"}),e.jsx("td",{style:{padding:"0.85rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(Or,{to:`/pagos/evento/${z.id_evento||z.id}`,style:{padding:"0.4rem 0.75rem",borderRadius:"0.375rem",border:"1px solid #e5e7eb",backgroundColor:"#f3f4f6",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600",textDecoration:"none",color:"#374151",display:"inline-block"},children:"Ver pagos"}),br&&We>0&&!It&&e.jsx("button",{type:"button",onClick:()=>{He(z),nr(z,"abono")},style:{padding:"0.4rem 0.75rem",borderRadius:"0.375rem",border:"none",backgroundColor:"#10b981",color:"white",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"Registrar pago"}),lr&&Xe>0&&e.jsx("button",{type:"button",onClick:()=>{He(z),nr(z,"reembolso")},style:{padding:"0.4rem 0.75rem",borderRadius:"0.375rem",border:"none",backgroundColor:"#ef4444",color:"white",cursor:"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"Registrar reembolso"})]})})]},Pr)})})]})})}),j&&e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"600",color:"#374151"},children:"Resumen del evento"}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:"Agrega adicionales para generar saldo pendiente y registrar pagos."})]}),qe&&e.jsx("button",{type:"button",onClick:de,disabled:zo,style:{padding:"0.5rem 1rem",backgroundColor:zo?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:zo?"not-allowed":"pointer",fontWeight:"500"},children:"Agregar adicionales"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(jt,{size:18,color:"#6366f1"}),e.jsx("label",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Evento"})]}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"600"},children:j.nombre_evento}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:j.nombre_cliente})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(zt,{size:18,color:"#10b981"}),e.jsx("label",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Total Evento"})]}),e.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:"bold",color:"#6366f1"},children:Ne(parseFloat(j.total||0))})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(zt,{size:18,color:"#10b981"}),e.jsx("label",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Total Pagado"})]}),e.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:"bold",color:"#10b981"},children:Ne($e)})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(zt,{size:18,color:"#ef4444"}),e.jsx("label",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Saldo Pendiente"})]}),e.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:"bold",color:"#ef4444"},children:Ne(gt())})]})]})]}),B&&e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Et,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar por referencia, observaciones, mtodo...",value:G,onChange:z=>O(z.target.value),style:{width:"100%",padding:"0.65rem 0.75rem 0.65rem 2.25rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"}})]}),e.jsxs("select",{value:re,onChange:z=>W(z.target.value),style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"},children:[e.jsx("option",{value:"todos",children:"Todos los tipos"}),e.jsx("option",{value:"abono",children:"Abono"}),e.jsx("option",{value:"pago_completo",children:"Pago Completo"}),e.jsx("option",{value:"reembolso",children:"Reembolso"})]}),e.jsxs("select",{value:Y,onChange:z=>D(z.target.value),style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"},children:[e.jsx("option",{value:"todos",children:"Todos los mtodos"}),e.jsx("option",{value:"efectivo",children:"Efectivo"}),e.jsx("option",{value:"transferencia",children:"Transferencia"}),e.jsx("option",{value:"tarjeta_debito",children:"Tarjeta Dbito"}),e.jsx("option",{value:"tarjeta_credito",children:"Tarjeta Crdito"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"otro",children:"Otro"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"1fr 1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.35rem"},children:"Desde"}),e.jsx("input",{type:"date",value:oe,onChange:z=>K(z.target.value),style:{width:"100%",padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.35rem"},children:"Hasta"}),e.jsx("input",{type:"date",value:V,onChange:z=>F(z.target.value),style:{width:"100%",padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.35rem"},children:"Monto mnimo"}),e.jsx("input",{type:"number",min:"0",value:se,onChange:z=>me(z.target.value),placeholder:"0",style:{width:"100%",padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.35rem"},children:"Monto mximo"}),e.jsx("input",{type:"number",min:"0",value:ie,onChange:z=>ge(z.target.value),placeholder:"Sin tope",style:{width:"100%",padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"}})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:s?"stretch":"flex-end",marginTop:"0.75rem"},children:e.jsxs("select",{value:Te,onChange:z=>Q(z.target.value),style:{padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",minWidth:s?"100%":"220px"},children:[e.jsx("option",{value:"fecha_desc",children:"Ordenar: Ms recientes"}),e.jsx("option",{value:"fecha_asc",children:"Ordenar: Ms antiguos"}),e.jsx("option",{value:"monto_desc",children:"Ordenar: Monto mayor"}),e.jsx("option",{value:"monto_asc",children:"Ordenar: Monto menor"})]})})]}),B&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:s?"1fr":"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Pagos encontrados"}),e.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700"},children:wr.totalPagos})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Total ingresos"}),e.jsx("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700",color:"#10b981"},children:Ne(wr.totalIngresos)})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Total reembolsos"}),e.jsx("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700",color:"#ef4444"},children:Ne(wr.totalReembolsos)})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Neto"}),e.jsx("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700",color:"#6366f1"},children:Ne($r)})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"ltimo pago"}),e.jsx("p",{style:{margin:0,fontSize:"0.95rem",fontWeight:"600"},children:Ur?Se(Ur):"Sin pagos"})]})]}),B&&e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",gap:"1rem",flexWrap:"wrap"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"700",color:"#374151"},children:"Pagos del evento"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[br&&e.jsx("button",{type:"button",onClick:()=>nr(j,"abono"),disabled:!j||!ro,style:{padding:"0.5rem 0.85rem",borderRadius:"0.375rem",border:"none",backgroundColor:!j||!ro?"#9ca3af":"#10b981",color:"white",cursor:!j||!ro?"not-allowed":"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"Registrar pago"}),lr&&e.jsx("button",{type:"button",onClick:()=>nr(j,"reembolso"),disabled:!j||he<=0,style:{padding:"0.5rem 0.85rem",borderRadius:"0.375rem",border:"none",backgroundColor:!j||he<=0?"#fca5a5":"#ef4444",color:"white",cursor:!j||he<=0?"not-allowed":"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"Registrar reembolso"})]})]}),s?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:or.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:"No hay pagos que coincidan con los filtros"}):or.map(z=>e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"1rem",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06)",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginBottom:"0.25rem"},children:["ID #",z.id]}),e.jsx("div",{style:{fontWeight:"600",color:"#111827"},children:Se(z.fecha_pago)}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:z.metodo_pago||"-"})]}),e.jsxs("div",{style:{fontWeight:"600",color:z.tipo_pago==="reembolso"?"#ef4444":"#10b981"},children:[z.tipo_pago==="reembolso"?"-":"+",Ne(z.monto||0)]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:z.tipo_pago==="reembolso"?"#ef444420":z.tipo_pago==="pago_completo"?"#10b98120":"#3b82f620",color:z.tipo_pago==="reembolso"?"#ef4444":z.tipo_pago==="pago_completo"?"#10b981":"#3b82f6"},children:z.tipo_pago==="reembolso"?"Reembolso":z.tipo_pago==="pago_completo"?"Pago Completo":"Abono"}),e.jsx("span",{style:{marginLeft:"0.5rem",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",...Ve(z.estado_pago)},children:Le(z.estado_pago)}),e.jsx("span",{style:{marginLeft:"0.5rem",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:z.origen==="web"?"#3b82f620":z.origen==="whatsapp"?"#22c55e20":"#6b728020",color:z.origen==="web"?"#3b82f6":z.origen==="whatsapp"?"#16a34a":"#6b7280"},children:z.origen==="web"?"Web":z.origen==="whatsapp"?"WhatsApp":"Escritorio"})]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[e.jsx("strong",{children:"Referencia:"})," ",z.numero_referencia||"-"]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[e.jsx("strong",{children:"Observaciones:"})," ",z.observaciones||"-"]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:e.jsxs("button",{onClick:()=>Rr(z),style:{padding:"0.5rem 0.75rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(St,{size:16}),"Ver"]})})]},z.id))}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"ID"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Fecha"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Tipo"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Mtodo"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Cuenta Destino"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Referencia"}),e.jsx("th",{style:{padding:"1rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Monto"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Origen"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Observaciones"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:or.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"11",style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:"No hay pagos que coincidan con los filtros"})}):or.map(z=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsxs("td",{style:{padding:"1rem",fontSize:"0.85rem",color:"#6b7280",fontWeight:"600"},children:["#",z.id]}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.85rem"},children:Se(z.fecha_pago)}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:z.tipo_pago==="reembolso"?"#ef444420":z.tipo_pago==="pago_completo"?"#10b98120":"#3b82f620",color:z.tipo_pago==="reembolso"?"#ef4444":z.tipo_pago==="pago_completo"?"#10b981":"#3b82f6"},children:z.tipo_pago==="reembolso"?"Reembolso":z.tipo_pago==="pago_completo"?"Pago Completo":"Abono"})}),e.jsx("td",{style:{padding:"1rem"},children:z.metodo_pago||"-"}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.85rem",color:"#4f46e5",fontWeight:"500"},children:z.nombre_cuenta||"-"}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",...Ve(z.estado_pago)},children:Le(z.estado_pago)})}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.875rem",color:"#6b7280"},children:z.numero_referencia||"-"}),e.jsxs("td",{style:{padding:"1rem",textAlign:"right",fontWeight:"600",color:z.tipo_pago==="reembolso"?"#ef4444":"#10b981"},children:[z.tipo_pago==="reembolso"?"-":"+",Ne(z.monto||0)]}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:z.origen==="web"?"#3b82f620":z.origen==="whatsapp"?"#22c55e20":"#6b728020",color:z.origen==="web"?"#3b82f6":z.origen==="whatsapp"?"#16a34a":"#6b7280"},children:z.origen==="web"?"Web":z.origen==="whatsapp"?"WhatsApp":"Escritorio"})}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.875rem",color:"#6b7280",maxWidth:"200px"},children:e.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:z.observaciones||"-"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>Rr(z),style:{padding:"0.5rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:we=>we.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:we=>we.currentTarget.style.backgroundColor="#3b82f6",title:"Ver Detalle",children:e.jsx(St,{size:16})}),br&&e.jsx("button",{onClick:()=>M(z),style:{padding:"0.5rem",backgroundColor:"#4f46e5",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:we=>we.currentTarget.style.backgroundColor="#4338ca",onMouseLeave:we=>we.currentTarget.style.backgroundColor="#4f46e5",title:"Cambiar Cuenta",children:e.jsx(an,{size:16})})]})})]},z.id))})]})})]}),g&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:sr,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:z=>z.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:Ge.tipo_pago==="reembolso"?"Registrar Reembolso":"Registrar Pago"}),e.jsx("button",{onClick:sr,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),zr&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:zr}),e.jsxs("form",{onSubmit:Br,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Evento"}),e.jsx("input",{type:"text",value:((t=x.find(z=>z.id_evento===parseInt(B)))==null?void 0:t.nombre_evento)||"",disabled:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:"#f3f4f6",color:"#6b7280"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Tipo de Pago ",e.jsx("span",{style:{color:"#6b7280",fontWeight:"400",fontSize:"0.8rem"},children:"(automtico)"})]}),e.jsxs("div",{style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:Ge.tipo_pago==="reembolso"?"#fef2f2":Ge.tipo_pago==="pago_completo"?"#f0fdf4":"#eff6ff",color:Ge.tipo_pago==="reembolso"?"#dc2626":Ge.tipo_pago==="pago_completo"?"#16a34a":"#2563eb",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{children:Ge.tipo_pago==="abono"?"Abono":Ge.tipo_pago==="pago_completo"?"Pago Completo":"Reembolso"}),Ge.tipo_pago!=="reembolso"&&e.jsxs("span",{style:{fontSize:"0.7rem",color:"#6b7280",fontWeight:"400"},children:["Saldo: ",Ne(gt())]})]}),Ge.tipo_pago==="pago_completo"&&e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"#16a34a"},children:"El monto cubre el saldo pendiente del evento."}),Ge.tipo_pago==="reembolso"&&e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",color:"#ef4444"},children:"Este reembolso se descontar del total pagado y requiere confirmacin."})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Mtodo de Pago ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:Ge.metodo_pago,onChange:z=>tr({...Ge,metodo_pago:z.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"efectivo",children:"Efectivo"}),e.jsx("option",{value:"transferencia",children:"Transferencia"}),e.jsx("option",{value:"tarjeta_debito",children:"Tarjeta Dbito"}),e.jsx("option",{value:"tarjeta_credito",children:"Tarjeta Crdito"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"otro",children:"Otro"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Monto ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",value:Ge.monto,onChange:A,required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Fecha de Pago ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"date",value:Ge.fecha_pago,onChange:z=>tr({...Ge,fecha_pago:z.target.value}),required:!0,max:new Date().toISOString().split("T")[0],style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Nmero de Referencia"}),e.jsx("input",{type:"text",value:Ge.numero_referencia,onChange:z=>tr({...Ge,numero_referencia:z.target.value}),placeholder:"Nmero de transaccin, cheque, etc.",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Observaciones"}),e.jsx("textarea",{value:Ge.observaciones,onChange:z=>tr({...Ge,observaciones:z.target.value}),rows:3,placeholder:"Notas adicionales sobre el pago...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:sr,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:Ke,style:{padding:"0.75rem 1.5rem",backgroundColor:Ke?"#9ca3af":"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:Ke?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),Ke?"Registrando...":Ge.tipo_pago==="reembolso"?"Registrar Reembolso":"Registrar Pago"]})]})]})]})}),Z&&te&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:hr,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:z=>z.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Detalle del Pago"}),e.jsx("button",{onClick:hr,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{width:"4rem",height:"4rem",borderRadius:"50%",backgroundColor:"#10b98120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(zt,{size:32,color:"#10b981"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:Ne(te.monto||0)}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:Se(te.fecha_pago)})]})]}),e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Tipo de Pago"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:te.tipo_pago==="reembolso"?"#ef444420":te.tipo_pago==="pago_completo"?"#10b98120":"#3b82f620",color:te.tipo_pago==="reembolso"?"#ef4444":te.tipo_pago==="pago_completo"?"#10b981":"#3b82f6"},children:te.tipo_pago==="reembolso"?"Reembolso":te.tipo_pago==="pago_completo"?"Pago Completo":"Abono"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Mtodo de Pago"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:te.metodo_pago||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Estado del Pago"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",...Ve(te.estado_pago)},children:Le(te.estado_pago)})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Nmero de Referencia"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:te.numero_referencia||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Cuenta Destino"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(an,{size:18,color:"#4f46e5"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:te.nombre_cuenta||"Sin cuenta asignada"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Origen"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:te.origen==="web"?"#3b82f620":te.origen==="whatsapp"?"#22c55e20":"#6b728020",color:te.origen==="web"?"#3b82f6":te.origen==="whatsapp"?"#16a34a":"#6b7280"},children:te.origen==="web"?"Web":te.origen==="whatsapp"?"WhatsApp":"Escritorio"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Observaciones"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:te.observaciones||"-"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[te.estado_pago==="en_revision"&&(ne||ke)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>qr(te,"rechazado"),disabled:ue||!ke,style:{padding:"0.75rem 1.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:ue||!ke?"not-allowed":"pointer",fontWeight:"500",opacity:ue||!ke?.7:1},children:"Rechazar"}),e.jsx("button",{onClick:()=>qr(te,"aprobado"),disabled:ue||!ne,style:{padding:"0.75rem 1.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:ue||!ne?"not-allowed":"pointer",fontWeight:"500",opacity:ue||!ne?.7:1},children:"Aprobar"})]}),e.jsx("button",{onClick:hr,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})]})]})}),be&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100,padding:"1rem"},onClick:()=>!Ke&&Ce(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:z=>z.stopPropagation(),children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.75rem"},children:"Confirmar reembolso"}),e.jsxs("div",{style:{color:"#374151",marginBottom:"0.5rem"},children:["Ests a punto de registrar un reembolso de ",Ne(Ge.monto||0),"."]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:["Disponible para reembolsar: ",Ne(he)]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>Ce(!1),disabled:Ke,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:Ke?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:async()=>{Ce(!1),await ir(!0)},disabled:Ke,style:{flex:1,padding:"0.75rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:Ke?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Confirmar reembolso"})]})]})}),Ae&&$&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:Re,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",width:"90%",maxWidth:"450px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:z=>z.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"0.5rem",backgroundColor:"#eef2ff",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(an,{size:20,color:"#4f46e5"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"700",margin:0,color:"#111827"},children:"Cambiar Cuenta Destino"}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:0},children:["Pago #",$.id," - ",Ne($.monto)]})]})]}),e.jsx("button",{onClick:Re,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#374151"},children:"Cuenta Actual"}),e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#f3f4f6",borderRadius:"0.375rem",fontSize:"0.9rem",color:"#6b7280"},children:$.nombre_cuenta||"Sin cuenta asignada"})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#374151"},children:["Nueva Cuenta ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:Pe,onChange:z=>I(z.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"",children:"Seleccionar cuenta..."}),S.map(z=>e.jsxs("option",{value:z.id,children:[z.nombre," ",z.numero_cuenta?`- ${z.numero_cuenta}`:""]},z.id))]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{onClick:Re,disabled:Ze,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:Ze?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{onClick:Ue,disabled:Ze||!Pe,style:{flex:1,padding:"0.75rem",backgroundColor:Ze||!Pe?"#9ca3af":"#4f46e5",color:"white",border:"none",borderRadius:"0.375rem",cursor:Ze||!Pe?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[e.jsx(it,{size:16}),Ze?"Guardando...":"Guardar"]})]})]})})]})},P5=()=>{var r;const{id:t}=vs(),o=_o(),{usuario:n}=at(),{toasts:i,removeToast:a,success:l,error:u,warning:s}=_r(),d=go(),[f,x]=c.useState([]),[h,S]=c.useState(null),[C,j]=c.useState(0),[P,v]=c.useState(0),[m,y]=c.useState(!0),[k,U]=c.useState(""),[X,R]=c.useState(""),[w,B]=c.useState("todos"),[q,E]=c.useState("todos"),[T,ee]=c.useState(""),[H,G]=c.useState(""),[O,re]=c.useState(""),[W,Y]=c.useState(""),[D,oe]=c.useState("id_desc"),[K,V]=c.useState(!1),[F,se]=c.useState(!1),[me,ie]=c.useState(!1),[ge,Te]=c.useState(!1),[Q,g]=c.useState(null),[p,Z]=c.useState(null),[ce,be]=c.useState([]),[Ce,Ae]=c.useState(""),[De,te]=c.useState(!1),[_,$]=c.useState({evento_id:"",monto:"",metodo_pago:"efectivo",tipo_pago:"abono",fecha_pago:new Date().toISOString().split("T")[0],numero_referencia:"",observaciones:""}),[xe,Pe]=c.useState(!1),[I,ue]=c.useState(""),J=xr(n,Je.PAGOS_REGISTRAR,[N.ADMIN,N.MANAGER,N.COORDINATOR]),Ze=xr(n,Je.PAGOS_REEMBOLSAR,[N.ADMIN,N.MANAGER]),jr=xr(n,Je.EVENTOS_AGREGAR_PRODUCTO,[N.ADMIN,N.MANAGER]),Ge=xr(n,Je.PAGOS_APROBAR,[N.ADMIN,N.MANAGER]),tr=xr(n,Je.PAGOS_ANULAR,[N.ADMIN,N.MANAGER]);c.useEffect(()=>{t&&(gr(),zr(),Ke())},[t]);const Ke=async()=>{try{const M=await qo.getAll();be(M.cuentas||[])}catch(M){console.error("Error al cargar cuentas:",M)}},gr=async()=>{try{const M=await ur.getById(t);M.evento?(S(M.evento),$(Re=>({...Re,evento_id:M.evento.id_evento||M.evento.id}))):(u("Evento no encontrado"),o("/pagos"))}catch(M){console.error("Error al cargar evento:",M),u("Error al cargar el evento"),o("/pagos")}},zr=async()=>{var M,Re;try{y(!0);const Ue=await et.getByEvento(t);x(Ue.pagos||[]),j(Ue.total_pagado||0);try{const ir=await et.getTotalEvento(t);ir.total_pagado!==void 0&&ir.total_pagado!==null&&j(parseFloat(ir.total_pagado)||0),ir.total_reembolsos!==void 0&&ir.total_reembolsos!==null&&v(parseFloat(ir.total_reembolsos)||0)}catch(ir){console.error("Error al cargar totales de pagos:",ir)}U("")}catch(Ue){const ir=((Re=(M=Ue.response)==null?void 0:M.data)==null?void 0:Re.error)||"Error al cargar los pagos";U(ir),u(ir),console.error(Ue)}finally{y(!1)}},mr=M=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(M),br=M=>{if(!M)return null;if(typeof M=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(M)){const[Re,Ue,ir]=M.split("-").map(Number);return new Date(Re,Ue-1,ir)}return new Date(M)},lr=M=>{if(!M)return"-";try{const Re=br(M),Ue=Re.getFullYear(),ir=String(Re.getMonth()+1).padStart(2,"0"),Br=String(Re.getDate()).padStart(2,"0"),gt=String(Re.getHours()).padStart(2,"0"),ro=String(Re.getMinutes()).padStart(2,"0");return`${Ue}-${ir}-${Br} ${gt}:${ro}`}catch{return M}},qe=M=>{const Re=Number.parseFloat(M);return Number.isFinite(Re)?Re:0},ne=M=>(M||"").toString().toLowerCase(),ke=Math.max(0,C-P),ye=()=>{if(!h)return 0;const M=parseFloat(h.total||0);return Math.max(0,M-ke)},ve=M=>{if(!M||parseFloat(M)<=0)return"abono";const Re=parseFloat(M),Ue=ye();return Re>=Ue&&Ue>0?"pago_completo":"abono"},Ee=M=>{const Re=M.target.value;if(_.tipo_pago!=="reembolso"){const Ue=ve(Re);$({..._,monto:Re,tipo_pago:Ue})}else $({..._,monto:Re})},Qe=M=>{switch(M){case"aprobado":return"Aprobado";case"rechazado":return"Rechazado";case"en_revision":default:return"En revisin"}},Ne=M=>{switch(M){case"aprobado":return{backgroundColor:"#16a34a20",color:"#16a34a"};case"rechazado":return{backgroundColor:"#ef444420",color:"#ef4444"};default:return{backgroundColor:"#f59e0b20",color:"#d97706"}}},L=f.filter(M=>{if(!X)return!0;const Re=ne(X);return ne(M.numero_referencia).includes(Re)||ne(M.observaciones).includes(Re)||ne(M.metodo_pago).includes(Re)||ne(M.tipo_pago).includes(Re)}).filter(M=>w==="todos"?!0:M.tipo_pago===w).filter(M=>q==="todos"?!0:M.metodo_pago===q).filter(M=>{if(!T&&!H)return!0;const Re=br(M.fecha_pago);return!(T&&Re<br(T)||H&&Re>new Date(`${H}T23:59:59`))}).filter(M=>{if(!O&&!W)return!0;const Re=qe(M.monto||0);return!(O&&Re<qe(O)||W&&Re>qe(W))}).sort((M,Re)=>{let Ue=0;switch(D){case"monto_asc":Ue=qe(M.monto||0)-qe(Re.monto||0);break;case"monto_desc":Ue=qe(Re.monto||0)-qe(M.monto||0);break;case"fecha_asc":Ue=br(M.fecha_pago).getTime()-br(Re.fecha_pago).getTime();break;case"fecha_desc":Ue=br(Re.fecha_pago).getTime()-br(M.fecha_pago).getTime();break;case"id_desc":default:Ue=qe(Re.id||0)-qe(M.id||0);break}return Ue!==0?Ue:qe(Re.id||0)-qe(M.id||0)}),ze=L.reduce((M,Re)=>{const Ue=qe(Re.monto||0);return M.totalPagos+=1,Re.tipo_pago==="reembolso"?M.totalReembolsos+=Ue:M.totalIngresos+=Ue,M},{totalPagos:0,totalIngresos:0,totalReembolsos:0}),Se=ze.totalIngresos-ze.totalReembolsos,je=(r=L[0])==null?void 0:r.fecha_pago,Me=Math.max(0,C-P),$e=async(M="abono")=>{if(!h){s("Evento no encontrado");return}if(M!=="reembolso"){const Re=ye();if(qe(Re)<=0){s("Este evento no tiene saldo pendiente. Agregue adicionales al evento si desea registrar pagos.");return}}else{let Re=Math.max(0,C-P);try{const Ue=await et.getTotalEvento(t),ir=parseFloat(Ue.total_pagado)||0,Br=parseFloat(Ue.total_reembolsos)||0;j(ir),v(Br),Re=Math.max(0,ir-Br)}catch(Ue){console.error("Error al cargar totales para reembolso:",Ue)}if(Re<=0){s("No hay saldo disponible para reembolsar.");return}}$({evento_id:h.id_evento||h.id,monto:M==="reembolso"?Math.max(0,C-P):"",metodo_pago:"efectivo",tipo_pago:M,fecha_pago:new Date().toISOString().split("T")[0],numero_referencia:"",observaciones:""}),ue(""),V(!0)},Le=()=>{V(!1),$({evento_id:(h==null?void 0:h.id_evento)||(h==null?void 0:h.id)||"",monto:"",metodo_pago:"efectivo",tipo_pago:"abono",fecha_pago:new Date().toISOString().split("T")[0],numero_referencia:"",observaciones:""}),ue("")},Ve=M=>{g(M),se(!0)},or=()=>{se(!1),g(null)},wr=async(M,Re)=>{var Ue,ir;if(M)try{te(!0),await et.updateEstado(M.id,Re),await zr();const Br=await et.getById(M.id);Br!=null&&Br.pago&&g(Br.pago),l("Estado del pago actualizado")}catch(Br){const gt=((ir=(Ue=Br.response)==null?void 0:Ue.data)==null?void 0:ir.error)||"No se pudo actualizar el estado";u(gt)}finally{te(!1)}},$r=M=>{Z(M),Ae(M.cuenta_id||""),Te(!0)},Ur=()=>{Te(!1),Z(null),Ae("")},he=async()=>{var M,Re;if(!p||!Ce){u("Debe seleccionar una cuenta destino");return}try{te(!0),await et.updateCuenta(p.id,parseInt(Ce)),await et.updateEstado(p.id,"aprobado"),await zr(),Ur(),or(),l("Pago aprobado correctamente")}catch(Ue){const ir=((Re=(M=Ue.response)==null?void 0:M.data)==null?void 0:Re.error)||"No se pudo aprobar el pago";u(ir)}finally{te(!1)}},nr=async(M=!1)=>{var Re,Ue;if(ue(""),!_.monto||parseFloat(_.monto)<=0){ue("El monto debe ser mayor a cero");return}if(!_.fecha_pago){ue("La fecha de pago es requerida");return}if(_.tipo_pago==="reembolso"&&parseFloat(_.monto)>Me){ue("El monto del reembolso supera el saldo disponible para reembolsar.");return}if(_.tipo_pago==="reembolso"&&!M){ie(!0);return}try{Pe(!0);const ir={evento_id:parseInt(_.evento_id),monto:parseFloat(_.monto),metodo_pago:_.metodo_pago,tipo_pago:_.tipo_pago,fecha_pago:_.fecha_pago,numero_referencia:_.numero_referencia||null,observaciones:_.observaciones||null,origen:"web"};await et.create(ir),await zr(),Le(),l(_.tipo_pago==="reembolso"?"Reembolso registrado exitosamente":"Pago registrado exitosamente")}catch(ir){const Br=((Ue=(Re=ir.response)==null?void 0:Re.data)==null?void 0:Ue.error)||"Error al registrar el pago";ue(Br),console.error(ir)}finally{Pe(!1)}},sr=async M=>{M.preventDefault(),await nr(!1)},Rr=ye()>0,hr=(h==null?void 0:h.estado)==="cancelado",qr=()=>{if(h){if(hr){s("No se pueden agregar adicionales a un evento cancelado.");return}o(`/eventos/${h.id_evento||h.id}?tab=productos`)}};return m?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando pagos..."}):h?e.jsxs("div",{children:[e.jsx(Nr,{toasts:i,removeToast:a}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(Or,{to:"/pagos",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #e5e7eb",backgroundColor:"#f3f4f6",color:"#374151",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#e5e7eb"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="#f3f4f6"},children:e.jsx(yi,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Pagos del Evento"}),e.jsx("p",{style:{color:"#6b7280",margin:0},children:h.nombre_evento||"Evento"})]})]})}),k&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:k}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"600",color:"#374151"},children:"Resumen del evento"}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:"Agrega adicionales para generar saldo pendiente y registrar pagos."})]}),jr&&e.jsx("button",{type:"button",onClick:qr,disabled:hr,style:{padding:"0.5rem 1rem",backgroundColor:hr?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:hr?"not-allowed":"pointer",fontWeight:"500"},children:"Agregar adicionales"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(jt,{size:18,color:"#6366f1"}),e.jsx("label",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Evento"})]}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"600"},children:h.nombre_evento}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:h.nombre_cliente})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(zt,{size:18,color:"#10b981"}),e.jsx("label",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Total Evento"})]}),e.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:"bold",color:"#6366f1"},children:mr(parseFloat(h.total||0))})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(zt,{size:18,color:"#10b981"}),e.jsx("label",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Total Pagado"})]}),e.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:"bold",color:"#10b981"},children:mr(ke)})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(zt,{size:18,color:"#ef4444"}),e.jsx("label",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Saldo Pendiente"})]}),e.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:"bold",color:"#ef4444"},children:mr(ye())})]})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:d?"1fr":"2fr 1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Et,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar por referencia, observaciones, mtodo...",value:X,onChange:M=>R(M.target.value),style:{width:"100%",padding:"0.65rem 0.75rem 0.65rem 2.25rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"}})]}),e.jsxs("select",{value:w,onChange:M=>B(M.target.value),style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"},children:[e.jsx("option",{value:"todos",children:"Todos los tipos"}),e.jsx("option",{value:"abono",children:"Abono"}),e.jsx("option",{value:"pago_completo",children:"Pago Completo"}),e.jsx("option",{value:"reembolso",children:"Reembolso"})]}),e.jsxs("select",{value:q,onChange:M=>E(M.target.value),style:{width:"100%",padding:"0.65rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"},children:[e.jsx("option",{value:"todos",children:"Todos los mtodos"}),e.jsx("option",{value:"efectivo",children:"Efectivo"}),e.jsx("option",{value:"transferencia",children:"Transferencia"}),e.jsx("option",{value:"tarjeta_debito",children:"Tarjeta Dbito"}),e.jsx("option",{value:"tarjeta_credito",children:"Tarjeta Crdito"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"otro",children:"Otro"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:d?"1fr":"1fr 1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.35rem"},children:"Desde"}),e.jsx("input",{type:"date",value:T,onChange:M=>ee(M.target.value),style:{width:"100%",padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.35rem"},children:"Hasta"}),e.jsx("input",{type:"date",value:H,onChange:M=>G(M.target.value),style:{width:"100%",padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.35rem"},children:"Monto mnimo"}),e.jsx("input",{type:"number",min:"0",value:O,onChange:M=>re(M.target.value),placeholder:"0",style:{width:"100%",padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"#6b7280",marginBottom:"0.35rem"},children:"Monto mximo"}),e.jsx("input",{type:"number",min:"0",value:W,onChange:M=>Y(M.target.value),placeholder:"Sin tope",style:{width:"100%",padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem"}})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:d?"stretch":"flex-end",marginTop:"0.75rem"},children:e.jsxs("select",{value:D,onChange:M=>oe(M.target.value),style:{padding:"0.6rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",minWidth:d?"100%":"220px"},children:[e.jsx("option",{value:"id_desc",children:"Ordenar: Ms recientes (ID)"}),e.jsx("option",{value:"fecha_desc",children:"Ordenar: Ms recientes (Fecha)"}),e.jsx("option",{value:"fecha_asc",children:"Ordenar: Ms antiguos"}),e.jsx("option",{value:"monto_desc",children:"Ordenar: Monto mayor"}),e.jsx("option",{value:"monto_asc",children:"Ordenar: Monto menor"})]})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:d?"1fr":"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Pagos encontrados"}),e.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700"},children:ze.totalPagos})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Total ingresos"}),e.jsx("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700",color:"#10b981"},children:mr(ze.totalIngresos)})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Total reembolsos"}),e.jsx("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700",color:"#ef4444"},children:mr(ze.totalReembolsos)})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Neto"}),e.jsx("p",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700",color:"#6366f1"},children:mr(Se)})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"ltimo pago"}),e.jsx("p",{style:{margin:0,fontSize:"0.95rem",fontWeight:"600"},children:je?lr(je):"Sin pagos"})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",gap:"1rem",flexWrap:"wrap"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"700",color:"#374151"},children:"Pagos del evento"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[J&&e.jsx("button",{type:"button",onClick:()=>$e("abono"),disabled:!Rr,style:{padding:"0.5rem 0.85rem",borderRadius:"0.375rem",border:"none",backgroundColor:Rr?"#10b981":"#9ca3af",color:"white",cursor:Rr?"pointer":"not-allowed",fontSize:"0.8rem",fontWeight:"600"},children:"Registrar pago"}),Ze&&e.jsx("button",{type:"button",onClick:()=>$e("reembolso"),disabled:Me<=0,style:{padding:"0.5rem 0.85rem",borderRadius:"0.375rem",border:"none",backgroundColor:Me<=0?"#fca5a5":"#ef4444",color:"white",cursor:Me<=0?"not-allowed":"pointer",fontSize:"0.8rem",fontWeight:"600"},children:"Registrar reembolso"})]})]}),d?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:L.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:"No hay pagos que coincidan con los filtros"}):L.map(M=>e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"1rem",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06)",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginBottom:"0.25rem"},children:["ID #",M.id]}),e.jsx("div",{style:{fontWeight:"600",color:"#111827"},children:lr(M.fecha_pago)}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:M.metodo_pago||"-"})]}),e.jsxs("div",{style:{fontWeight:"600",color:M.tipo_pago==="reembolso"?"#ef4444":"#10b981"},children:[M.tipo_pago==="reembolso"?"-":"+",mr(M.monto||0)]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:M.tipo_pago==="reembolso"?"#ef444420":M.tipo_pago==="pago_completo"?"#10b98120":"#3b82f620",color:M.tipo_pago==="reembolso"?"#ef4444":M.tipo_pago==="pago_completo"?"#10b981":"#3b82f6"},children:M.tipo_pago==="reembolso"?"Reembolso":M.tipo_pago==="pago_completo"?"Pago Completo":"Abono"}),e.jsx("span",{style:{marginLeft:"0.5rem",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",...Ne(M.estado_pago)},children:Qe(M.estado_pago)}),e.jsx("span",{style:{marginLeft:"0.5rem",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:M.origen==="web"?"#3b82f620":M.origen==="whatsapp"?"#22c55e20":"#6b728020",color:M.origen==="web"?"#3b82f6":M.origen==="whatsapp"?"#16a34a":"#6b7280"},children:M.origen==="web"?"Web":M.origen==="whatsapp"?"WhatsApp":"Escritorio"})]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[e.jsx("strong",{children:"Referencia:"})," ",M.numero_referencia||"-"]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[e.jsx("strong",{children:"Observaciones:"})," ",M.observaciones||"-"]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:e.jsxs("button",{onClick:()=>Ve(M),style:{padding:"0.5rem 0.75rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(St,{size:16}),"Ver"]})})]},M.id))}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"ID"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Fecha"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Tipo"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Mtodo"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Cuenta"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Referencia"}),e.jsx("th",{style:{padding:"1rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600"},children:"Monto"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Origen"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Observaciones"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:L.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"11",style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:"No hay pagos que coincidan con los filtros"})}):L.map(M=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsxs("td",{style:{padding:"1rem",fontSize:"0.85rem",color:"#6b7280",fontWeight:"600"},children:["#",M.id]}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.85rem"},children:lr(M.fecha_pago)}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:M.tipo_pago==="reembolso"?"#ef444420":M.tipo_pago==="pago_completo"?"#10b98120":"#3b82f620",color:M.tipo_pago==="reembolso"?"#ef4444":M.tipo_pago==="pago_completo"?"#10b981":"#3b82f6"},children:M.tipo_pago==="reembolso"?"Reembolso":M.tipo_pago==="pago_completo"?"Pago Completo":"Abono"})}),e.jsx("td",{style:{padding:"1rem"},children:M.metodo_pago||"-"}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.8rem",color:"#4f46e5",fontWeight:"500"},children:M.nombre_cuenta||"-"}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",...Ne(M.estado_pago)},children:Qe(M.estado_pago)})}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.875rem",color:"#6b7280"},children:M.numero_referencia||"-"}),e.jsxs("td",{style:{padding:"1rem",textAlign:"right",fontWeight:"600",color:M.tipo_pago==="reembolso"?"#ef4444":"#10b981"},children:[M.tipo_pago==="reembolso"?"-":"+",mr(M.monto||0)]}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:M.origen==="web"?"#3b82f620":M.origen==="whatsapp"?"#22c55e20":"#6b728020",color:M.origen==="web"?"#3b82f6":M.origen==="whatsapp"?"#16a34a":"#6b7280"},children:M.origen==="web"?"Web":M.origen==="whatsapp"?"WhatsApp":"Escritorio"})}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.875rem",color:"#6b7280",maxWidth:"200px"},children:e.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:M.observaciones||"-"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:e.jsx("button",{onClick:()=>Ve(M),style:{padding:"0.5rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:Re=>Re.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:Re=>Re.currentTarget.style.backgroundColor="#3b82f6",title:"Ver Detalle",children:e.jsx(St,{size:16})})})})]},M.id))})]})})]}),K&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:Le,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:M=>M.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:_.tipo_pago==="reembolso"?"Registrar Reembolso":"Registrar Pago"}),e.jsx("button",{onClick:Le,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),I&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:I}),e.jsxs("form",{onSubmit:sr,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Evento"}),e.jsx("input",{type:"text",value:(h==null?void 0:h.nombre_evento)||"",disabled:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:"#f3f4f6",color:"#6b7280"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Tipo de Pago ",e.jsx("span",{style:{color:"#6b7280",fontWeight:"400",fontSize:"0.8rem"},children:"(automtico)"})]}),e.jsxs("div",{style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:_.tipo_pago==="reembolso"?"#fef2f2":_.tipo_pago==="pago_completo"?"#f0fdf4":"#eff6ff",color:_.tipo_pago==="reembolso"?"#dc2626":_.tipo_pago==="pago_completo"?"#16a34a":"#2563eb",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{children:_.tipo_pago==="abono"?"Abono":_.tipo_pago==="pago_completo"?"Pago Completo":"Reembolso"}),_.tipo_pago!=="reembolso"&&e.jsxs("span",{style:{fontSize:"0.7rem",color:"#6b7280",fontWeight:"400"},children:["Saldo: ",mr(ye())]})]}),_.tipo_pago==="pago_completo"&&e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"#16a34a"},children:"El monto cubre el saldo pendiente del evento."}),_.tipo_pago==="reembolso"&&e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",color:"#ef4444"},children:"Este reembolso se descontar del total pagado y requiere confirmacin."})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Mtodo de Pago ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:_.metodo_pago,onChange:M=>$({..._,metodo_pago:M.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"efectivo",children:"Efectivo"}),e.jsx("option",{value:"transferencia",children:"Transferencia"}),e.jsx("option",{value:"tarjeta_debito",children:"Tarjeta Dbito"}),e.jsx("option",{value:"tarjeta_credito",children:"Tarjeta Crdito"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"otro",children:"Otro"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Monto ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",value:_.monto,onChange:Ee,required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Fecha de Pago ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"date",value:_.fecha_pago,onChange:M=>$({..._,fecha_pago:M.target.value}),required:!0,max:new Date().toISOString().split("T")[0],style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Nmero de Referencia"}),e.jsx("input",{type:"text",value:_.numero_referencia,onChange:M=>$({..._,numero_referencia:M.target.value}),placeholder:"Nmero de transaccin, cheque, etc.",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Observaciones"}),e.jsx("textarea",{value:_.observaciones,onChange:M=>$({..._,observaciones:M.target.value}),rows:3,placeholder:"Notas adicionales sobre el pago...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:Le,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:xe,style:{padding:"0.75rem 1.5rem",backgroundColor:xe?"#9ca3af":"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:xe?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),xe?"Registrando...":_.tipo_pago==="reembolso"?"Registrar Reembolso":"Registrar Pago"]})]})]})]})}),F&&Q&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:or,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:M=>M.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Detalle del Pago"}),e.jsx("button",{onClick:or,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{width:"4rem",height:"4rem",borderRadius:"50%",backgroundColor:"#10b98120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(zt,{size:32,color:"#10b981"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:mr(Q.monto||0)}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:lr(Q.fecha_pago)})]})]}),e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Tipo de Pago"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:Q.tipo_pago==="reembolso"?"#ef444420":Q.tipo_pago==="pago_completo"?"#10b98120":"#3b82f620",color:Q.tipo_pago==="reembolso"?"#ef4444":Q.tipo_pago==="pago_completo"?"#10b981":"#3b82f6"},children:Q.tipo_pago==="reembolso"?"Reembolso":Q.tipo_pago==="pago_completo"?"Pago Completo":"Abono"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Mtodo de Pago"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:Q.metodo_pago||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Cuenta Destino"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500",color:"#4f46e5"},children:Q.nombre_cuenta||"Sin asignar"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Estado del Pago"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",...Ne(Q.estado_pago)},children:Qe(Q.estado_pago)})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Nmero de Referencia"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:Q.numero_referencia||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Origen"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:Q.origen==="web"?"#3b82f620":Q.origen==="whatsapp"?"#22c55e20":"#6b728020",color:Q.origen==="web"?"#3b82f6":Q.origen==="whatsapp"?"#16a34a":"#6b7280"},children:Q.origen==="web"?"Web":Q.origen==="whatsapp"?"WhatsApp":"Escritorio"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Observaciones"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:Q.observaciones||"-"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[Q.estado_pago==="en_revision"&&(Ge||tr)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>wr(Q,"rechazado"),disabled:De||!tr,style:{padding:"0.75rem 1.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:De||!tr?"not-allowed":"pointer",fontWeight:"500",opacity:De||!tr?.7:1},children:"Rechazar"}),e.jsx("button",{onClick:()=>$r(Q),disabled:De||!Ge,style:{padding:"0.75rem 1.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:De||!Ge?"not-allowed":"pointer",fontWeight:"500",opacity:De||!Ge?.7:1},children:"Aprobar"})]}),e.jsx("button",{onClick:or,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})]})]})}),me&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100,padding:"1rem"},onClick:()=>!xe&&ie(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:M=>M.stopPropagation(),children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.75rem"},children:"Confirmar reembolso"}),e.jsxs("div",{style:{color:"#374151",marginBottom:"0.5rem"},children:["Ests a punto de registrar un reembolso de ",mr(_.monto||0),"."]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:["Disponible para reembolsar: ",mr(Me)]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>ie(!1),disabled:xe,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:xe?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:async()=>{ie(!1),await nr(!0)},disabled:xe,style:{flex:1,padding:"0.75rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:xe?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Confirmar reembolso"})]})]})}),ge&&p&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100,padding:"1rem"},onClick:Ur,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"100%",maxWidth:"520px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:M=>M.stopPropagation(),children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.75rem"},children:"Aprobar pago"}),e.jsxs("div",{style:{color:"#374151",marginBottom:"0.5rem"},children:["Vas a aprobar el pago de ",mr(p.monto||0),"."]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:"1rem"},children:["Mtodo: ",p.metodo_pago||"-","  Fecha: ",lr(p.fecha_pago)]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",fontWeight:"500",color:"#374151"},children:[e.jsx(an,{size:18,color:"#4f46e5"}),"Cuenta Destino ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:Ce,onChange:M=>Ae(M.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.9rem",backgroundColor:"white"},children:[e.jsx("option",{value:"",children:"Seleccionar cuenta..."}),ce.map(M=>e.jsxs("option",{value:M.id,children:[M.nombre," ",M.numero_cuenta?`- ${M.numero_cuenta}`:""]},M.id))]}),!Ce&&e.jsx("div",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem"},children:"Seleccione la cuenta donde se registrar este pago"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[e.jsx("button",{type:"button",onClick:Ur,style:{flex:1,padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{type:"button",onClick:he,disabled:De||!Ce,style:{flex:1,padding:"0.75rem",backgroundColor:De||!Ce?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:De||!Ce?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:De?"Aprobando...":"Confirmar"})]})]})})]}):e.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[e.jsx("p",{children:"Evento no encontrado"}),e.jsx(Or,{to:"/pagos",style:{color:"#6366f1",textDecoration:"none"},children:"Volver a Pagos"})]})},cl=[{valor:"ahorros",etiqueta:"Cuenta de Ahorros",icono:an},{valor:"corriente",etiqueta:"Cuenta Corriente",icono:ka},{valor:"digital",etiqueta:"Billetera Digital",icono:g5},{valor:"efectivo",etiqueta:"Cuenta en Efectivo",icono:Uv},{valor:"otro",etiqueta:"Otro",icono:ka}],D5=()=>{const{usuario:r}=at(),{toasts:t,removeToast:o,success:n,error:i}=_r(),[a,l]=c.useState([]),[u,s]=c.useState(!0),[d,f]=c.useState(""),[x,h]=c.useState("todos"),[S,C]=c.useState(!1),[j,P]=c.useState(!1),[v,m]=c.useState(!1),[y,k]=c.useState(null),[U,X]=c.useState(!1),[R,w]=c.useState({nombre:"",tipo:"ahorros",numero_cuenta:"",descripcion:""}),B=xr(r,Je.CUENTAS_CREAR,[N.ADMIN,N.MANAGER]),q=xr(r,Je.CUENTAS_EDITAR,[N.ADMIN,N.MANAGER]),E=xr(r,Je.CUENTAS_ELIMINAR,[N.ADMIN,N.MANAGER]);c.useEffect(()=>{T()},[S]);const T=async()=>{var V,F;try{s(!0);const se=await qo.getAll(S);l(se.cuentas||[])}catch(se){const me=((F=(V=se.response)==null?void 0:V.data)==null?void 0:F.error)||"Error al cargar las cuentas";i(me)}finally{s(!1)}},ee=V=>{const F=cl.find(se=>se.valor===V);return(F==null?void 0:F.icono)||ka},H=V=>{const F=cl.find(se=>se.valor===V);return(F==null?void 0:F.etiqueta)||V},G=a.filter(V=>{var F,se;if(!d)return!0;const me=d.toLowerCase();return((F=V.nombre)==null?void 0:F.toLowerCase().includes(me))||((se=V.descripcion)==null?void 0:se.toLowerCase().includes(me))}).filter(V=>x==="todos"?!0:V.tipo===x),O=()=>{w({nombre:"",tipo:"ahorros",numero_cuenta:"",descripcion:""}),k(null),P(!0)},re=V=>{w({nombre:V.nombre||"",tipo:V.tipo||"ahorros",numero_cuenta:V.numero_cuenta||"",descripcion:V.descripcion||""}),k(V),P(!0)},W=()=>{P(!1),k(null),w({nombre:"",tipo:"ahorros",numero_cuenta:"",descripcion:""})},Y=async V=>{var F,se;if(V.preventDefault(),!R.nombre.trim()){i("El nombre de la cuenta es requerido");return}try{X(!0),y?(await qo.update(y.id,R),n("Cuenta actualizada exitosamente")):(await qo.create(R),n("Cuenta creada exitosamente")),await T(),W()}catch(me){const ie=((se=(F=me.response)==null?void 0:F.data)==null?void 0:se.error)||"Error al guardar la cuenta";i(ie)}finally{X(!1)}},D=V=>{k(V),m(!0)},oe=async()=>{var V,F;if(y)try{X(!0),await qo.delete(y.id),n("Cuenta desactivada exitosamente"),await T(),m(!1),k(null)}catch(se){const me=((F=(V=se.response)==null?void 0:V.data)==null?void 0:F.error)||"Error al desactivar la cuenta";i(me)}finally{X(!1)}},K=async V=>{var F,se;try{await qo.activar(V.id),n("Cuenta activada exitosamente"),await T()}catch(me){const ie=((se=(F=me.response)==null?void 0:F.data)==null?void 0:se.error)||"Error al activar la cuenta";i(ie)}};return u?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando cuentas..."}):e.jsxs("div",{children:[e.jsx(Nr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Cuentas"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de cuentas para confirmacin de pagos"})]}),B&&e.jsxs("button",{onClick:O,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#4f46e5",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600"},children:[e.jsx(Mr,{size:20}),"Nueva Cuenta"]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",marginBottom:"1.5rem",display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px"},children:[e.jsx(Et,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o descripcin...",value:d,onChange:V=>f(V.target.value),style:{width:"100%",padding:"0.65rem 0.75rem 0.65rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem"}})]}),e.jsxs("select",{value:x,onChange:V=>h(V.target.value),style:{padding:"0.65rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.95rem",minWidth:"180px"},children:[e.jsx("option",{value:"todos",children:"Todos los tipos"}),cl.map(V=>e.jsx("option",{value:V.valor,children:V.etiqueta},V.valor))]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:S,onChange:V=>C(V.target.checked)}),e.jsx("span",{style:{fontSize:"0.9rem",color:"#374151"},children:"Mostrar inactivas"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Total Cuentas"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:G.length})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Activas"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10b981"},children:G.filter(V=>V.activo).length})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Ahorros"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#6366f1"},children:G.filter(V=>V.tipo==="ahorros").length})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Corrientes"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#0ea5e9"},children:G.filter(V=>V.tipo==="corriente").length})]})]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",overflow:"hidden"},children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Cuenta"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Tipo"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Nmero de Cuenta"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Descripcin"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:G.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:"No hay cuentas que mostrar"})}):G.map(V=>{const F=ee(V.tipo);return e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"0.5rem",backgroundColor:V.activo?"#eef2ff":"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(F,{size:20,color:V.activo?"#4f46e5":"#9ca3af"})}),e.jsx("div",{children:e.jsx("div",{style:{fontWeight:"600",color:V.activo?"#111827":"#9ca3af"},children:V.nombre})})]})}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:V.tipo==="ahorros"?"#dbeafe":V.tipo==="corriente"?"#e0f2fe":V.tipo==="digital"?"#f3e8ff":V.tipo==="efectivo"?"#dcfce7":"#f3f4f6",color:V.tipo==="ahorros"?"#1d4ed8":V.tipo==="corriente"?"#0369a1":V.tipo==="digital"?"#7c3aed":V.tipo==="efectivo"?"#16a34a":"#6b7280"},children:H(V.tipo)})}),e.jsx("td",{style:{padding:"1rem",color:"#374151",fontSize:"0.875rem",fontFamily:"monospace"},children:V.numero_cuenta||"-"}),e.jsx("td",{style:{padding:"1rem",color:"#6b7280",fontSize:"0.875rem",maxWidth:"300px"},children:V.descripcion||"-"}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:V.activo?"#dcfce7":"#fee2e2",color:V.activo?"#16a34a":"#dc2626"},children:V.activo?"Activa":"Inactiva"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[q&&e.jsx("button",{onClick:()=>re(V),style:{padding:"0.5rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer"},title:"Editar",children:e.jsx(Ag,{size:16})}),E&&V.activo&&e.jsx("button",{onClick:()=>D(V),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer"},title:"Desactivar",children:e.jsx(m5,{size:16})}),E&&!V.activo&&e.jsx("button",{onClick:()=>K(V),style:{padding:"0.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer"},title:"Activar",children:e.jsx(u5,{size:16})})]})})]},V.id)})})]})})}),j&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:W,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:V=>V.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:y?"Editar Cuenta":"Nueva Cuenta"}),e.jsx("button",{onClick:W,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),e.jsxs("form",{onSubmit:Y,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:R.nombre,onChange:V=>w({...R,nombre:V.target.value}),required:!0,placeholder:"Ej: Bancolombia Ahorros",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Tipo ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("select",{value:R.tipo,onChange:V=>w({...R,tipo:V.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:cl.map(V=>e.jsx("option",{value:V.valor,children:V.etiqueta},V.valor))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Nmero de Cuenta"}),e.jsx("input",{type:"text",value:R.numero_cuenta,onChange:V=>w({...R,numero_cuenta:V.target.value}),placeholder:"Ej: 2200012345",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",fontFamily:"monospace"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:R.descripcion,onChange:V=>w({...R,descripcion:V.target.value}),rows:3,placeholder:"Descripcin opcional de la cuenta...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:W,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:U,style:{padding:"0.75rem 1.5rem",backgroundColor:U?"#9ca3af":"#4f46e5",color:"white",borderRadius:"0.375rem",border:"none",cursor:U?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),U?"Guardando...":"Guardar"]})]})]})]})}),v&&y&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>m(!1),children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"400px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:V=>V.stopPropagation(),children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem"},children:"Desactivar cuenta"}),e.jsxs("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:["Ests seguro de desactivar la cuenta ",e.jsx("strong",{children:y.nombre}),"? Podrs reactivarla ms tarde si lo necesitas."]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>m(!1),disabled:U,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{onClick:oe,disabled:U,style:{padding:"0.75rem 1.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:U?"not-allowed":"pointer",fontWeight:"500"},children:U?"Desactivando...":"Desactivar"})]})]})})]})},M5=()=>{const r=go(),[t,o]=c.useState("stock"),[n,i]=c.useState([]),[a,l]=c.useState([]),[u,s]=c.useState([]),[d,f]=c.useState([]),[x,h]=c.useState(!0),[S,C]=c.useState(""),[j,P]=c.useState(""),[v,m]=c.useState(""),[y,k]=c.useState("todos"),[U,X]=c.useState(!1),[R,w]=c.useState(null),[B,q]=c.useState("entrada"),[E,T]=c.useState(""),[ee,H]=c.useState(""),[G,O]=c.useState(!1),[re,W]=c.useState(""),[Y,D]=c.useState(1),[oe]=c.useState(15);c.useEffect(()=>{K()},[t]);const K=async()=>{h(!0);try{t==="stock"||t==="alertas"?await V():t==="movimientos"?await F():t==="eventos"&&await se()}catch{C("Error al cargar datos")}finally{h(!1)}},V=async()=>{try{const te=await No.getAll();i(te.productos||[])}catch(te){console.error("Error al cargar productos:",te)}},F=async()=>{try{const te=localStorage.getItem("token"),_=await fetch("/api/inventario/movimientos",{headers:{Authorization:`Bearer ${te}`}});if(_.ok){const $=await _.json();l($.movimientos||[])}}catch(te){console.error("Error al cargar movimientos:",te),l([])}},se=async()=>{try{const te=await ur.getAll();f(te.eventos||[])}catch(te){console.error("Error al cargar eventos:",te)}},me=async te=>{try{const _=await Tv.getByEvento(te);s(_.inventario||[])}catch(_){console.error("Error al cargar inventario:",_)}},ie=async()=>{if(!(!R||!E||parseInt(E)<=0))try{const te=B==="entrada"?parseInt(E):-parseInt(E),_=localStorage.getItem("token");(await fetch(`/api/productos/${R.id}/stock`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify({cantidad:te,motivo:ee||`${B==="entrada"?"Entrada":"Salida"} manual de stock`})})).ok&&(await V(),X(!1),w(null),T(""),H(""))}catch(te){console.error("Error al ajustar stock:",te)}},ge=(te,_)=>te<=0?"#ef4444":_&&te<=_?"#f59e0b":"#10b981",Te=[{id:"stock",label:"Stock General",icon:Gt},{id:"movimientos",label:"Movimientos",icon:zp},{id:"eventos",label:"Por Evento",icon:_t},{id:"alertas",label:"Alertas",icon:di}],Q=n.filter(te=>{var _,$;return j?((_=te.nombre)==null?void 0:_.toLowerCase().includes(j.toLowerCase()))||(($=te.nombre_categoria)==null?void 0:$.toLowerCase().includes(j.toLowerCase())):!0}),g=n.filter(te=>{const _=parseInt(te.stock||te.stock_disponible||0),$=parseInt(te.stock_minimo||0);return _<=$||_<=0}),p=()=>e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",borderBottom:"1px solid #e5e7eb",paddingBottom:"0.5rem",overflowX:"auto"},children:Te.map(te=>{const _=te.icon,$=t===te.id,xe=te.id==="alertas"?g.length:0;return e.jsxs("button",{onClick:()=>o(te.id),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",backgroundColor:$?"#6366f1":"transparent",color:$?"white":"#6b7280",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:$?"600":"500",fontSize:r?"0.8rem":"0.875rem",whiteSpace:"nowrap",position:"relative"},children:[e.jsx(_,{size:18}),!r&&te.label,xe>0&&e.jsx("span",{style:{backgroundColor:"#ef4444",color:"white",borderRadius:"9999px",padding:"0.125rem 0.5rem",fontSize:"0.7rem",fontWeight:"700"},children:xe})]},te.id)})}),Z=()=>e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px"},children:[e.jsx(Et,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar producto...",value:j,onChange:te=>P(te.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",fontSize:"0.95rem"}})]}),e.jsxs("button",{onClick:()=>V(),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",backgroundColor:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.875rem"},children:[e.jsx(ts,{size:16}),"Actualizar"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:r?"repeat(2, 1fr)":"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Total Productos"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700"},children:n.length})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Con Stock"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10b981"},children:n.filter(te=>(te.stock||te.stock_disponible||0)>0).length})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Stock Bajo"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#f59e0b"},children:g.filter(te=>(te.stock||te.stock_disponible||0)>0).length})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Agotados"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#ef4444"},children:n.filter(te=>(te.stock||te.stock_disponible||0)<=0).length})]})]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",overflow:"hidden"},children:r?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",padding:"0.5rem"},children:Q.map(te=>{const _=parseInt(te.stock||te.stock_disponible||0),$=parseInt(te.stock_minimo||0);return e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600"},children:te.nombre}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:te.nombre_categoria||"Sin categora"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:te.unidad_medida||"unidad"})]}),e.jsxs("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.875rem",fontWeight:"700",backgroundColor:`${ge(_,$)}15`,color:ge(_,$)},children:[_," ",te.unidad_medida||"uds"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>{w(te),q("entrada"),X(!0)},style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",padding:"0.5rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem"},children:[e.jsx(Mr,{size:14})," Entrada"]}),e.jsxs("button",{onClick:()=>{w(te),q("salida"),X(!0)},style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",padding:"0.5rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem"},children:[e.jsx(a5,{size:14})," Salida"]})]})]},te.id)})}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Producto"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Categora"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Unidad"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Stock Actual"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Stock Mnimo"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:Q.map(te=>{const _=parseInt(te.stock||te.stock_disponible||0),$=parseInt(te.stock_minimo||0),xe=te.unidad_medida||"unidad";let Pe="Normal",I="#10b981";return _<=0?(Pe="Agotado",I="#ef4444"):$&&_<=$&&(Pe="Stock Bajo",I="#f59e0b"),e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"1rem"},children:e.jsx("div",{style:{fontWeight:"500"},children:te.nombre})}),e.jsx("td",{style:{padding:"1rem",color:"#6b7280"},children:te.nombre_categoria||"Sin categora"}),e.jsx("td",{style:{padding:"1rem",textAlign:"center",color:"#6b7280",fontSize:"0.875rem"},children:xe}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"0.375rem",fontWeight:"700",backgroundColor:`${ge(_,$)}15`,color:ge(_,$)},children:_})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center",color:"#6b7280"},children:$||"-"}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:`${I}15`,color:I},children:Pe})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>{w(te),q("entrada"),X(!0)},title:"Registrar entrada",style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.5rem 0.75rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem"},children:[e.jsx(ju,{size:14})," Entrada"]}),e.jsxs("button",{onClick:()=>{w(te),q("salida"),X(!0)},title:"Registrar salida",style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.5rem 0.75rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem"},children:[e.jsx(p5,{size:14})," Salida"]})]})})]},te.id)})})]})})]}),ce=async()=>{if(window.confirm("Est seguro de recalcular el inventario? Esto ajustar el stock de todos los productos basndose en los movimientos registrados.")){O(!0);try{const te=localStorage.getItem("token"),_=await fetch("/api/inventario/recalcular",{method:"POST",headers:{Authorization:`Bearer ${te}`}});if(_.ok){const $=await _.json();alert($.message),await V(),await F()}}catch(te){console.error("Error al recalcular:",te)}finally{O(!1)}}},be=()=>{const te=a.filter(I=>{if(!re)return!0;const ue=re.toLowerCase();return(I.producto_nombre||"").toLowerCase().includes(ue)||(I.tipo_movimiento||"").toLowerCase().includes(ue)||(I.cliente_nombre||"").toLowerCase().includes(ue)||(I.nombre_evento||"").toLowerCase().includes(ue)||(I.motivo||"").toLowerCase().includes(ue)||String(I.evento_id||"").includes(ue)}),_=Math.ceil(te.length/oe),$=(Y-1)*oe,xe=$+oe,Pe=te.slice($,xe);return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"200px",maxWidth:"400px"},children:[e.jsx(Et,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar por producto, cliente, evento, tipo...",value:re,onChange:I=>{W(I.target.value),D(1)},style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("button",{onClick:ce,disabled:G,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"0.5rem",cursor:G?"wait":"pointer",fontSize:"0.875rem",opacity:G?.7:1},children:[e.jsx(ts,{size:16,className:G?"animate-spin":""}),G?"Recalculando...":"Recalcular Inventario"]})]}),re&&e.jsxs("div",{style:{marginBottom:"0.75rem",fontSize:"0.875rem",color:"#6b7280"},children:[te.length," resultado(s) encontrado(s)",re&&e.jsx("button",{onClick:()=>{W(""),D(1)},style:{marginLeft:"0.5rem",padding:"0.25rem 0.5rem",backgroundColor:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"0.25rem",fontSize:"0.75rem",cursor:"pointer"},children:"Limpiar filtro"})]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",overflow:"hidden"},children:a.length===0?e.jsxs("div",{style:{padding:"3rem",textAlign:"center",color:"#6b7280"},children:[e.jsx(zp,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),e.jsx("p",{children:"No hay movimientos registrados"}),e.jsx("p",{style:{fontSize:"0.875rem"},children:"Los movimientos se registrarn automticamente al:"}),e.jsxs("ul",{style:{textAlign:"left",maxWidth:"300px",margin:"1rem auto",fontSize:"0.875rem"},children:[e.jsx("li",{children:"Reservar productos para eventos"}),e.jsx("li",{children:"Devolver productos de eventos"}),e.jsx("li",{children:"Ajustar stock manualmente"})]})]}):te.length===0?e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:[e.jsx(Et,{size:32,style:{margin:"0 auto 0.5rem",opacity:.5}}),e.jsxs("p",{children:['No se encontraron movimientos con "',re,'"']})]}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"900px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:"600",fontSize:"0.8rem"},children:"Fecha"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:"600",fontSize:"0.8rem"},children:"Producto"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"600",fontSize:"0.8rem"},children:"Tipo"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"600",fontSize:"0.8rem"},children:"Cant."}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"600",fontSize:"0.8rem"},children:"Anterior"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"600",fontSize:"0.8rem"},children:"Nuevo"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:"600",fontSize:"0.8rem"},children:"Evento"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:"600",fontSize:"0.8rem"},children:"Cliente"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontWeight:"600",fontSize:"0.8rem"},children:"Motivo"})]})}),e.jsx("tbody",{children:Pe.map(I=>{const ue={entrada:"#10b981",salida:"#ef4444",ajuste:"#3b82f6",reserva:"#f59e0b",devolucion:"#8b5cf6"}[I.tipo_movimiento]||"#6b7280",J={completado:"#10b981",confirmado:"#3b82f6",en_proceso:"#f59e0b",cancelado:"#ef4444"}[I.evento_estado]||"#6b7280";return e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"0.75rem",fontSize:"0.8rem"},children:I.fecha_movimiento?new Date(I.fecha_movimiento).toLocaleString("es-CO"):"-"}),e.jsx("td",{style:{padding:"0.75rem",fontSize:"0.875rem"},children:I.producto_nombre||`ID: ${I.producto_id}`}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.2rem 0.5rem",borderRadius:"9999px",fontSize:"0.7rem",fontWeight:"500",backgroundColor:`${ue}15`,color:ue,textTransform:"capitalize"},children:I.tipo_movimiento})}),e.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"600",fontSize:"0.875rem"},children:[I.tipo_movimiento==="entrada"||I.tipo_movimiento==="devolucion"?"+":"-",I.cantidad]}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center",color:"#6b7280",fontSize:"0.875rem"},children:I.stock_anterior}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"600",fontSize:"0.875rem"},children:I.stock_nuevo}),e.jsx("td",{style:{padding:"0.75rem",fontSize:"0.8rem"},children:I.evento_id?e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"500"},children:["#",I.evento_id]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:I.nombre_evento||""}),I.evento_estado&&e.jsx("span",{style:{padding:"0.1rem 0.4rem",borderRadius:"4px",fontSize:"0.65rem",backgroundColor:`${J}15`,color:J,textTransform:"capitalize"},children:I.evento_estado})]}):"-"}),e.jsx("td",{style:{padding:"0.75rem",fontSize:"0.8rem",color:"#374151"},children:I.cliente_nombre||"-"}),e.jsx("td",{style:{padding:"0.75rem",fontSize:"0.75rem",color:"#6b7280",maxWidth:"200px"},children:I.motivo||"-"})]},I.id)})})]})})}),te.length>oe&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem",padding:"0.75rem",backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",flexWrap:"wrap",gap:"0.5rem"},children:[e.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Mostrando ",$+1," - ",Math.min(xe,te.length)," de ",te.length]}),e.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[e.jsx("button",{onClick:()=>D(1),disabled:Y===1,style:{padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",backgroundColor:Y===1?"#f3f4f6":"white",cursor:Y===1?"not-allowed":"pointer",opacity:Y===1?.5:1,fontSize:"0.875rem"},children:""}),e.jsx("button",{onClick:()=>D(I=>Math.max(I-1,1)),disabled:Y===1,style:{padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",backgroundColor:Y===1?"#f3f4f6":"white",cursor:Y===1?"not-allowed":"pointer",opacity:Y===1?.5:1,fontSize:"0.875rem"},children:""}),Array.from({length:Math.min(5,_)},(I,ue)=>{let J;return _<=5||Y<=3?J=ue+1:Y>=_-2?J=_-4+ue:J=Y-2+ue,e.jsx("button",{onClick:()=>D(J),style:{padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",backgroundColor:Y===J?"#6366f1":"white",color:Y===J?"white":"#374151",cursor:"pointer",fontWeight:Y===J?"600":"400",fontSize:"0.875rem"},children:J},J)}),e.jsx("button",{onClick:()=>D(I=>Math.min(I+1,_)),disabled:Y===_,style:{padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",backgroundColor:Y===_?"#f3f4f6":"white",cursor:Y===_?"not-allowed":"pointer",opacity:Y===_?.5:1,fontSize:"0.875rem"},children:""}),e.jsx("button",{onClick:()=>D(_),disabled:Y===_,style:{padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",backgroundColor:Y===_?"#f3f4f6":"white",cursor:Y===_?"not-allowed":"pointer",opacity:Y===_?.5:1,fontSize:"0.875rem"},children:""})]})]})]})},Ce=()=>e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#374151"},children:"Seleccionar Evento"}),e.jsxs("select",{value:v,onChange:te=>{m(te.target.value),te.target.value&&me(te.target.value)},style:{width:"100%",maxWidth:"500px",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",fontSize:"1rem"},children:[e.jsx("option",{value:"",children:"Seleccione un evento"}),d.map(te=>e.jsxs("option",{value:te.id_evento,children:[te.nombre_evento," - ",te.nombre_cliente," (",te.estado,")"]},te.id_evento))]})]}),v&&e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",overflow:"hidden"},children:u.length===0?e.jsxs("div",{style:{padding:"3rem",textAlign:"center",color:"#6b7280"},children:[e.jsx(Gt,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),e.jsx("p",{children:"No hay productos asignados a este evento"})]}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Producto"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Cantidad"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Fecha Reserva"})]})}),e.jsx("tbody",{children:u.map(te=>{const _={disponible:"#10b981",reservado:"#3b82f6",en_uso:"#f59e0b",devuelto:"#6b7280"}[te.estado]||"#6b7280";return e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"1rem"},children:te.nombre_producto}),e.jsx("td",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:te.cantidad_solicitada}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:`${_}15`,color:_,textTransform:"capitalize"},children:te.estado})}),e.jsx("td",{style:{padding:"1rem",color:"#6b7280"},children:te.fecha_reserva?new Date(te.fecha_reserva).toLocaleDateString("es-CO"):"-"})]},te.id)})})]})})]}),Ae=()=>e.jsx("div",{children:g.length===0?e.jsxs("div",{style:{backgroundColor:"white",padding:"3rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",textAlign:"center",color:"#6b7280"},children:[e.jsx(di,{size:48,style:{margin:"0 auto 1rem",opacity:.5,color:"#10b981"}}),e.jsx("p",{style:{fontWeight:"600",color:"#10b981"},children:"Todo en orden"}),e.jsx("p",{children:"No hay productos con stock bajo o agotado"})]}):e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fef3c7",borderBottom:"1px solid #fcd34d"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#92400e"},children:[e.jsx(di,{size:20}),e.jsxs("span",{style:{fontWeight:"600"},children:[g.length," producto(s) requieren atencin"]})]})}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Producto"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Stock Actual"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Stock Mnimo"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontWeight:"600"},children:"Accin"})]})}),e.jsx("tbody",{children:g.map(te=>{const _=parseInt(te.stock||te.stock_disponible||0),$=parseInt(te.stock_minimo||0),xe=_<=0;return e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsxs("td",{style:{padding:"1rem"},children:[e.jsx("div",{style:{fontWeight:"500"},children:te.nombre}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:te.nombre_categoria})]}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"0.375rem",fontWeight:"700",backgroundColor:xe?"#fee2e2":"#fef3c7",color:xe?"#ef4444":"#f59e0b"},children:_})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center",color:"#6b7280"},children:$}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:xe?"#fee2e2":"#fef3c7",color:xe?"#ef4444":"#f59e0b"},children:xe?"AGOTADO":"Stock Bajo"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("button",{onClick:()=>{w(te),q("entrada"),X(!0)},style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.5rem 0.75rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem",margin:"0 auto"},children:[e.jsx(Mr,{size:14})," Reponer"]})})]},te.id)})})]})]})}),De=()=>!U||!R?null:e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:"1.5rem",width:"100%",maxWidth:"400px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[e.jsx("h3",{style:{margin:"0 0 1rem",fontSize:"1.25rem",fontWeight:"600"},children:B==="entrada"?"Registrar Entrada":"Registrar Salida"}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.25rem",fontSize:"0.875rem",color:"#6b7280"},children:"Producto"}),e.jsx("div",{style:{fontWeight:"600"},children:R.nombre}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Stock actual: ",R.stock||R.stock_disponible||0," ",R.unidad_medida||"unidades"]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:["Cantidad (",R.unidad_medida||"unidades",")"]}),e.jsx("input",{type:"number",min:"1",value:E,onChange:te=>T(te.target.value),placeholder:`Ingrese cantidad en ${R.unidad_medida||"unidades"}`,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Motivo (opcional)"}),e.jsx("input",{type:"text",value:ee,onChange:te=>H(te.target.value),placeholder:"Ej: Compra, Ajuste de inventario...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{X(!1),w(null),T(""),H("")},style:{padding:"0.75rem 1.25rem",backgroundColor:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsx("button",{onClick:ie,disabled:!E||parseInt(E)<=0,style:{padding:"0.75rem 1.25rem",backgroundColor:B==="entrada"?"#10b981":"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"500",opacity:!E||parseInt(E)<=0?.5:1},children:B==="entrada"?"Registrar Entrada":"Registrar Salida"})]})]})});return x&&t!=="eventos"?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando..."}):e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h1",{style:{fontSize:r?"1.5rem":"2rem",fontWeight:"bold",marginBottom:"0.25rem"},children:"Inventario"}),e.jsx("p",{style:{color:"#6b7280"},children:"Control de stock, movimientos y alertas"})]}),S&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:S}),p(),t==="stock"&&Z(),t==="movimientos"&&be(),t==="eventos"&&Ce(),t==="alertas"&&Ae(),De()]})},O5=()=>{const{usuario:r}=at(),{toasts:t,removeToast:o,success:n,error:i}=_r(),a=go(),[l,u]=c.useState([]),[s,d]=c.useState(!0),[f,x]=c.useState(""),[h,S]=c.useState(""),[C,j]=c.useState("todos"),[P,v]=c.useState(""),[m,y]=c.useState(""),[k,U]=c.useState(""),[X,R]=c.useState(""),[w,B]=c.useState("fecha_desc"),[q,E]=c.useState(!1),[T,ee]=c.useState(!1),[H,G]=c.useState(!1),[O,re]=c.useState(!1),[W,Y]=c.useState(null),[D,oe]=c.useState({nombre:"",capacidad:"",ubicacion:"",descripcion:"",precio_base:"",activo:!0}),[K,V]=c.useState(!1),[F,se]=c.useState(""),me=Cr(r==null?void 0:r.rol,[N.ADMIN,N.MANAGER,N.COORDINATOR]),ie=Cr(r==null?void 0:r.rol,[N.ADMIN,N.MANAGER,N.COORDINATOR]),ge=Cr(r==null?void 0:r.rol,[N.ADMIN,N.MANAGER]);c.useEffect(()=>{Te()},[]);const Te=async()=>{var I,ue;try{d(!0);const J=await vn.getAll(!1);u(J.salones||[]),x("")}catch(J){const Ze=((ue=(I=J.response)==null?void 0:I.data)==null?void 0:ue.error)||J.message||"Error al cargar los salones";x(Ze),console.error(J)}finally{d(!1)}},Q=I=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(I),g=I=>{const ue=Number.parseFloat(I);return Number.isFinite(ue)?ue:null},p=l.filter(I=>{var ue,J,Ze;if(!h)return!0;const jr=h.toLowerCase();return((ue=I.nombre)==null?void 0:ue.toLowerCase().includes(jr))||((J=I.ubicacion)==null?void 0:J.toLowerCase().includes(jr))||((Ze=I.descripcion)==null?void 0:Ze.toLowerCase().includes(jr))}).filter(I=>C==="activos"?I.activo!==!1:C==="inactivos"?I.activo===!1:!0).filter(I=>{const ue=g(P),J=g(m);if(ue===null&&J===null)return!0;const Ze=Number(I.capacidad||0);return!(ue!==null&&Ze<ue||J!==null&&Ze>J)}).filter(I=>{const ue=g(k),J=g(X);if(ue===null&&J===null)return!0;const Ze=Number(I.precio_base||0);return!(ue!==null&&Ze<ue||J!==null&&Ze>J)}).sort((I,ue)=>{const J=I.fecha_creacion||I.created_at||I.fecha||I.fecha_creado||I.fechaCreacion||I.id_salon,Ze=ue.fecha_creacion||ue.created_at||ue.fecha||ue.fecha_creado||ue.fechaCreacion||ue.id_salon;switch(w){case"nombre_asc":return(I.nombre||"").localeCompare(ue.nombre||"");case"nombre_desc":return(ue.nombre||"").localeCompare(I.nombre||"");case"capacidad_desc":return Number(ue.capacidad||0)-Number(I.capacidad||0);case"capacidad_asc":return Number(I.capacidad||0)-Number(ue.capacidad||0);case"precio_desc":return Number(ue.precio_base||0)-Number(I.precio_base||0);case"precio_asc":return Number(I.precio_base||0)-Number(ue.precio_base||0);case"fecha_asc":return new Date(J).getTime()-new Date(Ze).getTime();default:return new Date(Ze).getTime()-new Date(J).getTime()}}),Z=()=>{oe({nombre:"",capacidad:"",ubicacion:"",descripcion:"",precio_base:"",activo:!0}),se(""),E(!0)},ce=()=>{E(!1),oe({nombre:"",capacidad:"",ubicacion:"",descripcion:"",precio_base:"",activo:!0}),se("")},be=I=>{Y(I),oe({nombre:I.nombre||"",capacidad:I.capacidad||"",ubicacion:I.ubicacion||"",descripcion:I.descripcion||"",precio_base:I.precio_base||"",activo:I.activo!==!1}),se(""),ee(!0)},Ce=()=>{ee(!1),Y(null),oe({nombre:"",capacidad:"",ubicacion:"",descripcion:"",precio_base:"",activo:!0}),se("")},Ae=I=>{Y(I),G(!0)},De=()=>{G(!1),Y(null)},te=I=>{Y(I),re(!0)},_=()=>{re(!1),Y(null)},$=async I=>{var ue,J;if(I.preventDefault(),se(""),!D.nombre||!D.capacidad){se("El nombre y la capacidad son requeridos");return}try{V(!0);const Ze={...D,capacidad:parseInt(D.capacidad),precio_base:D.precio_base?parseFloat(D.precio_base):0,activo:D.activo};await vn.create(Ze),await Te(),ce(),n("Saln creado exitosamente")}catch(Ze){const jr=((J=(ue=Ze.response)==null?void 0:ue.data)==null?void 0:J.error)||"Error al crear el saln";se(jr),console.error(Ze)}finally{V(!1)}},xe=async I=>{var ue,J;if(I.preventDefault(),se(""),!D.nombre||!D.capacidad){se("El nombre y la capacidad son requeridos");return}try{V(!0);const Ze={...D,capacidad:parseInt(D.capacidad),precio_base:D.precio_base?parseFloat(D.precio_base):0,activo:D.activo};await vn.update(W.id_salon,Ze),await Te(),Ce(),n("Saln actualizado exitosamente")}catch(Ze){const jr=((J=(ue=Ze.response)==null?void 0:ue.data)==null?void 0:J.error)||"Error al actualizar el saln";se(jr),console.error(Ze)}finally{V(!1)}},Pe=async()=>{var I,ue;try{V(!0),await vn.delete(W.id_salon),await Te(),_(),n("Saln desactivado exitosamente")}catch(J){const Ze=((ue=(I=J.response)==null?void 0:I.data)==null?void 0:ue.error)||"Error al desactivar el saln";i(Ze),console.error(J)}finally{V(!1)}};return s?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando salones..."}):e.jsxs("div",{children:[e.jsx(Nr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:a?"1.5rem":"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Salones"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de salones y espacios"})]}),me&&e.jsxs("button",{onClick:Z,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:I=>I.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:I=>I.currentTarget.style.backgroundColor="#6366f1",children:[e.jsx(Mr,{size:20}),"Nuevo Saln"]})]}),f&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:f}),e.jsxs("div",{style:{marginBottom:"1.5rem",display:"grid",gap:"1rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:a?"1fr":"2fr 1fr",gap:"1rem"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Et,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar salones...",value:h,onChange:I=>S(I.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsx("div",{children:e.jsxs("select",{value:w,onChange:I=>B(I.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"fecha_desc",children:"Ordenar: Creacin (Ms recientes)"}),e.jsx("option",{value:"fecha_asc",children:"Ordenar: Creacin (Ms antiguos)"}),e.jsx("option",{value:"nombre_asc",children:"Ordenar: Nombre (A-Z)"}),e.jsx("option",{value:"nombre_desc",children:"Ordenar: Nombre (Z-A)"}),e.jsx("option",{value:"capacidad_desc",children:"Ordenar: Capacidad (Mayor a menor)"}),e.jsx("option",{value:"capacidad_asc",children:"Ordenar: Capacidad (Menor a mayor)"}),e.jsx("option",{value:"precio_desc",children:"Ordenar: Precio (Mayor a menor)"}),e.jsx("option",{value:"precio_asc",children:"Ordenar: Precio (Menor a mayor)"})]})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:a?"1fr":"1fr 1fr 1fr 1fr 1fr",gap:"1rem",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Estado"}),e.jsxs("select",{value:C,onChange:I=>j(I.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"todos",children:"Todos"}),e.jsx("option",{value:"activos",children:"Activos"}),e.jsx("option",{value:"inactivos",children:"Inactivos"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Capacidad mn."}),e.jsx("input",{type:"number",min:"0",value:P,onChange:I=>v(I.target.value),placeholder:"0",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Capacidad mx."}),e.jsx("input",{type:"number",min:"0",value:m,onChange:I=>y(I.target.value),placeholder:"Sin tope",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio mn."}),e.jsx("input",{type:"number",min:"0",value:k,onChange:I=>U(I.target.value),placeholder:"0",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio mx."}),e.jsx("input",{type:"number",min:"0",value:X,onChange:I=>R(I.target.value),placeholder:"Sin tope",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:a?"1fr":"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:p.length===0?e.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"2rem",color:"#6b7280"},children:h?"No se encontraron salones con ese criterio":"No hay salones disponibles"}):p.map(I=>e.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:ue=>{ue.currentTarget.style.transform="translateY(-2px)",ue.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseLeave:ue=>{ue.currentTarget.style.transform="translateY(0)",ue.currentTarget.style.boxShadow="0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"1rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"0.5rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Xl,{size:24,color:"#6366f1"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.25rem",margin:0},children:I.nombre}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:0},children:I.ubicacion||"Sin ubicacin"})]})]}),e.jsx("p",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"1rem"},children:I.descripcion||"Sin descripcin"}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsxs("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#f3f4f6",borderRadius:"9999px",fontSize:"0.75rem",color:"#6b7280"},children:["Capacidad: ",I.capacidad||0," personas"]}),I.precio_base&&I.precio_base>0&&e.jsx("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#f3f4f6",borderRadius:"9999px",fontSize:"0.75rem",color:"#6b7280"},children:Q(I.precio_base)}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:I.activo!==!1?"#10b98120":"#ef444420",color:I.activo!==!1?"#10b981":"#ef4444"},children:I.activo!==!1?"Activo":"Inactivo"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>Ae(I),style:{flex:1,padding:"0.5rem 1rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background-color 0.2s"},onMouseEnter:ue=>ue.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:ue=>ue.currentTarget.style.backgroundColor="#3b82f6",children:[e.jsx(St,{size:16}),"Ver Detalle"]}),ie&&e.jsx("button",{onClick:()=>be(I),style:{padding:"0.5rem 1rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:ue=>ue.currentTarget.style.backgroundColor="#059669",onMouseLeave:ue=>ue.currentTarget.style.backgroundColor="#10b981",title:"Editar",children:e.jsx(Qt,{size:16})}),ge&&e.jsx("button",{onClick:()=>te(I),style:{padding:"0.5rem 1rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:ue=>ue.currentTarget.style.backgroundColor="#dc2626",onMouseLeave:ue=>ue.currentTarget.style.backgroundColor="#ef4444",title:"Eliminar",children:e.jsx(Ar,{size:16})})]})]},I.id_salon))}),q&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:ce,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:I=>I.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Nuevo Saln"}),e.jsx("button",{onClick:ce,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),F&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:F}),e.jsxs("form",{onSubmit:$,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:D.nombre,onChange:I=>oe({...D,nombre:I.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Capacidad ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"number",min:"1",value:D.capacidad,onChange:I=>oe({...D,capacidad:I.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio Base"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:D.precio_base,onChange:I=>oe({...D,precio_base:I.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Ubicacin"}),e.jsx("input",{type:"text",value:D.ubicacion,onChange:I=>oe({...D,ubicacion:I.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:D.descripcion,onChange:I=>oe({...D,descripcion:I.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:D.activo,onChange:I=>oe({...D,activo:I.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Saln activo"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:ce,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:K,style:{padding:"0.75rem 1.5rem",backgroundColor:K?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:K?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),K?"Guardando...":"Guardar"]})]})]})]})}),T&&W&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:Ce,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:I=>I.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Editar Saln"}),e.jsx("button",{onClick:Ce,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),F&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:F}),e.jsxs("form",{onSubmit:xe,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:D.nombre,onChange:I=>oe({...D,nombre:I.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Capacidad ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"number",min:"1",value:D.capacidad,onChange:I=>oe({...D,capacidad:I.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Precio Base"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:D.precio_base,onChange:I=>oe({...D,precio_base:I.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Ubicacin"}),e.jsx("input",{type:"text",value:D.ubicacion,onChange:I=>oe({...D,ubicacion:I.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Descripcin"}),e.jsx("textarea",{value:D.descripcion,onChange:I=>oe({...D,descripcion:I.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:D.activo,onChange:I=>oe({...D,activo:I.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Saln activo"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:Ce,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:K,style:{padding:"0.75rem 1.5rem",backgroundColor:K?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:K?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),K?"Guardando...":"Guardar Cambios"]})]})]})]})}),H&&W&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:De,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:I=>I.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Detalle del Saln"}),e.jsx("button",{onClick:De,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{width:"4rem",height:"4rem",borderRadius:"0.5rem",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Xl,{size:32,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:W.nombre||"N/A"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:W.ubicacion||"Sin ubicacin"})]})]}),e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Capacidad"}),e.jsxs("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:[W.capacidad||0," personas"]})]}),W.precio_base&&W.precio_base>0&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Precio Base"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500",color:"#6366f1"},children:Q(W.precio_base)})]}),W.descripcion&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Descripcin"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:W.descripcion})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Estado"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:W.activo!==!1?"#10b98120":"#ef444420",color:W.activo!==!1?"#10b981":"#ef4444"},children:W.activo!==!1?"Activo":"Inactivo"})]})]})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:e.jsx("button",{onClick:De,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})})]})}),O&&W&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:_,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:I=>I.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"50%",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ut,{size:24,color:"#dc2626"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"Desactivar Saln"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:"Est seguro de desactivar este saln?"})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.375rem",marginBottom:"1.5rem"},children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:W.nombre}),e.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:["Capacidad: ",W.capacidad||0," personas"]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:_,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{onClick:Pe,disabled:K,style:{padding:"0.75rem 1.5rem",backgroundColor:K?"#9ca3af":"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:K?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ar,{size:18}),K?"Desactivando...":"Desactivar"]})]})]})})]})},L5=({titulo:r="Dashboard Ejecutivo",subtitulo:t="Resumen de operaciones y mtricas clave",mostrarToast:o=!0})=>{var n,i,a,l,u,s,d,f,x,h,S,C,j,P,v,m,y,k,U,X,R,w,B,q,E,T,ee,H,G,O,re,W,Y,D,oe,K,V,F;const{toasts:se,removeToast:me,error:ie}=_r(),[ge,Te]=c.useState(null),[Q,g]=c.useState(null),[p,Z]=c.useState(null),[ce,be]=c.useState(null),[Ce,Ae]=c.useState(null),[De,te]=c.useState(null),[_,$]=c.useState(!0),[xe,Pe]=c.useState(""),[I,ue]=c.useState(null),[J,Ze]=c.useState(!1),[jr,Ge]=c.useState(!1),[tr,Ke]=c.useState(""),[gr,zr]=c.useState("");c.useEffect(()=>{mr();const he=()=>{Ze(window.innerWidth<640),Ge(window.innerWidth>=640&&window.innerWidth<1024)};return he(),window.addEventListener("resize",he),()=>window.removeEventListener("resize",he)},[]);const mr=async(he=tr,nr=gr)=>{var sr,Rr,hr,qr;try{if($(!0),!localStorage.getItem("token")){Pe("No hay sesin activa. Por favor, inicia sesin nuevamente."),$(!1);return}const M={};he&&(M.fecha_desde=he),nr&&(M.fecha_hasta=nr);const[Re,Ue,ir,Br,gt,ro]=await Promise.all([Tt.getMetricas(M),Tt.getEventosPorEstado().catch(()=>null),Tt.getResumenFinanciero().catch(()=>null),Tt.getResumenDanos(M).catch(()=>null),Tt.getResumenCalificaciones(M).catch(()=>null),Tt.getPagosPorCuenta(M).catch(()=>null)]);Te(Re.metricas),g((Ue==null?void 0:Ue.resumen)||null),Z((ir==null?void 0:ir.resumen_financiero)||null),be((Br==null?void 0:Br.resumen)||null),Ae((gt==null?void 0:gt.resumen)||null),te(ro||null),Pe("")}catch(M){const Re=((Rr=(sr=M.response)==null?void 0:sr.data)==null?void 0:Rr.error)||(((hr=M.response)==null?void 0:hr.status)===401?"Sesin expirada. Por favor, inicia sesin nuevamente.":"Error al cargar los reportes");Pe(Re),o&&ie(Re),console.error(M),((qr=M.response)==null?void 0:qr.status)===401&&setTimeout(()=>{localStorage.removeItem("token"),localStorage.removeItem("usuario"),window.location.href="/login"},2e3)}finally{$(!1)}},br=()=>{mr(tr,gr)},lr=()=>{Ke(""),zr(""),mr("","")},qe=async he=>{try{ue(he);const nr={};tr&&(nr.fecha_desde=tr),gr&&(nr.fecha_hasta=gr);let sr;switch(he){case"eventos":sr=await Tt.descargarEventos(nr);break;case"inventario":sr=await Tt.descargarInventario();break;case"cardex":sr=await Tt.descargarCardex(nr);break;case"notificaciones":sr=await Tt.descargarNotificaciones(nr);break;case"clientes":sr=await Tt.descargarClientes();break;case"pagos":sr=await Tt.descargarPagos(nr);break;case"danos":sr=await Tt.descargarDanos(nr);break;case"calificaciones":sr=await Tt.descargarCalificaciones(nr);break;default:return}const Rr=window.URL.createObjectURL(new Blob([sr.data])),hr=document.createElement("a");hr.href=Rr;const qr=sr.headers["content-disposition"];let M=`reporte_${he}_${new Date().toISOString().slice(0,10)}.csv`;if(qr){const Re=qr.match(/filename=(.+)/);Re&&(M=Re[1])}hr.setAttribute("download",M),document.body.appendChild(hr),hr.click(),hr.remove(),window.URL.revokeObjectURL(Rr)}catch(nr){console.error(`Error al descargar reporte de ${he}:`,nr),o&&ie(`Error al descargar el reporte de ${he}`)}finally{ue(null)}},ne=he=>new Intl.NumberFormat("es-EC",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(he),ke=he=>new Intl.NumberFormat("es-EC",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(he),ye=({titulo:he,valor:nr,subtexto:sr,icono:Rr,color:hr,tendencia:qr})=>e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:J?"1rem":"1.25rem",border:"1px solid #e5e7eb",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{minWidth:0,flex:1},children:[e.jsx("p",{style:{fontSize:J?"0.7rem":"0.75rem",color:"#6b7280",margin:0,textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:he}),e.jsx("p",{style:{fontSize:J?"1.25rem":"1.75rem",fontWeight:700,color:"#111827",margin:"0.25rem 0",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:nr}),sr&&e.jsxs("p",{style:{fontSize:J?"0.65rem":"0.75rem",color:qr==="up"?"#059669":qr==="down"?"#dc2626":"#6b7280",margin:0,display:"flex",alignItems:"center",gap:"0.25rem",whiteSpace:"nowrap"},children:[qr==="up"&&e.jsx(Lv,{size:J?10:12}),qr==="down"&&e.jsx(Ov,{size:J?10:12}),sr]})]}),e.jsx("div",{style:{width:J?"2rem":"2.5rem",height:J?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:`${hr}15`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,marginLeft:"0.5rem"},children:_l.createElement(Rr,{size:J?16:20,color:hr})})]})}),ve=({label:he,valor:nr,total:sr,color:Rr})=>{const hr=sr>0?nr/sr*100:0;return e.jsxs("div",{style:{marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[e.jsx("span",{style:{fontSize:"0.8rem",color:"#4b5563"},children:he}),e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"#111827"},children:nr})]}),e.jsx("div",{style:{height:"6px",backgroundColor:"#f3f4f6",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${Math.min(hr,100)}%`,backgroundColor:Rr,borderRadius:"3px",transition:"width 0.3s"}})})]})},Ee=({icono:he,label:nr,valor:sr,color:Rr,bgColor:hr})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:J?"0.5rem":"0.75rem",padding:J?"0.6rem 0.75rem":"0.75rem 1rem",backgroundColor:hr,borderRadius:"0.5rem",flex:1,minWidth:J?"100px":"140px"},children:[_l.createElement(he,{size:J?14:18,color:Rr}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:J?"1rem":"1.25rem",fontWeight:700,color:Rr,margin:0},children:sr}),e.jsx("p",{style:{fontSize:J?"0.6rem":"0.7rem",color:"#6b7280",margin:0},children:nr})]})]});if(_)return e.jsxs("div",{style:{textAlign:"center",padding:"4rem"},children:[e.jsx(pc,{size:48,color:"#6366f1",style:{margin:"0 auto 1rem",animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{color:"#6b7280",fontSize:"1rem"},children:"Cargando dashboard..."})]});if(xe)return e.jsxs("div",{style:{textAlign:"center",padding:"4rem"},children:[e.jsx(ut,{size:48,color:"#ef4444",style:{margin:"0 auto 1rem"}}),e.jsx("p",{style:{color:"#ef4444",marginBottom:"1rem"},children:xe}),e.jsx("button",{onClick:mr,style:{padding:"0.6rem 1.25rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Reintentar"})]});if(!ge)return e.jsx("div",{style:{textAlign:"center",padding:"4rem"},children:e.jsx("p",{style:{color:"#ef4444"},children:"No se pudieron cargar los reportes"})});const Qe=((n=ge.financiero)==null?void 0:n.total_ingresos)||0,Ne=((i=ge.financiero)==null?void 0:i.total_cobrado)||0,L=((a=ge.financiero)==null?void 0:a.total_pendiente)||0,ze=Qe>0?(Ne/Qe*100).toFixed(1):0,Se=((l=ge.eventos)==null?void 0:l.total)||0,je=((u=ge.eventos)==null?void 0:u.confirmados)||0,Me=((s=ge.eventos)==null?void 0:s.en_proceso)||0,$e=((d=ge.eventos)==null?void 0:d.completados)||0,Le=((f=ge.eventos)==null?void 0:f.cancelados)||0,Ve=((x=ge.eventos)==null?void 0:x.cotizacion)||0,or=((h=ge.notificaciones)==null?void 0:h.whatsapp_total_out)||0,wr=(S=ge.notificaciones)==null?void 0:S.maximo_whatsapp,$r=((j=(C=ge.notificaciones)==null?void 0:C.envios)==null?void 0:j.email)||0,Ur=(P=ge.notificaciones)==null?void 0:P.maximo_email;return e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:J?"0 0.5rem":0},children:[o&&e.jsx(Nr,{toasts:se,removeToast:me}),e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",flexDirection:J?"column":"row",justifyContent:"space-between",alignItems:J?"stretch":"flex-start",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:J?"1.25rem":"1.5rem",fontWeight:700,marginBottom:"0.25rem",color:"#111827"},children:r}),e.jsx("p",{style:{color:"#6b7280",fontSize:J?"0.8rem":"0.875rem",margin:0},children:t})]}),e.jsxs("div",{style:{display:"flex",flexDirection:J?"column":"row",alignItems:J?"stretch":"center",gap:"0.75rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:J?"wrap":"nowrap"},children:[!J&&e.jsx(_t,{size:16,color:"#6b7280"}),e.jsx("input",{type:"date",value:tr,onChange:he=>Ke(he.target.value),style:{padding:"0.5rem 0.75rem",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"0.875rem",flex:J?1:"none",minWidth:J?"0":"auto"},placeholder:"Desde"}),e.jsx("span",{style:{color:"#6b7280",display:J?"none":"inline"},children:"-"}),e.jsx("input",{type:"date",value:gr,onChange:he=>zr(he.target.value),style:{padding:"0.5rem 0.75rem",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"0.875rem",flex:J?1:"none",minWidth:J?"0":"auto"},placeholder:"Hasta"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{type:"button",onClick:br,style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"none",background:"#3b82f6",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.35rem",fontSize:"0.875rem",flex:J?1:"none"},children:[e.jsx(yu,{size:14}),"Filtrar"]}),(tr||gr)&&e.jsx("button",{type:"button",onClick:lr,style:{padding:"0.5rem 0.75rem",borderRadius:"8px",border:"1px solid #d1d5db",background:"#f3f4f6",color:"#374151",cursor:"pointer",fontSize:"0.875rem",flex:J?1:"none"},children:"Limpiar"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:J?"repeat(2, 1fr)":jr?"repeat(3, 1fr)":"repeat(auto-fit, minmax(200px, 1fr))",gap:J?"0.75rem":"1rem",marginBottom:"1.5rem"},children:[e.jsx(ye,{titulo:"Ingresos Totales",valor:ne(Qe),subtexto:`${Se} eventos`,icono:zt,color:"#059669"}),e.jsx(ye,{titulo:"Cobrado",valor:ne(Ne),subtexto:`${ze}% recaudado`,icono:kp,color:"#3b82f6",tendencia:"up"}),e.jsx(ye,{titulo:"Pendiente",valor:ne(L),subtexto:"Por cobrar",icono:An,color:"#f59e0b",tendencia:L>Ne?"down":null}),e.jsx(ye,{titulo:"Ticket Promedio",valor:ne(((v=ge.financiero)==null?void 0:v.ticket_promedio)||0),subtexto:"Por evento",icono:ju,color:"#8b5cf6"}),e.jsx(ye,{titulo:"Clientes",valor:((m=ge.clientes)==null?void 0:m.total)||0,subtexto:`${(((y=ge.clientes)==null?void 0:y.promedio_eventos_cliente)||0).toFixed(1)} eventos/cliente`,icono:dn,color:"#ec4899"})]}),(ce||Ce)&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:J?"repeat(2, 1fr)":jr?"repeat(3, 1fr)":"repeat(auto-fit, minmax(180px, 1fr))",gap:J?"0.75rem":"1rem",marginBottom:"1.5rem"},children:[ce&&e.jsxs(e.Fragment,{children:[e.jsx(ye,{titulo:"Eventos con Daos",valor:ce.total_eventos_con_danos||0,subtexto:`${ce.eventos_pendientes_pago||0} pendientes pago`,icono:di,color:"#dc2626",tendencia:ce.eventos_pendientes_pago>0?"down":null}),e.jsx(ye,{titulo:"Costo Total Daos",valor:ne(ce.costo_total_danos||0),subtexto:`${ne(ce.total_asumido_empresa||0)} asumido`,icono:ut,color:"#f59e0b"}),e.jsx(ye,{titulo:"Daos Cobrados",valor:ne(ce.total_pagado||0),subtexto:`${ne(ce.total_pendiente||0)} pendiente`,icono:zt,color:ce.total_pendiente>0?"#f59e0b":"#10b981",tendencia:ce.total_pendiente>0?"down":"up"})]}),Ce&&e.jsxs(e.Fragment,{children:[e.jsx(ye,{titulo:"Promedio Calificacin",valor:`${(Ce.promedio_calificacion||0).toFixed(1)} / 5`,subtexto:`${Ce.total_calificaciones||0} evaluaciones`,icono:md,color:"#f59e0b",tendencia:Ce.promedio_calificacion>=4?"up":Ce.promedio_calificacion<3?"down":null}),e.jsx(ye,{titulo:"Calificaciones 5",valor:Ce.calificaciones_5||0,subtexto:`${((Ce.calificaciones_5||0)/Math.max(Ce.total_calificaciones||1,1)*100).toFixed(0)}% del total`,icono:md,color:"#10b981",tendencia:"up"}),e.jsx(ye,{titulo:"Pendientes de Calificar",valor:Ce.pendientes_calificar||0,subtexto:"Eventos completados",icono:An,color:"#6366f1"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:J?"1fr":"repeat(auto-fit, minmax(320px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:J?"1rem":"1.25rem",border:"1px solid #e5e7eb"},children:[e.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:600,margin:"0 0 1rem 0",color:"#374151"},children:"Estado de Cartera"}),e.jsxs("div",{style:{marginBottom:"1.25rem"},children:[e.jsxs("div",{style:{display:"flex",height:"32px",borderRadius:"6px",overflow:"hidden",backgroundColor:"#f3f4f6"},children:[e.jsx("div",{style:{width:`${Qe>0?Ne/Qe*100:0}%`,backgroundColor:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",transition:"width 0.5s ease"},children:Qe>0&&Ne/Qe*100>15&&e.jsx("span",{style:{color:"white",fontSize:"0.75rem",fontWeight:600},children:ne(Ne)})}),e.jsx("div",{style:{width:`${Qe>0?L/Qe*100:0}%`,backgroundColor:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center",transition:"width 0.5s ease"},children:Qe>0&&L/Qe*100>15&&e.jsx("span",{style:{color:"white",fontSize:"0.75rem",fontWeight:600},children:ne(L)})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"2px",backgroundColor:"#10b981"}}),e.jsxs("span",{style:{fontSize:"0.7rem",color:"#6b7280"},children:["Cobrado (",ze,"%)"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"2px",backgroundColor:"#f59e0b"}}),e.jsxs("span",{style:{fontSize:"0.7rem",color:"#6b7280"},children:["Pendiente (",(100-parseFloat(ze)).toFixed(1),"%)"]})]})]})]}),e.jsx("div",{style:{borderTop:"1px solid #f3f4f6",paddingTop:"1rem"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Total de pagos recibidos"}),e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"#111827"},children:((k=ge.financiero)==null?void 0:k.total_pagos)||0})]})})]}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:J?"1rem":"1.25rem",border:"1px solid #e5e7eb"},children:[e.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:600,margin:"0 0 1rem 0",color:"#374151"},children:"Pipeline de Eventos"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:J?"repeat(2, 1fr)":"repeat(auto-fit, minmax(140px, 1fr))",gap:J?"0.5rem":"0.75rem"},children:[e.jsx(Ee,{icono:jt,label:"Cotizacin",valor:Ve,color:"#6b7280",bgColor:"#f9fafb"}),e.jsx(Ee,{icono:kp,label:"Confirmados",valor:je,color:"#8b5cf6",bgColor:"#f5f3ff"}),e.jsx(Ee,{icono:pc,label:"En Proceso",valor:Me,color:"#3b82f6",bgColor:"#eff6ff"}),e.jsx(Ee,{icono:c5,label:"Completados",valor:$e,color:"#059669",bgColor:"#ecfdf5"}),e.jsx(Ee,{icono:Ng,label:"Cancelados",valor:Le,color:"#dc2626",bgColor:"#fef2f2"})]}),e.jsx("div",{style:{borderTop:"1px solid #f3f4f6",paddingTop:"1rem",marginTop:"1rem"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Promedio invitados/evento"}),e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"#111827"},children:Math.round(((U=ge.estadisticas)==null?void 0:U.promedio_invitados)||0)})]})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:J?"1fr":"repeat(auto-fit, minmax(320px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[(ge==null?void 0:ge.notificaciones)&&e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:J?"1rem":"1.25rem",border:"1px solid #e5e7eb"},children:[e.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:600,margin:"0 0 1rem 0",color:"#374151"},children:"Comunicaciones"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{backgroundColor:"#f0fdf4",borderRadius:"0.5rem",padding:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(vu,{size:16,color:"#059669"}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#059669"},children:"WhatsApp"})]}),e.jsxs("p",{style:{fontSize:"1.25rem",fontWeight:700,color:"#111827",margin:0},children:[or,e.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:400,color:"#6b7280"},children:[" ","/ ",wr!=null?wr.toLocaleString():""]})]}),wr!=null&&or>wr&&e.jsxs("p",{style:{fontSize:"0.7rem",color:"#dc2626",margin:"0.25rem 0 0 0"},children:["Excedidos: ",or-wr]})]}),e.jsxs("div",{style:{backgroundColor:"#eff6ff",borderRadius:"0.5rem",padding:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx(zs,{size:16,color:"#3b82f6"}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#3b82f6"},children:"Email"})]}),e.jsxs("p",{style:{fontSize:"1.25rem",fontWeight:700,color:"#111827",margin:0},children:[$r,e.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:400,color:"#6b7280"},children:[" ","/ ",Ur!=null?Ur.toLocaleString():""]})]}),Ur!=null&&$r>Ur&&e.jsxs("p",{style:{fontSize:"0.7rem",color:"#dc2626",margin:"0.25rem 0 0 0"},children:["Excedidos: ",$r-Ur]})]})]}),e.jsxs("div",{style:{borderTop:"1px solid #f3f4f6",paddingTop:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.35rem"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Costo WhatsApp"}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#111827"},children:ke(ge.notificaciones.whatsapp_total_cost||0)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:"Costo Email"}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#111827"},children:ke(ge.notificaciones.email_total_cost||0)})]})]})]}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:J?"1rem":"1.25rem",border:"1px solid #e5e7eb"},children:[e.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:600,margin:"0 0 1rem 0",color:"#374151"},children:"Recursos del Sistema"}),e.jsx(ve,{label:"Productos activos",valor:`${((R=(X=ge.recursos)==null?void 0:X.productos)==null?void 0:R.activos)||0} / ${((B=(w=ge.recursos)==null?void 0:w.productos)==null?void 0:B.total)||0}`,total:((E=(q=ge.recursos)==null?void 0:q.productos)==null?void 0:E.total)||1,color:"#6366f1"}),e.jsx(ve,{label:"Planes activos",valor:`${((ee=(T=ge.recursos)==null?void 0:T.planes)==null?void 0:ee.activos)||0} / ${((G=(H=ge.recursos)==null?void 0:H.planes)==null?void 0:G.total)||0}`,total:((re=(O=ge.recursos)==null?void 0:O.planes)==null?void 0:re.total)||1,color:"#8b5cf6"}),e.jsx(ve,{label:"Salones activos",valor:`${((Y=(W=ge.recursos)==null?void 0:W.salones)==null?void 0:Y.activos)||0} / ${((oe=(D=ge.recursos)==null?void 0:D.salones)==null?void 0:oe.total)||0}`,total:((V=(K=ge.recursos)==null?void 0:K.salones)==null?void 0:V.total)||1,color:"#10b981"})]})]}),((F=ge==null?void 0:ge.notificaciones)==null?void 0:F.por_tipo)&&ge.notificaciones.por_tipo.length>0&&e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:J?"1rem":"1.25rem",border:"1px solid #e5e7eb"},children:[e.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:600,margin:"0 0 1rem 0",color:"#374151"},children:"Detalle de Notificaciones"}),e.jsx("div",{style:{overflowX:"auto",margin:J?"0 -1rem":0,padding:J?"0 1rem":0},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:J?"0.75rem":"0.8rem",minWidth:J?"400px":"auto"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb"},children:[e.jsx("th",{style:{padding:J?"0.5rem":"0.6rem",textAlign:"left",fontWeight:600,color:"#374151",whiteSpace:"nowrap"},children:"Tipo"}),e.jsx("th",{style:{padding:J?"0.5rem":"0.6rem",textAlign:"center",fontWeight:600,color:"#374151"},children:"Email"}),e.jsx("th",{style:{padding:J?"0.5rem":"0.6rem",textAlign:"center",fontWeight:600,color:"#374151"},children:"WA"}),e.jsx("th",{style:{padding:J?"0.5rem":"0.6rem",textAlign:"center",fontWeight:600,color:"#374151"},children:"Total"}),e.jsx("th",{style:{padding:J?"0.5rem":"0.6rem",textAlign:"right",fontWeight:600,color:"#374151"},children:"Costo"})]})}),e.jsx("tbody",{children:ge.notificaciones.por_tipo.map(he=>e.jsxs("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[e.jsx("td",{style:{padding:J?"0.5rem":"0.6rem",color:"#4b5563",whiteSpace:"nowrap"},children:he.tipo_notificacion.replace(/_/g," ")}),e.jsx("td",{style:{padding:J?"0.5rem":"0.6rem",textAlign:"center",color:"#4b5563"},children:he.email_out}),e.jsx("td",{style:{padding:J?"0.5rem":"0.6rem",textAlign:"center",color:"#4b5563"},children:he.whatsapp_out}),e.jsx("td",{style:{padding:J?"0.5rem":"0.6rem",textAlign:"center",fontWeight:600,color:"#111827"},children:he.total}),e.jsx("td",{style:{padding:J?"0.5rem":"0.6rem",textAlign:"right",color:"#4b5563",whiteSpace:"nowrap"},children:ke((he.costo_email||0)+(he.costo_whatsapp||0))})]},he.tipo_notificacion))})]})})]}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:J?"1rem":"1.5rem",border:"1px solid #e5e7eb",marginTop:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsx(Zv,{size:J?18:20,color:"#6366f1"}),e.jsx("h3",{style:{fontSize:J?"0.9rem":"1rem",fontWeight:600,margin:0,color:"#374151"},children:"Descargar Reportes"})]}),e.jsx("p",{style:{fontSize:J?"0.8rem":"0.85rem",color:"#6b7280",marginBottom:"1rem"},children:J?"Descarga los datos en CSV.":`Descarga los datos de su sistema. ${tr||gr?"Los reportes con filtro de fecha usarn el rango seleccionado.":"Usa los filtros de fecha para limitar los datos."}`}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:J?"1fr":jr?"repeat(2, 1fr)":"repeat(auto-fill, minmax(200px, 1fr))",gap:J?"0.75rem":"1rem"},children:[e.jsxs("button",{onClick:()=>qe("eventos"),disabled:I==="eventos",style:{display:"flex",alignItems:"center",gap:J?"0.5rem":"0.75rem",padding:J?"0.75rem":"1rem",backgroundColor:I==="eventos"?"#f3f4f6":"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:I==="eventos"?"wait":"pointer",transition:"all 0.2s"},onMouseEnter:he=>!I&&(he.currentTarget.style.backgroundColor="#f3f4f6"),onMouseLeave:he=>!I&&(he.currentTarget.style.backgroundColor="#f9fafb"),children:[e.jsx("div",{style:{width:J?"2rem":"2.5rem",height:J?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:"#dbeafe",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(_t,{size:J?14:18,color:"#2563eb"})}),e.jsxs("div",{style:{textAlign:"left",flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:J?"0.85rem":"0.9rem",color:"#111827"},children:"Eventos"}),e.jsx("div",{style:{fontSize:J?"0.7rem":"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:I==="eventos"?"Descargando...":"Lista completa"})]}),e.jsx(no,{size:J?14:18,color:"#6b7280"})]}),e.jsxs("button",{onClick:()=>qe("pagos"),disabled:I==="pagos",style:{display:"flex",alignItems:"center",gap:J?"0.5rem":"0.75rem",padding:J?"0.75rem":"1rem",backgroundColor:I==="pagos"?"#f3f4f6":"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:I==="pagos"?"wait":"pointer",transition:"all 0.2s"},onMouseEnter:he=>!I&&(he.currentTarget.style.backgroundColor="#f3f4f6"),onMouseLeave:he=>!I&&(he.currentTarget.style.backgroundColor="#f9fafb"),children:[e.jsx("div",{style:{width:J?"2rem":"2.5rem",height:J?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:"#dcfce7",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ka,{size:J?14:18,color:"#16a34a"})}),e.jsxs("div",{style:{textAlign:"left",flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:J?"0.85rem":"0.9rem",color:"#111827"},children:"Pagos"}),e.jsx("div",{style:{fontSize:J?"0.7rem":"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:I==="pagos"?"Descargando...":"Historial"})]}),e.jsx(no,{size:J?14:18,color:"#6b7280"})]}),e.jsxs("button",{onClick:()=>qe("inventario"),disabled:I==="inventario",style:{display:"flex",alignItems:"center",gap:J?"0.5rem":"0.75rem",padding:J?"0.75rem":"1rem",backgroundColor:I==="inventario"?"#f3f4f6":"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:I==="inventario"?"wait":"pointer",transition:"all 0.2s"},onMouseEnter:he=>!I&&(he.currentTarget.style.backgroundColor="#f3f4f6"),onMouseLeave:he=>!I&&(he.currentTarget.style.backgroundColor="#f9fafb"),children:[e.jsx("div",{style:{width:J?"2rem":"2.5rem",height:J?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:"#fef3c7",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Gt,{size:J?14:18,color:"#d97706"})}),e.jsxs("div",{style:{textAlign:"left",flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:J?"0.85rem":"0.9rem",color:"#111827"},children:"Inventario"}),e.jsx("div",{style:{fontSize:J?"0.7rem":"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:I==="inventario"?"Descargando...":"Productos"})]}),e.jsx(no,{size:J?14:18,color:"#6b7280"})]}),e.jsxs("button",{onClick:()=>qe("cardex"),disabled:I==="cardex",style:{display:"flex",alignItems:"center",gap:J?"0.5rem":"0.75rem",padding:J?"0.75rem":"1rem",backgroundColor:I==="cardex"?"#f3f4f6":"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:I==="cardex"?"wait":"pointer",transition:"all 0.2s"},onMouseEnter:he=>!I&&(he.currentTarget.style.backgroundColor="#f3f4f6"),onMouseLeave:he=>!I&&(he.currentTarget.style.backgroundColor="#f9fafb"),children:[e.jsx("div",{style:{width:J?"2rem":"2.5rem",height:J?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:"#e0e7ff",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Hv,{size:J?14:18,color:"#4f46e5"})}),e.jsxs("div",{style:{textAlign:"left",flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:J?"0.85rem":"0.9rem",color:"#111827"},children:"Cardex"}),e.jsx("div",{style:{fontSize:J?"0.7rem":"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:I==="cardex"?"Descargando...":"Movimientos"})]}),e.jsx(no,{size:J?14:18,color:"#6b7280"})]}),e.jsxs("button",{onClick:()=>qe("notificaciones"),disabled:I==="notificaciones",style:{display:"flex",alignItems:"center",gap:J?"0.5rem":"0.75rem",padding:J?"0.75rem":"1rem",backgroundColor:I==="notificaciones"?"#f3f4f6":"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:I==="notificaciones"?"wait":"pointer",transition:"all 0.2s"},onMouseEnter:he=>!I&&(he.currentTarget.style.backgroundColor="#f3f4f6"),onMouseLeave:he=>!I&&(he.currentTarget.style.backgroundColor="#f9fafb"),children:[e.jsx("div",{style:{width:J?"2rem":"2.5rem",height:J?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:"#fce7f3",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Wg,{size:J?14:18,color:"#db2777"})}),e.jsxs("div",{style:{textAlign:"left",flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:J?"0.85rem":"0.9rem",color:"#111827"},children:"Notificaciones"}),e.jsx("div",{style:{fontSize:J?"0.7rem":"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:I==="notificaciones"?"Descargando...":"Historial"})]}),e.jsx(no,{size:J?14:18,color:"#6b7280"})]}),e.jsxs("button",{onClick:()=>qe("clientes"),disabled:I==="clientes",style:{display:"flex",alignItems:"center",gap:J?"0.5rem":"0.75rem",padding:J?"0.75rem":"1rem",backgroundColor:I==="clientes"?"#f3f4f6":"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:I==="clientes"?"wait":"pointer",transition:"all 0.2s"},onMouseEnter:he=>!I&&(he.currentTarget.style.backgroundColor="#f3f4f6"),onMouseLeave:he=>!I&&(he.currentTarget.style.backgroundColor="#f9fafb"),children:[e.jsx("div",{style:{width:J?"2rem":"2.5rem",height:J?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:"#f3e8ff",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(dn,{size:J?14:18,color:"#9333ea"})}),e.jsxs("div",{style:{textAlign:"left",flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:J?"0.85rem":"0.9rem",color:"#111827"},children:"Clientes"}),e.jsx("div",{style:{fontSize:J?"0.7rem":"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:I==="clientes"?"Descargando...":"Base de datos"})]}),e.jsx(no,{size:J?14:18,color:"#6b7280"})]}),e.jsxs("button",{onClick:()=>qe("danos"),disabled:I==="danos",style:{display:"flex",alignItems:"center",gap:J?"0.5rem":"0.75rem",padding:J?"0.75rem":"1rem",backgroundColor:I==="danos"?"#f3f4f6":"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:I==="danos"?"wait":"pointer",transition:"all 0.2s"},onMouseEnter:he=>!I&&(he.currentTarget.style.backgroundColor="#f3f4f6"),onMouseLeave:he=>!I&&(he.currentTarget.style.backgroundColor="#f9fafb"),children:[e.jsx("div",{style:{width:J?"2rem":"2.5rem",height:J?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:"#fef2f2",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(di,{size:J?14:18,color:"#dc2626"})}),e.jsxs("div",{style:{textAlign:"left",flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:J?"0.85rem":"0.9rem",color:"#111827"},children:"Daos"}),e.jsx("div",{style:{fontSize:J?"0.7rem":"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:I==="danos"?"Descargando...":"Registro de daos"})]}),e.jsx(no,{size:J?14:18,color:"#6b7280"})]}),e.jsxs("button",{onClick:()=>qe("calificaciones"),disabled:I==="calificaciones",style:{display:"flex",alignItems:"center",gap:J?"0.5rem":"0.75rem",padding:J?"0.75rem":"1rem",backgroundColor:I==="calificaciones"?"#f3f4f6":"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"0.5rem",cursor:I==="calificaciones"?"wait":"pointer",transition:"all 0.2s"},onMouseEnter:he=>!I&&(he.currentTarget.style.backgroundColor="#f3f4f6"),onMouseLeave:he=>!I&&(he.currentTarget.style.backgroundColor="#f9fafb"),children:[e.jsx("div",{style:{width:J?"2rem":"2.5rem",height:J?"2rem":"2.5rem",borderRadius:"0.5rem",backgroundColor:"#fef9c3",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(md,{size:J?14:18,color:"#ca8a04"})}),e.jsxs("div",{style:{textAlign:"left",flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:J?"0.85rem":"0.9rem",color:"#111827"},children:"Calificaciones"}),e.jsx("div",{style:{fontSize:J?"0.7rem":"0.75rem",color:"#6b7280",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:I==="calificaciones"?"Descargando...":"Evaluaciones clientes"})]}),e.jsx(no,{size:J?14:18,color:"#6b7280"})]})]})]}),De&&De.pagos_por_cuenta&&De.pagos_por_cuenta.length>0&&e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",border:"1px solid #e5e7eb",padding:J?"1rem":"1.5rem",marginTop:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"0.5rem",backgroundColor:"#eef2ff",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(an,{size:20,color:"#4f46e5"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"700",margin:0,color:"#111827"},children:"Pagos por Cuenta Destino"}),e.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",margin:0},children:"Distribucin de ingresos por cuenta bancaria"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:J?"1fr":"repeat(3, 1fr)",gap:"1rem",marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Total Ingresos"}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10b981"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(De.total_ingresos||0)})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Total Reembolsos"}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#ef4444"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(De.total_reembolsos||0)})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontWeight:"600"},children:"Neto Total"}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#4f46e5"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(De.total_general||0)})]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Cuenta"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Tipo"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Pagos"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Ingresos"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Reembolsos"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Neto"})]})}),e.jsx("tbody",{children:De.pagos_por_cuenta.map(he=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsxs("td",{style:{padding:"0.75rem"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#111827",fontSize:"0.875rem"},children:he.nombre_cuenta}),he.numero_cuenta&&e.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",fontFamily:"monospace"},children:he.numero_cuenta})]}),e.jsx("td",{style:{padding:"0.75rem"},children:e.jsx("span",{style:{padding:"0.2rem 0.5rem",borderRadius:"9999px",fontSize:"0.7rem",fontWeight:"500",backgroundColor:he.tipo_cuenta==="ahorros"?"#dbeafe":he.tipo_cuenta==="corriente"?"#e0f2fe":he.tipo_cuenta==="digital"?"#f3e8ff":he.tipo_cuenta==="efectivo"?"#dcfce7":"#f3f4f6",color:he.tipo_cuenta==="ahorros"?"#1d4ed8":he.tipo_cuenta==="corriente"?"#0369a1":he.tipo_cuenta==="digital"?"#7c3aed":he.tipo_cuenta==="efectivo"?"#16a34a":"#6b7280"},children:he.tipo_cuenta==="ahorros"?"Ahorros":he.tipo_cuenta==="corriente"?"Corriente":he.tipo_cuenta==="digital"?"Digital":he.tipo_cuenta==="efectivo"?"Efectivo":he.tipo_cuenta})}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:he.total_pagos}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",color:"#10b981",fontWeight:"500"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(he.total_ingresos)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",color:"#ef4444",fontWeight:"500"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(he.total_reembolsos)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontSize:"0.875rem",color:"#4f46e5",fontWeight:"700"},children:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(he.total_neto)})]},he.cuenta_id))})]})})]})]})},F5=()=>{const{usuario:r}=at(),{toasts:t,removeToast:o,success:n,error:i}=_r(),a=go(),[l,u]=c.useState([]),[s,d]=c.useState(!0),[f,x]=c.useState(""),[h,S]=c.useState(""),[C,j]=c.useState(""),[P,v]=c.useState(!1),[m,y]=c.useState(!1),[k,U]=c.useState(!1),[X,R]=c.useState(!1),[w,B]=c.useState(!1),[q,E]=c.useState(null),[T,ee]=c.useState({nombre_usuario:"",contrasena:"",nombre_completo:"",email:"",telefono:"",rol:"cliente",activo:!0}),[H,G]=c.useState({nueva_contrasena:"",confirmar_contrasena:""}),[O,re]=c.useState(!1),[W,Y]=c.useState(""),D=Cr(r==null?void 0:r.rol,[N.ADMIN]),oe=Cr(r==null?void 0:r.rol,[N.ADMIN,N.MANAGER]),K=Cr(r==null?void 0:r.rol,[N.ADMIN]),V=Cr(r==null?void 0:r.rol,[N.ADMIN,N.MANAGER]);c.useEffect(()=>{F()},[C]);const F=async()=>{var $,xe;try{d(!0);const Pe=C?{rol:C}:{},I=await dt.getAll(Pe);u(I.usuarios||[]),x("")}catch(Pe){const I=((xe=($=Pe.response)==null?void 0:$.data)==null?void 0:xe.error)||Pe.message||"Error al cargar los usuarios";x(I),console.error(Pe)}finally{d(!1)}},se=l.filter($=>{var xe,Pe,I;if(!h)return!0;const ue=h.toLowerCase();return((xe=$.nombre_usuario)==null?void 0:xe.toLowerCase().includes(ue))||((Pe=$.nombre_completo)==null?void 0:Pe.toLowerCase().includes(ue))||((I=$.email)==null?void 0:I.toLowerCase().includes(ue))}),me=()=>{ee({nombre_usuario:"",contrasena:"",nombre_completo:"",email:"",telefono:"",rol:"cliente",activo:!0}),Y(""),v(!0)},ie=()=>{v(!1),ee({nombre_usuario:"",contrasena:"",nombre_completo:"",email:"",telefono:"",rol:"cliente",activo:!0}),Y("")},ge=$=>{E($),ee({nombre_usuario:$.nombre_usuario||"",contrasena:"",nombre_completo:$.nombre_completo||"",email:$.email||"",telefono:$.telefono||"",rol:$.rol||"cliente",activo:$.activo!==!1}),Y(""),y(!0)},Te=()=>{y(!1),E(null),ee({nombre_usuario:"",contrasena:"",nombre_completo:"",email:"",telefono:"",rol:"cliente",activo:!0}),Y("")},Q=$=>{E($),U(!0)},g=()=>{U(!1),E(null)},p=$=>{E($),R(!0)},Z=()=>{R(!1),E(null)},ce=$=>{E($),G({nueva_contrasena:"",confirmar_contrasena:""}),Y(""),B(!0)},be=()=>{B(!1),E(null),G({nueva_contrasena:"",confirmar_contrasena:""}),Y("")},Ce=async $=>{var xe,Pe;if($.preventDefault(),Y(""),!T.nombre_usuario||!T.contrasena||!T.nombre_completo||!T.rol){Y("Los campos nombre de usuario, contrasea, nombre completo y rol son requeridos");return}if(T.contrasena.length<6){Y("La contrasea debe tener al menos 6 caracteres");return}try{re(!0);const I={...T,activo:T.activo};await dt.create(I),await F(),ie(),n("Usuario creado exitosamente")}catch(I){const ue=((Pe=(xe=I.response)==null?void 0:xe.data)==null?void 0:Pe.error)||"Error al crear el usuario";Y(ue),console.error(I)}finally{re(!1)}},Ae=async $=>{var xe,Pe;if($.preventDefault(),Y(""),!T.nombre_completo){Y("El nombre completo es requerido");return}try{re(!0);const I={nombre_completo:T.nombre_completo,email:T.email||null,telefono:T.telefono||null,activo:T.activo};Cr(r==null?void 0:r.rol,[N.ADMIN])&&(I.rol=T.rol),await dt.update(q.id,I),await F(),Te(),n("Usuario actualizado exitosamente")}catch(I){const ue=((Pe=(xe=I.response)==null?void 0:xe.data)==null?void 0:Pe.error)||"Error al actualizar el usuario";Y(ue),console.error(I)}finally{re(!1)}},De=async()=>{var $,xe;try{re(!0),await dt.delete(q.id),await F(),Z(),n("Usuario eliminado exitosamente")}catch(Pe){const I=((xe=($=Pe.response)==null?void 0:$.data)==null?void 0:xe.error)||"Error al eliminar el usuario";i(I),console.error(Pe)}finally{re(!1)}},te=async $=>{var xe,Pe;if($.preventDefault(),Y(""),!H.nueva_contrasena||!H.confirmar_contrasena){Y("Ambos campos son requeridos");return}if(H.nueva_contrasena.length<6){Y("La contrasea debe tener al menos 6 caracteres");return}if(H.nueva_contrasena!==H.confirmar_contrasena){Y("Las contraseas no coinciden");return}try{re(!0),await dt.cambiarContrasena(q.id,H.nueva_contrasena),be(),n("Contrasea cambiada exitosamente")}catch(I){const ue=((Pe=(xe=I.response)==null?void 0:xe.data)==null?void 0:Pe.error)||"Error al cambiar la contrasea";Y(ue),console.error(I)}finally{re(!1)}},_=$=>{if(!$)return"-";try{return new Date($).toLocaleDateString("es-CO",{year:"numeric",month:"long",day:"numeric"})}catch{return $}};return s?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando usuarios..."}):e.jsxs("div",{children:[e.jsx(Nr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:a?"1.5rem":"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Usuarios"}),e.jsx("p",{style:{color:"#6b7280"},children:"Gestin de usuarios del sistema"})]}),D&&e.jsxs("button",{onClick:me,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:$=>$.currentTarget.style.backgroundColor="#4f46e5",onMouseLeave:$=>$.currentTarget.style.backgroundColor="#6366f1",children:[e.jsx(Mr,{size:20}),"Nuevo Usuario"]})]}),f&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem"},children:f}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",flexWrap:"wrap",flexDirection:a?"column":"row"},children:[e.jsxs("div",{style:{position:"relative",flex:1,minWidth:a?"100%":"250px"},children:[e.jsx(Et,{size:20,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#9ca3af"}}),e.jsx("input",{type:"text",placeholder:"Buscar usuarios...",value:h,onChange:$=>S($.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("select",{value:C,onChange:$=>j($.target.value),style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",minWidth:a?"100%":"200px"},children:[e.jsx("option",{value:"",children:"Todos los roles"}),e.jsx("option",{value:"administrador",children:"Administrador"}),e.jsx("option",{value:"gerente_general",children:"Gerente General"}),e.jsx("option",{value:"coordinador",children:"Coordinador"}),e.jsx("option",{value:"cliente",children:"Cliente"})]})]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",overflow:"hidden"},children:a?e.jsx("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:se.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:h||C?"No se encontraron usuarios con ese criterio":"No hay usuarios disponibles"}):se.map($=>e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",padding:"1rem",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.06)",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"50%",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(mo,{size:18,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#111827"},children:$.nombre_usuario||"-"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:$.nombre_completo||"-"})]})]}),e.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[e.jsxs("div",{style:{fontSize:"0.85rem"},children:[e.jsx("strong",{children:"Email:"})," ",$.email||"-"]}),e.jsxs("div",{style:{fontSize:"0.85rem"},children:[e.jsx("strong",{children:"Rol:"})," ",$.rol||"-"]}),e.jsx("div",{children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:$.activo?"#10b98120":"#ef444420",color:$.activo?"#10b981":"#ef4444"},children:$.activo?"Activo":"Inactivo"})})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>Q($),style:{padding:"0.5rem 0.75rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(St,{size:16}),"Ver"]}),oe&&e.jsxs("button",{onClick:()=>ge($),style:{padding:"0.5rem 0.75rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(Qt,{size:16}),"Editar"]}),V&&e.jsxs("button",{onClick:()=>ce($),style:{padding:"0.5rem 0.75rem",backgroundColor:"#f59e0b",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(ci,{size:16}),"Clave"]}),K&&e.jsxs("button",{onClick:()=>p($),style:{padding:"0.5rem 0.75rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",fontSize:"0.8rem"},children:[e.jsx(Ar,{size:16}),"Eliminar"]})]})]},$.id))}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Usuario"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Nombre Completo"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Email"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600"},children:"Rol"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Estado"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600"},children:"Acciones"})]})}),e.jsx("tbody",{children:se.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:h||C?"No se encontraron usuarios con ese criterio":"No hay usuarios disponibles"})}):se.map($=>e.jsxs("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[e.jsx("td",{style:{padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"50%",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(mo,{size:20,color:"#6366f1"})}),e.jsx("div",{style:{fontWeight:"500"},children:$.nombre_usuario||"-"})]})}),e.jsx("td",{style:{padding:"1rem"},children:$.nombre_completo||"-"}),e.jsx("td",{style:{padding:"1rem"},children:$.email||"-"}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:"#6366f120",color:"#6366f1"},children:$.rol||"-"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:$.activo?"#10b98120":"#ef444420",color:$.activo?"#10b981":"#ef4444"},children:$.activo?"Activo":"Inactivo"})}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>Q($),style:{padding:"0.5rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:xe=>xe.currentTarget.style.backgroundColor="#2563eb",onMouseLeave:xe=>xe.currentTarget.style.backgroundColor="#3b82f6",title:"Ver Detalle",children:e.jsx(St,{size:16})}),oe&&e.jsx("button",{onClick:()=>ge($),style:{padding:"0.5rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:xe=>xe.currentTarget.style.backgroundColor="#059669",onMouseLeave:xe=>xe.currentTarget.style.backgroundColor="#10b981",title:"Editar",children:e.jsx(Qt,{size:16})}),V&&e.jsx("button",{onClick:()=>ce($),style:{padding:"0.5rem",backgroundColor:"#f59e0b",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:xe=>xe.currentTarget.style.backgroundColor="#d97706",onMouseLeave:xe=>xe.currentTarget.style.backgroundColor="#f59e0b",title:"Cambiar Contrasea",children:e.jsx(ci,{size:16})}),K&&e.jsx("button",{onClick:()=>p($),style:{padding:"0.5rem",backgroundColor:"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s"},onMouseEnter:xe=>xe.currentTarget.style.backgroundColor="#dc2626",onMouseLeave:xe=>xe.currentTarget.style.backgroundColor="#ef4444",title:"Eliminar",children:e.jsx(Ar,{size:16})})]})})]},$.id))})]})})}),P&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:ie,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:$=>$.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Nuevo Usuario"}),e.jsx("button",{onClick:ie,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),W&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:W}),e.jsxs("form",{onSubmit:Ce,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre de Usuario ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:T.nombre_usuario,onChange:$=>ee({...T,nombre_usuario:$.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Contrasea ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"password",value:T.contrasena,onChange:$=>ee({...T,contrasena:$.target.value}),required:!0,minLength:6,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre Completo ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:T.nombre_completo,onChange:$=>ee({...T,nombre_completo:$.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Email"}),e.jsx("input",{type:"email",value:T.email,onChange:$=>ee({...T,email:$.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Telfono"}),e.jsx("input",{type:"tel",value:T.telefono,onChange:$=>ee({...T,telefono:$.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Rol ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:T.rol,onChange:$=>ee({...T,rol:$.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"cliente",children:"Cliente"}),e.jsx("option",{value:"coordinador",children:"Coordinador"}),e.jsx("option",{value:"gerente_general",children:"Gerente General"}),e.jsx("option",{value:"administrador",children:"Administrador"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"1.75rem"},children:[e.jsx("input",{type:"checkbox",checked:T.activo,onChange:$=>ee({...T,activo:$.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Usuario activo"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:ie,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:O,style:{padding:"0.75rem 1.5rem",backgroundColor:O?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:O?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),O?"Guardando...":"Guardar"]})]})]})]})}),m&&q&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:Te,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:$=>$.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Editar Usuario"}),e.jsx("button",{onClick:Te,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),W&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:W}),e.jsxs("form",{onSubmit:Ae,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Nombre de Usuario"}),e.jsx("input",{type:"text",value:T.nombre_usuario,disabled:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem",backgroundColor:"#f3f4f6",color:"#6b7280"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nombre Completo ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:T.nombre_completo,onChange:$=>ee({...T,nombre_completo:$.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Email"}),e.jsx("input",{type:"email",value:T.email,onChange:$=>ee({...T,email:$.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Telfono"}),e.jsx("input",{type:"tel",value:T.telefono,onChange:$=>ee({...T,telefono:$.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),Cr(r==null?void 0:r.rol,[N.ADMIN])&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Rol"}),e.jsxs("select",{value:T.rol,onChange:$=>ee({...T,rol:$.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"},children:[e.jsx("option",{value:"cliente",children:"Cliente"}),e.jsx("option",{value:"coordinador",children:"Coordinador"}),e.jsx("option",{value:"gerente_general",children:"Gerente General"}),e.jsx("option",{value:"administrador",children:"Administrador"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"1.75rem"},children:[e.jsx("input",{type:"checkbox",checked:T.activo,onChange:$=>ee({...T,activo:$.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Usuario activo"})]})]}),!Cr(r==null?void 0:r.rol,[N.ADMIN])&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:T.activo,onChange:$=>ee({...T,activo:$.target.checked}),style:{width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),e.jsx("label",{style:{fontWeight:"500",cursor:"pointer"},children:"Usuario activo"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:Te,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:O,style:{padding:"0.75rem 1.5rem",backgroundColor:O?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:O?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(it,{size:18}),O?"Guardando...":"Guardar Cambios"]})]})]})]})}),k&&q&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:g,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:$=>$.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Detalle del Usuario"}),e.jsx("button",{onClick:g,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{width:"4rem",height:"4rem",borderRadius:"50%",backgroundColor:"#6366f120",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(mo,{size:32,color:"#6366f1"})}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:q.nombre_completo||"N/A"}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["@",q.nombre_usuario||"N/A"]})]})]}),e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Email"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:q.email||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Telfono"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:q.telefono||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Rol"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:"#6366f120",color:"#6366f1"},children:q.rol||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Estado"}),e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:q.activo?"#10b98120":"#ef444420",color:q.activo?"#10b981":"#ef4444"},children:q.activo?"Activo":"Inactivo"})]}),q.fecha_creacion&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Fecha de Creacin"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:_(q.fecha_creacion)})]}),q.fecha_ultimo_acceso&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"ltimo Acceso"}),e.jsx("p",{style:{margin:0,fontSize:"1rem",fontWeight:"500"},children:_(q.fecha_ultimo_acceso)})]})]})]}),e.jsx("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:e.jsx("button",{onClick:g,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cerrar"})})]})}),X&&q&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:Z,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:$=>$.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{width:"3rem",height:"3rem",borderRadius:"50%",backgroundColor:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ut,{size:24,color:"#dc2626"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",margin:0},children:"Eliminar Usuario"}),e.jsx("p",{style:{color:"#6b7280",margin:"0.25rem 0 0 0"},children:"Est seguro de eliminar este usuario?"})]})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.375rem",marginBottom:"1.5rem"},children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:q.nombre_completo}),e.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:["@",q.nombre_usuario]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:Z,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{onClick:De,disabled:O,style:{padding:"0.75rem 1.5rem",backgroundColor:O?"#9ca3af":"#ef4444",color:"white",borderRadius:"0.375rem",border:"none",cursor:O?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ar,{size:18}),O?"Eliminando...":"Eliminar"]})]})]})}),w&&q&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:be,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:$=>$.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0},children:"Cambiar Contrasea"}),e.jsx("button",{onClick:be,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(er,{size:24,color:"#6b7280"})})]}),e.jsxs("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.375rem",marginBottom:"1.5rem"},children:[e.jsxs("p",{style:{margin:0,fontWeight:"500"},children:["Usuario: ",q.nombre_completo]}),e.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",color:"#6b7280"},children:["@",q.nombre_usuario]})]}),W&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:W}),e.jsxs("form",{onSubmit:te,children:[e.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Nueva Contrasea ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"password",value:H.nueva_contrasena,onChange:$=>G({...H,nueva_contrasena:$.target.value}),required:!0,minLength:6,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:["Confirmar Contrasea ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"password",value:H.confirmar_contrasena,onChange:$=>G({...H,confirmar_contrasena:$.target.value}),required:!0,minLength:6,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"1rem"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:be,style:{padding:"0.75rem 1.5rem",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:O,style:{padding:"0.75rem 1.5rem",backgroundColor:O?"#9ca3af":"#6366f1",color:"white",borderRadius:"0.375rem",border:"none",cursor:O?"not-allowed":"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ci,{size:18}),O?"Cambiando...":"Cambiar Contrasea"]})]})]})]})})]})},Ip=[{key:Oe.COTIZADOR,label:"Cotizador"},{key:Oe.DASHBOARD,label:"Dashboard"},{key:Oe.EVENTOS,label:"Eventos"},{key:Oe.PORTAL_CLIENTE,label:"Portal cliente"},{key:Oe.PERFIL,label:"Perfil"},{key:Oe.CLIENTES,label:"Clientes"},{key:Oe.PRODUCTOS,label:"Productos"},{key:Oe.CATEGORIAS,label:"Categoras"},{key:Oe.PLANES,label:"Planes"},{key:Oe.PAGOS,label:"Pagos"},{key:Oe.CUENTAS,label:"Cuentas"},{key:Oe.INVENTARIO,label:"Inventario"},{key:Oe.SALONES,label:"Salones"},{key:Oe.NOTIFICACIONES_NATIVAS,label:"Notificaciones"},{key:Oe.REPORTES,label:"Reportes"},{key:Oe.USUARIOS,label:"Usuarios"},{key:Oe.PERMISOS,label:"Roles y Permisos"},{key:Oe.INTEGRACIONES,label:"Integraciones"},{key:Oe.WHATSAPP_CHAT,label:"WhatsApp Chat"},{key:Oe.WHATSAPP_METRICAS,label:"Panel WhatsApp/Email"},{key:Oe.WHATSAPP_TEMPLATES,label:"Plantillas WhatsApp"},{key:Oe.CARGA_MASIVA,label:"Carga masiva"},{key:Oe.CONFIG_DATOS,label:"Limpieza de datos"}],Tp=[{key:Je.EVENTOS_EDITAR_ESTADO,label:"Eventos  Editar estado"},{key:Je.EVENTOS_AGREGAR_PRODUCTO,label:"Eventos  Agregar producto"},{key:Je.EVENTOS_ELIMINAR_PRODUCTO,label:"Eventos  Eliminar producto"},{key:Je.EVENTOS_ELIMINAR,label:"Eventos  Eliminar"},{key:Je.EVENTOS_ACTUALIZAR_SERVICIOS,label:"Eventos  Actualizar servicios"},{key:Je.EVENTOS_GENERAR_SERVICIOS,label:"Eventos  Generar servicios"},{key:Je.EVENTOS_DESCARTAR_SERVICIO,label:"Eventos  Descartar servicio"},{key:Je.EVENTOS_ASIGNAR_COORDINADOR,label:"Eventos  Asignar coordinador"},{key:Je.PAGOS_REGISTRAR,label:"Pagos  Registrar"},{key:Je.PAGOS_REEMBOLSAR,label:"Pagos  Reembolsar"},{key:Je.PAGOS_ELIMINAR,label:"Pagos  Eliminar"},{key:Je.PAGOS_APROBAR,label:"Pagos  Aprobar"},{key:Je.PAGOS_ANULAR,label:"Pagos  Anular"},{key:Je.CUENTAS_VER,label:"Cuentas  Ver"},{key:Je.CUENTAS_CREAR,label:"Cuentas  Crear"},{key:Je.CUENTAS_EDITAR,label:"Cuentas  Editar"},{key:Je.CUENTAS_ELIMINAR,label:"Cuentas  Eliminar"},{key:Je.PLANES_CREAR,label:"Planes  Crear"},{key:Je.PLANES_EDITAR,label:"Planes  Editar"},{key:Je.PLANES_ELIMINAR,label:"Planes  Eliminar"}],$5=()=>{const{toasts:r,removeToast:t,success:o,error:n}=_r(),[i,a]=c.useState([]),[l,u]=c.useState([]),[s,d]=c.useState(!0),[f,x]=c.useState(null),[h,S]=c.useState([]),[C,j]=c.useState(""),[P,v]=c.useState([]),[m,y]=c.useState(!1),[k,U]=c.useState("usuarios");c.useEffect(()=>{(async()=>{var G,O;try{d(!0);const[re,W]=await Promise.all([dt.getAll(),dt.getRoles()]);a(re.usuarios||[]),u(W.roles||[])}catch(re){const W=((O=(G=re.response)==null?void 0:G.data)==null?void 0:O.error)||"Error al cargar usuarios";n(W)}finally{d(!1)}})()},[n]);const X=async G=>{var O,re;x(G);try{const W=await dt.getPermisos(G.id);S(W.permisos||[])}catch(W){const Y=((re=(O=W.response)==null?void 0:O.data)==null?void 0:re.error)||"Error al cargar permisos";n(Y),S([])}},R=G=>{S(O=>O.includes(G)?O.filter(re=>re!==G):[...O,G])},w=G=>{v(O=>O.includes(G)?O.filter(re=>re!==G):[...O,G])},B=async()=>{var G,O;if(f)try{y(!0),await dt.updatePermisos(f.id,h),o("Permisos actualizados")}catch(re){const W=((O=(G=re.response)==null?void 0:G.data)==null?void 0:O.error)||"Error al guardar permisos";n(W)}finally{y(!1)}},q=async()=>{var G,O;if(f)try{y(!0),await dt.deletePermisos(f.id),S([]),o("Permisos restablecidos al rol")}catch(re){const W=((O=(G=re.response)==null?void 0:G.data)==null?void 0:O.error)||"Error al restablecer permisos";n(W)}finally{y(!1)}},E=async G=>{var O,re;j(G);try{const W=await dt.getPermisosRol(G);v(W.permisos||[])}catch(W){const Y=((re=(O=W.response)==null?void 0:O.data)==null?void 0:re.error)||"Error al cargar permisos del rol";n(Y),v([])}},T=async()=>{var G,O;if(C)try{y(!0),await dt.updatePermisosRol(C,P),o("Permisos de rol actualizados")}catch(re){const W=((O=(G=re.response)==null?void 0:G.data)==null?void 0:O.error)||"Error al guardar permisos del rol";n(W)}finally{y(!1)}},ee=async()=>{var G,O;if(C)try{y(!0),await dt.deletePermisosRol(C),v([]),o("Permisos del rol restablecidos")}catch(re){const W=((O=(G=re.response)==null?void 0:G.data)==null?void 0:O.error)||"Error al restablecer permisos del rol";n(W)}finally{y(!1)}},H=c.useMemo(()=>f?f.nombre_completo||f.nombre_usuario:"Selecciona un usuario",[f]);return s?e.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Cargando usuarios..."}):e.jsxs("div",{children:[e.jsx(Nr,{toasts:r,removeToast:t}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Roles y Permisos"}),e.jsx("p",{style:{color:"#6b7280"},children:"Define permisos por rol y permisos personalizados por usuario."}),e.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"0.75rem"},children:[e.jsx("button",{type:"button",onClick:()=>U("roles"),style:{padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"1px solid #e2e8f0",backgroundColor:k==="roles"?"#6366f1":"white",color:k==="roles"?"white":"#374151",fontWeight:"600",cursor:"pointer"},children:"Permisos por rol"}),e.jsx("button",{type:"button",onClick:()=>U("usuarios"),style:{padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"1px solid #e2e8f0",backgroundColor:k==="usuarios"?"#6366f1":"white",color:k==="usuarios"?"white":"#374151",fontWeight:"600",cursor:"pointer"},children:"Permisos por usuario"})]})]}),k==="roles"?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"320px 1fr",gap:"2rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{padding:"1rem",borderBottom:"1px solid #e5e7eb",fontWeight:"600"},children:"Roles"}),e.jsx("div",{style:{maxHeight:"560px",overflowY:"auto"},children:l.map(G=>{const O=C===G;return e.jsx("button",{type:"button",onClick:()=>E(G),style:{width:"100%",textAlign:"left",padding:"0.85rem 1rem",border:"none",backgroundColor:O?"#eef2ff":"transparent",color:O?"#3730a3":"#111827",cursor:"pointer",borderBottom:"1px solid #f1f5f9"},children:e.jsx("div",{style:{fontWeight:"600",textTransform:"capitalize"},children:G})},G)})})]}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",border:"1px solid #e5e7eb",padding:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.25rem"},children:C?`Rol: ${C}`:"Selecciona un rol"}),e.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Marca los mdulos y acciones permitidas para este rol."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:Ip.map(G=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.6rem",padding:"0.75rem",borderRadius:"0.6rem",border:"1px solid #e2e8f0",backgroundColor:P.includes(G.key)?"#eef2ff":"white",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:P.includes(G.key),onChange:()=>w(G.key)}),e.jsx("span",{style:{fontWeight:"600",color:"#0f172a"},children:G.label})]},G.key))}),e.jsxs("div",{style:{marginTop:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"700",marginBottom:"0.75rem",color:"#111827"},children:"Acciones"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:Tp.map(G=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.6rem",padding:"0.75rem",borderRadius:"0.6rem",border:"1px solid #e2e8f0",backgroundColor:P.includes(G.key)?"#eef2ff":"white",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:P.includes(G.key),onChange:()=>w(G.key)}),e.jsx("span",{style:{fontWeight:"600",color:"#0f172a"},children:G.label})]},G.key))})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:ee,disabled:!C,style:{padding:"0.7rem 1.2rem",borderRadius:"0.6rem",border:"1px solid #e2e8f0",backgroundColor:"white",cursor:C?"pointer":"not-allowed",fontWeight:"600",color:"#64748b"},children:"Restablecer rol"}),e.jsx("button",{type:"button",onClick:T,disabled:!C||m,style:{padding:"0.7rem 1.4rem",borderRadius:"0.6rem",border:"none",backgroundColor:"#4f46e5",color:"white",cursor:!C||m?"not-allowed":"pointer",fontWeight:"700"},children:m?"Guardando...":"Guardar permisos"})]})]})]}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"320px 1fr",gap:"2rem"},children:[e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{padding:"1rem",borderBottom:"1px solid #e5e7eb",fontWeight:"600"},children:"Usuarios"}),e.jsx("div",{style:{maxHeight:"560px",overflowY:"auto"},children:i.map(G=>{const O=(f==null?void 0:f.id)===G.id;return e.jsxs("button",{type:"button",onClick:()=>X(G),style:{width:"100%",textAlign:"left",padding:"0.85rem 1rem",border:"none",backgroundColor:O?"#eef2ff":"transparent",color:O?"#3730a3":"#111827",cursor:"pointer",borderBottom:"1px solid #f1f5f9"},children:[e.jsx("div",{style:{fontWeight:"600"},children:G.nombre_completo||G.nombre_usuario}),e.jsx("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:G.rol})]},G.id)})})]}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",border:"1px solid #e5e7eb",padding:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.25rem"},children:H}),e.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Marca los mdulos y acciones permitidas para este usuario."}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:Ip.map(G=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.6rem",padding:"0.75rem",borderRadius:"0.6rem",border:"1px solid #e2e8f0",backgroundColor:h.includes(G.key)?"#eef2ff":"white",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:h.includes(G.key),onChange:()=>R(G.key)}),e.jsx("span",{style:{fontWeight:"600",color:"#0f172a"},children:G.label})]},G.key))}),e.jsxs("div",{style:{marginTop:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"700",marginBottom:"0.75rem",color:"#111827"},children:"Acciones"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:Tp.map(G=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.6rem",padding:"0.75rem",borderRadius:"0.6rem",border:"1px solid #e2e8f0",backgroundColor:h.includes(G.key)?"#eef2ff":"white",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:h.includes(G.key),onChange:()=>R(G.key)}),e.jsx("span",{style:{fontWeight:"600",color:"#0f172a"},children:G.label})]},G.key))})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:q,disabled:!f,style:{padding:"0.7rem 1.2rem",borderRadius:"0.6rem",border:"1px solid #e2e8f0",backgroundColor:"white",cursor:f?"pointer":"not-allowed",fontWeight:"600",color:"#64748b"},children:"Usar permisos del rol"}),e.jsx("button",{type:"button",onClick:B,disabled:!f||m,style:{padding:"0.7rem 1.4rem",borderRadius:"0.6rem",border:"none",backgroundColor:"#4f46e5",color:"white",cursor:!f||m?"not-allowed":"pointer",fontWeight:"700"},children:m?"Guardando...":"Guardar permisos"})]})]})]})]})},U5=()=>{const{toasts:r,removeToast:t,success:o,error:n}=_r(),[i,a]=c.useState(!0),[l,u]=c.useState([]),s=_o(),d=async()=>{var j,P;try{a(!0);const v=await ao.getConfiguraciones();u(v.configuraciones||[])}catch(v){const m=((P=(j=v.response)==null?void 0:j.data)==null?void 0:P.error)||v.message||"Error al cargar notificaciones";n(m)}finally{a(!1)}};c.useEffect(()=>{d()},[]);const f=j=>{const P=[];return j.enviar_email&&P.push("Email"),j.enviar_whatsapp&&P.push("WhatsApp"),P.length===0?"Sin canal":P.join(" + ")},x=j=>{const P=Number(j.dias_antes??0);return P===0?"Inmediato (al registrar pago)":P===-1?"Despues del evento":`${P} dias antes del evento`},h=async j=>{var P,v;try{const m=!j.activo;await ao.updateEstado(j.tipo_notificacion,m),u(y=>y.map(k=>k.tipo_notificacion===j.tipo_notificacion?{...k,activo:m}:k)),o(m?"Notificacion activada":"Notificacion desactivada")}catch(m){const y=((v=(P=m.response)==null?void 0:P.data)==null?void 0:v.error)||m.message||"Error al actualizar estado";n(y)}},S=j=>{s(`/notificaciones-nativas/${j.tipo_notificacion}`)},C=c.useMemo(()=>l,[l]);return e.jsxs("div",{style:{padding:"1.5rem 2rem"},children:[e.jsx(Nr,{toasts:r,removeToast:t}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.6rem",marginBottom:"0.25rem"},children:"Notificaciones nativas"}),e.jsx("p",{style:{color:"var(--gray-600)"},children:"Lista de notificaciones del sistema actual, con su estado, canal y momento de ejecucion."})]}),i?e.jsx("p",{children:"Cargando..."}):e.jsx("div",{style:{background:"white",borderRadius:"14px",border:"1px solid var(--gray-100)"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"var(--gray-50)"},children:[e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Nombre"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Tipo"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Medio"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Cuando se ejecuta"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Envios"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Estado"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Accion"})]})}),e.jsxs("tbody",{children:[C.map(j=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--gray-100)"},children:[e.jsx("td",{style:{padding:"0.75rem"},children:j.nombre}),e.jsx("td",{style:{padding:"0.75rem"},children:j.tipo_notificacion}),e.jsx("td",{style:{padding:"0.75rem"},children:f(j)}),e.jsx("td",{style:{padding:"0.75rem"},children:x(j)}),e.jsx("td",{style:{padding:"0.75rem"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.2rem"},children:[e.jsxs("span",{children:["Email: ",j.total_envios_email??0]}),e.jsxs("span",{children:["WhatsApp: ",j.total_envios_whatsapp??0]})]})}),e.jsx("td",{style:{padding:"0.75rem"},children:j.activo?"Activo":"Inactivo"}),e.jsx("td",{style:{padding:"0.75rem"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>h(j),style:{padding:"0.35rem 0.8rem",borderRadius:"8px",border:"1px solid var(--gray-200)",background:j.activo?"var(--gray-100)":"var(--primary)",color:j.activo?"var(--gray-700)":"white",cursor:"pointer"},children:j.activo?"Desactivar":"Activar"}),e.jsx("button",{onClick:()=>S(j),style:{padding:"0.35rem 0.8rem",borderRadius:"8px",border:"1px solid var(--gray-200)",background:"white",color:"var(--gray-700)",cursor:"pointer"},children:"Editar mensaje"})]})})]},j.tipo_notificacion)),C.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,style:{padding:"1rem",color:"var(--gray-500)"},children:"No hay configuraciones registradas."})})]})]})})]})},G5=()=>{const{tipo:r}=vs(),t=_o(),{toasts:o,removeToast:n,success:i,error:a}=_r(),{nombrePlataforma:l}=Rs(),[u,s]=c.useState(!0),[d,f]=c.useState({nombre:"",descripcion:"",enviar_email:!0,enviar_whatsapp:!0,plantilla_email:"",plantilla_whatsapp:""}),[x,h]=c.useState(""),[S,C]=c.useState(""),[j,P]=c.useState(""),[v,m]=c.useState("");c.useEffect(()=>{j||h(R=>R||l),v||C(R=>R||`${l}  Estamos para ayudarte.`)},[l,j,v]);const y=R=>{var w,B;const q=R||"",E=q.match(/<div[^>]*font-size:18px;[^>]*>(.*?)<\/div>/is),T=q.match(/<td[^>]*padding:20px 32px[^>]*>(.*?)<\/td>/is),ee=q.match(/<td[^>]*padding:28px 32px[^>]*>([\s\S]*?)<\/td>/i);return ee&&ee[1]?{header:(w=E==null?void 0:E[1])==null?void 0:w.trim(),footer:(B=T==null?void 0:T[1])==null?void 0:B.trim(),body:ee[1].trim(),isWrapped:!0}:{header:null,footer:null,body:q,isWrapped:!1}},k=(R,w)=>{const B=R||"",q=B.toLowerCase();if(q.includes("<html")||q.includes("<body"))return B;const E=q.includes("<table")||q.includes("<div")||q.includes("<p")?B:B.replace(/\n/g,"<br>");return`<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body style="margin:0; padding:0; background-color:#f3f4f6; font-family:Arial, sans-serif;">
    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" style="background-color:#f3f4f6; padding:24px 0;">
      <tr>
        <td align="center">
          <table role="presentation" width="600" cellspacing="0" cellpadding="0" style="background-color:#ffffff; border-radius:12px; overflow:hidden; border:1px solid #e5e7eb;">
            <tr>
              <td style="background-color:#111827; color:#ffffff; padding:24px 32px;">
                <div style="font-size:18px; font-weight:700;">${x}</div>
                <div style="font-size:13px; opacity:0.85; margin-top:4px;">${w||"Notificacion"}</div>
              </td>
            </tr>
            <tr>
              <td style="padding:28px 32px; color:#111827; font-size:14px; line-height:1.6;">
                ${E}
              </td>
            </tr>
            <tr>
              <td style="padding:20px 32px; border-top:1px solid #e5e7eb; font-size:12px; color:#6b7280;">
                ${S}
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </body>
</html>`},U=async()=>{var R,w,B,q;try{s(!0);const E=(await ao.getConfiguracion(r)).configuracion,T=(E.plantilla_email||"").match(/\[\[HEADER:(.*?)\]\]/),ee=(E.plantilla_email||"").match(/\[\[FOOTER:(.*?)\]\]/);T&&T[1]&&h(T[1].trim()),ee&&ee[1]&&C(ee[1].trim());const H=(E.plantilla_email||"").replace(/\[\[HEADER:.*?\]\]\s*/s,"").replace(/\[\[FOOTER:.*?\]\]\s*/s,""),G=y(H);G.header&&h(G.header),G.footer&&C(G.footer),f({nombre:E.nombre||"",descripcion:E.descripcion||"",enviar_email:!!E.enviar_email,enviar_whatsapp:!!E.enviar_whatsapp,plantilla_email:G.body||H,plantilla_whatsapp:E.plantilla_whatsapp||""}),j||P(((R=T==null?void 0:T[1])==null?void 0:R.trim())||x),v||m(((w=ee==null?void 0:ee[1])==null?void 0:w.trim())||S)}catch(E){const T=((q=(B=E.response)==null?void 0:B.data)==null?void 0:q.error)||E.message||"Error al cargar configuracion";a(T)}finally{s(!1)}};c.useEffect(()=>{U()},[r]);const X=async()=>{var R,w;try{const B={...d,plantilla_email:d.plantilla_email};d.plantilla_email&&(B.plantilla_email=`[[HEADER:${x}]]
[[FOOTER:${S}]]
${d.plantilla_email}`),await ao.updateConfiguracion(r,B),i("Plantilla actualizada")}catch(B){const q=((w=(R=B.response)==null?void 0:R.data)==null?void 0:w.error)||B.message||"Error al actualizar plantilla";a(q)}};return e.jsxs("div",{style:{padding:"1.5rem 2rem"},children:[e.jsx(Nr,{toasts:o,removeToast:n}),e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.6rem",marginBottom:"0.25rem"},children:"Editar notificacion"}),e.jsx("p",{style:{color:"var(--gray-600)"},children:r})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>t("/notificaciones-nativas"),style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"1px solid #d1d5db",background:"white",cursor:"pointer"},children:"Volver"}),e.jsx("button",{onClick:X,style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"1px solid #4338ca",background:"#4f46e5",color:"white",cursor:"pointer"},children:"Guardar cambios"})]})]}),u?e.jsx("p",{children:"Cargando..."}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("h3",{style:{marginBottom:"1rem"},children:"Contenido"}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Header (titulo superior)"}),e.jsx("input",{value:x,onChange:R=>h(R.target.value),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Footer (pie de pagina)"}),e.jsx("input",{value:S,onChange:R=>C(R.target.value),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Nombre"}),e.jsx("input",{value:d.nombre,onChange:R=>f(w=>({...w,nombre:R.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Descripcion"}),e.jsx("input",{value:d.descripcion,onChange:R=>f(w=>({...w,descripcion:R.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:d.enviar_email,onChange:R=>f(w=>({...w,enviar_email:R.target.checked}))}),"Enviar Email"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:d.enviar_whatsapp,onChange:R=>f(w=>({...w,enviar_whatsapp:R.target.checked}))}),"Enviar WhatsApp"]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Plantilla Email (HTML permitido)"}),e.jsx("textarea",{rows:14,value:d.plantilla_email,onChange:R=>f(w=>({...w,plantilla_email:R.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Plantilla WhatsApp"}),e.jsx("textarea",{rows:6,value:d.plantilla_whatsapp,onChange:R=>f(w=>({...w,plantilla_whatsapp:R.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]})]})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1.5rem",border:"1px solid #e5e7eb"},children:[e.jsx("h3",{style:{marginBottom:"1rem"},children:"Vista previa"}),e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",background:"#f3f4f6",padding:"0.5rem",maxHeight:"720px",overflow:"auto"},dangerouslySetInnerHTML:{__html:k(d.plantilla_email,d.nombre)}})]})]})]})},Bg=({embedded:r=!1})=>{const{toasts:t,removeToast:o,success:n,error:i}=_r(),[a,l]=c.useState(!0),[u,s]=c.useState({nombre:"WhatsApp Cloud API",access_token:"",phone_number_id:"",business_id:"",api_version:"v18.0",verify_token:"",activo:!1}),d=async()=>{var h,S,C,j,P,v,m;try{l(!0);const y=(await Sp.getWhatsApp()).integracion;y&&s({nombre:y.nombre||"WhatsApp Cloud API",access_token:((h=y.configuracion)==null?void 0:h.access_token)||"",phone_number_id:((S=y.configuracion)==null?void 0:S.phone_number_id)||"",business_id:((C=y.configuracion)==null?void 0:C.business_id)||"",api_version:((j=y.configuracion)==null?void 0:j.api_version)||"v18.0",verify_token:((P=y.configuracion)==null?void 0:P.verify_token)||"",activo:!!y.activo})}catch(y){const k=((m=(v=y.response)==null?void 0:v.data)==null?void 0:m.error)||y.message||"Error al cargar configuracion";i(k)}finally{l(!1)}};c.useEffect(()=>{d()},[]);const f=async()=>{var h,S;try{await Sp.updateWhatsApp(u),n("Configuracion de WhatsApp actualizada"),await d()}catch(C){const j=((S=(h=C.response)==null?void 0:h.data)==null?void 0:S.error)||C.message||"Error al guardar configuracion";i(j)}},x=async()=>{try{const h=new URLSearchParams({verify_token:u.verify_token||"","hub.mode":"subscribe","hub.challenge":"test"}),S=await fetch(`/api/integraciones/whatsapp/test-webhook?${h.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`}}),C=await S.json();if(!S.ok)throw new Error(C.error||"Error al probar webhook");n("Webhook verificado correctamente")}catch(h){const S=h.message||"Error al probar webhook";i(S)}};return e.jsxs("div",{style:{padding:r?0:"1.5rem 2rem"},children:[e.jsx(Nr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:r?"1.25rem":"1.6rem",marginBottom:"0.25rem"},children:"Integracion WhatsApp"}),e.jsx("p",{style:{color:"var(--gray-600)"},children:"Configura las credenciales de Meta para enviar mensajes via WhatsApp."})]}),a?e.jsx("p",{children:"Cargando..."}):e.jsx("div",{style:{maxWidth:r?"100%":"720px",background:"white",borderRadius:"12px",padding:"1.5rem",border:"1px solid #e5e7eb"},children:e.jsxs("div",{style:{display:"grid",gap:"0.9rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Nombre"}),e.jsx("input",{value:u.nombre,onChange:h=>s(S=>({...S,nombre:h.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Access Token"}),e.jsx("input",{value:u.access_token,onChange:h=>s(S=>({...S,access_token:h.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Phone Number ID"}),e.jsx("input",{value:u.phone_number_id,onChange:h=>s(S=>({...S,phone_number_id:h.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Business ID"}),e.jsx("input",{value:u.business_id,onChange:h=>s(S=>({...S,business_id:h.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"API Version"}),e.jsx("input",{value:u.api_version,onChange:h=>s(S=>({...S,api_version:h.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Verify Token (Webhook)"}),e.jsx("input",{value:u.verify_token,onChange:h=>s(S=>({...S,verify_token:h.target.value})),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:u.activo,onChange:h=>s(S=>({...S,activo:h.target.checked}))}),"Activar integracion"]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[e.jsx("button",{onClick:f,style:{padding:"0.6rem 1rem",borderRadius:"8px",border:"1px solid #4338ca",background:"#4f46e5",color:"white",cursor:"pointer",width:"fit-content"},children:"Guardar configuracion"}),e.jsx("button",{onClick:x,style:{padding:"0.6rem 1rem",borderRadius:"8px",border:"1px solid #d1d5db",background:"white",color:"#111827",cursor:"pointer",width:"fit-content"},children:"Probar webhook"})]})]})})]})},H5=()=>{var r;const{toasts:t,removeToast:o,error:n,success:i}=_r(),a=go(),[l,u]=c.useState([]),[s,d]=c.useState(null),[f,x]=c.useState([]),[h,S]=c.useState(""),[C,j]=c.useState(!0),[P,v]=c.useState(""),m=c.useRef(null),y=c.useRef(null),k=c.useRef(null),[U,X]=c.useState(!0),[R,w]=c.useState(null),[B,q]=c.useState({}),[E,T]=c.useState(!1),[ee,H]=c.useState(!1),G={Caras:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Gestos:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Corazones:["","","","","","","","","","","","","","","","","","","","",""],Celebracin:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Naturaleza:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Comida:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Objetos:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Smbolos:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},[O,re]=c.useState("Caras"),W=c.useRef(null),Y=c.useMemo(()=>{if(!P.trim())return l;const g=P.toLowerCase();return l.filter(p=>String(p.nombre_cliente||"").toLowerCase().includes(g)||String(p.telefono||"").toLowerCase().includes(g))},[P,l]),D=async(g=!1)=>{var p,Z;try{g||j(!0);const ce=(await Eo.getConversations()).conversaciones||[],be=(l||[]).map(Ae=>`${Ae.id}-${Ae.ultimo_mensaje}-${Ae.ultima_fecha}-${Ae.bot_activo}-${Ae.requiere_reengagement}`).join("|"),Ce=ce.map(Ae=>`${Ae.id}-${Ae.ultimo_mensaje}-${Ae.ultima_fecha}-${Ae.bot_activo}-${Ae.requiere_reengagement}`).join("|");be!==Ce&&u(ce)}catch(ce){const be=((Z=(p=ce.response)==null?void 0:p.data)==null?void 0:Z.error)||"Error al cargar conversaciones";n(be)}finally{g||j(!1)}},oe=async g=>{var p,Z,ce,be;try{const Ce=(await Eo.getMessages(g)).mensajes||[],Ae=(p=f[f.length-1])==null?void 0:p.id,De=(Z=Ce[Ce.length-1])==null?void 0:Z.id;(Ae!==De||f.length!==Ce.length)&&x(Ce)}catch(Ce){const Ae=((be=(ce=Ce.response)==null?void 0:ce.data)==null?void 0:be.error)||"Error al cargar mensajes";n(Ae)}};c.useEffect(()=>{D()},[]),c.useEffect(()=>{s!=null&&s.id?oe(s.id):x([])},[s]),c.useEffect(()=>{if(!(s!=null&&s.id))return;const g=l.find(p=>p.id===s.id);g&&(g.requiere_reengagement!==s.requiere_reengagement||g.ultimo_mensaje!==s.ultimo_mensaje||g.ultima_fecha!==s.ultima_fecha||g.bot_activo!==s.bot_activo)&&d(g)},[l,s]),c.useEffect(()=>{const g=async()=>{document.visibilityState==="visible"&&(s!=null&&s.id&&await oe(s.id),await D(!0))};g();const p=setInterval(g,5e3);return()=>clearInterval(p)},[s==null?void 0:s.id]),c.useEffect(()=>{W.current&&W.current.scrollIntoView({behavior:"smooth",block:"end"})},[f,s]),c.useEffect(()=>{const g=f.filter(p=>p.media_id&&!B[p.media_id]);g.length!==0&&g.forEach(async p=>{try{const Z=await Eo.getMedia(p.media_id),ce=URL.createObjectURL(Z);q(be=>({...be,[p.media_id]:ce}))}catch{}})},[f,B]),c.useEffect(()=>{a||X(!0)},[a]);const K=async g=>{if(d(g),a&&X(!1),g!=null&&g.id&&g.mensajes_no_leidos>0)try{await Eo.marcarLeido(g.id),u(p=>p.map(Z=>Z.id===g.id?{...Z,mensajes_no_leidos:0}:Z))}catch{}},V=async()=>{var g,p;if(!(s!=null&&s.id))return;const Z=h.trim();if(!(!Z&&!R)){if(R)return F(R.tipo,R.archivo,Z);try{await Eo.sendMessage(s.id,Z),S(""),await oe(s.id),await D(),i("Mensaje enviado")}catch(ce){const be=((p=(g=ce.response)==null?void 0:g.data)==null?void 0:p.error)||"No se pudo enviar el mensaje";n(be)}}},F=async(g,p,Z="")=>{var ce,be;if(!(!(s!=null&&s.id)||!p))try{const Ce=new FormData;Ce.append("archivo",p),Ce.append("tipo",g),Z&&(g==="image"||g==="document")&&Ce.append("caption",Z),await Eo.sendMedia(s.id,Ce),await oe(s.id),await D(),w(null),S(""),i("Archivo enviado")}catch(Ce){const Ae=((be=(ce=Ce.response)==null?void 0:ce.data)==null?void 0:be.error)||"No se pudo enviar el archivo";n(Ae)}},se=async()=>{var g,p;if(!(s!=null&&s.id))return;const Z=s.bot_activo?"humano":"bot";try{await Eo.setMode(s.id,Z),i(Z==="bot"?"Bot activado":"Bot desactivado"),await D();const ce=l.find(be=>be.id===s.id);d(ce?{...ce,bot_activo:Z==="bot"}:be=>be&&{...be,bot_activo:Z==="bot"})}catch(ce){const be=((p=(g=ce.response)==null?void 0:g.data)==null?void 0:p.error)||"No se pudo actualizar el modo";n(be)}},me=async()=>{var g,p;if(s!=null&&s.id)try{await Eo.resetBot(s.id),i("Estado del bot reiniciado")}catch(Z){const ce=((p=(g=Z.response)==null?void 0:g.data)==null?void 0:p.error)||"No se pudo reiniciar el bot";n(ce)}},ie=(g,p)=>{if(!p)return;R!=null&&R.previewUrl&&URL.revokeObjectURL(R.previewUrl);const Z=g==="image"?URL.createObjectURL(p):null;w({tipo:g,archivo:p,previewUrl:Z})};c.useEffect(()=>()=>{R!=null&&R.previewUrl&&URL.revokeObjectURL(R.previewUrl),Object.values(B).forEach(g=>{try{URL.revokeObjectURL(g)}catch{}})},[R,B]);const ge=g=>{if(!g)return"";try{let p;if(typeof g=="string"&&!g.includes("T")&&!g.includes("Z")&&!g.includes("+")){const Ce=g.split(" ");if(Ce.length===2){const[Ae,De]=Ce;p=new Date(`${Ae}T${De}`)}else p=new Date(g)}else typeof g=="string"&&g.includes("T")&&!g.includes("Z")&&!g.includes("+")?p=new Date(g):p=new Date(g);if(Number.isNaN(p.getTime()))return"";const Z=new Date,ce=p.getFullYear()===Z.getFullYear()&&p.getMonth()===Z.getMonth()&&p.getDate()===Z.getDate(),be=p.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",hour12:!1});return ce?be:`${p.toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"})} ${be}`}catch{return""}},Te=g=>{if(!g)return"";try{let p;if(typeof g=="string"&&!g.includes("T")&&!g.includes("Z")&&!g.includes("+")){const be=g.split(" ");if(be.length===2){const[Ce,Ae]=be;p=new Date(`${Ce}T${Ae}`)}else p=new Date(g)}else typeof g=="string"&&g.includes("T")&&!g.includes("Z")&&!g.includes("+")?p=new Date(g):p=new Date(g);if(Number.isNaN(p.getTime()))return"";const Z=p.toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}),ce=p.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",hour12:!1});return`${Z} ${ce}`}catch{return""}},Q=g=>{if(!g)return"Sin mensajes";const p=String(g).replace(/\s+/g," ").trim();return p.length<=48?p:`${p.slice(0,48)}...`};return e.jsxs("div",{style:{padding:0,margin:a?"-1rem":"-1.5rem",marginBottom:a?"-2rem":"-1.5rem",height:"calc(100vh - 56px)",minHeight:a?"100%":"calc(100vh - 56px)",background:"#111b21",overflow:"hidden"},children:[e.jsx(Nr,{toasts:t,removeToast:o}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:a?"1fr":"380px 1fr",gap:0,height:"100%"},children:[(U||!a)&&e.jsxs("div",{style:{background:"#111b21",borderRadius:0,borderRight:a?"none":"1px solid #222d34",overflow:"hidden",height:"100%",minHeight:a?"calc(100vh - 56px)":"100%",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:a?"0.6rem 0.75rem":"0.75rem 1rem",background:"#202c33",borderBottom:"1px solid #222d34"},children:[e.jsxs("div",{style:{fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem",color:"#e9edef",fontSize:a?"1.1rem":"1.15rem",marginBottom:"0.75rem"},children:[e.jsx(Ep,{size:a?22:20,color:"#00a884"})," Chats"]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Et,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#8696a0"}}),e.jsx("input",{value:P,onChange:g=>v(g.target.value),placeholder:"Buscar o iniciar chat",style:{width:"100%",padding:a?"0.55rem 0.75rem 0.55rem 2.4rem":"0.5rem 0.75rem 0.5rem 2.4rem",borderRadius:"8px",border:"none",background:"#202c33",fontSize:a?"0.9rem":"0.875rem",color:"#e9edef",outline:"none"}})]})]}),e.jsx("div",{style:{flex:1,overflowY:"auto"},children:C?e.jsx("div",{style:{padding:"1rem",color:"#8696a0"},children:"Cargando..."}):Y.length===0?e.jsx("div",{style:{padding:"1rem",color:"#8696a0"},children:"No hay conversaciones."}):Y.map(g=>e.jsx("button",{type:"button",onClick:()=>K(g),style:{width:"100%",textAlign:"left",padding:a?"0.65rem 0.75rem":"0.7rem 1rem",border:"none",borderBottom:"1px solid #222d34",background:(s==null?void 0:s.id)===g.id?"#2a3942":"transparent",cursor:"pointer",transition:"background 0.15s"},onMouseEnter:p=>{(s==null?void 0:s.id)!==g.id&&(p.currentTarget.style.background="#202c33")},onMouseLeave:p=>{(s==null?void 0:s.id)!==g.id&&(p.currentTarget.style.background="transparent")},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{width:a?"44px":"48px",height:a?"44px":"48px",borderRadius:"50%",background:"#00a884",color:"white",display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:a?"1rem":"1.1rem",flexShrink:0},children:(g.nombre_cliente||g.telefono||"?").trim().charAt(0).toUpperCase()}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.15rem"},children:[e.jsx("span",{style:{fontWeight:"500",color:"#e9edef",fontSize:a?"0.95rem":"1rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:g.nombre_cliente||g.telefono}),e.jsx("span",{style:{fontSize:"0.7rem",color:g.mensajes_no_leidos>0?"#00a884":"#8696a0",flexShrink:0,marginLeft:"0.5rem"},children:ge(g.ultima_fecha)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{fontSize:a?"0.8rem":"0.85rem",color:"#8696a0",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flex:1},children:[g.bot_activo?" ":"",Q(g.ultimo_mensaje)]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem",flexShrink:0,marginLeft:"0.5rem"},children:[g.requiere_reengagement&&e.jsx("span",{style:{padding:"0.1rem 0.35rem",borderRadius:"4px",background:"#5c3d3d",color:"#f15c6d",fontSize:"0.6rem",fontWeight:600},children:"24h"}),g.mensajes_no_leidos>0&&e.jsx("div",{style:{minWidth:"18px",height:"18px",borderRadius:"9px",backgroundColor:"#00a884",color:"#111b21",fontSize:"0.7rem",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 5px"},children:g.mensajes_no_leidos>99?"99+":g.mensajes_no_leidos})]})]})]})]})},g.id))})]}),(!a||!U)&&e.jsxs("div",{style:{background:"#0b141a",borderRadius:0,border:"none",display:"flex",flexDirection:"column",height:"100%",minHeight:a?"calc(100vh - 56px)":"100%",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:a?"0.5rem 0.6rem":"0.6rem 1rem",borderBottom:"1px solid #222d34",display:"flex",flexDirection:a?"column":"row",justifyContent:"space-between",alignItems:a?"stretch":"center",gap:a?"0.5rem":"0",position:"sticky",top:0,background:"#202c33",zIndex:5},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.65rem"},children:[a&&e.jsx("button",{type:"button",onClick:()=>X(!0),style:{background:"transparent",border:"none",color:"#aebac1",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:e.jsx(yi,{size:22})}),e.jsx("div",{style:{width:a?"38px":"42px",height:a?"38px":"42px",borderRadius:"50%",background:"#00a884",color:"#111b21",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:a?"1rem":"1.1rem",flexShrink:0},children:((s==null?void 0:s.nombre_cliente)||(s==null?void 0:s.telefono)||"?").trim().charAt(0).toUpperCase()}),e.jsxs("div",{style:{minWidth:0,flex:1},children:[e.jsxs("div",{style:{fontWeight:"500",color:"#e9edef",fontSize:a?"0.95rem":"1rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"flex",alignItems:"center",gap:"0.4rem"},children:[e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:(s==null?void 0:s.nombre_cliente)||(s==null?void 0:s.telefono)||"Selecciona un chat"}),s!=null&&s.requiere_reengagement&&!a?e.jsx("span",{style:{padding:"0.15rem 0.4rem",borderRadius:"4px",background:"#5c3d3d",color:"#f15c6d",fontSize:"0.65rem",fontWeight:600,flexShrink:0},children:"24h expirado"}):null]}),e.jsx("div",{style:{fontSize:a?"0.75rem":"0.8rem",color:"#8696a0"},children:(s==null?void 0:s.telefono)||""})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.4rem",justifyContent:a?"flex-end":"flex-start"},children:[(s==null?void 0:s.requiere_reengagement)&&a&&e.jsx("span",{style:{padding:"0.2rem 0.4rem",borderRadius:"4px",background:"#5c3d3d",color:"#f15c6d",fontSize:"0.65rem",fontWeight:600,display:"flex",alignItems:"center"},children:"24h"}),e.jsx("button",{type:"button",onClick:se,disabled:!s,style:{padding:a?"0.35rem 0.6rem":"0.4rem 0.75rem",borderRadius:"6px",border:"none",background:s!=null&&s.bot_activo?"#e97c20":"#00a884",color:s!=null&&s.bot_activo?"white":"#111b21",cursor:s?"pointer":"not-allowed",fontSize:a?"0.75rem":"0.8rem",fontWeight:600,whiteSpace:"nowrap",opacity:s?1:.5},children:s!=null&&s.bot_activo?a?" Humano":" Modo humano":a?" Bot":" Activar bot"}),e.jsx("button",{type:"button",onClick:me,disabled:!s,style:{padding:a?"0.35rem 0.6rem":"0.4rem 0.75rem",borderRadius:"6px",border:"1px solid #3b4a54",background:"transparent",color:"#aebac1",cursor:s?"pointer":"not-allowed",fontSize:a?"0.75rem":"0.8rem",fontWeight:500,whiteSpace:"nowrap",opacity:s?1:.5},children:a?"Reset":"Reiniciar"})]})]}),e.jsxs("div",{style:{flex:1,padding:a?"0.5rem 0.5rem":"0.75rem 1.5rem",overflowY:"auto",background:"#0b141a",backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23182229' fill-opacity='0.6'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`,minHeight:0},children:[s?f.map(g=>e.jsx("div",{style:{display:"flex",justifyContent:g.direccion==="out"?"flex-end":"flex-start",marginBottom:"0.25rem"},children:e.jsxs("div",{style:{maxWidth:a?"92%":"75%"},children:[e.jsxs("div",{style:{padding:a?"0.4rem 0.6rem":"0.5rem 0.65rem",borderRadius:g.direccion==="out"?"7.5px 7.5px 0 7.5px":"7.5px 7.5px 7.5px 0",background:g.direccion==="out"?"#005c4b":"#202c33",color:"#e9edef",whiteSpace:"pre-wrap",boxShadow:"0 1px 0.5px rgba(11,20,26,0.13)",fontSize:a?"0.875rem":"0.9rem",lineHeight:1.35},children:[g.media_type==="image"&&g.media_id&&B[g.media_id]&&e.jsx("img",{src:B[g.media_id],alt:"imagen enviada",style:{maxWidth:"100%",borderRadius:"10px",marginBottom:g.mensaje?"0.4rem":0}}),g.media_type==="audio"&&g.media_id&&B[g.media_id]&&e.jsx("audio",{controls:!0,style:{width:"100%"},children:e.jsx("source",{src:B[g.media_id]})}),g.media_type==="document"&&g.media_id&&B[g.media_id]&&e.jsx("a",{href:B[g.media_id],target:"_blank",rel:"noreferrer",style:{display:"inline-block",marginBottom:g.mensaje?"0.4rem":0},children:"Descargar documento"}),g.mensaje]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"0.25rem",fontSize:"0.65rem",color:g.direccion==="out"?"rgba(255,255,255,0.6)":"#8696a0",marginTop:"0.15rem"},children:[e.jsx("span",{children:Te(g.fecha_creacion)}),g.direccion==="out"&&e.jsx("span",{style:{color:g.estado==="read"?"#53bdeb":"rgba(255,255,255,0.6)"},children:g.estado==="read"||g.estado==="delivered"?"":g.estado==="sent"?"":""})]})]})},g.id)):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#8696a0",textAlign:"center",padding:"2rem"},children:[e.jsx(Ep,{size:64,color:"#3b4a54",style:{marginBottom:"1rem"}}),e.jsx("div",{style:{fontSize:"1.2rem",color:"#e9edef",marginBottom:"0.5rem"},children:"WhatsApp para Lirios"}),e.jsx("div",{style:{fontSize:"0.875rem"},children:"Selecciona una conversacin para comenzar"})]}),e.jsx("div",{ref:W})]}),R&&e.jsx("div",{style:{padding:"0.5rem 1rem",borderTop:"1px solid #222d34",background:"#1f2c34"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[R.previewUrl?e.jsx("img",{src:R.previewUrl,alt:"preview",style:{width:"48px",height:"48px",borderRadius:"6px",objectFit:"cover"}}):e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"6px",background:"#3b4a54",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",color:"#8696a0"},children:R.tipo.toUpperCase()}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:500,color:"#e9edef",fontSize:"0.85rem"},children:"Adjunto listo"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#8696a0",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(r=R.archivo)==null?void 0:r.name})]}),e.jsx("button",{type:"button",onClick:()=>w(null),style:{background:"#5c3d3d",border:"none",color:"#f15c6d",padding:"0.3rem 0.6rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.75rem",fontWeight:500},children:"Quitar"})]})}),e.jsxs("div",{style:{padding:a?"0.6rem 0.5rem":"0.6rem 1rem",paddingBottom:a?"0.8rem":"0.6rem",borderTop:"1px solid #222d34",display:"flex",gap:a?"0.4rem":"0.75rem",alignItems:"center",background:"#202c33",position:"sticky",bottom:0,zIndex:5,flexShrink:0},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{type:"button",onClick:()=>T(!E),disabled:!s,style:{width:"40px",height:"40px",borderRadius:"50%",border:"none",background:E?"#00a884":"transparent",color:E?"#111b21":"#8696a0",cursor:s?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",opacity:s?1:.5,transition:"all 0.2s"},children:E?e.jsx(er,{size:22}):e.jsx(Mr,{size:24})}),E&&e.jsxs("div",{style:{position:"absolute",bottom:"50px",left:"0",background:"#233138",borderRadius:"12px",padding:"0.5rem",display:"flex",flexDirection:"column",gap:"0.25rem",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",minWidth:"160px"},children:[e.jsxs("button",{type:"button",onClick:()=>{var g;(g=m.current)==null||g.click(),T(!1)},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.6rem 0.75rem",background:"transparent",border:"none",borderRadius:"8px",color:"#e9edef",cursor:"pointer",fontSize:"0.875rem",textAlign:"left"},onMouseEnter:g=>g.currentTarget.style.background="#182229",onMouseLeave:g=>g.currentTarget.style.background="transparent",children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:"#bf59cf",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Xv,{size:18,color:"white"})}),"Fotos"]}),e.jsxs("button",{type:"button",onClick:()=>{var g;(g=k.current)==null||g.click(),T(!1)},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.6rem 0.75rem",background:"transparent",border:"none",borderRadius:"8px",color:"#e9edef",cursor:"pointer",fontSize:"0.875rem",textAlign:"left"},onMouseEnter:g=>g.currentTarget.style.background="#182229",onMouseLeave:g=>g.currentTarget.style.background="transparent",children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:"#5157ae",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(jt,{size:18,color:"white"})}),"Documento"]}),e.jsxs("button",{type:"button",onClick:()=>{var g;(g=y.current)==null||g.click(),T(!1)},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.6rem 0.75rem",background:"transparent",border:"none",borderRadius:"8px",color:"#e9edef",cursor:"pointer",fontSize:"0.875rem",textAlign:"left"},onMouseEnter:g=>g.currentTarget.style.background="#182229",onMouseLeave:g=>g.currentTarget.style.background="transparent",children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:"#f5a623",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(i5,{size:18,color:"white"})}),"Audio"]})]})]}),e.jsx("input",{ref:m,type:"file",accept:"image/*",style:{display:"none"},onChange:g=>{var p;ie("image",(p=g.target.files)==null?void 0:p[0]),T(!1)}}),e.jsx("input",{ref:y,type:"file",accept:"audio/*",style:{display:"none"},onChange:g=>{var p;ie("audio",(p=g.target.files)==null?void 0:p[0]),T(!1)}}),e.jsx("input",{ref:k,type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx",style:{display:"none"},onChange:g=>{var p;ie("document",(p=g.target.files)==null?void 0:p[0]),T(!1)}}),e.jsx("input",{value:h,onChange:g=>S(g.target.value),placeholder:"Escribe un mensaje",disabled:!s,style:{flex:1,padding:a?"0.7rem 1rem":"0.75rem 1.25rem",borderRadius:"24px",border:"none",background:"#2a3942",fontSize:a?"0.95rem":"1rem",color:"#e9edef",outline:"none"},onKeyDown:g=>{g.key==="Enter"&&V()},onFocus:()=>{T(!1),H(!1)}}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{type:"button",onClick:()=>{H(!ee),T(!1)},disabled:!s,style:{background:ee?"#00a884":"transparent",border:"none",cursor:s?"pointer":"not-allowed",color:ee?"#111b21":"#8696a0",padding:"0.35rem",borderRadius:"50%",display:"flex",alignItems:"center",opacity:s?1:.5,transition:"all 0.2s"},children:e.jsx(d5,{size:24})}),ee&&e.jsxs("div",{style:{position:"absolute",bottom:"50px",right:a?"-100px":"0",background:"#233138",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.4)",width:a?"calc(100vw - 20px)":"340px",maxWidth:a?"320px":"340px",maxHeight:a?"280px":"320px",overflow:"hidden",display:"flex",flexDirection:"column",zIndex:100},children:[e.jsx("div",{style:{display:"flex",gap:"0.25rem",padding:"0.5rem",borderBottom:"1px solid #3b4a54",overflowX:"auto",flexShrink:0},children:Object.keys(G).map(g=>e.jsx("button",{type:"button",onClick:()=>re(g),style:{padding:"0.35rem 0.6rem",borderRadius:"6px",border:"none",background:O===g?"#00a884":"transparent",color:O===g?"#111b21":"#8696a0",cursor:"pointer",fontSize:"0.7rem",fontWeight:600,whiteSpace:"nowrap"},children:g},g))}),e.jsx("div",{style:{padding:"0.5rem",overflowY:"auto",flex:1},children:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 1fr)",gap:"0.15rem"},children:G[O].map((g,p)=>e.jsx("button",{type:"button",onClick:()=>{S(Z=>Z+g)},style:{background:"transparent",border:"none",cursor:"pointer",fontSize:a?"1.3rem":"1.5rem",padding:"0.25rem",borderRadius:"6px",transition:"background 0.15s"},onMouseEnter:Z=>Z.currentTarget.style.background="#3b4a54",onMouseLeave:Z=>Z.currentTarget.style.background="transparent",children:g},p))})})]})]}),e.jsx("button",{type:"button",onClick:V,disabled:!s||!h.trim()&&!R,style:{width:"44px",height:"44px",padding:"0",borderRadius:"50%",border:"none",background:h.trim()||R?"#00a884":"transparent",color:h.trim()||R?"#111b21":"#8696a0",cursor:s&&(h.trim()||R)?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:e.jsx(l5,{size:22,style:{marginLeft:"2px"}})})]})]})]})]})},q5=()=>{const{toasts:r,removeToast:t,error:o,success:n}=_r(),[i,a]=c.useState(null),[l,u]=c.useState({precio_whatsapp:0,precio_email:0,whatsapp_desactivado:!1,maximo_whatsapp:null,maximo_email:null}),[s,d]=c.useState([]),[f,x]=c.useState(""),[h,S]=c.useState(!1),[C,j]=c.useState(""),[P,v]=c.useState(""),m=async(E=C,T=P)=>{var ee,H;try{const G={};E&&(G.fecha_desde=E),T&&(G.fecha_hasta=T);const[O,re]=await Promise.all([$i.getResumen(G),$i.getClientes(G)]);a(O.resumen||{}),u(O.config||{precio_whatsapp:0,precio_email:0,whatsapp_desactivado:!1,maximo_whatsapp:null,maximo_email:null}),d(re.clientes||[])}catch(G){const O=((H=(ee=G.response)==null?void 0:ee.data)==null?void 0:H.error)||"Error al cargar mtricas";o(O)}};c.useEffect(()=>{m()},[]);const y=()=>{m(C,P)},k=()=>{j(""),v(""),m("","")},U=E=>{if(E==null)return 0;const T=String(E).replace(",",".").trim(),ee=Number(T);return Number.isNaN(ee)?0:ee},X=async()=>{var E,T;try{S(!0),await $i.updateConfig({precio_whatsapp:U(l.precio_whatsapp),precio_email:U(l.precio_email),whatsapp_desactivado:!!l.whatsapp_desactivado,maximo_whatsapp:l.maximo_whatsapp?parseInt(l.maximo_whatsapp):null,maximo_email:l.maximo_email?parseInt(l.maximo_email):null}),n("Configuracin actualizada"),await m()}catch(ee){const H=((T=(E=ee.response)==null?void 0:E.data)==null?void 0:T.error)||"No se pudo actualizar";o(H)}finally{S(!1)}},R=async()=>{var E,T;const ee=!l.whatsapp_desactivado;try{S(!0),await $i.updateConfig({precio_whatsapp:U(l.precio_whatsapp),precio_email:U(l.precio_email),whatsapp_desactivado:ee,maximo_whatsapp:l.maximo_whatsapp?parseInt(l.maximo_whatsapp):null,maximo_email:l.maximo_email?parseInt(l.maximo_email):null}),u(H=>({...H,whatsapp_desactivado:ee})),n(ee?"WhatsApp desactivado":"WhatsApp activado"),await m()}catch(H){const G=((T=(E=H.response)==null?void 0:E.data)==null?void 0:T.error)||"No se pudo actualizar";o(G)}finally{S(!1)}},w=async(E,T)=>{var ee,H;try{await $i.updateControlCliente(E,T),await m()}catch(G){const O=((H=(ee=G.response)==null?void 0:ee.data)==null?void 0:H.error)||"No se pudo actualizar control";o(O)}},B=c.useMemo(()=>{if(!f.trim())return s;const E=f.toLowerCase();return s.filter(T=>String(T.nombre_cliente||"").toLowerCase().includes(E)||String(T.telefono||"").toLowerCase().includes(E))},[f,s]),q=c.useMemo(()=>{const E=(i==null?void 0:i.whatsapp_out)||0,T=(i==null?void 0:i.whatsapp_in)||0,ee=(i==null?void 0:i.email_out)||0,H=(i==null?void 0:i.costo_whatsapp_total)||0,G=(i==null?void 0:i.costo_email_total)||0;return{totalWhatsappOut:E,totalWhatsappIn:T,totalWhatsapp:E+T,totalEmail:ee,totalCostoWhatsapp:H,totalCostoEmail:G,totalCosto:H+G}},[i]);return e.jsxs("div",{style:{padding:"1.5rem 2rem"},children:[e.jsx(Nr,{toasts:r,removeToast:t}),e.jsxs("div",{style:{marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.6rem",marginBottom:"0.25rem"},children:"Panel WhatsApp & Email"}),e.jsx("p",{style:{color:"var(--gray-600)"},children:"Control de consumos, costos y bloqueos por cliente."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(_t,{size:16,color:"#6b7280"}),e.jsx("input",{type:"date",value:C,onChange:E=>j(E.target.value),style:{padding:"0.5rem 0.75rem",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"0.875rem"},placeholder:"Desde"}),e.jsx("span",{style:{color:"#6b7280"},children:"-"}),e.jsx("input",{type:"date",value:P,onChange:E=>v(E.target.value),style:{padding:"0.5rem 0.75rem",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"0.875rem"},placeholder:"Hasta"})]}),e.jsxs("button",{type:"button",onClick:y,style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"none",background:"#3b82f6",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.35rem",fontSize:"0.875rem"},children:[e.jsx(yu,{size:14}),"Filtrar"]}),(C||P)&&e.jsx("button",{type:"button",onClick:k,style:{padding:"0.5rem 0.75rem",borderRadius:"8px",border:"1px solid #d1d5db",background:"#f3f4f6",color:"#374151",cursor:"pointer",fontSize:"0.875rem"},children:"Limpiar"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.85rem",marginBottom:"0.25rem"},children:"WhatsApp Salientes"}),e.jsx("div",{style:{fontSize:"1.4rem",fontWeight:700,color:"#3b82f6"},children:(i==null?void 0:i.whatsapp_out)||0}),e.jsxs("div",{style:{color:"#9ca3af",fontSize:"0.75rem",marginTop:"0.5rem"},children:[e.jsxs("div",{children:["Chat: ",((i==null?void 0:i.whatsapp_bot)||0)+((i==null?void 0:i.whatsapp_humano)||0)]}),e.jsxs("div",{style:{marginTop:"0.25rem"},children:["Bot: ",(i==null?void 0:i.whatsapp_bot)||0,"  Humano: ",(i==null?void 0:i.whatsapp_humano)||0]}),e.jsxs("div",{style:{marginTop:"0.25rem",color:"#6366f1"},children:["Notificaciones: ",(i==null?void 0:i.whatsapp_notificaciones)||(i==null?void 0:i.whatsapp_sistema)||0]})]})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.85rem",marginBottom:"0.25rem"},children:"WhatsApp Entrantes"}),e.jsx("div",{style:{fontSize:"1.4rem",fontWeight:700,color:"#10b981"},children:(i==null?void 0:i.whatsapp_in)||0}),e.jsx("div",{style:{color:"#9ca3af",fontSize:"0.75rem",marginTop:"0.5rem"},children:"Mensajes recibidos del cliente"})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.85rem",marginBottom:"0.25rem"},children:"Email Enviados"}),e.jsx("div",{style:{fontSize:"1.4rem",fontWeight:700,color:"#8b5cf6"},children:(i==null?void 0:i.email_out)||0}),e.jsx("div",{style:{color:"#9ca3af",fontSize:"0.75rem",marginTop:"0.5rem"},children:"Notificaciones por correo"})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{color:"#6b7280",fontSize:"0.85rem",marginBottom:"0.5rem"},children:"Resumen Total"}),e.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:600,marginBottom:"0.25rem"},children:["WhatsApp: ",((i==null?void 0:i.whatsapp_out)||0)+((i==null?void 0:i.whatsapp_in)||0)]}),e.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:600,marginBottom:"0.25rem"},children:["Email: ",(i==null?void 0:i.email_out)||0]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280",marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #e5e7eb"},children:[e.jsxs("div",{children:["Costo WhatsApp: $",q.totalCostoWhatsapp.toFixed(2)]}),e.jsxs("div",{style:{marginTop:"0.25rem"},children:["Costo Email: $",q.totalCostoEmail.toFixed(2)]}),e.jsxs("div",{style:{marginTop:"0.5rem",fontWeight:700,color:"#374151"},children:["Total: $",(q.totalCostoWhatsapp+q.totalCostoEmail).toFixed(2)]})]})]})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1rem",border:"1px solid #e5e7eb",marginBottom:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:700,marginBottom:"0.75rem"},children:"Configuracin"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Precio WhatsApp"}),e.jsx("input",{value:l.precio_whatsapp,onChange:E=>u(T=>({...T,precio_whatsapp:E.target.value})),type:"number",step:"0.0001",style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Precio Email"}),e.jsx("input",{value:l.precio_email,onChange:E=>u(T=>({...T,precio_email:E.target.value})),type:"number",step:"0.0001",style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Mximo WhatsApp"}),e.jsx("input",{value:l.maximo_whatsapp||"",onChange:E=>u(T=>({...T,maximo_whatsapp:E.target.value||null})),type:"number",min:"1",placeholder:"Ilimitado",style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:"Mximo Email"}),e.jsx("input",{value:l.maximo_email||"",onChange:E=>u(T=>({...T,maximo_email:E.target.value||null})),type:"number",min:"1",placeholder:"Ilimitado",style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:R,disabled:h,style:{padding:"0.6rem 1rem",borderRadius:"8px",border:"1px solid #d1d5db",background:l.whatsapp_desactivado?"#ef4444":"#f3f4f6",color:l.whatsapp_desactivado?"white":"#374151",cursor:h?"not-allowed":"pointer"},children:h?"Actualizando...":l.whatsapp_desactivado?"Activar WhatsApp":"Desactivar WhatsApp"}),e.jsx("button",{type:"button",onClick:X,disabled:h,style:{padding:"0.6rem 1rem",borderRadius:"8px",border:"none",background:"#10b981",color:"white",cursor:h?"not-allowed":"pointer"},children:h?"Guardando...":"Guardar"})]})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{padding:"0.9rem",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:700},children:"Clientes"}),e.jsx("input",{value:f,onChange:E=>x(E.target.value),placeholder:"Buscar cliente o telefono",style:{padding:"0.5rem 0.75rem",borderRadius:"999px",border:"1px solid #e5e7eb"}})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f9fafb"},children:[e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Cliente"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"WhatsApp Enviados"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Email"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Costo WhatsApp"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Costo Email"}),e.jsx("th",{style:{textAlign:"left",padding:"0.75rem"},children:"Bloqueos"})]})}),e.jsxs("tbody",{children:[B.map(E=>{const T=E.whatsapp_out||0,ee=E.whatsapp_sistema||0,H=(E.whatsapp_bot||0)+(E.whatsapp_humano||0);return e.jsxs("tr",{style:{borderBottom:"1px solid #f1f5f9"},children:[e.jsxs("td",{style:{padding:"0.75rem"},children:[e.jsx("div",{style:{fontWeight:600},children:E.nombre_cliente}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:E.telefono})]}),e.jsxs("td",{style:{padding:"0.75rem"},children:[e.jsx("div",{style:{fontWeight:600},children:T}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[ee>0&&e.jsxs("span",{children:["Sistema: ",ee]}),ee>0&&H>0&&e.jsx("span",{children:"  "}),H>0&&e.jsxs("span",{children:["Chat: ",H]}),ee===0&&H===0&&T>0&&e.jsxs("span",{children:["Otros: ",T]})]})]}),e.jsx("td",{style:{padding:"0.75rem"},children:E.email_out||0}),e.jsxs("td",{style:{padding:"0.75rem"},children:["$",(E.costo_whatsapp||0).toFixed(2)]}),e.jsxs("td",{style:{padding:"0.75rem"},children:["$",(E.costo_email||0).toFixed(2)]}),e.jsx("td",{style:{padding:"0.75rem"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>w(E.cliente_id,{bloquear_whatsapp:!E.bloquear_whatsapp}),style:{padding:"0.35rem 0.7rem",borderRadius:"6px",border:"1px solid #d1d5db",background:E.bloquear_whatsapp?"#ef4444":"#f3f4f6",color:E.bloquear_whatsapp?"white":"#374151",cursor:"pointer"},children:E.bloquear_whatsapp?"Desbloq. WhatsApp":"Bloq. WhatsApp"}),e.jsx("button",{type:"button",onClick:()=>w(E.cliente_id,{bloquear_email:!E.bloquear_email}),style:{padding:"0.35rem 0.7rem",borderRadius:"6px",border:"1px solid #d1d5db",background:E.bloquear_email?"#ef4444":"#f3f4f6",color:E.bloquear_email?"white":"#374151",cursor:"pointer"},children:E.bloquear_email?"Desbloq. Email":"Bloq. Email"})]})})]},E.cliente_id)}),B.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,style:{padding:"1rem",color:"#9ca3af"},children:"No hay clientes para mostrar."})})]})]})})]})]})},V5=()=>{const{toasts:r,removeToast:t,success:o,error:n}=_r(),[i,a]=c.useState(""),[l,u]=c.useState(!1),[s,d]=c.useState(!1),[f,x]=c.useState({nombre_plataforma:"",login_titulo:"",login_subtitulo:"",login_boton_texto:"",login_left_titulo:"",login_left_texto:"",login_left_items:"",login_left_imagen:"",login_acento_color:"",login_fondo_color:"",whatsapp_reengagement_template_id:"",contacto_nombre:"",contacto_email:"",contacto_telefono:"",contacto_whatsapp:"",establecimiento_direccion:"",establecimiento_horario:""}),[h,S]=c.useState(!0),[C,j]=c.useState([]),{nombrePlataforma:P,setNombrePlataforma:v}=Rs();c.useEffect(()=>{(async()=>{var k,U;try{S(!0);const[X,R]=await Promise.all([ia.getGeneral(),Un.getAll()]),w=(X==null?void 0:X.configuracion)||{};j((R==null?void 0:R.templates)||[]),x({nombre_plataforma:w.nombre_plataforma||P||"",login_titulo:w.login_titulo||"",login_subtitulo:w.login_subtitulo||"",login_boton_texto:w.login_boton_texto||"",login_left_titulo:w.login_left_titulo||"",login_left_texto:w.login_left_texto||"",login_left_items:w.login_left_items||"",login_left_imagen:w.login_left_imagen||"",login_acento_color:w.login_acento_color||"",login_fondo_color:w.login_fondo_color||"",whatsapp_reengagement_template_id:w.whatsapp_reengagement_template_id||"",contacto_nombre:w.contacto_nombre||"",contacto_email:w.contacto_email||"",contacto_telefono:w.contacto_telefono||"",contacto_whatsapp:w.contacto_whatsapp||"",establecimiento_direccion:w.establecimiento_direccion||"",establecimiento_horario:w.establecimiento_horario||""})}catch(X){const R=((U=(k=X.response)==null?void 0:k.data)==null?void 0:U.error)||"No se pudo cargar la configuracin general";n(R)}finally{S(!1)}})()},[P,n]);const m=async()=>{var k,U,X;if(i.trim().toUpperCase()!=="ELIMINAR"){n("Escribe ELIMINAR para confirmar.");return}try{u(!0);const R=await ia.limpiarDatosPrueba();o("Datos de prueba eliminados"),(k=R==null?void 0:R.errores)!=null&&k.length&&n("Algunas tablas no se pudieron limpiar."),a("")}catch(R){const w=((X=(U=R.response)==null?void 0:U.data)==null?void 0:X.error)||"No se pudo limpiar los datos";n(w)}finally{u(!1)}},y=async()=>{var k,U;if(!f.nombre_plataforma.trim()){n("Ingresa un nombre valido para la plataforma.");return}try{d(!0),await ia.updateGeneral({...f,nombre_plataforma:f.nombre_plataforma.trim()}),v(f.nombre_plataforma.trim()),o("Configuracin general actualizada")}catch(X){const R=((U=(k=X.response)==null?void 0:k.data)==null?void 0:U.error)||"No se pudo actualizar la configuracin";n(R)}finally{d(!1)}};return e.jsxs("div",{style:{padding:"1.5rem 2rem"},children:[e.jsx(Nr,{toasts:r,removeToast:t}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.6rem",marginBottom:"0.25rem"},children:"Limpieza de datos de prueba"}),e.jsx("p",{style:{color:"var(--gray-600)"},children:"Elimina eventos, pagos y notificaciones (email/WhatsApp). No borra configuraciones, usuarios ni roles."})]}),e.jsxs("div",{style:{maxWidth:"920px",background:"white",borderRadius:"12px",padding:"1.5rem",border:"1px solid #e5e7eb",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{marginBottom:"0.75rem",fontWeight:700},children:"Configuraciones generales"}),e.jsx("p",{style:{color:"#6b7280",fontSize:"0.9rem",marginBottom:"0.75rem"},children:"Personaliza el contenido y la esttica del login."}),h?e.jsx("div",{style:{color:"#6b7280"},children:"Cargando configuracin..."}):e.jsxs("div",{style:{display:"grid",gap:"0.75rem"},children:[e.jsx("input",{value:f.nombre_plataforma,onChange:k=>x(U=>({...U,nombre_plataforma:k.target.value})),placeholder:"Nombre de la plataforma",style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsx("input",{value:f.login_titulo,onChange:k=>x(U=>({...U,login_titulo:k.target.value})),placeholder:"Titulo del login",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{value:f.login_subtitulo,onChange:k=>x(U=>({...U,login_subtitulo:k.target.value})),placeholder:"Subtitulo del login",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsx("input",{value:f.login_boton_texto,onChange:k=>x(U=>({...U,login_boton_texto:k.target.value})),placeholder:"Texto del boton",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{value:f.login_left_titulo,onChange:k=>x(U=>({...U,login_left_titulo:k.target.value})),placeholder:"Titulo panel izquierdo",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsx("textarea",{value:f.login_left_texto,onChange:k=>x(U=>({...U,login_left_texto:k.target.value})),placeholder:"Texto principal del panel izquierdo",rows:2,style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("textarea",{value:f.login_left_items,onChange:k=>x(U=>({...U,login_left_items:k.target.value})),placeholder:"Items del panel izquierdo (uno por linea)",rows:4,style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{value:f.login_left_imagen,onChange:k=>x(U=>({...U,login_left_imagen:k.target.value})),placeholder:"URL de imagen del login",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsx("input",{value:f.login_acento_color,onChange:k=>x(U=>({...U,login_acento_color:k.target.value})),placeholder:"Color acento (hex)",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{value:f.login_fondo_color,onChange:k=>x(U=>({...U,login_fondo_color:k.target.value})),placeholder:"Color fondo izquierdo (hex)",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("select",{value:f.whatsapp_reengagement_template_id||"",onChange:k=>x(U=>({...U,whatsapp_reengagement_template_id:k.target.value||""})),style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"},children:[e.jsx("option",{value:"",children:"Plantilla de re-apertura 24h (opcional)"}),C.map(k=>e.jsxs("option",{value:k.id,children:[k.nombre," (",k.idioma,")"]},k.id))]}),e.jsx("div",{style:{marginTop:"0.5rem",fontWeight:600},children:"Contacto y establecimiento"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsx("input",{value:f.contacto_nombre,onChange:k=>x(U=>({...U,contacto_nombre:k.target.value})),placeholder:"Nombre de contacto",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{value:f.contacto_email,onChange:k=>x(U=>({...U,contacto_email:k.target.value})),placeholder:"Email de contacto",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsx("input",{value:f.contacto_telefono,onChange:k=>x(U=>({...U,contacto_telefono:k.target.value})),placeholder:"Telfono de contacto",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{value:f.contacto_whatsapp,onChange:k=>x(U=>({...U,contacto_whatsapp:k.target.value})),placeholder:"WhatsApp de contacto",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsx("input",{value:f.establecimiento_direccion,onChange:k=>x(U=>({...U,establecimiento_direccion:k.target.value})),placeholder:"Direccin del establecimiento",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{value:f.establecimiento_horario,onChange:k=>x(U=>({...U,establecimiento_horario:k.target.value})),placeholder:"Horario del establecimiento",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsx("div",{style:{marginTop:"0.9rem",display:"flex",gap:"0.75rem"},children:e.jsx("button",{type:"button",onClick:y,disabled:s,style:{padding:"0.6rem 1.2rem",borderRadius:"8px",border:"none",background:"#111827",color:"white",cursor:s?"not-allowed":"pointer"},children:s?"Guardando...":"Guardar configuracin"})})]}),e.jsx("div",{style:{maxWidth:"920px",background:"white",borderRadius:"12px",padding:"1.5rem",border:"1px solid #e5e7eb",marginBottom:"1.5rem"},children:e.jsx(Bg,{embedded:!0})}),e.jsxs("div",{style:{maxWidth:"720px",background:"white",borderRadius:"12px",padding:"1.5rem",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"10px",padding:"1rem",marginBottom:"1rem"},children:[e.jsx("div",{style:{fontWeight:700,color:"#991b1b",marginBottom:"0.25rem"},children:"Accin irreversible"}),e.jsx("div",{style:{color:"#7f1d1d",fontSize:"0.9rem"},children:"Esta accin elimina datos operativos (eventos, pagos, notificaciones y chats)."})]}),e.jsxs("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.35rem",color:"#374151"},children:["Escribe ",e.jsx("strong",{children:"ELIMINAR"})," para confirmar"]}),e.jsx("input",{value:i,onChange:k=>a(k.target.value),style:{width:"100%",padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("div",{style:{marginTop:"1rem",display:"flex",gap:"0.75rem"},children:e.jsx("button",{type:"button",onClick:m,disabled:l,style:{padding:"0.7rem 1.2rem",borderRadius:"8px",border:"none",background:"#dc2626",color:"white",cursor:l?"not-allowed":"pointer"},children:l?"Eliminando...":"Eliminar datos de prueba"})})]})]})},Np={nombre:"",idioma:"es",categoria:"",descripcion:"",parametros:0,header_parametros:0,body_parametros:0,ejemplo:"",header_ejemplo:"",body_ejemplo:"",activo:!0},Y5=()=>{const{toasts:r,removeToast:t,success:o,error:n}=_r(),[i,a]=c.useState([]),[l,u]=c.useState(!0),[s,d]=c.useState(Np),[f,x]=c.useState(null),[h,S]=c.useState([]),[C,j]=c.useState({template_id:"",cliente_id:"",telefono:"",parametros:[],header_parametros:[],body_parametros:[]}),[P,v]=c.useState(0),[m,y]=c.useState(0),[k,U]=c.useState(0),[X,R]=c.useState(!1),w=async()=>{var O,re;try{u(!0);const[W,Y]=await Promise.all([Un.getAll(),so.getAll()]);a(W.templates||[]),S(Y.clientes||[])}catch(W){const Y=((re=(O=W.response)==null?void 0:O.data)==null?void 0:re.error)||"No se pudo cargar las plantillas";n(Y)}finally{u(!1)}};c.useEffect(()=>{w()},[]);const B=()=>{d(Np),x(null)},q=async()=>{var O,re;if(!s.nombre.trim()){n("El nombre de la plantilla es requerido");return}try{const W={...s,parametros:Number(s.parametros||0),header_parametros:Number(s.header_parametros||0),body_parametros:Number(s.body_parametros||0)};f?(await Un.update(f,W),o("Plantilla actualizada")):(await Un.create(W),o("Plantilla creada")),await w(),B()}catch(W){const Y=((re=(O=W.response)==null?void 0:O.data)==null?void 0:re.error)||"No se pudo guardar la plantilla";n(Y)}},E=O=>{x(O.id),d({nombre:O.nombre||"",idioma:O.idioma||"es",categoria:O.categoria||"",descripcion:O.descripcion||"",parametros:O.parametros||0,header_parametros:O.header_parametros||0,body_parametros:O.body_parametros||0,ejemplo:O.ejemplo||"",header_ejemplo:O.header_ejemplo||"",body_ejemplo:O.body_ejemplo||"",activo:!!O.activo})},T=async O=>{var re,W;try{await Un.remove(O),o("Plantilla eliminada"),await w()}catch(Y){const D=((W=(re=Y.response)==null?void 0:re.data)==null?void 0:W.error)||"No se pudo eliminar la plantilla";n(D)}},ee=c.useMemo(()=>i.filter(O=>O.activo),[i]),H=c.useMemo(()=>ee.find(O=>String(O.id)===String(C.template_id)),[ee,C.template_id]);c.useEffect(()=>{const O=Number((H==null?void 0:H.header_parametros)||0),re=Number((H==null?void 0:H.body_parametros)||0),W=Number((H==null?void 0:H.parametros)||0)||O+re;v(W),y(O),U(re),j(W===0?Y=>({...Y,parametros:[],header_parametros:[],body_parametros:[]}):Y=>({...Y,parametros:Array.from({length:W},(D,oe)=>Y.parametros[oe]||""),header_parametros:Array.from({length:O},(D,oe)=>Y.header_parametros[oe]||""),body_parametros:Array.from({length:re},(D,oe)=>Y.body_parametros[oe]||"")}))},[H]);const G=async()=>{var O,re,W,Y;if(!C.template_id){n("Selecciona una plantilla");return}if(!C.cliente_id&&!C.telefono.trim()){n("Selecciona un cliente o ingresa un telefono");return}const D=(C.parametros||[]).map(V=>String(V||"").trim()),oe=(C.header_parametros||[]).map(V=>String(V||"").trim()),K=(C.body_parametros||[]).map(V=>String(V||"").trim());if(m&&oe.some(V=>!V)){n("Completa todos los parametros del header.");return}if(k&&K.some(V=>!V)){n("Completa todos los parametros del body.");return}if(m&&oe.length!==m){n(`Debes enviar ${m} parametro(s) en el header.`);return}if(k&&K.length!==k){n(`Debes enviar ${k} parametro(s) en el body.`);return}if(!m&&!k&&P&&D.length!==P){n(`Debes enviar ${P} parametro(s).`);return}try{R(!0),await Un.send({template_id:Number(C.template_id),cliente_id:C.cliente_id?Number(C.cliente_id):null,telefono:C.telefono.trim(),parametros:D,header_parametros:oe,body_parametros:K}),o("Plantilla enviada"),j({template_id:"",cliente_id:"",telefono:"",parametros:[],header_parametros:[],body_parametros:[]}),await w()}catch(V){const F=((re=(O=V.response)==null?void 0:O.data)==null?void 0:re.error)||((Y=(W=V.response)==null?void 0:W.data)==null?void 0:Y.detalle)||"No se pudo enviar la plantilla";n(F)}finally{R(!1)}};return e.jsxs("div",{style:{padding:"1.5rem 2rem"},children:[e.jsx(Nr,{toasts:r,removeToast:t}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.6rem",marginBottom:"0.25rem"},children:"Plantillas WhatsApp"}),e.jsx("p",{style:{color:"var(--gray-600)"},children:"Enva plantillas aprobadas para abrir conversaciones fuera de la ventana de 24h."})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.1fr 0.9fr",gap:"1.5rem"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.25rem"},children:[e.jsx("div",{style:{fontWeight:700,marginBottom:"0.75rem"},children:"Plantillas registradas"}),l?e.jsx("div",{style:{color:"#6b7280"},children:"Cargando..."}):i.length===0?e.jsx("div",{style:{color:"#6b7280"},children:"No hay plantillas registradas."}):e.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:i.map(O=>e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"10px",padding:"0.85rem",display:"flex",justifyContent:"space-between",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:600},children:[O.nombre," ",e.jsxs("span",{style:{color:"#6b7280",fontSize:"0.85rem"},children:["(",O.idioma,")"]})]}),e.jsx("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:O.descripcion||"Sin descripcion"}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"#9ca3af",marginTop:"0.25rem"},children:["Parametros: ",O.parametros||0,"  ",O.activo?"Activa":"Inactiva"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("button",{type:"button",onClick:()=>E(O),style:{padding:"0.4rem 0.8rem",borderRadius:"8px",border:"1px solid #d1d5db",background:"#f3f4f6",cursor:"pointer"},children:"Editar"}),e.jsx("button",{type:"button",onClick:()=>T(O.id),style:{padding:"0.4rem 0.8rem",borderRadius:"8px",border:"1px solid #fecaca",background:"#fee2e2",color:"#991b1b",cursor:"pointer"},children:"Eliminar"})]})]},O.id))})]}),e.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.25rem"},children:[e.jsx("div",{style:{fontWeight:700,marginBottom:"0.75rem"},children:f?"Editar plantilla":"Nueva plantilla"}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem"},children:[e.jsx("input",{value:s.nombre,onChange:O=>d(re=>({...re,nombre:O.target.value})),placeholder:"Nombre exacto (Meta)",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsx("input",{value:s.idioma,onChange:O=>d(re=>({...re,idioma:O.target.value})),placeholder:"Idioma (ej: es)",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{value:s.categoria,onChange:O=>d(re=>({...re,categoria:O.target.value})),placeholder:"Categoria",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsx("input",{value:s.descripcion,onChange:O=>d(re=>({...re,descripcion:O.target.value})),placeholder:"Descripcion",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsx("input",{type:"number",min:"0",value:s.parametros,onChange:O=>d(re=>({...re,parametros:O.target.value})),placeholder:"Cantidad parametros (legacy)",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("input",{type:"number",min:"0",value:s.header_parametros,onChange:O=>d(re=>({...re,header_parametros:O.target.value})),placeholder:"Parametros header",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[e.jsx("input",{type:"number",min:"0",value:s.body_parametros,onChange:O=>d(re=>({...re,body_parametros:O.target.value})),placeholder:"Parametros body",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsxs("select",{value:s.activo?"1":"0",onChange:O=>d(re=>({...re,activo:O.target.value==="1"})),style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"},children:[e.jsx("option",{value:"1",children:"Activa"}),e.jsx("option",{value:"0",children:"Inactiva"})]})]}),e.jsx("textarea",{value:s.ejemplo,onChange:O=>d(re=>({...re,ejemplo:O.target.value})),placeholder:"Ejemplo legacy (opcional)",rows:2,style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("textarea",{value:s.header_ejemplo,onChange:O=>d(re=>({...re,header_ejemplo:O.target.value})),placeholder:"Ejemplo header (opcional)",rows:2,style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),e.jsx("textarea",{value:s.body_ejemplo,onChange:O=>d(re=>({...re,body_ejemplo:O.target.value})),placeholder:"Ejemplo body (opcional)",rows:2,style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}})]}),e.jsxs("div",{style:{marginTop:"0.9rem",display:"flex",gap:"0.75rem"},children:[e.jsx("button",{type:"button",onClick:q,style:{padding:"0.6rem 1.1rem",borderRadius:"8px",border:"none",background:"#111827",color:"white",cursor:"pointer"},children:"Guardar"}),f&&e.jsx("button",{type:"button",onClick:B,style:{padding:"0.6rem 1.1rem",borderRadius:"8px",border:"1px solid #d1d5db",background:"#f3f4f6",cursor:"pointer"},children:"Cancelar"})]})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.25rem"},children:[e.jsx("div",{style:{fontWeight:700,marginBottom:"0.75rem"},children:"Enviar plantilla"}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem"},children:[e.jsxs("select",{value:C.template_id,onChange:O=>j(re=>({...re,template_id:O.target.value})),style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"},children:[e.jsx("option",{value:"",children:"Selecciona una plantilla"}),ee.map(O=>e.jsxs("option",{value:O.id,children:[O.nombre," (",O.idioma,")"]},O.id))]}),H?e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:["Parametros requeridos: ",P,H.ejemplo?`  Ejemplo: ${H.ejemplo}`:""]}):null,e.jsxs("select",{value:C.cliente_id,onChange:O=>j(re=>({...re,cliente_id:O.target.value})),style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"},children:[e.jsx("option",{value:"",children:"Selecciona un cliente (opcional)"}),h.map(O=>e.jsxs("option",{value:O.id,children:[O.nombre_completo," ",O.telefono?` ${O.telefono}`:""]},O.id))]}),e.jsx("input",{value:C.telefono,onChange:O=>j(re=>({...re,telefono:O.target.value})),placeholder:"Telefono directo (si no eliges cliente)",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}}),m>0||k>0?e.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[m>0&&e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Header"}),Array.from({length:m}).map((O,re)=>{const W=((H==null?void 0:H.header_ejemplo)||"").split(",").map(Y=>Y.trim()).filter(Boolean)[re];return e.jsx("input",{value:C.header_parametros[re]||"",onChange:Y=>{const D=Y.target.value;j(oe=>{const K=[...oe.header_parametros||[]];return K[re]=D,{...oe,header_parametros:K}})},placeholder:W?`Header ${re+1} (ej: ${W})`:`Header ${re+1}`,style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}},`header-param-${re}`)}),k>0&&e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280",marginTop:"0.5rem"},children:"Body"}),Array.from({length:k}).map((O,re)=>{const W=((H==null?void 0:H.body_ejemplo)||"").split(",").map(Y=>Y.trim()).filter(Boolean)[re];return e.jsx("input",{value:C.body_parametros[re]||"",onChange:Y=>{const D=Y.target.value;j(oe=>{const K=[...oe.body_parametros||[]];return K[re]=D,{...oe,body_parametros:K}})},placeholder:W?`Body ${re+1} (ej: ${W})`:`Body ${re+1}`,style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}},`body-param-${re}`)})]}):P>0?e.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:Array.from({length:P}).map((O,re)=>{const W=((H==null?void 0:H.ejemplo)||"").split(",").map(Y=>Y.trim()).filter(Boolean)[re];return e.jsx("input",{value:C.parametros[re]||"",onChange:Y=>{const D=Y.target.value;j(oe=>{const K=[...oe.parametros||[]];return K[re]=D,{...oe,parametros:K}})},placeholder:W?`Parametro ${re+1} (ej: ${W})`:`Parametro ${re+1}`,style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db"}},`legacy-param-${re}`)})}):e.jsx("input",{value:"",disabled:!0,placeholder:"Esta plantilla no requiere parametros",style:{padding:"0.6rem",borderRadius:"8px",border:"1px solid #d1d5db",background:"#f3f4f6"}})]}),e.jsx("div",{style:{marginTop:"0.9rem"},children:e.jsx("button",{type:"button",onClick:G,disabled:X,style:{padding:"0.6rem 1.1rem",borderRadius:"8px",border:"none",background:"#16a34a",color:"white",cursor:X?"not-allowed":"pointer"},children:X?"Enviando...":"Enviar plantilla"})})]})]})]})]})},K5=[{key:"categorias",label:"Categoras",descripcion:"Carga masiva de categoras (crea o actualiza por ID o nombre)."},{key:"productos",label:"Productos",descripcion:"Carga masiva de productos. Si no hay ID, se busca por nombre y categora."},{key:"salones",label:"Salones",descripcion:"Carga masiva de salones (crea o actualiza por ID o nombre)."},{key:"planes",label:"Planes",descripcion:"Carga masiva de planes (crea o actualiza por ID o nombre)."}],Z5=()=>{const{toasts:r,removeToast:t,success:o,error:n}=_r(),[i,a]=c.useState({}),[l,u]=c.useState({}),[s,d]=c.useState({}),f=(S,C)=>{a(j=>({...j,[S]:C}))},x=async S=>{var C,j;try{const P=await wp.downloadTemplate(S),v=window.URL.createObjectURL(new Blob([P])),m=document.createElement("a");m.href=v,m.setAttribute("download",`plantilla_${S}.xlsx`),document.body.appendChild(m),m.click(),m.remove(),window.URL.revokeObjectURL(v)}catch(P){const v=((j=(C=P.response)==null?void 0:C.data)==null?void 0:j.error)||"No se pudo descargar la plantilla";n(v)}},h=async S=>{var C,j;const P=i[S];if(!P){n("Selecciona un archivo antes de subir.");return}try{d(m=>({...m,[S]:!0}));const v=await wp.upload(S,P);u(m=>({...m,[S]:v})),o(`Carga de ${S} completada.`)}catch(v){const m=((j=(C=v.response)==null?void 0:C.data)==null?void 0:j.error)||"No se pudo procesar el archivo";n(m)}finally{d(v=>({...v,[S]:!1}))}};return e.jsxs("div",{children:[e.jsx(Nr,{toasts:r,removeToast:t}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("h1",{style:{fontSize:"1.8rem",fontWeight:"700",marginBottom:"0.4rem"},children:"Carga masiva"}),e.jsx("p",{style:{color:"#6b7280"},children:"Descarga la plantilla, llena los datos y sube el archivo para crear o actualizar registros existentes."})]}),e.jsx("div",{style:{display:"grid",gap:"1.5rem"},children:K5.map(S=>{const C=l[S.key];return e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",border:"1px solid #e5e7eb",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.08)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[e.jsx(jt,{size:20,color:"#6366f1"}),e.jsx("h2",{style:{margin:0,fontSize:"1.1rem",fontWeight:"700"},children:S.label})]}),e.jsx("p",{style:{margin:"0 0 1rem 0",color:"#6b7280"},children:S.descripcion}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem",alignItems:"center"},children:[e.jsxs("button",{type:"button",onClick:()=>x(S.key),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.9rem",borderRadius:"0.5rem",border:"1px solid #e5e7eb",backgroundColor:"#f9fafb",cursor:"pointer",fontWeight:"600"},children:[e.jsx(no,{size:16}),"Descargar plantilla"]}),e.jsx("input",{type:"file",accept:".xlsx",onChange:j=>f(S.key,j.target.files[0])}),e.jsxs("button",{type:"button",onClick:()=>h(S.key),disabled:s[S.key],style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"none",backgroundColor:s[S.key]?"#9ca3af":"#10b981",color:"white",cursor:s[S.key]?"not-allowed":"pointer",fontWeight:"600"},children:[e.jsx(Tg,{size:16}),s[S.key]?"Cargando...":"Subir archivo"]})]}),C&&e.jsxs("div",{style:{marginTop:"1rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",padding:"1rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:C.creados})," creados"]}),e.jsxs("div",{children:[e.jsx("strong",{children:C.actualizados})," actualizados"]}),e.jsxs("div",{children:[e.jsx("strong",{children:C.omitidos})," omitidos"]}),e.jsxs("div",{children:[e.jsx("strong",{children:(C.errores||[]).length})," con error"]})]}),(C.errores||[]).length>0&&e.jsxs("div",{style:{marginTop:"0.75rem",color:"#b91c1c",fontSize:"0.85rem"},children:[C.errores.slice(0,5).map((j,P)=>e.jsxs("div",{children:["Fila ",j.fila,": ",j.error]},`${S.key}-${P}`)),C.errores.length>5&&e.jsx("div",{children:"Hay ms errores, revisa el archivo para corregirlos."})]})]})]},S.key)})})]})},J5=({children:r})=>{const{isAuthenticated:t,loading:o}=at();return o?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx("div",{children:"Cargando..."})}):t?r:e.jsx(js,{to:"/login"})},Q5=({children:r})=>{const{isAuthenticated:t,loading:o}=at();return o?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx("div",{children:"Cargando..."})}):t?e.jsx(js,{to:"/inicio"}):r};function X5(){return e.jsxs(qy,{children:[e.jsx(pr,{path:"/",element:e.jsx(Wp,{})}),e.jsx(pr,{path:"/login",element:e.jsx(Q5,{children:e.jsx(b5,{})})}),e.jsxs(pr,{element:e.jsx(J5,{children:e.jsx(w5,{})}),children:[e.jsx(pr,{path:"dashboard",element:e.jsx(js,{to:"/inicio",replace:!0})}),e.jsx(pr,{path:"inicio",element:e.jsx(Sr,{allowedRoles:[N.ADMIN,N.MANAGER,N.COORDINATOR,N.CLIENT],children:e.jsx(Wp,{})})}),e.jsx(pr,{path:"calendario",element:e.jsx(Sr,{moduleKey:Oe.CALENDARIO,allowedRoles:[N.ADMIN,N.MANAGER,N.COORDINATOR],children:e.jsx(z5,{})})}),e.jsx(pr,{path:"mi-evento",element:e.jsx(Sr,{moduleKey:Oe.PORTAL_CLIENTE,allowedRoles:[N.CLIENT],children:e.jsx(R5,{})})}),e.jsx(pr,{path:"perfil",element:e.jsx(Sr,{moduleKey:Oe.PERFIL,allowedRoles:[N.ADMIN,N.MANAGER,N.COORDINATOR,N.CLIENT],children:e.jsx(E5,{})})}),e.jsx(pr,{path:"eventos",element:e.jsx(Sr,{moduleKey:Oe.EVENTOS,allowedRoles:[N.ADMIN,N.MANAGER,N.COORDINATOR],children:e.jsx(S5,{})})}),e.jsx(pr,{path:"eventos/nuevo",element:e.jsx(Sr,{moduleKey:Oe.EVENTOS,allowedRoles:[N.ADMIN,N.MANAGER,N.COORDINATOR],children:e.jsx(Ap,{})})}),e.jsx(pr,{path:"eventos/editar/:id",element:e.jsx(Sr,{moduleKey:Oe.EVENTOS,allowedRoles:[N.ADMIN,N.MANAGER,N.COORDINATOR],children:e.jsx(Ap,{})})}),e.jsx(pr,{path:"eventos/:id",element:e.jsx(Sr,{allowedRoles:[N.ADMIN,N.MANAGER,N.COORDINATOR,N.CLIENT],children:e.jsx(_5,{})})}),e.jsx(pr,{path:"clientes",element:e.jsx(Sr,{moduleKey:Oe.CLIENTES,allowedRoles:[N.ADMIN,N.MANAGER,N.COORDINATOR],children:e.jsx(W5,{})})}),e.jsx(pr,{path:"productos",element:e.jsx(Sr,{moduleKey:Oe.PRODUCTOS,allowedRoles:[N.ADMIN,N.MANAGER,N.COORDINATOR],children:e.jsx(I5,{})})}),e.jsx(pr,{path:"categorias",element:e.jsx(Sr,{moduleKey:Oe.CATEGORIAS,allowedRoles:[N.ADMIN,N.MANAGER,N.COORDINATOR],children:e.jsx(T5,{})})}),e.jsx(pr,{path:"planes",element:e.jsx(Sr,{moduleKey:Oe.PLANES,allowedRoles:[N.ADMIN,N.MANAGER,N.COORDINATOR],children:e.jsx(N5,{})})}),e.jsx(pr,{path:"pagos",element:e.jsx(Sr,{moduleKey:Oe.PAGOS,allowedRoles:[N.ADMIN,N.MANAGER,N.COORDINATOR],children:e.jsx(B5,{})})}),e.jsx(pr,{path:"pagos/evento/:id",element:e.jsx(Sr,{moduleKey:Oe.PAGOS,allowedRoles:[N.ADMIN,N.MANAGER,N.COORDINATOR],children:e.jsx(P5,{})})}),e.jsx(pr,{path:"cuentas",element:e.jsx(Sr,{moduleKey:Oe.CUENTAS,allowedRoles:[N.ADMIN,N.MANAGER],children:e.jsx(D5,{})})}),e.jsx(pr,{path:"inventario",element:e.jsx(Sr,{moduleKey:Oe.INVENTARIO,allowedRoles:[N.ADMIN,N.MANAGER,N.COORDINATOR],children:e.jsx(M5,{})})}),e.jsx(pr,{path:"salones",element:e.jsx(Sr,{moduleKey:Oe.SALONES,allowedRoles:[N.ADMIN,N.MANAGER,N.COORDINATOR],children:e.jsx(O5,{})})}),e.jsx(pr,{path:"reportes",element:e.jsx(Sr,{moduleKey:Oe.REPORTES,allowedRoles:[N.ADMIN,N.MANAGER,N.COORDINATOR],children:e.jsx(L5,{})})}),e.jsx(pr,{path:"notificaciones-nativas",element:e.jsx(Sr,{moduleKey:Oe.NOTIFICACIONES_NATIVAS,allowedRoles:[N.ADMIN,N.MANAGER],children:e.jsx(U5,{})})}),e.jsx(pr,{path:"notificaciones-nativas/:tipo",element:e.jsx(Sr,{moduleKey:Oe.NOTIFICACIONES_NATIVAS,allowedRoles:[N.ADMIN,N.MANAGER],children:e.jsx(G5,{})})}),e.jsx(pr,{path:"configuraciones/integraciones-whatsapp",element:e.jsx(Sr,{moduleKey:Oe.INTEGRACIONES,allowedRoles:[N.ADMIN,N.MANAGER],children:e.jsx(Bg,{})})}),e.jsx(pr,{path:"configuraciones/whatsapp-chat",element:e.jsx(Sr,{moduleKey:Oe.WHATSAPP_CHAT,allowedRoles:[N.ADMIN,N.MANAGER],children:e.jsx(H5,{})})}),e.jsx(pr,{path:"configuraciones/whatsapp-panel",element:e.jsx(Sr,{moduleKey:Oe.WHATSAPP_METRICAS,allowedRoles:[N.ADMIN,N.MANAGER],children:e.jsx(q5,{})})}),e.jsx(pr,{path:"configuraciones/whatsapp-plantillas",element:e.jsx(Sr,{moduleKey:Oe.WHATSAPP_TEMPLATES,allowedRoles:[N.ADMIN,N.MANAGER],children:e.jsx(Y5,{})})}),e.jsx(pr,{path:"configuraciones/carga-masiva",element:e.jsx(Sr,{moduleKey:Oe.CARGA_MASIVA,allowedRoles:[N.ADMIN,N.MANAGER],children:e.jsx(Z5,{})})}),e.jsx(pr,{path:"configuraciones/limpieza-datos",element:e.jsx(Sr,{moduleKey:Oe.CONFIG_DATOS,allowedRoles:[N.ADMIN,N.MANAGER],children:e.jsx(V5,{})})}),e.jsx(pr,{path:"usuarios",element:e.jsx(Sr,{moduleKey:Oe.USUARIOS,allowedRoles:[N.ADMIN,N.MANAGER],children:e.jsx(F5,{})})}),e.jsx(pr,{path:"permisos",element:e.jsx(Sr,{moduleKey:Oe.PERMISOS,allowedRoles:[N.ADMIN],children:e.jsx($5,{})})})]})]})}function ej(){return e.jsx(Bv,{children:e.jsx(Xy,{children:e.jsx(X5,{})})})}fd.createRoot(document.getElementById("root")).render(e.jsx(_l.StrictMode,{children:e.jsx(ej,{})}));
